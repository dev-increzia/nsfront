{"version":3,"sources":["../../src/pages/choice/choice.module.ts","../../src/pages/choice/choice.ts"],"names":[],"mappings":"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","file":"19.js","sourcesContent":["import {NgModule} from \"@angular/core\";\r\nimport {IonicPageModule} from \"ionic-angular\";\r\nimport {ChoicePage} from \"./choice\";\r\n\r\n@NgModule({\r\n    declarations: [\r\n        ChoicePage,\r\n    ],\r\n    imports: [\r\n        IonicPageModule.forChild(ChoicePage),\r\n    ],\r\n})\r\nexport class ChoicePageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/choice/choice.module.ts","import {Component} from \"@angular/core\";\r\nimport {\r\n    AlertController,\r\n    Events,\r\n    IonicPage,\r\n    ModalController,\r\n    NavController,\r\n    NavParams,\r\n    ViewController\r\n} from \"ionic-angular\";\r\nimport \"rxjs/add/operator/map\";\r\nimport {UserProvider} from \"../../providers/user/user\";\r\nimport {GlobalsProvider} from \"../../providers/globals/globals\";\r\n\r\n/**\r\n * Generated class for the ChoicePage page.\r\n *\r\n * See https://ionicframework.com/docs/components/#navigation for more info on\r\n * Ionic pages and navigation.\r\n */\r\n\r\n@IonicPage()\r\n@Component({\r\n    selector: 'page-choice',\r\n    templateUrl: 'choice.html',\r\n})\r\nexport class ChoicePage {\r\n    public currentUser: any;\r\n    public associations:any;\r\n    public merchants:any;\r\n    public communities:any;\r\n\r\n\r\n    constructor(public navCtrl: NavController,\r\n                public navParams: NavParams,\r\n                public userService: UserProvider,\r\n                private view: ViewController,\r\n                public appEvents: Events,\r\n                private modal: ModalController,\r\n                public appGlobals: GlobalsProvider,\r\n                public alertCtrl: AlertController) {\r\n        this.appEvents.publish('admin:associations');\r\n        this.appEvents.publish('admin:merchants');\r\n        this.appEvents.publish('member:associations');\r\n        this.appEvents.publish('member:merchants');\r\n        this.currentUser = JSON.parse(localStorage.getItem(\"currentUser\"));\r\n    }\r\n\r\n    Close() {\r\n        this.view.dismiss();\r\n    }\r\n\r\n    popPublish(account, accountType) {\r\n        let associations = this.appGlobals.adminAssociations;\r\n        let merchants = this.appGlobals.adminMerchants;\r\n        this.merchants = [];\r\n        this.associations = [];\r\n        for (let key in associations){\r\n            if (associations[key].moderate == 'accepted') {\r\n                this.associations.push(associations[key]);\r\n            }\r\n        }\r\n        for (let key in merchants){\r\n            if (merchants[key].moderate == 'accepted') {\r\n                this.merchants.push(merchants[key]);\r\n            }\r\n        }\r\n        this.communities = [];\r\n        var allCommunities = JSON.parse(localStorage.getItem(\"allCommunities\"));\r\n        for (let community of allCommunities){\r\n            if (community[\"isAdminPublish\"] && (community['activate_survey'] || community['activate_articles'] )){\r\n                this.communities.push({\r\n                    categories: community.categories,\r\n                    follow: community.follow,\r\n                    id: community.id,\r\n                    img_url: community.img_url,\r\n                    isAdminPublish: community.isAdminPublish,\r\n                    isPrivate: community.isPrivate,\r\n                    name: community.name,\r\n                    survey:community.activate_survey,\r\n                    article:community.activate_articles});\r\n            }\r\n        }\r\n        if(this.associations.length == 0 && account == 'association'){\r\n            const myModal2 = this.modal.create('PopupPage', {\"message\": \"<p> Vous n'avez pas de Groupe / Association ! </p>\"}, {cssClass: 'message-modal'});\r\n            myModal2.onDidDismiss(() => {\r\n            });\r\n            myModal2.present();\r\n\r\n        }else if(this.merchants.length == 0 && account == 'merchant'){\r\n            const myModal2 = this.modal.create('PopupPage', {\"message\": \"<p>Vous n'avez pas de Commerce / Partenaire </p>\"}, {cssClass: 'message-modal'});\r\n            myModal2.onDidDismiss(() => {\r\n            });\r\n            myModal2.present();\r\n\r\n        }\r\n        else if(this.communities.length == 0 && account == 'community'){\r\n            const myModal2 = this.modal.create('PopupPage', {\"message\": \"<p>Vous n'avez pas de <br> communaut√© ! </p>\"}, {cssClass: 'message-modal'});\r\n            myModal2.onDidDismiss(() => {\r\n            });\r\n            myModal2.present();\r\n\r\n        }else if (account == 'merchant' || account == 'association' || account == 'community' || accountType == 'citoyen' || accountType == 'cityhall' || accountType == 'project' || accountType == 'canteen') {\r\n            const myModal2 = this.modal.create('PublishPage', {\r\n                \"account\": account,\r\n                \"accountType\": accountType\r\n            }, {cssClass: 'style-modal publish-modal'});\r\n            myModal2.onDidDismiss(data => {\r\n                if (data) {\r\n                    this.Close();\r\n                }\r\n            });\r\n            myModal2.present();\r\n        } else {\r\n            let errorAlert = this.alertCtrl.create({\r\n                subTitle: 'Votre compte est en attente de validation',\r\n                buttons: [\r\n                    {\r\n                        text: 'Fermer',\r\n                        role: 'cancel',\r\n                        handler: () => {\r\n                        }\r\n                    }\r\n                ]\r\n            });\r\n            errorAlert.present();\r\n        }\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/choice/choice.ts"],"sourceRoot":""}