webpackJsonp([22],{

/***/ 1000:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return nl2br; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};

/**
 * Generated class for the nl2br pipe.
 *
 * See https://angular.io/docs/ts/latest/guide/pipes.html for more info on
 * Angular Pipes.
 */
var nl2br = /** @class */ (function () {
    function nl2br() {
    }
    nl2br.prototype.transform = function (value) {
        return value.replace(/(?:\r\n|\r|\n)/g, '<br />');
    };
    nl2br = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Pipe"])({
            name: 'nl2br',
        })
    ], nl2br);
    return nl2br;
}());

//# sourceMappingURL=nl2br.js.map

/***/ }),

/***/ 1001:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return TruncateModule; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__truncate__ = __webpack_require__(491);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};


var TruncateModule = /** @class */ (function () {
    function TruncateModule() {
    }
    TruncateModule = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["NgModule"])({
            declarations: [
                __WEBPACK_IMPORTED_MODULE_1__truncate__["a" /* truncate */],
            ],
            imports: [],
            exports: [
                __WEBPACK_IMPORTED_MODULE_1__truncate__["a" /* truncate */]
            ]
        })
    ], TruncateModule);
    return TruncateModule;
}());

//# sourceMappingURL=truncate.module.js.map

/***/ }),

/***/ 1002:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CapitalizeModule; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__capitalize__ = __webpack_require__(1003);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};


var CapitalizeModule = /** @class */ (function () {
    function CapitalizeModule() {
    }
    CapitalizeModule = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["NgModule"])({
            declarations: [
                __WEBPACK_IMPORTED_MODULE_1__capitalize__["a" /* Capitalize */],
            ],
            imports: [],
            exports: [
                __WEBPACK_IMPORTED_MODULE_1__capitalize__["a" /* Capitalize */]
            ]
        })
    ], CapitalizeModule);
    return CapitalizeModule;
}());

//# sourceMappingURL=capitalize.module.js.map

/***/ }),

/***/ 1003:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return Capitalize; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};

/**
 * Generated class for the capitalize pipe.
 *
 * See https://angular.io/docs/ts/latest/guide/pipes.html for more info on
 * Angular Pipes.
 */
var Capitalize = /** @class */ (function () {
    function Capitalize() {
    }
    Capitalize.prototype.transform = function (value) {
        if (value) {
            return value.charAt(0).toUpperCase() + value.slice(1);
        }
        return value;
    };
    Capitalize = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Pipe"])({
            name: 'capitalize',
        })
    ], Capitalize);
    return Capitalize;
}());

//# sourceMappingURL=capitalize.js.map

/***/ }),

/***/ 105:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return GoodPlanDetailsPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_globals_globals__ = __webpack_require__(8);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__ionic_native_google_analytics__ = __webpack_require__(58);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__ionic_native_calendar__ = __webpack_require__(54);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__providers_comment_comment__ = __webpack_require__(22);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__ionic_native_camera__ = __webpack_require__(29);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__ionic_native_social_sharing__ = __webpack_require__(46);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__news_news__ = __webpack_require__(35);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_moment__ = __webpack_require__(1);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_9_moment__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__providers_goodplanrest_goodplanrest__ = __webpack_require__(72);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__providers_cache_cache__ = __webpack_require__(47);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__ionic_native_file__ = __webpack_require__(71);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__ionic_native_in_app_browser__ = __webpack_require__(70);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__ionic_native_file_chooser__ = __webpack_require__(141);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__ionic_native_file_path__ = __webpack_require__(142);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__ionic_native_downloader__ = __webpack_require__(48);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17__providers_files_files__ = __webpack_require__(108);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



















/**
 * Generated class for the GoodPlanDetailsPage page.
 *
 * See http://ionicframework.com/docs/components/#navigation for more info
 * on Ionic pages and navigation.
 */
var GoodPlanDetailsPage = /** @class */ (function () {
    function GoodPlanDetailsPage(navCtrl, navParams, appGlobals, loader, myAlert, appEvents, ga, calendarPlugin, myModal, goodplanService, commentService, camera, actionSheetCtrl, toast, platform, socialsharing, cacheService, file, inAppBrowser, fileChooser, filepath, downloader, filesProvider) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.appGlobals = appGlobals;
        this.loader = loader;
        this.myAlert = myAlert;
        this.appEvents = appEvents;
        this.ga = ga;
        this.calendarPlugin = calendarPlugin;
        this.myModal = myModal;
        this.goodplanService = goodplanService;
        this.commentService = commentService;
        this.camera = camera;
        this.actionSheetCtrl = actionSheetCtrl;
        this.toast = toast;
        this.platform = platform;
        this.socialsharing = socialsharing;
        this.cacheService = cacheService;
        this.file = file;
        this.inAppBrowser = inAppBrowser;
        this.fileChooser = fileChooser;
        this.filepath = filepath;
        this.downloader = downloader;
        this.filesProvider = filesProvider;
        this.commentsItems = [];
        this.page = 0;
        this.showComments = false;
        this.showParticipants = false;
        this.withComments = false;
        this.toggled = false;
        this.toggledReply = false;
        this.comment = {
            content: '',
            photo: null,
            document: null
        };
        this.reply = {
            comment: null,
            content: '',
            photo: null,
            document: null
        };
        this.showReply = false;
        this.numberComments = 0;
        this.restNumbreComment = 0;
        this.restNumbreReplie = 0;
        this.commentNumber = 0;
        this.id = this.navParams.get('id');
        this.appGlobals.onEventDetails = true;
        this.appGlobals.currentPageTitle = this.navParams.get('title');
        this.withComments = this.navParams.get('withComments');
        this.currentUser = JSON.parse(localStorage.getItem("currentUser"));
        this.showPush = navParams.get('pushNotification');
    }
    GoodPlanDetailsPage.prototype.ionViewWillEnter = function () {
        this.appGlobals.showFooter = false;
        this.appGlobals.showHeader = false;
        this.appEvents.publish('updateFooter');
        this.commentsItems = [];
        this.page = 0;
        this.getDetailsGoodPlan();
        if (this.navParams.get('showComment')) {
            this.showComments = this.navParams.get('showComment');
            this.commentsItems = this.navParams.get('commentList');
            this.id = this.navParams.get('id');
        }
    };
    GoodPlanDetailsPage.prototype.handleSelection = function (event) {
        this.comment.content = this.comment.content + " " + event.char;
    };
    GoodPlanDetailsPage.prototype.handleReply = function (event) {
        this.reply.content = this.reply.content + " " + event.char;
    };
    GoodPlanDetailsPage.prototype.ShareArticle = function (item) {
        var options = {
            message: item.title + " : " + item.description,
            subject: "NOUS Ensemble",
            image: item.imageURL,
            url: item.imageURL
        };
        if (this.platform.is('cordova') || this.platform.is('core')) {
            this.socialsharing.shareWithOptions(options).then(function (data) {
            }).catch(function (error) {
                console.log("Error from sharing" + error);
            });
        }
    };
    GoodPlanDetailsPage.prototype.countComment = function () {
        this.commentNumber = this.commentNumber + this.eventComments.length;
        for (var _i = 0, _a = this.eventComments; _i < _a.length; _i++) {
            var com = _a[_i];
            this.restNumbreReplie = this.restNumbreReplie + com.replies.length;
        }
        this.restNumbreComment = this.numberComments - (this.commentNumber + this.restNumbreReplie);
    };
    GoodPlanDetailsPage.prototype.moreCountComment = function (comments) {
        this.commentNumber = this.commentNumber + comments.length;
        for (var _i = 0, comments_1 = comments; _i < comments_1.length; _i++) {
            var com = comments_1[_i];
            this.restNumbreReplie = this.restNumbreReplie + com.replies.length;
        }
        this.restNumbreComment = this.numberComments - (this.commentNumber + this.restNumbreReplie);
    };
    GoodPlanDetailsPage.prototype.goBack = function () {
        if (this.showPush) {
            this.navCtrl.setRoot(__WEBPACK_IMPORTED_MODULE_8__news_news__["a" /* NewsPage */]);
        }
        else {
            this.navCtrl.pop();
        }
    };
    GoodPlanDetailsPage.prototype.ionViewWillLeave = function () {
        this.appGlobals.showHeader = true;
        this.appGlobals.onEventDetails = false;
    };
    GoodPlanDetailsPage.prototype.getDetailsGoodPlan = function () {
        var _this = this;
        var loadingPopup = this.loader.create({});
        loadingPopup.present();
        this.goodplanService.getDetailsGoodPlan(this.id).then(function (data) {
            _this.currentEvent = data;
            _this.platform.ready().then(function () {
                var label = 'detail-article__' + _this.currentEvent.id;
                _this.appEvents.publish("googleAnalytics", label);
            });
            _this.numberComments = data.nbComments;
            if (_this.withComments) {
                _this.showComments = true;
                _this.getEventComments(loadingPopup);
            }
            else {
                loadingPopup.dismiss();
            }
        }, function (err) {
            loadingPopup.dismiss();
            _this.appEvents.publish('http:errors', err);
        });
    };
    GoodPlanDetailsPage.prototype.like = function (event) {
        var _this = this;
        var label = 'participation-' + event.id;
        this.appEvents.publish("googleAnalytics", label);
        var loadingPopup = this.loader.create({});
        loadingPopup.present();
        var result;
        this.goodplanService.takePart(event.id).then(function (data) {
            loadingPopup.dismiss();
            result = data;
            if (result.success) {
                event.isParticipated = true;
                event.nbParticipants++;
                _this.numberComments++;
                _this.refreshItem(_this.currentEvent);
                var addToCalendarAlert = _this.myAlert.create({
                    title: '',
                    subTitle: 'Voulez-vous ajouter cet évènement à votre agenda?',
                    buttons: [
                        {
                            text: 'Non',
                            role: 'cancel',
                            handler: function () {
                                _this.showNeedVolunteerPopup(event);
                            }
                        },
                        {
                            text: 'Oui',
                            handler: function () {
                                var start = __WEBPACK_IMPORTED_MODULE_9_moment__(event.startAt).toDate();
                                var end = __WEBPACK_IMPORTED_MODULE_9_moment__(event.endAt).toDate();
                                _this.calendarPlugin.createEvent(event.title, event.place, event.description, start, end).then(function (msg) { }, function (err) { });
                                _this.showNeedVolunteerPopup(event);
                            }
                        }
                    ]
                });
                addToCalendarAlert.present();
            }
        }, function (err) {
            loadingPopup.dismiss();
            _this.appEvents.publish('http:errors', err);
        });
    };
    GoodPlanDetailsPage.prototype.unlike = function (event) {
        var _this = this;
        var label = 'cancelParticipation-' + this.currentEvent.id;
        this.appEvents.publish("googleAnalytics", label);
        var loadingPopup = this.loader.create({});
        var result;
        loadingPopup.present();
        this.goodplanService.cancelTakePart(event.id).then(function (data) {
            loadingPopup.dismiss();
            result = data;
            var start = __WEBPACK_IMPORTED_MODULE_9_moment__(event.startAt).toDate();
            var end = __WEBPACK_IMPORTED_MODULE_9_moment__(event.endAt).toDate();
            _this.calendarPlugin.deleteEvent(event.title, event.place, '', start, end).then(function (msg) { }, function (err) { });
            if (result.success) {
                var successAlert = _this.myAlert.create({
                    title: 'Succès,',
                    subTitle: 'Votre annulation a été bien enregistrée.',
                    buttons: [
                        {
                            text: 'OK',
                            handler: function () {
                                event.isParticipated = false;
                                event.nbParticipants--;
                                _this.refreshItem(_this.currentEvent);
                            }
                        }
                    ]
                });
                successAlert.present();
            }
        }, function (err) {
            loadingPopup.dismiss();
            _this.appEvents.publish('http:errors', err);
        });
    };
    GoodPlanDetailsPage.prototype.showHideContactBar = function () {
        this.appGlobals.goodPlanCreatorId = this.currentEvent.id;
        if (!this.appGlobals.showcontactBar) {
            this.appGlobals.showcontactBar = true;
        }
        else {
            this.appGlobals.showcontactBar = false;
        }
    };
    GoodPlanDetailsPage.prototype.showHidePutAgenda = function (event) {
        var _this = this;
        if (!this.appGlobals.showPutAgenda) {
            this.appGlobals.showPutAgenda = true;
        }
        else {
            this.appGlobals.showPutAgenda = false;
        }
        var result;
        this.goodplanService.takePart(event.id).then(function (data) {
            result = data;
            if (result.success) {
                _this.currentEvent = data.event;
            }
        }, function (err) {
            _this.appEvents.publish('http:errors', err);
        });
    };
    GoodPlanDetailsPage.prototype.cancelParticipation = function (event) {
        var _this = this;
        var result;
        this.goodplanService.cancelTakePart(event.id).then(function (data) {
            result = data;
            var start = __WEBPACK_IMPORTED_MODULE_9_moment__(event.startAt).toDate();
            var end = __WEBPACK_IMPORTED_MODULE_9_moment__(event.endAt).toDate();
            _this.calendarPlugin.deleteEvent(event.title, event.place, '', start, end).then(function (msg) {
            }, function (err) {
            });
            if (result.success) {
                _this.currentEvent = data.event;
                var myModal2 = _this.myModal.create('PopupPage', { "message": "<p>Votre annulation a été bien enregistrée ! </p>" }, { cssClass: 'message-modal' });
                myModal2.onDidDismiss(function () {
                });
                myModal2.present();
            }
        }, function (err) {
            _this.appEvents.publish('http:errors', err);
        });
    };
    GoodPlanDetailsPage.prototype.showNeedVolunteerPopup = function (event) {
        var _this = this;
        if (event.needVolunteer) {
            var benevoleAlert = this.myAlert.create({
                title: '',
                subTitle: 'Voulez-vous être bénévole à cet évènement?',
                buttons: [
                    {
                        text: 'Non',
                        role: 'cancel',
                        handler: function () {
                        }
                    },
                    {
                        text: 'Oui',
                        handler: function () {
                            var label = 'volunteer-' + event.id;
                            _this.appEvents.publish("googleAnalytics", label);
                            localStorage.setItem("currentGoodPlan", event.id);
                            var modalVolunteers = _this.myModal.create('ParticpatelaststepPage', { "id": event.id }, { cssClass: 'style-modal' });
                            modalVolunteers.present();
                        }
                    }
                ]
            });
            benevoleAlert.present();
        }
    };
    GoodPlanDetailsPage.prototype.getEventComments = function (loadingPopup) {
        var _this = this;
        this.commentService.getCommentsGoodPlan(this.currentEvent.id, this.page).then(function (data) {
            _this.eventComments = data;
            for (var _i = 0, _a = _this.eventComments; _i < _a.length; _i++) {
                var com = _a[_i];
                _this.commentsItems.push(com);
            }
            loadingPopup.dismiss();
            setTimeout(function () {
                _this.content.scrollToBottom();
                _this.countComment();
            });
        }, function (err) {
            loadingPopup.dismiss();
            _this.appEvents.publish('http:errors', err);
        });
    };
    GoodPlanDetailsPage.prototype.showHideComments = function () {
        this.commentsItems = [];
        this.page = 0;
        if (this.showComments == false) {
            var loadingPopup = this.loader.create({});
            loadingPopup.present();
            this.getEventComments(loadingPopup);
            this.showParticipants = false;
            this.showComments = true;
        }
        else {
            this.showComments = false;
        }
    };
    GoodPlanDetailsPage.prototype.showHideParticipantsList = function (currentEvent) {
        if (this.showParticipants == false) {
            this.getParticipants(currentEvent.id);
            this.showComments = false;
            this.showParticipants = true;
        }
        else {
            this.showParticipants = false;
        }
    };
    GoodPlanDetailsPage.prototype.addComment = function () {
        var _this = this;
        if ((this.comment.content == '') || (this.comment.content == null) || (this.comment.content.length == 0) || (!this.comment.content.replace(/\s/g, '').length)) {
            var errorAlert = this.myAlert.create({
                title: "Erreur",
                subTitle: "Vous devez entrer votre commentaire",
                buttons: [
                    {
                        text: 'Fermer',
                        role: 'cancel',
                        handler: function () {
                        }
                    }
                ]
            });
            errorAlert.present();
        }
        else {
            var loadingPopup_1 = this.loader.create({});
            loadingPopup_1.present();
            this.commentService.postCommentsGoodPlan(this.currentEvent.id, this.comment).then(function (data) {
                _this.commentsItems = [];
                _this.page = 0;
                _this.comment.content = null;
                _this.comment.photo = null;
                _this.eventComments = data;
                for (var _i = 0, _a = _this.eventComments; _i < _a.length; _i++) {
                    var com = _a[_i];
                    _this.commentsItems.push(com);
                }
                _this.currentEvent.nbComments++;
                _this.numberComments++;
                loadingPopup_1.dismiss();
                setTimeout(function () {
                    _this.content.scrollToBottom();
                });
                _this.refreshItem(_this.currentEvent);
            }, function (err) {
                loadingPopup_1.dismiss();
                _this.appEvents.publish('http:errors', err);
            });
        }
    };
    GoodPlanDetailsPage.prototype.refreshItem = function (item) {
        this.cacheService.refreshItem(item, 'goodplan.events');
    };
    GoodPlanDetailsPage.prototype.deleteConfirmation = function (comment) {
        var _this = this;
        var alert = this.myAlert.create({
            title: 'Supprimer le commentaire',
            subTitle: 'Voulez-vous vraiment supprimer ce commentaire',
            buttons: [
                {
                    text: 'Annuler',
                    role: 'cancel',
                    handler: function () {
                    }
                },
                {
                    text: 'OK',
                    handler: function () {
                        _this.deleteComment(comment);
                    }
                }
            ]
        });
        alert.present();
    };
    GoodPlanDetailsPage.prototype.deleteComment = function (comment) {
        var _this = this;
        var loadingPopup = this.loader.create({});
        loadingPopup.present();
        this.commentService.deleteGoodPlanComment(comment.id).then(function (data) {
            var label = 'commentDeleted-' + comment.id;
            _this.appEvents.publish("googleAnalytics", label);
            _this.commentsItems = [];
            _this.page = 0;
            _this.comment.content = null;
            _this.eventComments = data;
            for (var _i = 0, _a = _this.eventComments; _i < _a.length; _i++) {
                var com = _a[_i];
                _this.commentsItems.push(com);
            }
            _this.currentEvent.nbComments--;
            _this.numberComments--;
            loadingPopup.dismiss();
            setTimeout(function () {
                _this.content.scrollToBottom();
            });
            var toast = _this.toast.create({
                message: 'Commentaire supprimé avec succès.',
                duration: 3000,
                position: 'top'
            });
            toast.present();
        }, function (err) {
            loadingPopup.dismiss();
            _this.appEvents.publish('http:errors', err);
        });
    };
    GoodPlanDetailsPage.prototype.deleteReplyConfirmation = function (comment) {
        var _this = this;
        var alert = this.myAlert.create({
            title: 'Supprimer le commentaire',
            subTitle: 'Voulez-vous vraiment supprimer ce commentaire',
            buttons: [
                {
                    text: 'Annuler',
                    role: 'cancel',
                    handler: function () {
                    }
                },
                {
                    text: 'OK',
                    handler: function () {
                        _this.deleteReplyComment(comment);
                    }
                }
            ]
        });
        alert.present();
    };
    GoodPlanDetailsPage.prototype.deleteReplyComment = function (comment) {
        var _this = this;
        var loadingPopup = this.loader.create({});
        loadingPopup.present();
        this.commentService.deleteGoodPlanCommentReply(comment.id).then(function (data) {
            _this.commentsItems = [];
            _this.page = 0;
            _this.comment.content = null;
            _this.eventComments = data;
            for (var _i = 0, _a = _this.eventComments; _i < _a.length; _i++) {
                var com = _a[_i];
                _this.commentsItems.push(com);
            }
            _this.currentEvent.nbComments--;
            _this.numberComments--;
            loadingPopup.dismiss();
            setTimeout(function () {
                _this.content.scrollToBottom();
            });
            var toast = _this.toast.create({
                message: 'Commentaire supprimé avec succès.',
                duration: 3000,
                position: 'top'
            });
            toast.present();
        }, function (err) {
            loadingPopup.dismiss();
            _this.appEvents.publish('http:errors', err);
        });
    };
    GoodPlanDetailsPage.prototype.showReplyForm = function (comment) {
        this.showReply = !this.showReply;
        this.reply.comment = comment.id;
    };
    GoodPlanDetailsPage.prototype.addReplyComment = function () {
        var _this = this;
        if ((this.reply.content == '') || (this.reply.content == null) || (this.reply.content.length == 0) || (!this.reply.content.replace(/\s/g, '').length)) {
            var errorAlert = this.myAlert.create({
                title: "Erreur",
                subTitle: "Vous devez entrer votre commentaire",
                buttons: [
                    {
                        text: 'Fermer',
                        role: 'cancel',
                        handler: function () {
                        }
                    }
                ]
            });
            errorAlert.present();
        }
        else {
            var loadingPopup_2 = this.loader.create({});
            loadingPopup_2.present();
            this.commentService.postGoodPlanCommentReply(this.reply.comment, this.reply).then(function (data) {
                _this.commentsItems = [];
                _this.page = 0;
                _this.reply.content = null;
                _this.reply.comment = null;
                _this.reply.photo = null;
                _this.showReply = false;
                _this.eventComments = data;
                for (var _i = 0, _a = _this.eventComments; _i < _a.length; _i++) {
                    var com = _a[_i];
                    _this.commentsItems.push(com);
                }
                _this.currentEvent.nbComments++;
                _this.numberComments++;
                loadingPopup_2.dismiss();
                setTimeout(function () {
                    _this.content.scrollToBottom();
                });
            }, function (err) {
                loadingPopup_2.dismiss();
                _this.appEvents.publish('http:errors', err);
            });
        }
    };
    GoodPlanDetailsPage.prototype.getParticipants = function (id) {
        this.participants = this.currentEvent.participants;
        this.content.scrollToBottom();
    };
    GoodPlanDetailsPage.prototype.showMoreComments = function () {
        var _this = this;
        this.page++;
        var loadingPopup = this.loader.create({});
        loadingPopup.present();
        this.commentService.getCommentsGoodPlan(this.currentEvent.id, this.page).then(function (data) {
            _this.eventComments = data;
            _this.moreCountComment(_this.eventComments);
            for (var _i = 0, _a = _this.eventComments; _i < _a.length; _i++) {
                var com = _a[_i];
                _this.commentsItems.push(com);
            }
            loadingPopup.dismiss();
        }, function (err) {
            loadingPopup.dismiss();
            _this.appEvents.publish('http:errors', err);
        });
    };
    GoodPlanDetailsPage.prototype.presentActionSheet = function (type) {
        var _this = this;
        var actionSheet = this.actionSheetCtrl.create({
            title: 'Sélectionner la source d image',
            buttons: [
                {
                    text: 'Choisir une photo de la bibliothèque',
                    handler: function () {
                        _this.loadImageFromLibrary(type);
                    }
                },
                {
                    text: 'Prendre une photo',
                    handler: function () {
                        _this.takePicture(type);
                    }
                },
                {
                    text: 'Choisir un document (Pdf, Doc, Docx ...)',
                    handler: function () {
                        _this.presentActionSheetDocument(type);
                    }
                },
                {
                    text: 'Annuler',
                    role: 'cancel'
                }
            ]
        });
        actionSheet.present();
    };
    GoodPlanDetailsPage.prototype.presentActionSheetDocument = function (type) {
        var _this = this;
        this.filesProvider.presentFileChooser(function (base64) {
            if (type == 'comment') {
                _this.comment.document = base64;
            }
            else {
                _this.reply.document = base64;
            }
        }, function (failure) {
            document.getElementById("fileInput").click();
        });
    };
    GoodPlanDetailsPage.prototype.onFileChange = function (event, type) {
        var _this = this;
        var reader = new FileReader();
        if (event.target.files && event.target.files.length > 0) {
            var file = event.target.files[0];
            reader.readAsDataURL(file);
            if (file.size > 5242880) {
                this.filesProvider.generateFileSizeError();
            }
            else {
                reader.onload = function () {
                    var mimeTypeAllowed = _this.filesProvider.allowedMimeType(reader.result);
                    if (mimeTypeAllowed) {
                        if (type == 'comment') {
                            _this.comment.document = reader.result;
                        }
                        else {
                            _this.reply.document = reader.result;
                        }
                    }
                    else {
                        _this.filesProvider.generateMimeTypeError();
                    }
                };
            }
        }
    };
    GoodPlanDetailsPage.prototype.takePicture = function (type) {
        var _this = this;
        this.camera.getPicture({
            destinationType: this.camera.DestinationType.DATA_URL,
            quality: 100,
            targetWidth: 600,
            targetHeight: 600,
            allowEdit: true,
            correctOrientation: true,
            encodingType: this.camera.EncodingType.JPEG
        }).then(function (imageData) {
            if (type == 'comment') {
                _this.comment.photo = "data:image/jpeg;base64," + imageData;
            }
            else {
                _this.reply.photo = "data:image/jpeg;base64," + imageData;
            }
        });
    };
    GoodPlanDetailsPage.prototype.loadImageFromLibrary = function (type) {
        var _this = this;
        this.camera.getPicture({
            destinationType: this.camera.DestinationType.DATA_URL,
            sourceType: this.camera.PictureSourceType.PHOTOLIBRARY,
            quality: 100,
            targetWidth: 600,
            targetHeight: 600,
            allowEdit: true,
            correctOrientation: true,
            encodingType: this.camera.EncodingType.JPEG
        }).then(function (imageData) {
            if (type == 'comment') {
                _this.comment.photo = "data:image/jpeg;base64," + imageData;
            }
            else {
                _this.reply.photo = "data:image/jpeg;base64," + imageData;
            }
        });
    };
    GoodPlanDetailsPage.prototype.deletePhoto = function (type) {
        if (type == 'comment') {
            this.comment.photo = null;
        }
        else {
            this.reply.photo = null;
        }
    };
    GoodPlanDetailsPage.prototype.showHideNeedCarpooling = function (event) {
        if (event['alreadyPool'] == 0) {
            this.appGlobals.currentEvent = event;
            this.appGlobals.checkedCarpool = null;
            this.appGlobals.showNeedCarpooling = !this.appGlobals.showNeedCarpooling;
        }
        else {
            var alert_1 = this.myAlert.create({
                title: 'Demande existante',
                subTitle: 'Vous avez déjà fait une demande de covoiturage pour cet évènement.',
                buttons: ['fermer']
            });
            alert_1.present();
        }
    };
    GoodPlanDetailsPage.prototype.showHideProposeCarpooling = function (event) {
        if (event['alreadyAddPool'] == 0) {
            if (!this.appGlobals.showproposeCarpooling) {
                this.appGlobals.showproposeCarpooling = true;
                this.appGlobals.currentEvent = event;
            }
            else {
                this.appGlobals.showproposeCarpooling = false;
            }
        }
        else {
            var alert_2 = this.myAlert.create({
                title: 'Demande existante',
                subTitle: 'Vous avez déjà proposé du covoiturage pour cet évènement.',
                buttons: ['fermer']
            });
            alert_2.present();
        }
    };
    GoodPlanDetailsPage.prototype.ionViewDidLoad = function () {
    };
    GoodPlanDetailsPage.prototype.download = function (url) {
        var _this = this;
        var fileName = url.substring(url.lastIndexOf('/') + 1);
        this.platform.ready().then(function () {
            if (_this.platform.is('android')) {
                var request = {
                    uri: url,
                    title: 'Nous Ensemble',
                    description: fileName,
                    mimeType: '',
                    visibleInDownloadsUi: true,
                    notificationVisibility: __WEBPACK_IMPORTED_MODULE_16__ionic_native_downloader__["b" /* NotificationVisibility */].VisibleNotifyCompleted,
                    destinationInExternalFilesDir: {
                        dirType: 'Downloads',
                        subPath: fileName
                    }
                };
                _this.downloader.download(request)
                    .then(function (location) { return console.log('File downloaded at:' + location); })
                    .catch(function (error) { return console.error(error); });
            }
            else {
                var target = "_system";
                _this.inAppBrowser.create(url, target, "location=no,enableViewportScale=yes");
            }
        });
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["ViewChild"])(__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* Content */]),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* Content */])
    ], GoodPlanDetailsPage.prototype, "content", void 0);
    GoodPlanDetailsPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-good-plan-details',template:/*ion-inline-start:"D:\celaneo\mobile\new-mobile\test\src\pages\good-plan-details\good-plan-details.html"*/'<!--\n\n  Generated template for the EventDetailsPage page.\n\n\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n\n  Ionic pages and navigation.\n\n-->\n\n<ion-header class="mobile-header MMS" *ngIf="appGlobals.token">\n\n  <ion-grid>\n\n    <ion-row>\n\n      <ion-col col-2 text-left>\n\n        <div class="item" (click)="goBack()">\n\n          <ion-icon name="ios-arrow-back"></ion-icon>\n\n        </div>\n\n      </ion-col>\n\n      <ion-col col-8 text-center class="page-title">\n\n        <ion-title>{{appGlobals.currentPageTitle}}</ion-title>\n\n      </ion-col>\n\n      <ion-col col-2>\n\n      </ion-col>\n\n    </ion-row>\n\n  </ion-grid>\n\n</ion-header>\n\n<ion-content>\n\n  <div class="div-left">\n\n    <div text-center class="back"><img src="assets/imgs/icons/1.png" (click)="goBack()"></div>\n\n  </div>\n\n  <!--bloc central -->\n\n  <div class="div-center">\n\n    <ion-card  style="margin-top: 25px;">\n\n      <ion-grid class="custom-grid" *ngIf="currentEvent">\n\n        <ion-row>\n\n\n\n          <ion-col class="bordred">\n\n\n\n            <div text-left class="csm1">\n\n\n\n                            <span class="event-date"> {{currentEvent.startAt| amLocale:\'fr\' | amDateFormat:\' Do MMMM\'}}\n\n                            </span> <span>\n\n                                <h6> (Jusqu\'au {{currentEvent.endAt| amLocale:\'fr\' | amDateFormat:\' Do MMMM\'}} ) </h6>\n\n                            </span>\n\n\n\n              <div>\n\n\n\n                                <span class="event-day" float-start>\n\n                                    {{currentEvent.startAt| amLocale:\'fr\' | amDateFormat:\'dddd\'}}\n\n                                </span>\n\n\n\n                <span class="event-hour" float-end>\n\n                                    {{currentEvent.startAt| amLocale:\'fr\' | amDateFormat:\'HH\'}}h{{currentEvent.startAt|\n\n                                    amLocale:\'fr\' | amDateFormat:\'mm\'}}\n\n                                </span>\n\n\n\n              </div>\n\n              <div class="clear"></div>\n\n\n\n            </div>\n\n\n\n\n\n          </ion-col>\n\n\n\n        </ion-row>\n\n        <ion-row>\n\n          <ion-col class="csm2">\n\n            <span class="event-name"> {{currentEvent.title}} </span>\n\n            <span class="excerpt">\n\n                            {{currentEvent.merchantName}}\n\n                        </span>\n\n            <span class="event-location">à\n\n                            {{currentEvent.city}}</span>\n\n            <h6 class="event-reservation" *ngIf="currentEvent.reservationName != null">Réservation obligatoire</h6>\n\n\n\n            <ion-col col-12>\n\n              <h6 [innerHtml]="currentEvent.description"></h6>\n\n            </ion-col>\n\n\n\n            <ion-col col-12 *ngIf="(currentEvent.imageURL || currentEvent.images || currentEvent.videoFile)">\n\n              <div>\n\n                <div *ngIf="(currentEvent.imageURL && !currentEvent.images && !currentEvent.videoFile) || (!currentEvent.imageURL && !currentEvent.images && currentEvent.videoFile) || (currentEvent.images && !currentEvent.imageURL && currentEvent.images.length == 1); else elseBlock"\n\n                     class="image home-card-slides">\n\n                  <div *ngIf="currentEvent.imageURL">\n\n                    <img data-src="{{currentEvent.imageURL}}" imageViewer>\n\n                  </div>\n\n                  <div *ngFor="let img of currentEvent.images">\n\n                    <img data-src="{{img.url}}" imageViewer>\n\n                  </div>\n\n                    <video style="width: 100%; height: 100%" *ngIf="currentEvent.videoFile != null" controls poster="assets/img/video_default.png">\n\n                        <source [src]="currentEvent.videoFile" type="video/mp4">\n\n                    </video>\n\n                </div>\n\n\n\n                <ng-template #elseBlock>\n\n                  <ion-slides class="image home-card-slides" loop="true" pager>\n\n                    <ion-slide *ngIf="currentEvent.videoFile != null">\n\n                        <video style="width: 100%; height: 100%" controls poster="assets/img/video_default.png">\n\n                            <source [src]="currentEvent.videoFile" type="video/mp4">\n\n                        </video>\n\n                    </ion-slide>\n\n                    <ion-slide *ngFor="let img of currentEvent.images">\n\n                      <img data-src="{{img.url}}" imageViewer>\n\n                    </ion-slide>\n\n                    <ion-slide *ngIf="currentEvent.imageURL">\n\n                      <img data-src="{{currentEvent.imageURL}}" imageViewer>\n\n                    </ion-slide>\n\n                  </ion-slides>\n\n                </ng-template>\n\n              </div>\n\n            </ion-col>\n\n\n\n              <ion-row  *ngIf="currentEvent.document">\n\n                  <ion-col text-center><ion-icon name="attach" (click)="download(currentEvent.document)" style="font-size:40px"></ion-icon></ion-col>\n\n\n\n              </ion-row>\n\n\n\n            <div text-center>\n\n              <ion-row class="comment-text-style">\n\n                <ion-col class="text-grey" (click)="showHideComments()">\n\n                  <span  *ngIf="currentEvent.nbComments <= 1">{{currentEvent.nbComments}} Commentaire</span>\n\n                  <span  *ngIf="currentEvent.nbComments > 1">{{currentEvent.nbComments}} Commentaires</span>\n\n                </ion-col>\n\n                <ion-col>\n\n                  <img class="comment-img-style" src="assets/imgs/icons/list-divider.png">\n\n                </ion-col>\n\n                <ion-col class="text-grey" (click)="showHideParticipantsList(currentEvent)">\n\n                  <span *ngIf="currentEvent.nbParticipants <= 1"> {{currentEvent.nbParticipants}} Intérêt</span>\n\n                  <span *ngIf="currentEvent.nbParticipants > 1"> {{currentEvent.nbParticipants}} Intérêts</span>\n\n                </ion-col>\n\n              </ion-row>\n\n            </div>\n\n\n\n\n\n            <ion-row text-center>\n\n              <ion-col col-4 (click)="showHideComments()">\n\n                <span class="disociate-actions" ><img class="news-comment-action dissociate-comment" src="assets/imgs/icons/comments.png"></span>\n\n              </ion-col>\n\n\n\n              <ion-col col-4>\n\n                <img alt="NOUS-Ensemble" class="news-comment-action agenda-icons icons-stars"  *ngIf="currentEvent.isParticipated" (click)="cancelParticipation(currentEvent)"\n\n                     src="assets/imgs/icons/star-full.png">\n\n                <img alt="NOUS-Ensemble" class="news-comment-action agenda-icons icons-stars"  *ngIf="!currentEvent.isParticipated" (click)="showHidePutAgenda(currentEvent)"\n\n                     src="assets/imgs/icons/star-empty.png">\n\n              </ion-col>\n\n              <ion-col col-4 (click)="showHideContactBar();" style="float:left;">\n\n                <img alt="NOUS-Ensemble" class="news-comment-action agenda-icons icons-contact-merchant" src="assets/imgs/contact-merchant.png" style="float: left">\n\n              </ion-col>\n\n            </ion-row>\n\n\n\n            <!--<ion-col col-12 *ngIf="currentEvent.participantsNbre">\n\n                <span class="participantsNbre">Nombre de participants : {{currentEvent.participantsNbre}}</span>\n\n            </ion-col>\n\n            <div class="buttons-container" text-center>\n\n                <button ion-button icon-left clear small (click)="showHideComments()">\n\n                    <div class="comments-nbr">{{currentEvent.nbComments}}</div>\n\n                    <img src="assets/imgs/icons/comments.png" class="icon-img-action">\n\n                </button>\n\n                <button ion-button icon-right color="primary" clear small (click)="like(currentEvent);" *ngIf="!currentEvent.isLiked">\n\n                    <span class="je-suis" color="primary"> Participer</span>\n\n                </button>\n\n                <button ion-button icon-right color="primary" clear small (click)="unlike(currentEvent);" *ngIf="currentEvent.isLiked">\n\n                    <span class="je-suis" color="primary"> Participer</span>\n\n\n\n\n\n                </button>\n\n\n\n                <button ion-button icon-right clear small (click)="showHideParticipantsList()">\n\n                    <div class="je-suis">{{currentEvent.nbParticipants}} Participant<span *ngIf="currentEvent.nbParticipants > 1">s</span></div>\n\n                </button>\n\n\n\n            </div>-->\n\n          </ion-col>\n\n        </ion-row>\n\n      </ion-grid>\n\n    </ion-card>\n\n    <ion-grid class="custom-grid" *ngIf="currentEvent" no-padding>\n\n      <ion-row>\n\n        <ion-col class="csm2" no-padding>\n\n          <div class="custom-div" >\n\n            <div *ngFor="let comment of commentsItems">\n\n              <div class="comment">\n\n                                <span class="comment-user" *ngIf="comment.type == \'citizen\'" text-capitalize>{{comment.firstname}}\n\n                                    {{comment.lastname}}</span>\n\n                <span class="comment-user" *ngIf="comment.type == \'association\'" text-capitalize>{{comment.associationName}}</span>\n\n                <span class="comment-user" *ngIf="comment.type == \'merchant\'" text-capitalize>{{comment.merchantName}}</span>\n\n                <span class="comment-date">{{comment.updateAt| amLocale:\'fr\' | amTimeAgo}}</span>\n\n                <span class="text-comment" [innerHtml]="comment.content|nl2br"></span>\n\n                <div class="div-image">\n\n                  <div *ngIf="comment.commentImg" class="image home-card-slides">\n\n                    <div>\n\n                      <img data-src="{{comment.commentImg}}" imageViewer>\n\n                    </div>\n\n                  </div>\n\n                </div>\n\n                  <div  *ngIf="comment.document">\n\n                      <ion-col text-center><ion-icon name="attach" (click)="download(comment.document)" style="font-size:40px"></ion-icon></ion-col>\n\n\n\n                  </div>\n\n                <div col-12 text-right>\n\n                  <span float-left class="delete" (click)="showReplyForm(comment)">Répondre</span>\n\n                  <span float-end class="delete" (click)="deleteConfirmation(comment)" *ngIf="comment.userId == currentUser.id">Supprimer</span>\n\n                </div>\n\n              </div>\n\n\n\n              <div class="answer" *ngFor="let replie of comment.replies">\n\n                                <span class="comment-user" *ngIf="replie.type == \'citizen\'" text-capitalize>{{replie.firstname}}\n\n                                    {{replie.lastname}}</span>\n\n                <span class="comment-user" *ngIf="replie.type == \'association\'" text-capitalize>{{replie.associationName}}</span>\n\n                <span class="comment-user" *ngIf="replie.type == \'merchant\'" text-capitalize>{{replie.merchantName}}</span>\n\n                <span class="comment-date"> {{replie.updateAt| amLocale:\'fr\' | amTimeAgo}}</span>\n\n                <span class="text-comment" [innerHtml]="replie.content|nl2br"></span>\n\n                <div class="div-image">\n\n                  <div *ngIf="replie.commentImg" class="image home-card-slides">\n\n                    <div>\n\n                      <img data-src="{{replie.commentImg}}" imageViewer>\n\n                    </div>\n\n                  </div>\n\n                </div>\n\n                  <div  *ngIf="replie.document">\n\n                      <ion-col text-center><ion-icon name="attach" (click)="download(replie.document)" style="font-size:40px"></ion-icon></ion-col>\n\n\n\n\n\n                  </div>\n\n                <div col-12 text-right>\n\n                  <span float-end class="delete" (click)="deleteReplyConfirmation(replie)" *ngIf="replie.userId == currentUser.id">Supprimer</span>\n\n                </div>\n\n              </div>\n\n            </div>\n\n            <div class="load-comment" *ngIf="currentEvent.nbComments > 0">\n\n              <a (click)="showMoreComments()">Tout Afficher ({{restNumbreComment}}) </a>\n\n            </div>\n\n\n\n            <p class="space-comment" *ngIf="!showReply">\n\n                            <span class="photo-bloc" *ngIf="comment.photo">\n\n                                <img class="photo-comment" data-src="{{comment.photo}}">\n\n                                <ion-icon name="trash" class="icon-delete delete-icon" (click)="deletePhoto(\'comment\');"></ion-icon>\n\n                            </span>\n\n              <ion-textarea class="comment-zone-footer" [(ngModel)]="comment.content" placeholder="Commenter"\n\n                            text-left>\n\n              </ion-textarea>\n\n              <img class="next-icon" src="assets/imgs/icons/next.png" (click)="addComment()">\n\n              <img class="next-icon" src="assets/imgs/icons/icon-photo.png" (click)="presentActionSheet(\'comment\')">\n\n            </p>\n\n            <p class="space-comment" *ngIf="showReply">\n\n                            <span class="photo-bloc" *ngIf="reply.photo">\n\n                                <img class="photo-comment" data-src="{{reply.photo}}">\n\n                                <ion-icon name="trash" class="icon-delete delete-icon" (click)="deletePhoto(\'reply\');"></ion-icon>\n\n                            </span>\n\n              <ion-icon float-start name="md-close" class="icon-close" (click)="showReplyForm(comment)"></ion-icon>\n\n              <ion-textarea class="comment-zone-footer" [(ngModel)]="reply.content" placeholder="Répondre"\n\n                            text-left>\n\n              </ion-textarea>\n\n              <img class="next-icon" src="assets/imgs/icons/icon-photo.png" (click)="presentActionSheet(\'reply\')">\n\n              <img class="next-icon" src="assets/imgs/icons/next.png" (click)="addReplyComment()">\n\n\n\n            </p>\n\n            <div class="clear"></div>\n\n          </div>\n\n          <div class="custom-div" *ngIf="showParticipants">\n\n            <ion-list>\n\n              <ion-item *ngFor="let participant of participants">\n\n                <ion-avatar item-start>\n\n                  <img *ngIf="participant.imageURL" src="assets/imgs/icons/user_default.png">\n\n                </ion-avatar>\n\n                <h2 class="fullname firstname">{{participant.firstname | capitalize}}\n\n                  {{participant.lastname | capitalize}}</h2>\n\n              </ion-item>\n\n            </ion-list>\n\n          </div>\n\n        </ion-col>\n\n      </ion-row>\n\n    </ion-grid>\n\n\n\n    <div class="clear"></div>\n\n\n\n\n\n  </div>\n\n  <!-- fin bloc central -->\n\n  <div class="div-right" text-center>\n\n  </div>\n\n</ion-content>\n\n<!--<ion-footer class="footer-comment-photo footer-desktop">\n\n\n\n    <div class="footer-comment-item" *ngIf="!showReply">\n\n        <div class="photo-bloc" *ngIf="comment.photo">\n\n            <img class="photo-comment" data-src="{{comment.photo}}">\n\n            <ion-icon name="trash" class="icon-delete delete-icon" (click)="deletePhoto(\'comment\');"></ion-icon>\n\n        </div>\n\n        <ion-textarea item-start autocomplete="true" class="comment-zone" [(ngModel)]="comment.content" placeholder="Commenter"\n\n            text-left>\n\n        </ion-textarea>\n\n        <img class="icon-comment" src="assets/imgs/icons/icon-photo.png" (click)="presentActionSheet(\'comment\')">\n\n        <img class="icon-comment" src="assets/imgs/icons/next.png" (click)="addComment()">\n\n    </div>\n\n\n\n    <div class="footer-comment-item" *ngIf="showReply">\n\n        <div class="photo-bloc" *ngIf="reply.photo">\n\n            <img class="photo-comment" data-src="{{reply.photo}}">\n\n            <ion-icon name="trash" class="icon-delete delete-icon" (click)="deletePhoto(\'reply\');"></ion-icon>\n\n        </div>\n\n        <ion-icon float-start name="md-close" class="icon-close" (click)="showReplyForm(comment)"></ion-icon>\n\n        <ion-textarea item-center autocomplete="true" class="comment-zone" [(ngModel)]="reply.content" placeholder="Répondre"\n\n            text-left>\n\n        </ion-textarea>\n\n        <img class="icon-comment" src="assets/imgs/icons/icon-photo.png" (click)="presentActionSheet(\'reply\')">\n\n        <img class="icon-comment" src="assets/imgs/icons/next.png" (click)="addReplyComment()">\n\n    </div>\n\n\n\n\n\n</ion-footer>-->\n\n<ion-footer class="footer-comment footer-desktop">\n\n\n\n    <div class="footer-comment-item" *ngIf="!showReply">\n\n        <div text-center>\n\n            <ion-textarea item-start autocomplete="true" class="comment-zone" [(ngModel)]="comment.content" placeholder="Commenter"\n\n                text-left>\n\n            </ion-textarea>\n\n            <button  class="icon-comment" style="padding-top: 12px;" ion-button clear icon-only (click)="toggled = !toggled"\n\n            [(emojiPickerIf)]="toggled" [emojiPickerDirection]="\'top\'"\n\n            (emojiPickerSelect)="handleSelection($event)">\n\n            😃\n\n            </button>\n\n            <img class="icon-comment" src="assets/imgs/icons/icon-photo.png" (click)="presentActionSheet(\'comment\')">\n\n            <img class="icon-comment" src="assets/imgs/icons/next.png" (click)="addComment()">\n\n            <input type="file" id="fileInput" (change)="onFileChange($event,\'comment\')" >\n\n        </div>\n\n    </div>\n\n\n\n    <div class="footer-comment-item" *ngIf="showReply">\n\n        <div text-center>\n\n            <ion-icon float-start name="md-close" class="icon-close" (click)="showReplyForm(comment)"></ion-icon>\n\n\n\n            <ion-textarea item-center autocomplete="true" class="comment-zone-reply" [(ngModel)]="reply.content"\n\n                placeholder="Répondre" text-left>\n\n            </ion-textarea>\n\n            <button  class="icon-comment" style="padding-top: 12px;" ion-button clear icon-only (click)="toggledReply = !toggledReply"\n\n            [(emojiPickerIf)]="toggledReply" [emojiPickerDirection]="\'top\'"\n\n            (emojiPickerSelect)="handleReply($event)">\n\n            😃\n\n            </button>\n\n            <img class="icon-comment" src="assets/imgs/icons/icon-photo.png" (click)="presentActionSheet(\'reply\')">\n\n            <img class="icon-comment" src="assets/imgs/icons/next.png" (click)="addReplyComment()">\n\n            <input type="file" id="fileInput" (change)="onFileChange($event,\'reply\')" >\n\n        </div>\n\n    </div>\n\n\n\n\n\n</ion-footer>\n\n'/*ion-inline-end:"D:\celaneo\mobile\new-mobile\test\src\pages\good-plan-details\good-plan-details.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_2__providers_globals_globals__["a" /* GlobalsProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_3__ionic_native_google_analytics__["a" /* GoogleAnalytics */],
            __WEBPACK_IMPORTED_MODULE_4__ionic_native_calendar__["a" /* Calendar */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_10__providers_goodplanrest_goodplanrest__["a" /* GoodplanrestProvider */],
            __WEBPACK_IMPORTED_MODULE_5__providers_comment_comment__["a" /* CommentProvider */],
            __WEBPACK_IMPORTED_MODULE_6__ionic_native_camera__["a" /* Camera */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["a" /* ActionSheetController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["z" /* ToastController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["x" /* Platform */],
            __WEBPACK_IMPORTED_MODULE_7__ionic_native_social_sharing__["a" /* SocialSharing */],
            __WEBPACK_IMPORTED_MODULE_11__providers_cache_cache__["a" /* CacheProvider */],
            __WEBPACK_IMPORTED_MODULE_12__ionic_native_file__["a" /* File */],
            __WEBPACK_IMPORTED_MODULE_13__ionic_native_in_app_browser__["a" /* InAppBrowser */],
            __WEBPACK_IMPORTED_MODULE_14__ionic_native_file_chooser__["a" /* FileChooser */],
            __WEBPACK_IMPORTED_MODULE_15__ionic_native_file_path__["a" /* FilePath */],
            __WEBPACK_IMPORTED_MODULE_16__ionic_native_downloader__["a" /* Downloader */],
            __WEBPACK_IMPORTED_MODULE_17__providers_files_files__["a" /* FilesProvider */]])
    ], GoodPlanDetailsPage);
    return GoodPlanDetailsPage;
}());

//# sourceMappingURL=good-plan-details.js.map

/***/ }),

/***/ 106:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return EmptyNewsPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_rxjs_add_operator_map__ = __webpack_require__(27);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_rxjs_add_operator_map___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_rxjs_add_operator_map__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_globals_globals__ = __webpack_require__(8);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




/**
 * Generated class for the EmptyNewsPage page.
 *
 * See http://ionicframework.com/docs/components/#navigation for more info
 * on Ionic pages and navigation.
 */
var EmptyNewsPage = /** @class */ (function () {
    function EmptyNewsPage(event, platform, navCtrl, modal, navParams, alertCtrl, appGlobals) {
        this.event = event;
        this.platform = platform;
        this.navCtrl = navCtrl;
        this.modal = modal;
        this.navParams = navParams;
        this.alertCtrl = alertCtrl;
        this.appGlobals = appGlobals;
        this.registredUser = false;
        this.hasApprovedCommunities = false;
        this.registredUser = this.navParams.get("register");
        this.currentUser = JSON.parse(localStorage.getItem("currentUser"));
    }
    EmptyNewsPage.prototype.ionViewWillEnter = function () {
        this.appGlobals.showHeader = true;
        this.appGlobals.showFooter = true;
        this.appGlobals.showSearchNews = false;
        this.appGlobals.currentPageTitle = "A la Une";
        this.appGlobals.currentPageLogo = "md-paper";
        this.appGlobals.currentPageid = "news";
        this.event.publish('showMenus');
    };
    EmptyNewsPage.prototype.ionViewWillLeave = function () {
        this.appGlobals.showSearchNews = false;
    };
    EmptyNewsPage.prototype.hideConfirmationMessage = function () {
        this.registredUser = false;
    };
    EmptyNewsPage.prototype.ionViewDidEnter = function () {
        this.appGlobals.currentPageid = "news";
        this.event.publish('updateFooter');
    };
    EmptyNewsPage.prototype.publish = function () {
        /*let adherentAssociations:any = this.appGlobals.adherentAssociations;
        let adherentMerchants:any = this.appGlobals.adherentMerchants;
        let adminAssociations:any = this.appGlobals.adminAssociations;
        let adminMerchants:any = this.appGlobals.adminMerchants;*/
        var adminAssociations = JSON.parse(localStorage.getItem("adminAssociations"));
        var adminMerchants = JSON.parse(localStorage.getItem("adminMerchants"));
        var adherentAssociations = JSON.parse(localStorage.getItem("adherentAssociations"));
        var adherentMerchants = JSON.parse(localStorage.getItem("adherentMerchants"));
        if (localStorage.getItem("hasApprovedCommunities") == 'true') {
            this.hasApprovedCommunities = true;
        }
        else {
            this.hasApprovedCommunities = false;
        }
        if (adherentAssociations.length != 0 || adherentMerchants.length != 0 || adminAssociations.length != 0 || adminMerchants.length != 0 || this.currentUser.role == 'community_su_admin' || this.hasApprovedCommunities) {
            var myModal2 = this.modal.create('ChoicePage', {}, { cssClass: 'style-modal choice-modal' });
            myModal2.onDidDismiss(function () {
            });
            myModal2.present();
        }
        else {
            var myModal2 = this.modal.create('PopupPage', { "message": "<p>Vous ne pouvez pas publier ! </p>" }, { cssClass: 'message-modal' });
            myModal2.onDidDismiss(function () {
            });
            myModal2.present();
        }
    };
    EmptyNewsPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-empty-news',template:/*ion-inline-start:"D:\celaneo\mobile\new-mobile\test\src\pages\empty-news\empty-news.html"*/'<!--\n\n  Generated template for the NewsPage page.\n\n\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n\n  Ionic pages and navigation.\n\n-->\n\n<ion-content text-center>\n\n    <div class="div-left">\n\n    </div>\n\n\n\n    <div class="div-center empty">\n\n        <img class="hand" src="assets/imgs/icons/hand.png">\n\n       <div class="img-container"> <img class="emptyCommunity" src="assets/imgs/icons/emptyCommunity.png"> </div>\n\n        <p class="emptyText"> Cliquez sur <br> Communautés et <br> sélectionnez <br> celles qui vous <br>intéressent\n\n        </p>\n\n    </div>\n\n    <div class="div-right" text-left>\n\n        <img class="publish" src="assets/imgs/icons/2.png" (click)="publish()">\n\n    </div>\n\n\n\n    <div class="overlay" *ngIf="registredUser" (click)="hideConfirmationMessage()"></div>\n\n    <div class="registred-new-user" *ngIf="registredUser">\n\n        <div class="close-btn" (click)="hideConfirmationMessage()">\n\n            <ion-icon name="md-close"></ion-icon>\n\n        </div>\n\n        Votre compte <br>\n\n        <span class="app-title">Nous-Ensemble</span><br> a été bien créé ! <br> Vous avez reçu un email de <br>\n\n        confirmation avec votre <br> identifiant et votre mot de passe.\n\n    </div>\n\n</ion-content>'/*ion-inline-end:"D:\celaneo\mobile\new-mobile\test\src\pages\empty-news\empty-news.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["x" /* Platform */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_3__providers_globals_globals__["a" /* GlobalsProvider */]])
    ], EmptyNewsPage);
    return EmptyNewsPage;
}());

//# sourceMappingURL=empty-news.js.map

/***/ }),

/***/ 108:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return FilesProvider; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__ionic_native_file__ = __webpack_require__(71);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__ionic_native_file_chooser__ = __webpack_require__(141);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__ionic_native_file_path__ = __webpack_require__(142);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__ionic_native_document_picker__ = __webpack_require__(237);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};






var FilesProvider = /** @class */ (function () {
    function FilesProvider(alertCtrl, platform, docPicker, fileChooser, filepath, file) {
        this.alertCtrl = alertCtrl;
        this.platform = platform;
        this.docPicker = docPicker;
        this.fileChooser = fileChooser;
        this.filepath = filepath;
        this.file = file;
        this.acceptedMimeTypes = [
            'application/pdf',
            'application/vnd.openxmlformats-officedocument.wordprocessingml.document',
            'application/msexcel',
            'application/x-msexcel',
            'application/msword',
            'application/xls',
            'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',
            'application/vnd.ms-excel',
            'application/powerpoint',
            'application/vnd.ms-powerpoint',
            'application/vnd.openxmlformats-officedocument.presentationml.presentation'
        ];
    }
    FilesProvider.prototype.presentFileChooser = function (success, failure) {
        var _this = this;
        if (this.platform.is('android')) {
            this.fileChooser.open().then(function (uri) {
                _this.filepath.resolveNativePath(uri).then(function (filePath) {
                    var fileData = _this.parseFilePath(filePath);
                    _this.file.readAsDataURL(fileData.directory, fileData.fileName).then(function (base64) {
                        var mimeTypeAllowed = _this.allowedMimeType(base64);
                        var fileSizeAllowed = _this.allowedFileSize(base64);
                        if (fileSizeAllowed && mimeTypeAllowed) {
                            success(base64);
                        }
                        else {
                            if (!fileSizeAllowed) {
                                _this.generateFileSizeError();
                            }
                            else {
                                _this.generateMimeTypeError();
                            }
                        }
                    }, function (err) {
                        console.log(err);
                        throw err;
                    });
                }, function (err) {
                    console.log(JSON.parse(err));
                    throw err;
                });
            }, function (err) {
                JSON.parse(JSON.stringify(err));
                throw err;
            });
        }
        else if (this.platform.is('ios')) {
            this.docPicker.getFile('all').then(function (uri) {
                var fileData = _this.parseFilePath(uri);
                console.log(uri);
                _this.file.readAsDataURL(fileData.directory, fileData.fileName).then(function (base64) {
                    var mimeTypeAllowed = _this.allowedMimeType(base64);
                    var fileSizeAllowed = _this.allowedFileSize(base64);
                    if (fileSizeAllowed && mimeTypeAllowed) {
                        success(base64);
                    }
                    else {
                        if (!fileSizeAllowed) {
                            _this.generateFileSizeError();
                        }
                        else {
                            _this.generateMimeTypeError();
                        }
                    }
                }, function (err) {
                    console.log(err);
                    throw err;
                });
            }, function (err) {
                JSON.parse(JSON.stringify(err));
                console.log(err);
            });
        }
        else {
            failure();
        }
    };
    FilesProvider.prototype.allowedFileSize = function (base64) {
        var content_without_mime = base64.split(",")[1];
        var size_in_bytes = window.atob(content_without_mime).length;
        return size_in_bytes <= 5242880;
    };
    FilesProvider.prototype.allowedMimeType = function (base64) {
        var base64ContentArray = base64.split(",");
        var mimeType = base64ContentArray[0].match(/[^:\s*]\w+\/[\w-+\d.]+(?=[;| ])/)[0];
        return this.acceptedMimeTypes.indexOf(mimeType) !== -1;
    };
    FilesProvider.prototype.parseFilePath = function (filePath) {
        filePath = filePath.replace("file//:file//:", "file//:");
        var directory = filePath.substring(0, filePath.lastIndexOf("/") + 1);
        var fileName = filePath.substring(filePath.lastIndexOf("/") + 1);
        return { directory: directory, fileName: fileName };
    };
    FilesProvider.prototype.generateFileSizeError = function () {
        var errorAlert = this.alertCtrl.create({
            title: 'Attention',
            subTitle: 'Taille de fichier superieure à 5 Mo',
            buttons: [
                {
                    text: 'OK'
                }
            ]
        });
        errorAlert.present();
    };
    FilesProvider.prototype.generateMimeTypeError = function () {
        var errorAlert = this.alertCtrl.create({
            title: 'Attention',
            subTitle: 'Format de fichier non supporté.',
            buttons: [
                {
                    text: 'OK'
                }
            ]
        });
        errorAlert.present();
    };
    FilesProvider = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Injectable"])(),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["x" /* Platform */],
            __WEBPACK_IMPORTED_MODULE_5__ionic_native_document_picker__["a" /* DocumentPicker */],
            __WEBPACK_IMPORTED_MODULE_3__ionic_native_file_chooser__["a" /* FileChooser */],
            __WEBPACK_IMPORTED_MODULE_4__ionic_native_file_path__["a" /* FilePath */],
            __WEBPACK_IMPORTED_MODULE_2__ionic_native_file__["a" /* File */]])
    ], FilesProvider);
    return FilesProvider;
}());

//# sourceMappingURL=files.js.map

/***/ }),

/***/ 128:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return MerchantSheetPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__event_details_event_details__ = __webpack_require__(55);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_merchant_merchant__ = __webpack_require__(39);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_globals_globals__ = __webpack_require__(8);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__providers_article_article__ = __webpack_require__(31);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__detail_article_detail_article__ = __webpack_require__(56);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__providers_comment_comment__ = __webpack_require__(22);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__pages_news_news__ = __webpack_require__(35);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__providers_eventsrest_eventsrest__ = __webpack_require__(9);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};










/**
 * Generated class for the CommercialSheetPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var MerchantSheetPage = /** @class */ (function () {
    function MerchantSheetPage(navCtrl, navParams, merchantService, serviceEvent, loader, myAlert, appEvents, myModal, commentService, appGlobals, articleService, alertCtrl) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.merchantService = merchantService;
        this.serviceEvent = serviceEvent;
        this.loader = loader;
        this.myAlert = myAlert;
        this.appEvents = appEvents;
        this.myModal = myModal;
        this.commentService = commentService;
        this.appGlobals = appGlobals;
        this.articleService = articleService;
        this.alertCtrl = alertCtrl;
        this.page = 0;
        this.items = [];
        this.numberComments = 0;
        this.id = this.navParams.get('id');
        this.name = this.navParams.get('name');
        this.showPush = navParams.get('pushNotification');
    }
    MerchantSheetPage.prototype.ionViewWillEnter = function () {
        this.appGlobals.showFooter = true;
        this.appGlobals.showHeader = false;
        this.appEvents.publish('updateFooter');
        this.appGlobals.currentPageTitle = this.name;
        this.appGlobals.currentPageLogo = null;
        this.items = [];
        this.page = 0;
        this.getCurrentMerchantDetails();
    };
    MerchantSheetPage.prototype.ionViewWillLeave = function () {
        this.appGlobals.showFooter = true;
    };
    MerchantSheetPage.prototype.getCurrentMerchantDetails = function () {
        var _this = this;
        var loadingPopup = this.loader.create({});
        loadingPopup.present();
        this.merchantService.getDetails(this.id).then(function (data) {
            _this.merchant = data;
            _this.getMerchantArticle(loadingPopup);
        }, function (err) {
            loadingPopup.dismiss();
            _this.appEvents.publish('http:errors', err);
        });
    };
    MerchantSheetPage.prototype.getMerchantArticle = function (loadingPopup) {
        var _this = this;
        this.page = 0;
        this.articleService.findMerchantArticles(this.id, this.page).then(function (data) {
            _this.articles = data;
            for (var _i = 0, _a = _this.articles; _i < _a.length; _i++) {
                var article = _a[_i];
                _this.items.push(article);
            }
            loadingPopup.dismiss();
        }, function (err) {
            loadingPopup.dismiss();
            _this.appEvents.publish('http:errors', err);
        });
    };
    MerchantSheetPage.prototype.detailsArticle = function (article) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_6__detail_article_detail_article__["a" /* DetailArticlePage */], {
            article: article
        });
    };
    MerchantSheetPage.prototype.detailsArticleComment = function (article) {
        var _this = this;
        var loadingPopup = this.loader.create({});
        // Show the popup
        loadingPopup.present();
        this.commentService.getCommentsArticlePagination(article.id, 0).then(function (data) {
            _this.comment = data;
            _this.numberComments = article.nbreComments;
            loadingPopup.dismiss();
            _this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_6__detail_article_detail_article__["a" /* DetailArticlePage */], {
                article: article,
                comment: _this.comment,
                numberComments: _this.numberComments,
                showComments: true
            });
        }, function (err) {
            loadingPopup.dismiss();
            _this.appEvents.publish('http:errors', err);
        });
    };
    MerchantSheetPage.prototype.like = function (article) {
        var _this = this;
        this.articleService.like(article).then(function (data) {
            var index = _this.items.findIndex(function (i) { return i.id == article; });
            if (index != -1) {
                _this.items[index].isLiked = true;
                _this.items[index].nbLikes++;
            }
        }, function (err) {
            _this.appEvents.publish('http:errors', err);
        });
    };
    MerchantSheetPage.prototype.unlike = function (article) {
        var _this = this;
        this.articleService.unlike(article).then(function (data) {
            var index = _this.items.findIndex(function (i) { return i.id == article; });
            if (index != -1) {
                _this.items[index].isLiked = false;
                _this.items[index].nbLikes--;
            }
        }, function (err) {
            _this.appEvents.publish('http:errors', err);
        });
    };
    MerchantSheetPage.prototype.goBack = function () {
        if (this.showPush) {
            this.navCtrl.setRoot(__WEBPACK_IMPORTED_MODULE_8__pages_news_news__["a" /* NewsPage */]);
        }
        else {
            this.navCtrl.pop();
        }
    };
    MerchantSheetPage.prototype.doInfinite = function (infiniteScroll) {
        var _this = this;
        this.page += 1;
        this.articleService.findMerchantArticles(this.id, this.page).then(function (data) {
            _this.articles = data;
            for (var _i = 0, _a = _this.articles; _i < _a.length; _i++) {
                var article = _a[_i];
                _this.items.push(article);
            }
            infiniteScroll.complete();
        }, function (err) {
            infiniteScroll.complete();
        });
    };
    MerchantSheetPage.prototype.linkTo = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_2__event_details_event_details__["a" /* EventDetailsPage */]);
    };
    MerchantSheetPage.prototype.detailsEvent = function (eventId, title, withComments, moderateEvent) {
        if (moderateEvent == 'wait') {
            var errorAlert = this.alertCtrl.create({
                subTitle: 'Cet événement est en attente',
                buttons: [
                    {
                        text: 'Fermer',
                        role: 'cancel',
                        handler: function () {
                        }
                    }
                ]
            });
            errorAlert.present();
        }
        else {
            this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_2__event_details_event_details__["a" /* EventDetailsPage */], {
                id: eventId,
                title: title,
                withComments: withComments
            });
        }
    };
    MerchantSheetPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-merchant-sheet',template:/*ion-inline-start:"D:\celaneo\mobile\new-mobile\test\src\pages\merchant-sheet\merchant-sheet.html"*/'<!--\n\n  Generated template for the CommercialSheetPage page.\n\n\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n\n  Ionic pages and navigation.\n\n-->\n\n<ion-header class="mobile-header" *ngIf="appGlobals.token">\n\n    <ion-grid>\n\n        <ion-row>\n\n            <ion-col col-2 text-left>\n\n                <div class="item" (click)="goBack()">\n\n                    <ion-icon name="ios-arrow-back"></ion-icon>\n\n                </div>\n\n            </ion-col>\n\n            <ion-col col-8 text-center class="page-title">\n\n                <ion-title>{{appGlobals.currentPageTitle}}</ion-title>\n\n            </ion-col>\n\n            <ion-col col-2>\n\n            </ion-col>\n\n        </ion-row>\n\n    </ion-grid>\n\n</ion-header>\n\n<ion-content>\n\n    <div class="div-left">\n\n        <div text-right class="back"><img src="assets/imgs/icons/1.png" (click)="goBack()"></div>\n\n    </div>\n\n    <!--bloc central -->\n\n    <div class="div-center">\n\n        <div *ngIf="merchant">\n\n            <ion-grid class="custom-grid">\n\n\n\n                <ion-row>\n\n\n\n                    <ion-col>\n\n\n\n                        <div text-left class="csm1">\n\n                            <span class="medium-text-title"> Description </span>\n\n\n\n                            <p class="excerpt">\n\n                                {{merchant.description}}\n\n                            </p>\n\n\n\n                            <span class="medium-text-title csm2"> Email </span>\n\n                            <span class="excerpt"> {{merchant.email}} </span>\n\n\n\n                            <div class="clear"></div>\n\n\n\n                            <span class="medium-text-title csm2"> Téléphone </span>\n\n                            <span class="excerpt"> {{merchant.phone}} </span>\n\n\n\n                            <div class="clear"></div>\n\n\n\n                            <span class="medium-text-title csm2"> Adresse </span>\n\n                            <span class="excerpt"> {{merchant.address}} </span>\n\n                        </div>\n\n\n\n                    </ion-col>\n\n\n\n                </ion-row>\n\n\n\n            </ion-grid>\n\n\n\n            <ion-card *ngFor="let item of items">\n\n                <ion-card-header>\n\n                    <ion-icon class="icon-agenda" name="md-calendar" float-end *ngIf="item.event" (click)="detailsEvent(item.event, item.title, false, item.moderateEvent)"></ion-icon>\n\n                    <span class="card-title"> {{item.merchantName}} </span>\n\n                    <span class="card-title-subtitle" *ngIf="item.type == \'merchant\' && item.city.name">\n\n                        {{item.createAt| amLocale:\'fr\' | amTimeAgo}} à {{item.city.name}} </span>\n\n                </ion-card-header>\n\n                <ion-card-content>\n\n                    <div (click)="detailsArticle(item);">\n\n                        <div *ngIf="item.imageURL || item.images || item.videoFile">\n\n                            <div *ngIf="(item.imageURL && !item.images && !item.videoFile) || (!item.imageURL && !item.images && item.videoFile) || (item.images && !item.imageURL && item.images.length == 1); else elseBlock">\n\n                                <div *ngIf="item.imageURL" (click)="detailsArticle(item);">\n\n                                    <img data-src="{{item.imageURL}}">\n\n                                </div>\n\n                                <div *ngFor="let img of item.images" (click)="detailsArticle(item);">\n\n                                    <img data-src="{{img.url}}">\n\n                                </div>\n\n                                <video style="width: 100%; height: 100%" *ngIf="item.videoFile !== null" controls poster="assets/img/video_default.png">\n\n                                    <source [src]="item.videoFile" type="video/mp4">\n\n                                </video>\n\n                            </div>\n\n\n\n                            <ng-template #elseBlock>\n\n                                <ion-slides loop="true" pager>\n\n                                    <ion-slide *ngIf="item.videoFile != null">\n\n                                        <video style="width: 100%; height: 100%" controls poster="assets/img/video_default.png">\n\n                                            <source [src]="item.videoFile" type="video/mp4">\n\n                                        </video>\n\n                                    </ion-slide>\n\n                                    <ion-slide *ngIf="item.imageURL" (click)="detailsArticle(item);">\n\n                                        <img data-src="{{item.imageURL}}">\n\n                                    </ion-slide>\n\n                                    <ion-slide *ngFor="let img of item.images" (click)="detailsArticle(item);">\n\n                                        <img data-src="{{img.url}}">\n\n                                    </ion-slide>\n\n                                </ion-slides>\n\n                            </ng-template>\n\n                            <div class="separator"></div>\n\n                        </div>\n\n\n\n                        <span class="card-title"> {{item.title}} </span>\n\n                        <p class="excerpt" [innerHtml]="item.description|truncate|nl2br"></p>\n\n                    </div>\n\n                    <div text-center>\n\n                        <button ion-button icon-left clear small (click)="detailsArticleComment(item);">\n\n                            <div>{{item.nbreComments}}</div>\n\n                            <img src="assets/imgs/icons/comments.png" class="icon-img-action">\n\n                        </button>\n\n                        <button ion-button icon-right clear small *ngIf="!item.isLiked" (click)="like(item.id);">\n\n                            <img src="assets/imgs/icons/dislike.png" class="icon-img-action">\n\n                            <div>{{item.nbLikes}}</div>\n\n                        </button>\n\n                        <button ion-button icon-right clear small *ngIf="item.isLiked" (click)="unlike(item.id);">\n\n                            <img src="assets/imgs/icons/like.png" class="icon-img-action">\n\n                            <div>{{item.nbLikes}}</div>\n\n                        </button>\n\n                    </div>\n\n                </ion-card-content>\n\n            </ion-card>\n\n            <ion-infinite-scroll (ionInfinite)="doInfinite($event)" threshold="100px">\n\n                <ion-infinite-scroll-content loadingSpinner="bubbles" loadingText="Charger plus...">\n\n                </ion-infinite-scroll-content>\n\n            </ion-infinite-scroll>\n\n        </div>\n\n    </div>\n\n    <!-- fin bloc central -->\n\n    <div class="div-right" text-center>\n\n    </div>\n\n</ion-content>\n\n\n\n\n\n\n\n<!--\n\n  Generated template for the CommercialSheetPage page.\n\n\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n\n  Ionic pages and navigation.\n\n-->\n\n\n\n\n\n\n\n\n\n<!--\n\n  Generated template for the AgendaPage page.\n\n\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n\n  Ionic pages and navigation.\n\n-->\n\n<ion-header class="mobile-header" *ngIf="appGlobals.token">\n\n    <ion-grid>\n\n        <ion-row>\n\n            <ion-col col-2 text-left>\n\n                <div class="item" (click)="goBack()">\n\n                    <ion-icon name="ios-arrow-back"></ion-icon>\n\n                </div>\n\n            </ion-col>\n\n            <ion-col col-8 text-center class="page-title">\n\n                <ion-title>{{appGlobals.currentPageTitle}}</ion-title>\n\n            </ion-col>\n\n            <ion-col col-2>\n\n            </ion-col>\n\n        </ion-row>\n\n    </ion-grid>\n\n</ion-header>\n\n<ion-content>\n\n    <div class="div-left">\n\n        <div text-right class="back"><img src="assets/imgs/icons/1.png" (click)="goBack()"></div>\n\n    </div>\n\n    <!--bloc central -->\n\n    <div class="div-center">\n\n        <div *ngIf="merchant">\n\n            <ion-grid class="custom-grid">\n\n\n\n                <ion-row>\n\n\n\n                    <ion-col>\n\n\n\n                        <div text-left class="csm1">\n\n                            <span class="medium-text-title"> Description </span>\n\n\n\n                            <p class="excerpt">\n\n                                {{merchant.description}}\n\n                            </p>\n\n\n\n                            <span class="medium-text-title csm2"> Email </span>\n\n                            <span class="excerpt"> {{merchant.email}} </span>\n\n\n\n                            <div class="clear"></div>\n\n\n\n                            <span class="medium-text-title csm2"> Téléphone </span>\n\n                            <span class="excerpt"> {{merchant.phone}} </span>\n\n\n\n                            <div class="clear"></div>\n\n\n\n                            <span class="medium-text-title csm2"> Adresse </span>\n\n                            <span class="excerpt"> {{merchant.address}} </span>\n\n                        </div>\n\n\n\n                    </ion-col>\n\n\n\n                </ion-row>\n\n\n\n            </ion-grid>\n\n\n\n            <ion-card *ngFor="let item of items">\n\n                <ion-card-header>\n\n                    <ion-icon class="icon-agenda" name="md-calendar" float-end *ngIf="item.event" (click)="linkTo()"></ion-icon>\n\n                    <span class="card-title"> {{item.merchantName}} </span>\n\n                    <span class="card-title-subtitle" *ngIf="item.type == \'merchant\' && item.city.name">\n\n                        {{item.createAt| amLocale:\'fr\' | amTimeAgo}} à {{item.city.name}} </span>\n\n                </ion-card-header>\n\n                <ion-card-content>\n\n                    <div>\n\n                        <div *ngIf="item.imageURL || item.images">\n\n                            <div *ngIf="(item.imageURL && !item.images) || (item.images && !item.imageURL && item.images.length == 1); else elseBlock">\n\n                                <div *ngIf="item.imageURL" (click)="detailsArticle(item);">\n\n                                    <img data-src="{{item.imageURL}}">\n\n                                </div>\n\n                                <div *ngFor="let img of item.images" (click)="detailsArticle(item);">\n\n                                    <img data-src="{{img.url}}">\n\n                                </div>\n\n                            </div>\n\n\n\n                            <ng-template #elseBlock>\n\n                                <ion-slides loop="true" pager>\n\n                                    <ion-slide *ngIf="item.imageURL" (click)="detailsArticle(item);">\n\n                                        <img data-src="{{item.imageURL}}">\n\n                                    </ion-slide>\n\n                                    <ion-slide *ngFor="let img of item.images" (click)="detailsArticle(item);">\n\n                                        <img data-src="{{img.url}}">\n\n                                    </ion-slide>\n\n                                </ion-slides>\n\n                            </ng-template>\n\n                            <div class="separator"></div>\n\n                        </div>\n\n\n\n                        <span class="card-title"> {{item.title}} </span>\n\n                        <p class="excerpt" [innerHtml]="item.description|truncate|nl2br"></p>\n\n                    </div>\n\n                    <div text-center>\n\n                        <button ion-button icon-left clear small (click)="detailsArticleComment(item);">\n\n                            <span class="comments-nbr"> {{item.nbreComments}}</span>\n\n                            <img src="assets/imgs/icons/comments.png" class="icon-img-action">\n\n                        </button>\n\n                        <button ion-button icon-right clear small *ngIf="!item.isLiked" (click)="like(item.id);">\n\n                            <img src="assets/imgs/icons/dislike.png" class="icon-img-action">\n\n                            <span class="likes-nbr"> {{item.nbLikes}}</span>\n\n                        </button>\n\n                        <button ion-button icon-right clear small *ngIf="item.isLiked" (click)="unlike(item.id);">\n\n                            <img src="assets/imgs/icons/like.png" class="icon-img-action">\n\n                            <span class="likes-nbr"> {{item.nbLikes}}</span>\n\n                        </button>\n\n                    </div>\n\n                </ion-card-content>\n\n            </ion-card>\n\n            <ion-infinite-scroll (ionInfinite)="doInfinite($event)" threshold="100px">\n\n                <ion-infinite-scroll-content loadingSpinner="bubbles" loadingText="Charger plus...">\n\n                </ion-infinite-scroll-content>\n\n            </ion-infinite-scroll>\n\n        </div>\n\n    </div>\n\n    <!-- fin bloc central -->\n\n    <div class="div-right" text-center>\n\n    </div>\n\n</ion-content>'/*ion-inline-end:"D:\celaneo\mobile\new-mobile\test\src\pages\merchant-sheet\merchant-sheet.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_3__providers_merchant_merchant__["a" /* MerchantProvider */],
            __WEBPACK_IMPORTED_MODULE_9__providers_eventsrest_eventsrest__["a" /* EventsrestProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_7__providers_comment_comment__["a" /* CommentProvider */],
            __WEBPACK_IMPORTED_MODULE_4__providers_globals_globals__["a" /* GlobalsProvider */],
            __WEBPACK_IMPORTED_MODULE_5__providers_article_article__["a" /* ArticleProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */]])
    ], MerchantSheetPage);
    return MerchantSheetPage;
}());

//# sourceMappingURL=merchant-sheet.js.map

/***/ }),

/***/ 129:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ButAlsoPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_globals_globals__ = __webpack_require__(8);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_eventsrest_eventsrest__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__pipes_groupitems_groupitems__ = __webpack_require__(197);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__event_details_event_details__ = __webpack_require__(55);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__ionic_native_google_analytics__ = __webpack_require__(58);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__ionic_native_calendar__ = __webpack_require__(54);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_moment__ = __webpack_require__(1);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_8_moment__);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};









/**
 * Generated class for the ButalsoPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var ButAlsoPage = /** @class */ (function () {
    function ButAlsoPage(navCtrl, navParams, appGlobals, eventService, ga, calendarPlugin, loader, appEvents, myAlert, myModal) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.appGlobals = appGlobals;
        this.eventService = eventService;
        this.ga = ga;
        this.calendarPlugin = calendarPlugin;
        this.loader = loader;
        this.appEvents = appEvents;
        this.myAlert = myAlert;
        this.myModal = myModal;
        this.page = 1;
        this.items = [];
        this.itemsDates = [];
        this.itemsg = [];
        this.eventParticipted = [];
    }
    ButAlsoPage.prototype.ionViewWillEnter = function () {
        this.appGlobals.showHeader = false;
        this.page = 1;
        this.items = [];
        this.getMaisAussiEvents();
    };
    ButAlsoPage.prototype.ionViewWillLeave = function () {
        this.appGlobals.showHeader = true;
    };
    ButAlsoPage.prototype.getMaisAussiEvents = function () {
        this.loadEvents();
    };
    ButAlsoPage.prototype.loadEvents = function () {
        var _this = this;
        var loadingPopup = this.loader.create({});
        loadingPopup.present();
        return new Promise(function () {
            _this.eventService.findAllByInterestPage(_this.page).then(function (data) {
                _this.events = data;
                for (var _i = 0, _a = _this.events; _i < _a.length; _i++) {
                    var event_1 = _a[_i];
                    var dateString = event_1.startAt;
                    var arrayDateString = dateString.split('T');
                    var arrayDate = arrayDateString[0].split('-');
                    event_1.datstart = arrayDate[0] + "-" + arrayDate[1] + "-" + arrayDate[2] + "T00:00:00";
                    _this.items.push(event_1);
                }
                var g = new __WEBPACK_IMPORTED_MODULE_4__pipes_groupitems_groupitems__["a" /* GroupitemsPipe */]();
                _this.itemsDates = [];
                _this.itemsg = g.transform(_this.items, "startAt");
                for (var _b = 0, _c = _this.itemsg; _b < _c.length; _b++) {
                    var ir = _c[_b];
                    _this.itemsDates.push(ir);
                }
                loadingPopup.dismiss();
            }, function (err) {
                loadingPopup.dismiss();
                _this.appEvents.publish('http:errors', err);
            });
        });
    };
    ButAlsoPage.prototype.doInfinite = function (infiniteScroll) {
        var _this = this;
        setTimeout(function () {
            _this.page += 1;
            _this.loadEvents();
            infiniteScroll.complete();
        }, 500);
    };
    ButAlsoPage.prototype.goBack = function () {
        this.navCtrl.pop();
    };
    ButAlsoPage.prototype.detailsEvent = function (event, withComments) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_5__event_details_event_details__["a" /* EventDetailsPage */], {
            id: event.id,
            title: event.title,
            withComments: withComments
        });
    };
    ButAlsoPage.prototype.like = function (event) {
        var _this = this;
        var label = 'participation';
        this.appEvents.publish("googleAnalytics", label);
        var loadingPopup = this.loader.create({});
        loadingPopup.present();
        var result;
        this.eventService.takePart(event.id).then(function (data) {
            loadingPopup.dismiss();
            result = data;
            if (result.success) {
                for (var _i = 0, _a = _this.items; _i < _a.length; _i++) {
                    var ev = _a[_i];
                    if (ev.id == event.id) {
                        ev.isLiked = true;
                        ev.nbParticipants++;
                    }
                }
                var addToCalendarAlert = _this.myAlert.create({
                    title: '',
                    subTitle: 'Voulez-vous ajouter cet évènement à votre agenda?',
                    buttons: [
                        {
                            text: 'Non',
                            role: 'cancel',
                            handler: function () {
                                _this.showNeedVolunteerPopup(event);
                            }
                        },
                        {
                            text: 'Oui',
                            handler: function () {
                                var start = __WEBPACK_IMPORTED_MODULE_8_moment__(event.startAt).toDate();
                                var end = __WEBPACK_IMPORTED_MODULE_8_moment__(event.endAt).toDate();
                                _this.calendarPlugin.createEvent(event.title, event.place, event.description, start, end).then(function (msg) { }, function (err) { });
                                _this.showNeedVolunteerPopup(event);
                            }
                        }
                    ]
                });
                addToCalendarAlert.present();
            }
        }, function (err) {
            loadingPopup.dismiss();
            _this.appEvents.publish('http:errors', err);
        });
    };
    ButAlsoPage.prototype.unlike = function (event) {
        var _this = this;
        var label = 'cancel participation';
        this.appEvents.publish("googleAnalytics", label);
        var loadingPopup = this.loader.create({});
        var result;
        loadingPopup.present();
        this.eventService.cancelTakePart(event.id).then(function (data) {
            loadingPopup.dismiss();
            result = data;
            var start = __WEBPACK_IMPORTED_MODULE_8_moment__(event.startAt).toDate();
            var end = __WEBPACK_IMPORTED_MODULE_8_moment__(event.endAt).toDate();
            _this.calendarPlugin.deleteEvent(event.title, event.place, '', start, end).then(function (msg) { }, function (err) { });
            if (result.success) {
                var successAlert = _this.myAlert.create({
                    title: 'Succès,',
                    subTitle: 'Votre annulation a été bien enregistrée.',
                    buttons: [
                        {
                            text: 'OK',
                            handler: function () {
                                for (var _i = 0, _a = _this.items; _i < _a.length; _i++) {
                                    var ev = _a[_i];
                                    if (ev.id == event.id) {
                                        ev.isLiked = false;
                                        ev.nbParticipants--;
                                    }
                                }
                            }
                        }
                    ]
                });
                successAlert.present();
            }
        }, function (err) {
            loadingPopup.dismiss();
            _this.appEvents.publish('http:errors', err);
        });
    };
    ButAlsoPage.prototype.showNeedVolunteerPopup = function (event) {
        var _this = this;
        if (event.needVolunteer) {
            var benevoleAlert = this.myAlert.create({
                title: '',
                subTitle: 'Voulez-vous être bénévole à cet évènement?',
                buttons: [
                    {
                        text: 'Non',
                        role: 'cancel',
                        handler: function () {
                        }
                    },
                    {
                        text: 'Oui',
                        handler: function () {
                            var label = 'volunteer';
                            _this.appEvents.publish("googleAnalytics", label);
                            var modalVolunteers = _this.myModal.create('ParticpatelaststepPage', { "id": event.id }, { cssClass: 'style-modal' });
                            modalVolunteers.present();
                        }
                    }
                ]
            });
            benevoleAlert.present();
        }
    };
    ButAlsoPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-butalso',template:/*ion-inline-start:"D:\celaneo\mobile\new-mobile\test\src\pages\butalso\butalso.html"*/'<!--\n\n  Generated template for the ButalsoPage page.\n\n\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n\n  Ionic pages and navigation.\n\n-->\n\n<ion-header class="mobile-header" *ngIf="appGlobals.token">\n\n    <ion-grid>\n\n        <ion-row>\n\n            <ion-col col-2 text-left>\n\n                <div class="item" (click)="goBack()">\n\n                    <ion-icon name="ios-arrow-back"></ion-icon>\n\n                </div>\n\n            </ion-col>\n\n            <ion-col col-8 text-center class="page-title">\n\n                <ion-title>Mais aussi</ion-title>\n\n            </ion-col>\n\n            <ion-col col-2>\n\n            </ion-col>\n\n        </ion-row>\n\n    </ion-grid>\n\n</ion-header>\n\n\n\n<ion-content>\n\n    <div class="div-left">\n\n        <div text-right class="back"><img src="assets/imgs/icons/1.png" (click)="goBack()"></div>\n\n    </div>\n\n    <div class="div-center">\n\n        <ion-refresher (ionRefresh)="doRefreshAgenda($event)">\n\n            <ion-refresher-content></ion-refresher-content>\n\n        </ion-refresher>\n\n        <ion-grid class="grid-bottom">\n\n            <ion-row>\n\n                <div class="full-width" *ngFor="let itemDate of itemsDates; let idx = index">\n\n                    <ion-card>\n\n                        <ion-card-header>\n\n                            <strong class="title-date">{{itemDate.key| amLocale:\'fr\' | amDateFormat:\' Do MMMM\'}}</strong>\n\n                            <p class="title-day" text-capitalize> {{itemDate.key| amLocale:\'fr\' | amDateFormat:\'dddd\'}}\n\n                            </p>\n\n                        </ion-card-header>\n\n                        <ion-card-content *ngFor="let item of itemDate.value">\n\n                            <ion-row class="event-item" (click)="detailsEvent(item, false)">\n\n                                <ion-col col-3>\n\n                                    <span class="start-hour">{{item.startAt| amLocale:\'fr\' |\n\n                                        amDateFormat:\'HH\'}}h{{item.startAt| amLocale:\'fr\' | amDateFormat:\'mm\'}}</span>\n\n                                </ion-col>\n\n                                <ion-col col-6>\n\n                                    <div class="bottom-margin-8"><strong class="event-title">{{item.title}}</strong></div>\n\n                                    <p text-capitalize>\n\n                                        {{item.creatorName}}\n\n                                    </p>\n\n                                    <strong>à {{item.cityName}}</strong>\n\n                                </ion-col>\n\n                                <ion-col col-3>\n\n                                    <div *ngIf="(item.imageURL && !item.images) || (item.images && !item.imageURL && item.images.length == 1); else elseBlock"\n\n                                        class="home-card-slides img-div">\n\n                                        <div class="img-div" *ngIf="item.imageURL">\n\n                                            <img class="img-div" data-src="{{item.imageURL}}" imageViewer>\n\n                                        </div>\n\n                                        <div class="img-div" *ngFor="let img of item.images">\n\n                                            <img class="img-div" data-src="{{img.url}}" imageViewer>\n\n                                        </div>\n\n                                    </div>\n\n                                    <ng-template #elseBlock>\n\n                                        <ion-slides class="home-card-slides  img-div" autoplay="5000" loop="true" pager>\n\n                                            <ion-slide class="img-div" *ngIf="item.imageURL">\n\n                                                <img class="img-div" data-src="{{item.imageURL}}" imageViewer>\n\n                                            </ion-slide>\n\n                                            <ion-slide class="img-div" *ngFor="let img of item.images">\n\n                                                <img class="img-div" data-src="{{img.url}}" imageViewer>\n\n                                            </ion-slide>\n\n                                        </ion-slides>\n\n                                    </ng-template>\n\n                                </ion-col>\n\n                            </ion-row>\n\n                            <ion-row>\n\n                                <ion-col text-right>\n\n                                    <button ion-button clear small color="primary" icon-start class="button-icon"\n\n                                        (click)="detailsEvent(item, true)">\n\n                                        <span class="comments-nbr"> {{item.nbComments}} </span><img class="icon-img-action"\n\n                                            src="assets/imgs/icons/comments.png">\n\n\n\n                                    </button>\n\n                                </ion-col>\n\n                                <ion-col text-left>\n\n                                    <button ion-button clear small color="primary" icon-start class="button-icon"\n\n                                        (click)="like(item);" *ngIf="!item.isLiked">\n\n                                        <img class="icon-img-action" src="assets/imgs/icons/dislike.png">\n\n                                        <span class="likes-nbr">{{item.nbParticipants}}</span>\n\n                                    </button>\n\n                                    <button ion-button clear small color="primary" icon-start class="button-icon"\n\n                                        (click)="unlike(item);" *ngIf="item.isLiked">\n\n                                        <img class="icon-img-action" src="assets/imgs/icons/like.png">\n\n                                        <span class="likes-nbr">{{item.nbParticipants}}</span>\n\n                                    </button>\n\n                                </ion-col>\n\n                            </ion-row>\n\n                        </ion-card-content>\n\n                    </ion-card>\n\n                </div>\n\n                <ion-col col-12 text-center *ngIf="itemsDates.length == 0">\n\n                    <p text-center class="no-result"> Pas de résultat correspondant à votre filtre.</p>\n\n                </ion-col>\n\n                <ion-infinite-scroll (ionInfinite)="doInfinite($event)">\n\n                    <ion-infinite-scroll-content></ion-infinite-scroll-content>\n\n                </ion-infinite-scroll>\n\n            </ion-row>\n\n        </ion-grid>\n\n\n\n    </div>\n\n    <div class="div-right" text-left></div>\n\n</ion-content>'/*ion-inline-end:"D:\celaneo\mobile\new-mobile\test\src\pages\butalso\butalso.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_2__providers_globals_globals__["a" /* GlobalsProvider */],
            __WEBPACK_IMPORTED_MODULE_3__providers_eventsrest_eventsrest__["a" /* EventsrestProvider */],
            __WEBPACK_IMPORTED_MODULE_6__ionic_native_google_analytics__["a" /* GoogleAnalytics */],
            __WEBPACK_IMPORTED_MODULE_7__ionic_native_calendar__["a" /* Calendar */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */]])
    ], ButAlsoPage);
    return ButAlsoPage;
}());

//# sourceMappingURL=butalso.js.map

/***/ }),

/***/ 130:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return MerchantCardPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_association_association__ = __webpack_require__(36);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_globals_globals__ = __webpack_require__(8);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_moment__ = __webpack_require__(1);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_moment__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__providers_comment_comment__ = __webpack_require__(22);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__providers_eventsrest_eventsrest__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__ionic_native_calendar__ = __webpack_require__(54);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__detail_article_detail_article__ = __webpack_require__(56);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__providers_merchant_merchant__ = __webpack_require__(39);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__providers_goodplanrest_goodplanrest__ = __webpack_require__(72);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__good_plan_details_good_plan_details__ = __webpack_require__(105);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};












/**
 * Generated class for the MerchantCardPage page.
 *
 * See http://ionicframework.com/docs/components/#navigation for more info
 * on Ionic pages and navigation.
 */
var MerchantCardPage = /** @class */ (function () {
    function MerchantCardPage(navCtrl, navParams, alertCtrl, associationService, loader, appEvents, calendarPlugin, appGlobals, merchantService, commentService, modal, serviceEvent, event, goodPlanService) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.alertCtrl = alertCtrl;
        this.associationService = associationService;
        this.loader = loader;
        this.appEvents = appEvents;
        this.calendarPlugin = calendarPlugin;
        this.appGlobals = appGlobals;
        this.merchantService = merchantService;
        this.commentService = commentService;
        this.modal = modal;
        this.serviceEvent = serviceEvent;
        this.event = event;
        this.goodPlanService = goodPlanService;
        this.page = 0;
        this.items = [];
        this.numberComments = 0;
        this.eventParticipted = [];
        this.cacheLifeTime = 3600;
        this.allowInfiniteScroll = true;
        this.currentMerchant = this.navParams.get('currentMerchant');
    }
    MerchantCardPage.prototype.ionViewDidLoad = function () {
    };
    MerchantCardPage.prototype.ionViewWillEnter = function () {
        this.appGlobals.showFooter = true;
        this.appGlobals.showHeader = false;
        this.appGlobals.currentPageLogo = null;
        this.appEvents.publish('updateFooter');
        this.items = [];
        this.page = 1;
        this.getCurrentAssociationDetails();
    };
    MerchantCardPage.prototype.ionViewDidEnter = function () {
        if (this.appGlobals.currentPageid == "goodplans") {
            this.appGlobals.currentPageid = "goodplans";
        }
        else {
            this.appGlobals.currentPageid = "mySpace";
        }
        this.appEvents.publish('updateFooter');
    };
    MerchantCardPage.prototype.ionViewWillLeave = function () {
        this.page = 1;
        this.appGlobals.showFooter = true;
        this.appGlobals.showHeader = true;
    };
    MerchantCardPage.prototype.getCurrentAssociationDetails = function () {
        var _this = this;
        var loadingPopup = this.loader.create({});
        loadingPopup.present();
        this.getAssociationArticle(loadingPopup);
        this.merchantService.getDetails(this.currentMerchant.creatorId).then(function (data) {
            _this.association = data;
            _this.appGlobals.currentPageTitle = _this.association.name;
        }, function (err) {
            loadingPopup.dismiss();
            _this.appEvents.publish('http:errors', err);
        });
    };
    MerchantCardPage.prototype.getAssociationArticle = function (loadingPopup) {
        var _this = this;
        var page = 0;
        this.merchantService.getMerchantCard(this.currentMerchant.creatorId, page, 4).then(function (data) {
            _this.articles = data;
            for (var _i = 0, _a = _this.articles; _i < _a.length; _i++) {
                var article = _a[_i];
                _this.items.push(article);
            }
            _this.articles = [];
            loadingPopup.dismiss();
        }, function (err) {
            loadingPopup.dismiss();
            _this.appEvents.publish('http:errors', err);
        });
    };
    MerchantCardPage.prototype.detailsArticle = function (article) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_8__detail_article_detail_article__["a" /* DetailArticlePage */], {
            article: article
        });
    };
    MerchantCardPage.prototype.goBack = function () {
        this.navCtrl.pop();
    };
    MerchantCardPage.prototype.detailsEvent = function (event, withComments) {
        this.appGlobals.currentEvent = event;
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_11__good_plan_details_good_plan_details__["a" /* GoodPlanDetailsPage */], {
            id: event.id,
            title: event.title,
            withComments: withComments
        });
    };
    MerchantCardPage.prototype.doInfinite = function (infiniteScroll) {
        var _this = this;
        if (this.allowInfiniteScroll == false) {
            infiniteScroll.complete();
        }
        else {
            this.page += 1;
            this.merchantService.getMerchantCard(this.id, this.page, 4).then(function (data) {
                if (data.length == 0) {
                    _this.allowInfiniteScroll = false;
                    infiniteScroll.complete();
                }
                else {
                    _this.articles = data;
                    for (var _i = 0, _a = _this.articles; _i < _a.length; _i++) {
                        var article = _a[_i];
                        _this.items.push(article);
                    }
                    _this.articles = [];
                    infiniteScroll.complete();
                }
            }, function (err) {
                infiniteScroll.complete();
            });
        }
    };
    MerchantCardPage.prototype.showMembershipPopUp = function (id) {
        var myModal2 = this.modal.create('PopinMembershipAssociationPage', { id: id }, { cssClass: 'style-modal choice-modal' });
        myModal2.onDidDismiss(function () {
        });
        this.appGlobals.isFromMerchant = true;
        myModal2.present();
    };
    MerchantCardPage.prototype.showHideContactBar = function (id) {
        this.appGlobals.goodPlanCreatorId = id;
        if (!this.appGlobals.showcontactBar) {
            this.appGlobals.showcontactBar = true;
        }
        else {
            this.appGlobals.showcontactBar = false;
        }
    };
    MerchantCardPage.prototype.showHidePutAgenda = function (event) {
        var _this = this;
        if (!this.appGlobals.showPutAgenda) {
            this.appGlobals.showPutAgenda = true;
        }
        else {
            this.appGlobals.showPutAgenda = false;
        }
        this.goodPlanService.takePart(event.id).then(function (data) {
            _this.appGlobals.currentEvent = event;
            event.isParticipated = true;
            event.nbParticipants++;
            event = data.event;
        }, function (err) {
            _this.appEvents.publish('http:errors', err);
        });
    };
    MerchantCardPage.prototype.cancelParticipation = function (event) {
        var _this = this;
        var result;
        this.goodPlanService.cancelTakePart(event.id).then(function (data) {
            result = data;
            var start = __WEBPACK_IMPORTED_MODULE_4_moment__(event.startAt).toDate();
            var end = __WEBPACK_IMPORTED_MODULE_4_moment__(event.endAt).toDate();
            _this.calendarPlugin.deleteEvent(event.title, event.place, '', start, end).then(function (msg) {
            }, function (err) {
            });
            if (result.success) {
                event.isParticipated = false;
                event.nbParticipants--;
                event = data.event;
                var myModal2 = _this.modal.create('PopupPage', { "message": "<p>Votre annulation a été bien enregistrée ! </p>" }, { cssClass: 'message-modal' });
                myModal2.onDidDismiss(function () {
                });
                myModal2.present();
            }
        }, function (err) {
            _this.appEvents.publish('http:errors', err);
        });
    };
    MerchantCardPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-merchant-card',template:/*ion-inline-start:"D:\celaneo\mobile\new-mobile\test\src\pages\merchant-card\merchant-card.html"*/'<!--\n\n  Generated template for the CommercialSheetPage page.\n\n\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n\n  Ionic pages and navigation.\n\n-->\n\n<ion-header class="mobile-header" *ngIf="appGlobals.token">\n\n  <ion-grid>\n\n    <ion-row>\n\n      <ion-col col-2 text-left>\n\n        <div class="item" (click)="goBack()">\n\n          <ion-icon name="ios-arrow-back"></ion-icon>\n\n        </div>\n\n      </ion-col>\n\n      <ion-col col-8 text-center class="page-title">\n\n        <ion-title>{{appGlobals.currentPageTitle}}</ion-title>\n\n      </ion-col>\n\n      <ion-col col-2>\n\n      </ion-col>\n\n    </ion-row>\n\n  </ion-grid>\n\n</ion-header>\n\n<ion-content text-center>\n\n  <div class="div-left">\n\n    <div text-right class="back"><img src="assets/imgs/icons/1.png" (click)="goBack()"></div>\n\n  </div>\n\n  <!--bloc central -->\n\n  <div class="div-center">\n\n    <div *ngIf="association">\n\n      <ion-grid class="custom-grid">\n\n        <ion-row>\n\n          <ion-col>\n\n            <div text-left class="csm1">\n\n              <span class="medium-text-title"> Description </span>\n\n\n\n              <p class="excerpt">\n\n                {{association.description}}\n\n              </p>\n\n\n\n              <span class="medium-text-title csm2"> Email </span>\n\n              <span class="excerpt"> {{association.email}} </span>\n\n\n\n              <div class="clear"></div>\n\n\n\n              <span class="medium-text-title csm2"> Téléphone </span>\n\n              <span class="excerpt"> {{association.phone}} </span>\n\n\n\n              <div class="clear"></div>\n\n\n\n              <span class="medium-text-title csm2"> Adresse </span>\n\n              <span class="excerpt"> {{association.address}} </span>\n\n            </div>\n\n            <button *ngIf="!association.isMember" class="search-button button-big" ion-button color="primary" (click)="showMembershipPopUp(association.id)" round>Demander à adhérer</button>\n\n\n\n          </ion-col>\n\n\n\n        </ion-row>\n\n\n\n      </ion-grid>\n\n\n\n      <!-- <ion-card *ngFor="let item of items">\n\n           <ion-card-header>\n\n               <span class="card-title titleAsso"> {{item.associationName}} </span>\n\n               <p text-left>\n\n                   <img alt="NOUS-Ensemble" class="icon-agenda move img-calendar" float-end="" src="assets/imgs/icons/calendar.png">\n\n                   <span class="card-title-subtitle" *ngIf="item.type == \'association\' && item.city">\n\n                       {{item.createAt| amLocale:\'fr\' | amTimeAgo}} à {{item.city}} </span>\n\n               </p>\n\n           </ion-card-header>\n\n           <ion-card-content>\n\n               <div>\n\n                   <div *ngIf="item.imageURL || item.images">\n\n                       <div *ngIf="(item.imageURL && !item.images) || (item.images && !item.imageURL && item.images.length == 1); else elseBlock">\n\n                           <div *ngIf="item.imageURL" (click)="detailsArticle(item);">\n\n                               <img data-src="{{item.imageURL}}">\n\n                           </div>\n\n                           <div *ngFor="let img of item.images" (click)="detailsArticle(item);">\n\n                               <img data-src="{{img.url}}">\n\n                           </div>\n\n                       </div>\n\n\n\n                       <ng-template #elseBlock>\n\n                           <ion-slides loop="true" pager (click)="detailsArticle(item);">\n\n                               <ion-slide *ngIf="item.imageURL">\n\n                                   <img data-src="{{item.imageURL}}">\n\n                               </ion-slide>\n\n                               <ion-slide *ngFor="let img of item.images">\n\n                                   <img data-src="{{img.url}}">\n\n                               </ion-slide>\n\n                           </ion-slides>\n\n                       </ng-template>\n\n                       <div class="separator"></div>\n\n                   </div>\n\n\n\n                   <span class="card-title"> {{item.title}} </span>\n\n                   <p class="excerpt" [innerHtml]="item.description|truncate|nl2br"></p>\n\n               </div>\n\n               <div text-center>\n\n\n\n                   <ion-col class="no-padding " text-right>\n\n\n\n                       <button class="disociate-button-comment" ion-button clear small color="primary" icon-start\n\n                           (click)="detailsArticleComment(item);">\n\n                           <span class="comments-nbr">{{item.nbreComments}}</span>\n\n                       </button>\n\n                       <span class="disociate-actions"><img class="news-comment-action dissociate-comment" src="assets/imgs/icons/comments.png"></span>\n\n\n\n                   </ion-col>\n\n\n\n                   <ion-col class="no-padding " text-left>\n\n\n\n                       <button class="disociate-button-like" ion-button clear small color="primary" icon-start\n\n                           *ngIf="!item.isLiked" (click)="like(item.id);">\n\n                           <span class="likes-nbr"> {{item.nbLikes}}</span>\n\n                       </button>\n\n                       <span *ngIf="!item.isLiked" class="disociate-actions"><img class="news-comment-action dissociate-like"\n\n                               src="assets/imgs/icons/dislike.png"></span>\n\n\n\n                       <button class="disociate-button-like" ion-button clear small color="primary" icon-start\n\n                           *ngIf="item.isLiked" (click)="unlike(item.id);">\n\n                           <span class="likes-nbr"> {{item.nbLikes}}</span>\n\n                       </button>\n\n                       <span *ngIf="item.isLiked" class="disociate-actions"> <img class="news-comment-action dissociate-like"\n\n                               src="assets/imgs/icons/like.png"></span>\n\n\n\n                   </ion-col>\n\n\n\n\n\n\n\n\n\n\n\n                   &lt;!&ndash; <button ion-button icon-left clear small (click)="detailsArticleComment(item);">\n\n                           <span class="comments-nbr"> {{item.nbreComments}}</span>\n\n                       <img src="assets/imgs/icons/comments.png" class="icon-img-action">\n\n                   </button>\n\n                   <button ion-button icon-right clear small *ngIf="!item.isLiked" (click)="like(item.id);">\n\n                           <img src="assets/imgs/icons/dislike.png" class="icon-img-action">\n\n                       <span class="likes-nbr"> {{item.nbLikes}}</span>\n\n                   </button>\n\n                   <button ion-button icon-right clear small *ngIf="item.isLiked" (click)="unlike(item.id);">\n\n                           <img src="assets/imgs/icons/like.png" class="icon-img-action">\n\n                       <span class="likes-nbr"> {{item.nbLikes}}</span>\n\n                   </button> &ndash;&gt;\n\n               </div>\n\n           </ion-card-content>\n\n       </ion-card>-->\n\n      <ion-card *ngFor="let item of items">\n\n        <ion-card-content>\n\n          <ion-card-title class="titleAsso display-block" text-left *ngIf="item.type == \'association\'">\n\n            {{item.associationName}}</ion-card-title>\n\n          <ion-card-title class="titleAsso display-block" text-left *ngIf="item.type == \'merchant\'">\n\n            {{item.merchantName}}</ion-card-title>\n\n          <ion-card-title class="display-block" text-left *ngIf="item.type == \'community\'"> {{item.community}}\n\n          </ion-card-title>\n\n          <ion-card-title class="display-block" text-left *ngIf="item.type == \'survey\'" (click)="detailsSurvey(item);"> {{item.community}}\n\n          </ion-card-title>\n\n          <ion-card-title class="display-block" text-left *ngIf="item.type == \'user\'"> {{item.userFirstname}} {{item.userLastname}}\n\n          </ion-card-title>\n\n          <p text-left>\n\n                    <span >\n\n                        <span >{{item.createAt| amLocale:\'fr\' | amTimeAgo }}</span>\n\n\n\n                        <span >à {{item.city}}</span>\n\n\n\n                    </span>\n\n\n\n            <img float-end *ngIf="item.event"\n\n                 class="icon-agenda move img-calendar" src="assets/imgs/icons/calendar.png" alt="NOUS-Ensemble" />\n\n            <img float-end *ngIf="item.private" class="move lock-icons" src="assets/imgs/icons/lock.png" alt="NOUS-Ensemble" />\n\n            <img float-end *ngIf="item.type == \'survey\'" class="move survey-icons" src="assets/imgs/icons/article.png" alt="NOUS-Ensemble" (click)="detailsSurvey(item);" />\n\n            <!-- <ion-icon class="icon-agenda move" name="md-calendar" float-end *ngIf="item.event" (click)="detailsEvent(item.event, item.title, false, item.moderateEvent)"></ion-icon> -->\n\n            <span *ngIf="item.type == \'community\' && item.city">à {{item.city}}</span>\n\n          </p>\n\n          <div *ngIf="item.imageURL || item.images" class="card-item-divider">\n\n            <div *ngIf="(item.imageURL && !item.images) || (item.images && !item.imageURL && item.images.length == 1); else elseBlock">\n\n              <div *ngIf="item.imageURL && item.type != \'survey\' " (click)="detailsEvent(item,true);">\n\n                <img data-src="{{item.imageURL}}">\n\n              </div>\n\n              <div *ngFor="let img of item.images" (click)="detailsEvent(item,true)">\n\n                <img data-src="{{img.url}}">\n\n              </div>\n\n              <div *ngIf="item.imageURL && item.type == \'survey\' " (click)="detailsSurvey(item)">\n\n                <img data-src="{{item.imageURL}}">\n\n              </div>\n\n            </div>\n\n\n\n            <ng-template #elseBlock>\n\n              <ion-slides loop="true" pager>\n\n                <ion-slide *ngIf="item.imageURL" (click)="detailsEvent(item,true)">\n\n                  <img data-src="{{item.imageURL}}">\n\n                </ion-slide>\n\n                <ion-slide *ngFor="let img of item.images" (click)="detailsEvent(item,true)">\n\n                  <img data-src="{{img.url}}">\n\n                </ion-slide>\n\n              </ion-slides>\n\n            </ng-template>\n\n          </div>\n\n          <ion-card-title class="title-article" text-left>\n\n            <div class="div-title" (click)="detailsEvent(item,true)" >{{item.title}}</div>\n\n\n\n          </ion-card-title>\n\n\n\n          <p text-left [innerHtml]="item.description|truncate|nl2br" *ngIf="item.type != \'survey\'"></p>\n\n\n\n        </ion-card-content>\n\n\n\n        <ion-row class="comment-text-style news-align-center" *ngIf="item.type != \'survey\'">\n\n          <ion-col class="text-grey" *ngIf="item.type != \'community\' || (item.addComments && item.type == \'community\' ) ">\n\n            <span  *ngIf="item.nbreComments <= 1" (click)="detailsEvent(item,true)">{{item.nbreComments}} Commentaire</span>\n\n            <span  *ngIf="item.nbreComments > 1" (click)="detailsEvent(item,true)">{{item.nbreComments}} Commentaires</span>\n\n          </ion-col>\n\n          <ion-col>\n\n            <img class="comment-img-style" src="assets/imgs/icons/list-divider.png">\n\n          </ion-col>\n\n          <ion-col class="text-grey">\n\n            <span *ngIf="item.nbLikes <= 1"> {{item.nbLikes}} Intérêt</span>\n\n            <span *ngIf="item.nbLikes > 1"> {{item.nbLikes}} Intérêts</span>\n\n          </ion-col>\n\n        </ion-row>\n\n\n\n        <ion-row padding-bottom *ngIf="item.type != \'survey\'">\n\n          <ion-col class="no-padding " text-right *ngIf="item.type != \'community\' || (item.addComments && item.type == \'community\' ) ">\n\n            <span class="disociate-actions" (click)="detailsEvent(item,true)" ><img class="news-comment-action dissociate-comment" src="assets/imgs/icons/comments.png"></span>\n\n          </ion-col>\n\n\n\n          <ion-col class="no-padding text-center" text-left>\n\n\n\n                    <span *ngIf="!item.isParticipated" class="disociate-actions text-center" (click)="showHidePutAgenda(item)"><img class="news-comment-action dissociate-like"\n\n                                                                                                                    src="assets/imgs/icons/star-empty.png"></span>\n\n\n\n            <span *ngIf="item.isParticipated" class="disociate-actions text-center" (click)="cancelParticipation(item)"> <img class="news-comment-action dissociate-like"\n\n                                                                                                              src="assets/imgs/icons/star-full.png"></span>\n\n          </ion-col>\n\n\n\n          <ion-col class="no-padding " text-right>\n\n            <span class="disociate-actions" (click)="showHideContactBar(item.id);" ><img class="news-comment-action dissociate-share" src="assets/imgs/contact-merchant.png"></span>\n\n          </ion-col>\n\n\n\n        </ion-row>\n\n      </ion-card>\n\n      <ion-infinite-scroll (ionInfinite)="doInfinite($event)" threshold="100px">\n\n        <ion-infinite-scroll-content loadingSpinner="bubbles" loadingText="Charger plus...">\n\n        </ion-infinite-scroll-content>\n\n      </ion-infinite-scroll>\n\n    </div>\n\n  </div>\n\n  <!-- fin bloc central -->\n\n  <div class="div-right" text-center>\n\n  </div>\n\n</ion-content>'/*ion-inline-end:"D:\celaneo\mobile\new-mobile\test\src\pages\merchant-card\merchant-card.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_2__providers_association_association__["a" /* AssociationProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_7__ionic_native_calendar__["a" /* Calendar */],
            __WEBPACK_IMPORTED_MODULE_3__providers_globals_globals__["a" /* GlobalsProvider */],
            __WEBPACK_IMPORTED_MODULE_9__providers_merchant_merchant__["a" /* MerchantProvider */],
            __WEBPACK_IMPORTED_MODULE_5__providers_comment_comment__["a" /* CommentProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_6__providers_eventsrest_eventsrest__["a" /* EventsrestProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_10__providers_goodplanrest_goodplanrest__["a" /* GoodplanrestProvider */]])
    ], MerchantCardPage);
    return MerchantCardPage;
}());

//# sourceMappingURL=merchant-card.js.map

/***/ }),

/***/ 131:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return NumberCategoryPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_globals_globals__ = __webpack_require__(8);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_user_user__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__pages_number_number__ = __webpack_require__(207);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__pages_association_list_association_list__ = __webpack_require__(489);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__pages_merchant_list_merchant_list__ = __webpack_require__(490);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__providers_eventsrest_eventsrest__ = __webpack_require__(9);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};








/**
 * Generated class for the NumberCategoryPage page.
 *
 * See http://ionicframework.com/docs/components/#navigation for more info
 * on Ionic pages and navigation.
 */
var NumberCategoryPage = /** @class */ (function () {
    function NumberCategoryPage(event, globals, navCtrl, serviceEvent, navParams, loader, myAlert, myModal, userService, loadingCtrl) {
        var _this = this;
        this.event = event;
        this.globals = globals;
        this.navCtrl = navCtrl;
        this.serviceEvent = serviceEvent;
        this.navParams = navParams;
        this.loader = loader;
        this.myAlert = myAlert;
        this.myModal = myModal;
        this.userService = userService;
        this.loadingCtrl = loadingCtrl;
        this.globals.currentPageTitle = "Acteurs locaux";
        var loadingPopup = this.loadingCtrl.create({});
        loadingPopup.present();
        this.idHeading = navParams.get('data');
        this.pageTitle = navParams.get('name');
        this.community = JSON.parse(localStorage.getItem('currentCommunity'));
        this.userService.findLocalActor(this.idHeading).then(function (data) {
            _this.categories = data;
            loadingPopup.dismiss();
        }, function (err) {
            loadingPopup.dismiss();
            _this.event.publish('http:errors', err);
        });
    }
    NumberCategoryPage.prototype.deciedAction = function (item) {
        if (item.name == 'Groupes/Associations') {
            this.associationsList(this.community);
        }
        else if (item.name == 'Commerces/Partenaires') {
            this.merchantsList(this.community);
        }
        else {
            this.showNumbers(item);
        }
    };
    NumberCategoryPage.prototype.showNumbers = function (item) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_4__pages_number_number__["a" /* NumberPage */], {
            category: item,
            categories: this.categories
        });
    };
    NumberCategoryPage.prototype.ionViewWillEnter = function () {
        this.globals.currentPageTitle = "Acteurs locaux";
        this.globals.showHeader = false;
    };
    NumberCategoryPage.prototype.associationsList = function (community) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_5__pages_association_list_association_list__["a" /* AssociationListPage */], {
            community: community
        });
    };
    NumberCategoryPage.prototype.merchantsList = function (community) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_6__pages_merchant_list_merchant_list__["a" /* MerchantListPage */], {
            community: community
        });
    };
    NumberCategoryPage.prototype.goBack = function () {
        this.navCtrl.pop();
    };
    NumberCategoryPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-number-category',template:/*ion-inline-start:"D:\celaneo\mobile\new-mobile\test\src\pages\number-category\number-category.html"*/'<!--\n\n  Generated template for the NumberCategoryPage page.\n\n\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n\n  Ionic pages and navigation.\n\n-->\n\n<ion-header class="mobile-header" *ngIf="globals.token">\n\n    <ion-grid>\n\n        <ion-row>\n\n            <ion-col col-2 text-left>\n\n                <div class="item">\n\n                    <ion-icon name="ios-arrow-back" (click)="goBack()"></ion-icon>\n\n                </div>\n\n            </ion-col>\n\n            <ion-col col-8 text-center class="page-title">\n\n                <ion-title> {{pageTitle}} </ion-title>\n\n            </ion-col>\n\n            <ion-col col-2 text-right>\n\n                <div class="block-image" *ngIf="currentUser && currentUser.cityhall">\n\n                    <img *ngIf="currentUser.cityhall.image_url" src="{{currentUser.cityhall.image_url}}" class="user-img">\n\n                    <img *ngIf="!currentUser.cityhall.image_url" src="assets/imgs/icons/user_default.png" class="user-img">\n\n                </div>\n\n\n\n            </ion-col>\n\n        </ion-row>\n\n    </ion-grid>\n\n</ion-header>\n\n\n\n<ion-content padding>\n\n    <div class="div-left div-left-top">\n\n        <div text-right class="back"><img src="assets/imgs/icons/1.png" (click)="goBack()"></div>\n\n    </div>\n\n    <!--bloc central -->\n\n    <div class="div-center">\n\n        <ion-grid padding-top padding-bottom class="no-padding grid M bar-custom grid-bottom">\n\n\n\n            <ion-row>\n\n\n\n                <ion-col padding margin-bottom>\n\n                    <ion-list class="category-number">\n\n                        <ion-item (click)="deciedAction(item)" *ngFor="let item of categories">\n\n                            <ion-label class="labelWhiteSpace">{{ item.name }}</ion-label>\n\n                            <ion-icon item-end name="ios-arrow-forward"></ion-icon>\n\n                        </ion-item>\n\n                    </ion-list>\n\n                </ion-col>\n\n\n\n            </ion-row>\n\n\n\n        </ion-grid>\n\n\n\n    </div>\n\n    <!-- fin bloc central -->\n\n    <div class="div-right" text-center>\n\n    </div>\n\n</ion-content>'/*ion-inline-end:"D:\celaneo\mobile\new-mobile\test\src\pages\number-category\number-category.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_2__providers_globals_globals__["a" /* GlobalsProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_7__providers_eventsrest_eventsrest__["a" /* EventsrestProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_3__providers_user_user__["a" /* UserProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */]])
    ], NumberCategoryPage);
    return NumberCategoryPage;
}());

//# sourceMappingURL=number-category.js.map

/***/ }),

/***/ 132:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return MapPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_app_app__ = __webpack_require__(38);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_user_user__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__pipes_truncate_truncate__ = __webpack_require__(491);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__providers_globals_globals__ = __webpack_require__(8);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__providers_eventsrest_eventsrest__ = __webpack_require__(9);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







var MapPage = /** @class */ (function () {
    function MapPage(appGlobals, userService, modal, appService, event, serviceEvent, loadingCtrl, alertCtrl, navCtrl, loader, myAlert, appEvents, myModal, platform, navParams) {
        var _this = this;
        this.appGlobals = appGlobals;
        this.userService = userService;
        this.modal = modal;
        this.appService = appService;
        this.event = event;
        this.serviceEvent = serviceEvent;
        this.loadingCtrl = loadingCtrl;
        this.alertCtrl = alertCtrl;
        this.navCtrl = navCtrl;
        this.loader = loader;
        this.myAlert = myAlert;
        this.appEvents = appEvents;
        this.myModal = myModal;
        this.navParams = navParams;
        this.toggleCategory = false;
        this.markersArray = [];
        this.items = [];
        this.works = [];
        this.showFilter = false;
        this.idHeading = navParams.get('data');
        this.community = JSON.parse(localStorage.getItem('currentCommunity'));
        this.appGlobals.currentPageTitle = this.community.name;
        this.event.publish('user:current');
        this.currentUser = localStorage.getItem('currentUser');
        var loadingPopup = this.loadingCtrl.create({});
        loadingPopup.present();
        Promise.all([this.appService.getInterestCategories(this.idHeading)]).then(function (data) {
            _this.categories = data[0];
            loadingPopup.dismiss();
        }, function (err) {
            loadingPopup.dismiss();
            _this.event.publish('http:errors', err);
        });
    }
    MapPage.prototype.ionViewDidLoad = function () {
        this.loadMap(this.idHeading);
    };
    MapPage.prototype.ionViewWillEnter = function () {
        this.appGlobals.showHeader = false;
    };
    MapPage.prototype.addInfoWindow = function (marker, content) {
        var _this = this;
        var infoWindow = new google.maps.InfoWindow({
            content: content
        });
        google.maps.event.addListener(marker, 'click', function () {
            infoWindow.open(_this.map, marker);
        });
        return infoWindow;
    };
    MapPage.prototype.loadMap = function (id) {
        var _this = this;
        this.appService.findCommunityLocationByMapHeading(id).then(function (data) {
            var content = "<h4>Ma Ville</h4>";
            _this.centerPosition(parseFloat(data.latitude), parseFloat(data.longitude), content);
        }, function (err) {
            _this.event.publish('http:errors', err);
        });
    };
    MapPage.prototype.centerPosition = function (latitude, longitude, content) {
        var _this = this;
        var latLng = new google.maps.LatLng(latitude, longitude);
        var mapOptions = {
            center: latLng,
            zoom: 5,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        this.map = new google.maps.Map(this.mapElement.nativeElement, mapOptions);
        // add markers
        var markerGreen = {
            url: "assets/imgs/icons/marker-green.png",
            scaledSize: new google.maps.Size(39, 51),
            origin: new google.maps.Point(0, 0),
            anchor: new google.maps.Point(0, 0) // anchor
        };
        var marker = new google.maps.Marker({
            map: this.map,
            animation: google.maps.Animation.DROP,
            position: this.map.getCenter(),
            icon: markerGreen,
        });
        this.addInfoWindow(marker, content);
        this.appService.getWorks(this.idHeading).then(function (data) {
            _this.works = data;
            for (var _i = 0, _a = _this.works; _i < _a.length; _i++) {
                var work = _a[_i];
                _this.addWorkMarker(work);
            }
        });
    };
    MapPage.prototype.categoriesChange = function (id, isChecked) {
        if (isChecked) {
            this.items.push(id);
        }
        else {
            var index = this.items.indexOf(id);
            if (index !== -1) {
                this.items.splice(index, 1);
            }
        }
    };
    MapPage.prototype.mapFilter = function () {
        var _this = this;
        var loadingPopup = this.loadingCtrl.create({});
        loadingPopup.present();
        this.userService.getMapInterest(this.items).then(function (data) {
            _this.markers = data;
            _this.markersArray.forEach(function (marker) {
                marker.setMap(null);
            });
            _this.markersArray = [];
            if (_this.markers) {
                _this.markers.forEach(function (interest) {
                    _this.markersArray.push(_this.addMarker(interest));
                });
            }
            loadingPopup.dismiss();
            _this.showFilter = false;
        }, function (err) {
            loadingPopup.dismiss();
            _this.event.publish('http:errors', err);
        });
    };
    MapPage.prototype.addMarker = function (interest) {
        var _this = this;
        var markerRed = {
            url: "assets/imgs/icons/marker-red.png",
            scaledSize: new google.maps.Size(39, 51),
            origin: new google.maps.Point(0, 0),
            anchor: new google.maps.Point(0, 0) // anchor
        };
        var latLng = new google.maps.LatLng(interest.latitude, interest.longitude);
        var marker = new google.maps.Marker({
            position: latLng,
            map: this.map,
            animation: google.maps.Animation.DROP,
            title: interest.title,
            icon: markerRed,
        });
        var content = '<ion-card class="pro-card">' +
            '<ion-row class="row-pro-action-top" no-padding>' +
            '<ion-card-content>' +
            '<img src="' + (typeof interest.image_url !== "undefined" ? interest.image_url : "") + '"(click)="showInterest();"  />' +
            '<ion-card-title class="title">' + interest.title + '</ion-card-title>';
        if (interest.openFrom && interest.openTo) {
            content += '<p class="time-open">Ouvert de ' + interest.openFrom + ' à ' + interest.openTo + '</p>';
        }
        content += '<p>' + new __WEBPACK_IMPORTED_MODULE_4__pipes_truncate_truncate__["a" /* truncate */]().transform(interest.description) + '</p>' +
            '</ion-card-content>' +
            '<ion-row no-padding>' +
            '<ion-col class="white-background">' +
            '<button id="show' + interest.id + '" class="white-background green-button" ion-button icon-left clear small >' +
            '<ion-icon name="add-circle"></ion-icon>' +
            '<div >Afficher la suite</div>' +
            '</button>' +
            '</ion-col>' +
            '</ion-row>' +
            '</ion-card>';
        var infoWindow = this.addInfoWindow(marker, content);
        // add listener that will capture the click event of the infoWindow
        google.maps.event.addListener(infoWindow, 'domready', function () {
            document.getElementById('show' + interest.id).addEventListener('click', function () {
                _this.detailsInterest(interest);
            }, false);
        });
        return marker;
    };
    MapPage.prototype.detailsInterest = function (interest) {
        var myModal2 = this.modal.create('InterestDetailsPage', { "interest": interest }, { cssClass: 'style-modal' });
        myModal2.present();
    };
    MapPage.prototype.addWorkMarker = function (work) {
        var markerYellow = {
            url: "assets/imgs/icons/marker-yellow.png",
            scaledSize: new google.maps.Size(39, 51),
            origin: new google.maps.Point(0, 0),
            anchor: new google.maps.Point(0, 0) // anchor
        };
        var latLng = new google.maps.LatLng(work.latitude, work.longitude);
        var marker = new google.maps.Marker({
            position: latLng,
            map: this.map,
            animation: google.maps.Animation.DROP,
            title: work.title,
            icon: markerYellow,
        });
        var content = '<ion-card class="pro-card">' +
            '<ion-row class="row-pro-action-top" no-padding>' +
            '<ion-card-content>' +
            '<ion-card-title class="title">' + work.title + '</ion-card-title>';
        content += '<p>' + new __WEBPACK_IMPORTED_MODULE_4__pipes_truncate_truncate__["a" /* truncate */]().transform(work.description) + '</p>' +
            '</ion-card-content>' +
            '<ion-row no-padding>' +
            '<ion-col class="white-background">' +
            '</ion-col>' +
            '</ion-row>' +
            '</ion-card>';
        this.addInfoWindow(marker, content);
    };
    MapPage.prototype.toggleCategoryChange = function () {
        this.showFilter = !this.showFilter;
    };
    MapPage.prototype.goBack = function () {
        this.navCtrl.pop();
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["ViewChild"])('map'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_0__angular_core__["ElementRef"])
    ], MapPage.prototype, "mapElement", void 0);
    MapPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-map',template:/*ion-inline-start:"D:\celaneo\mobile\new-mobile\test\src\pages\map\map.html"*/'<!--\n\n  Generated template for the MapPage page.\n\n\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n\n  Ionic pages and navigation.\n\n-->\n\n<ion-header class="mobile-header" *ngIf="appGlobals.token">\n\n    <ion-grid>\n\n        <ion-row>\n\n            <ion-col col-2 text-left>\n\n                <div class="item">\n\n                    <ion-icon name="ios-arrow-back" (click)="goBack()"></ion-icon>\n\n                </div>\n\n            </ion-col>\n\n            <ion-col col-8 text-center class="page-title">\n\n                <ion-title>{{community.name}}</ion-title>\n\n            </ion-col>\n\n            <ion-col col-2 text-right>\n\n                <ion-avatar class="blason">\n\n                    <img src="{{community.img_url}}">\n\n                </ion-avatar>\n\n\n\n            </ion-col>\n\n        </ion-row>\n\n    </ion-grid>\n\n</ion-header>\n\n<ion-content padding>\n\n    <div class="div-left">\n\n        <div text-right class="back"><img src="assets/imgs/icons/1.png" (click)="goBack()"></div>\n\n    </div>\n\n    <!--bloc central -->\n\n    <div class="div-center">\n\n\n\n        <div class="content-page-list bar-custom">\n\n            <div class="map-filter">\n\n                <!--ion-icon class="icon" name="md-arrow-dropdown"></ion-icon-->\n\n                <div (click)="toggleCategoryChange();">\n\n                    <ion-icon class="icon" name="md-arrow-dropright" *ngIf="!showFilter"></ion-icon>\n\n                    <ion-icon class="icon" name="md-arrow-dropdown" *ngIf="showFilter"></ion-icon>\n\n                    <span>Filtres</span>\n\n                </div>\n\n\n\n                <ion-grid *ngIf="showFilter">\n\n                    <ion-row>\n\n                        <ion-item col-6 *ngFor="let category of categories">\n\n                            <ion-label>{{category.name}}</ion-label>\n\n                            <ion-checkbox value="category.id"\n\n                                          (ionChange)="categoriesChange(category.id, $event.checked)"></ion-checkbox>\n\n                        </ion-item>\n\n\n\n                    </ion-row>\n\n                </ion-grid>\n\n                <button class="filter-map-button button-ok" ion-button color="primary" round *ngIf="showFilter"\n\n                        (click)="mapFilter()">OK\n\n                </button>\n\n            </div>\n\n            <div #map id="map"></div>\n\n        </div>\n\n    </div>\n\n    <!-- fin bloc central -->\n\n    <div class="div-right" text-center>\n\n    </div>\n\n</ion-content>'/*ion-inline-end:"D:\celaneo\mobile\new-mobile\test\src\pages\map\map.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_5__providers_globals_globals__["a" /* GlobalsProvider */],
            __WEBPACK_IMPORTED_MODULE_3__providers_user_user__["a" /* UserProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_2__providers_app_app__["a" /* AppProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_6__providers_eventsrest_eventsrest__["a" /* EventsrestProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["x" /* Platform */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */]])
    ], MapPage);
    return MapPage;
}());

//# sourceMappingURL=map.js.map

/***/ }),

/***/ 133:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return LoginPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__home_home__ = __webpack_require__(90);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_rxjs_Rx__ = __webpack_require__(191);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_rxjs_Rx___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_rxjs_Rx__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__angular_forms__ = __webpack_require__(21);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__providers_login_login__ = __webpack_require__(211);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__pages_news_news__ = __webpack_require__(35);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__pages_empty_news_empty_news__ = __webpack_require__(106);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__ionic_storage__ = __webpack_require__(496);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__angular_http__ = __webpack_require__(25);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__providers_user_user__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__ionic_native_push__ = __webpack_require__(107);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__ionic_native_badge__ = __webpack_require__(134);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__providers_globals_globals__ = __webpack_require__(8);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__providers_app_app__ = __webpack_require__(38);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__forget_password_forget_password__ = __webpack_require__(497);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__app_config__ = __webpack_require__(28);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17__ionic_native_market__ = __webpack_require__(135);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_18__Models_user__ = __webpack_require__(203);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_19__providers_community_community__ = __webpack_require__(40);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_20__cgu_cgu__ = __webpack_require__(498);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_21__rgpd_rgpd__ = __webpack_require__(499);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_22__ionic_native_fcm__ = __webpack_require__(136);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};























/**
 * Generated class for the LoginPage page.
 *
 * See http://ionicframework.com/docs/components/#navigation for more info
 * on Ionic pages and navigation.
 */
var LoginPage = /** @class */ (function () {
    function LoginPage(http, navCtrl, navParams, appEvents, userService, appService, serviceCommunity, service, storage, loadingCtrl, alertCtrl, platform, push, fcm, badge, market, appGlobals) {
        this.http = http;
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.appEvents = appEvents;
        this.userService = userService;
        this.appService = appService;
        this.serviceCommunity = serviceCommunity;
        this.service = service;
        this.storage = storage;
        this.loadingCtrl = loadingCtrl;
        this.alertCtrl = alertCtrl;
        this.platform = platform;
        this.push = push;
        this.fcm = fcm;
        this.badge = badge;
        this.market = market;
        this.appGlobals = appGlobals;
        this.submited = false;
        this.loginUser = new __WEBPACK_IMPORTED_MODULE_18__Models_user__["a" /* User */]();
        this.eventParticipted = [];
        this.finishedEvents = [];
        var communityDeeplink = JSON.parse(localStorage.getItem("communityDeeplink"));
        localStorage.removeItem('token');
        localStorage.clear();
        localStorage.setItem("communityDeeplink", JSON.stringify(communityDeeplink));
        this.appGlobals.currentPageid = "login";
        if (window.location.search.indexOf("inscription=yes") > -1) {
        }
    }
    LoginPage_1 = LoginPage;
    LoginPage.prototype.ngOnInit = function () {
        this.signInForm = new __WEBPACK_IMPORTED_MODULE_4__angular_forms__["c" /* FormGroup */]({
            email: new __WEBPACK_IMPORTED_MODULE_4__angular_forms__["b" /* FormControl */]('', [__WEBPACK_IMPORTED_MODULE_4__angular_forms__["h" /* Validators */].required, __WEBPACK_IMPORTED_MODULE_4__angular_forms__["h" /* Validators */].email]),
            password: new __WEBPACK_IMPORTED_MODULE_4__angular_forms__["b" /* FormControl */]('', [__WEBPACK_IMPORTED_MODULE_4__angular_forms__["h" /* Validators */].required]),
            rememberMe: new __WEBPACK_IMPORTED_MODULE_4__angular_forms__["b" /* FormControl */]('', []),
        });
    };
    LoginPage.prototype.back = function () {
        this.navCtrl.setRoot(__WEBPACK_IMPORTED_MODULE_0__home_home__["a" /* HomePage */]);
    };
    LoginPage.prototype.ionViewWillEnter = function () {
        var _this = this;
        this.storage.get('rememberMe').then(function (rememberMe) {
            if (rememberMe) {
                _this.storage.get('email').then(function (email) {
                    _this.loginUser.setEmail(email);
                });
                _this.storage.get('password').then(function (password) {
                    _this.loginUser.setPassword(password);
                });
            }
        });
    };
    LoginPage.prototype.loginForm = function (errorValidation) {
        var _this = this;
        this.submited = true;
        if (!errorValidation) {
            this.storage.set('rememberMe', this.loginUser.getRememberMe());
            if (this.loginUser.getRememberMe()) {
                this.storage.set('email', this.loginUser.getEmail());
                this.storage.set('password', this.loginUser.getPassword());
            }
            var loadingPopup_1 = this.loadingCtrl.create({});
            loadingPopup_1.present();
            this.service.login(this.loginUser.getEmail(), this.loginUser.getPassword()).then(function (data) {
                if (data.token) {
                    _this.appGlobals.token = data.token;
                    localStorage.setItem("adminAssociations", JSON.stringify([]));
                    localStorage.setItem("adminMerchants", JSON.stringify([]));
                    localStorage.setItem("adherentAssociations", JSON.stringify([]));
                    localStorage.setItem("adherentMerchants", JSON.stringify([]));
                    localStorage.setItem('token', data.token);
                    localStorage.setItem('refresh_token', data.refresh_token);
                    localStorage.setItem('account_type', 'citoyen');
                    var expiration_date = new Date();
                    expiration_date.setDate(expiration_date.getDate() + 7);
                    localStorage.setItem('expiration_date', expiration_date.toString());
                    if (_this.platform.is('core')) {
                        _this.appEvents.publish('refreshNotifications');
                    }
                    _this.appEvents.publish('admin:associations');
                    _this.appEvents.publish('admin:merchants');
                    _this.appEvents.publish('member:associations');
                    _this.appEvents.publish('member:merchants');
                    Promise.all([_this.serviceCommunity.getAllPublicCommunities(), _this.serviceCommunity.getAllPrivateCommunities(), _this.serviceCommunity.findCurrentUserCommunities()]).then(function (user) {
                        localStorage.setItem("publicCommunities", JSON.stringify(user[0]));
                        localStorage.setItem("privateCommunities", JSON.stringify(user[1]));
                        localStorage.setItem("allCommunities", JSON.stringify(user[2]));
                        _this.approved = user[2];
                        if (_this.approved.length != 0) {
                            localStorage.setItem("hasApprovedCommunities", "true");
                        }
                        else {
                            localStorage.setItem("hasApprovedCommunities", "false");
                        }
                        _this.appEvents.publish('refreshCommunities');
                    }, function (err) {
                        console.log(err);
                    });
                    if (!_this.platform.is('core')) {
                        _this.initPushNotification(_this.platform);
                    }
                    if (_this.navParams.get('refer')) {
                        _this.navCtrl.pop();
                    }
                    else {
                        Promise.all([_this.service.currentUserInformation(data.token), _this.serviceCommunity.findCurrentUserFollowedCommunities()]).then(function (datas) {
                            localStorage.setItem("currentUser", JSON.stringify(datas[0]));
                            localStorage.setItem("followedCommunities", JSON.stringify(datas[1]));
                            _this.appEvents.publish('refreshCurrentUser');
                            _this.appEvents.publish('refreshApprovedCommunities');
                            localStorage.setItem("isLoggedIn", "1");
                            localStorage.setItem('ga', data.ga);
                            loadingPopup_1.dismiss();
                            _this.communities = datas[1];
                            if (_this.communities.length != 0) {
                                localStorage.setItem("hasCommunities", "true");
                                _this.navCtrl.setRoot(__WEBPACK_IMPORTED_MODULE_6__pages_news_news__["a" /* NewsPage */]);
                            }
                            else {
                                localStorage.setItem("hasCommunities", "false");
                                _this.navCtrl.setRoot(__WEBPACK_IMPORTED_MODULE_7__pages_empty_news_empty_news__["a" /* EmptyNewsPage */]);
                            }
                        }, function (err) {
                            console.log(err);
                            localStorage.clear();
                            _this.navCtrl.setRoot(LoginPage_1);
                        });
                    }
                }
            }, function (err) {
                loadingPopup_1.dismiss();
                if (err.status == 0) {
                    var errorAlert = _this.alertCtrl.create({
                        title: 'Erreur',
                        subTitle: "Merci de vérifier votre connexion",
                        buttons: [
                            {
                                text: 'Fermer',
                                role: 'cancel',
                                handler: function () {
                                }
                            }
                        ]
                    });
                    errorAlert.present();
                }
                else if (err.status == 401) {
                    if (JSON.parse(err._body).message.errorCode == '20') {
                        var errorAlert = _this.alertCtrl.create({
                            title: 'Erreur',
                            subTitle: JSON.parse(err._body).message.errorMessage,
                            buttons: [
                                {
                                    text: 'Fermer',
                                    role: 'cancel',
                                    handler: function () {
                                        localStorage.clear();
                                        //this.navCtrl.setRoot(LoginPage);
                                    }
                                }
                            ]
                        });
                        errorAlert.present();
                    }
                    else if (JSON.parse(err._body).message.errorCode == '17') {
                        var errorAlert = _this.alertCtrl.create({
                            title: 'Erreur',
                            subTitle: JSON.parse(err._body).message.errorMessage,
                            buttons: [
                                {
                                    text: 'Fermer',
                                    role: 'cancel',
                                    handler: function () {
                                        localStorage.clear();
                                    }
                                }
                            ]
                        });
                        errorAlert.present();
                    }
                    else {
                        var errorAlert = _this.alertCtrl.create({
                            title: 'Erreur',
                            subTitle: "Identifiant ou mot de passe incorrect.",
                            buttons: [
                                {
                                    text: 'Fermer',
                                    role: 'cancel',
                                    handler: function () {
                                        localStorage.clear();
                                    }
                                }
                            ]
                        });
                        errorAlert.present();
                    }
                }
                else if (err.status == 403) {
                    var errorAlert = _this.alertCtrl.create({
                        title: 'Erreur',
                        subTitle: "Accès interdit",
                        buttons: [
                            {
                                text: 'Fermer',
                                role: 'cancel',
                                handler: function () {
                                }
                            }
                        ]
                    });
                    errorAlert.present();
                }
                else {
                    var errorAlert = _this.alertCtrl.create({
                        title: 'Erreur',
                        subTitle: "Une erreur est survenue, veuillez ré-essayer plus tard.",
                        buttons: [
                            {
                                text: 'Fermer',
                                role: 'cancel',
                                handler: function () {
                                }
                            }
                        ]
                    });
                    errorAlert.present();
                }
            });
        }
    };
    LoginPage.prototype.forgetPassword = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_15__forget_password_forget_password__["a" /* ForgetPasswordPage */]);
    };
    LoginPage.prototype.initPushNotification = function (platform) {
        var _this = this;
        if (!platform.is('cordova')) {
            return;
        }
        this.fcm.subscribeToTopic('nousEnsemble');
        this.fcm.getToken().then(function (token) {
            var deviceType = "";
            if (platform.is('ios')) {
                deviceType = "ios";
            }
            else if (platform.is('android')) {
                deviceType = "android";
            }
            else if (platform.is('windows')) {
                deviceType = "windows";
            }
            _this.deviceToken = token;
            _this.userService.deviceToken(token, deviceType);
        });
        this.fcm.onNotification().subscribe(function (data) {
            if (data.additionalData.silent == 'on') {
                if (data.additionalData.foreground) {
                    _this.appEvents.publish('refreshNotifications');
                }
            }
            else if (data.additionalData.participantNbre == 'yes') {
                _this.finishedEvents.push(data.additionalData.eventId);
                localStorage.setItem("finishedEvents", JSON.stringify(_this.finishedEvents));
            }
            else {
                _this.badge.increase(1);
                if (data.additionalData.foreground) {
                    if (data.additionalData.eventId) {
                        var label = 'push received-' + data.additionalData.eventId;
                        _this.appEvents.publish("googleAnalytics", label);
                    }
                    if (data.additionalData.communityId || data.additionalData.associationId || data.additionalData.merchantId) {
                        var confirmAlert = _this.alertCtrl.create({
                            title: data.title,
                            message: data.message,
                            buttons: [{
                                    text: 'Fermer',
                                    role: 'cancel'
                                }]
                        });
                        confirmAlert.present();
                    }
                    else {
                        var confirmAlert = _this.alertCtrl.create({
                            title: data.title,
                            message: data.message,
                            buttons: [{
                                    text: 'Fermer',
                                    role: 'cancel'
                                }]
                        });
                        confirmAlert.present();
                    }
                }
                else {
                    if (data.additionalData.participantNbre == 'yes') {
                        _this.finishedEvents.push(data.additionalData.eventId);
                        localStorage.setItem("finishedEvents", JSON.stringify(_this.finishedEvents));
                    }
                    else {
                        _this.badge.increase(1);
                        if (data.additionalData.eventId) {
                            var label = 'push received-' + data.additionalData.eventId;
                            _this.appEvents.publish("googleAnalytics", label);
                        }
                        if (data.additionalData.store == 'on') {
                            _this.openMarket();
                        }
                        else {
                            _this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_6__pages_news_news__["a" /* NewsPage */]);
                        }
                    }
                }
            }
        });
        /*
                const options: PushOptions = {
                    android: {
                        senderID: '390977445413'
                    },
                    ios: {
                        alert: 'true',
                        badge: false,
                        sound: 'true'
                    },
                    windows: {}
                };
                const pushObject: PushObject = this.push.init(options);
        
                pushObject.on('registration').subscribe((data: any) => {
                    var deviceType = "";
                    if (platform.is('ios')) {
                        deviceType = "ios";
                    }
                    else if (platform.is('android')) {
                        deviceType = "android";
                    }
                    else if (platform.is('windows')) {
                        deviceType = "windows";
                    }
                    this.deviceToken = data.registrationId;
                    this.userService.deviceToken(data.registrationId, deviceType);
                });
        
                pushObject.on('notification').subscribe((data: any) => {
                    if (data.additionalData.silent == 'on') {
                        if (data.additionalData.foreground) {
                            this.appEvents.publish('refreshNotifications');
                        }
                    } else if (data.additionalData.participantNbre == 'yes') {
                        this.finishedEvents.push(data.additionalData.eventId);
                        localStorage.setItem("finishedEvents", JSON.stringify(this.finishedEvents));
        
                    }
                    else {
                        this.badge.increase(1);
                        if (data.additionalData.foreground) {
                            if (data.additionalData.eventId) {
                                let label = 'push received-' + data.additionalData.eventId;
                                this.appEvents.publish("googleAnalytics", label);
        
                            }
                            if (data.additionalData.communityId || data.additionalData.associationId  || data.additionalData.merchantId) {
                                let confirmAlert = this.alertCtrl.create({
                                    title: data.title,
                                    message: data.message,
                                    buttons: [{
                                        text: 'Fermer',
                                        role: 'cancel'
                                    }]
                                });
                                confirmAlert.present();
                            } else {
                                let confirmAlert = this.alertCtrl.create({
                                    title: data.title,
                                    message: data.message,
                                    buttons: [{
                                        text: 'Fermer',
                                        role: 'cancel'
                                    }]
                                });
                                confirmAlert.present();
        
                            }
        
                        } else {
        
                            if (data.additionalData.participantNbre == 'yes') {
                                this.finishedEvents.push(data.additionalData.eventId);
                                localStorage.setItem("finishedEvents", JSON.stringify(this.finishedEvents));
        
                            } else {
                                this.badge.increase(1);
                                if (data.additionalData.eventId) {
                                    let label = 'push received-' + data.additionalData.eventId;
                                    this.appEvents.publish("googleAnalytics", label);
                                }
                                if (data.additionalData.store == 'on') {
                                    this.openMarket();
                                } else {
                                    this.navCtrl.push(NewsPage);
                                }
                            }
                        }
                    }
        
                });
        
                pushObject.on('error').subscribe(error => console.error('Error with Push plugin' + error));
        
                */
    };
    LoginPage.prototype.checkFocus = function (element) {
        if (this.platform.is('android')) {
            var requiredElement = element.target.offsetParent.parentElement;
            var yOffset = requiredElement.offsetTop;
            this.content.scrollTo(0, yOffset, 2000);
        }
    };
    LoginPage.prototype.openMarket = function () {
        this.market.open(__WEBPACK_IMPORTED_MODULE_16__app_config__["b" /* APP_PACKAGE */]);
    };
    LoginPage.prototype.cgu = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_20__cgu_cgu__["a" /* CguPage */]);
    };
    LoginPage.prototype.rgpd = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_21__rgpd_rgpd__["a" /* RgpdPage */]);
    };
    var LoginPage_1;
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["ViewChild"])(__WEBPACK_IMPORTED_MODULE_2_ionic_angular__["f" /* Content */]),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["f" /* Content */])
    ], LoginPage.prototype, "content", void 0);
    LoginPage = LoginPage_1 = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["Component"])({
            selector: 'page-login',template:/*ion-inline-start:"D:\celaneo\mobile\new-mobile\test\src\pages\login\login.html"*/'<ion-content>\n\n    <div class="div-left">\n\n    </div>\n\n    <div class="div-center">\n\n        <ion-grid class="no-padding ">\n\n            <ion-row>\n\n\n\n                <ion-col class="no-padding " col-12 col-sm>\n\n\n\n                    <div>\n\n                        <div class="back-page" (click)="back()">\n\n                            <ion-icon name="ios-arrow-back-outline"></ion-icon>\n\n                        </div>\n\n\n\n                    </div>\n\n                </ion-col>\n\n\n\n            </ion-row>\n\n        </ion-grid>\n\n        <div text-center>\n\n            <img class="home-img" src="assets/imgs/connexion5.png">\n\n        </div>\n\n        <ion-grid class="no-padding connexion">\n\n            <form [formGroup]="signInForm" novalidate>\n\n                <ion-row>\n\n\n\n                    <ion-col col-12 class="col-input">\n\n                        <ion-label color="light-black" stacked>Adresse mail</ion-label>\n\n                        <ion-item [class.formError]="( signInForm.get(\'email\').hasError(\'required\') || signInForm.get(\'email\').hasError(\'email\') ) && submited">\n\n                            <ion-input type="email" id="email" name="email" required [(ngModel)]="loginUser.email"\n\n                                formControlName="email" (focus)="checkFocus($event)"></ion-input>\n\n                        </ion-item>\n\n                        <div class="error-msg" text-center *ngIf="signInForm.get(\'email\').hasError(\'required\') && submited">\n\n                            <span class="error">Veuillez indiquer votre email</span>\n\n                        </div>\n\n                        <div class="error-msg" text-center *ngIf="signInForm.get(\'email\').hasError(\'email\') && !signInForm.get(\'email\').hasError(\'required\') && submited">\n\n                            <span class="error">Veuillez indiquer un email valide</span>\n\n                        </div>\n\n                    </ion-col>\n\n                    <ion-col col-12 class="col-input">\n\n                        <ion-label color="light-black" stacked>Mot de passe</ion-label>\n\n                        <ion-item>\n\n                            <ion-input type="password" name="password" required [(ngModel)]="loginUser.password"\n\n                                (focus)="checkFocus($event)" formControlName="password"></ion-input>\n\n                        </ion-item>\n\n                    </ion-col>\n\n                    <ion-col col-12 text-center>\n\n                        <a (click)="forgetPassword()"><small>Mot de passe oublié</small></a>\n\n                    </ion-col>\n\n                    <ion-col class="col-input-desktop" col-12 text-center>\n\n                        <ion-item>\n\n                            <ion-label>Se souvenir de moi</ion-label>\n\n                            <ion-toggle [(ngModel)]="loginUser.rememberMe" formControlName="rememberMe" name="rememberMe"></ion-toggle>\n\n                        </ion-item>\n\n                    </ion-col>\n\n                    <ion-col col-12 text-center>\n\n                        <button ion-button color="primary" style="width: 85%;" round class="button-big" (click)="loginForm(signInForm.invalid)">C\'est\n\n                            parti !</button>\n\n                    </ion-col>\n\n                    <ion-col col-12 text-center>\n\n                        <small class="terms">En cliquant sur C\'est parti!, vous acceptez nos <a (click)="cgu()"><b>Conditions générales </b></a>et notre <a (click)="rgpd()"><b>politique de protection des données</b></a></small>\n\n                    </ion-col>\n\n\n\n                </ion-row>\n\n            </form>\n\n        </ion-grid>\n\n    </div>\n\n    <div class="div-right"></div>\n\n</ion-content>'/*ion-inline-end:"D:\celaneo\mobile\new-mobile\test\src\pages\login\login.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_9__angular_http__["c" /* Http */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["u" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["v" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_10__providers_user_user__["a" /* UserProvider */],
            __WEBPACK_IMPORTED_MODULE_14__providers_app_app__["a" /* AppProvider */],
            __WEBPACK_IMPORTED_MODULE_19__providers_community_community__["a" /* CommunityProvider */],
            __WEBPACK_IMPORTED_MODULE_5__providers_login_login__["a" /* LoginProvider */],
            __WEBPACK_IMPORTED_MODULE_8__ionic_storage__["b" /* Storage */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["x" /* Platform */],
            __WEBPACK_IMPORTED_MODULE_11__ionic_native_push__["a" /* Push */],
            __WEBPACK_IMPORTED_MODULE_22__ionic_native_fcm__["a" /* FCM */],
            __WEBPACK_IMPORTED_MODULE_12__ionic_native_badge__["a" /* Badge */],
            __WEBPACK_IMPORTED_MODULE_17__ionic_native_market__["a" /* Market */],
            __WEBPACK_IMPORTED_MODULE_13__providers_globals_globals__["a" /* GlobalsProvider */]])
    ], LoginPage);
    return LoginPage;
}());

//# sourceMappingURL=login.js.map

/***/ }),

/***/ 14:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return UserProvider; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_http__ = __webpack_require__(25);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_rxjs_add_operator_map__ = __webpack_require__(27);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_rxjs_add_operator_map___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_rxjs_add_operator_map__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__app_config__ = __webpack_require__(28);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_ionic_angular__ = __webpack_require__(5);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





/*
  Generated class for the UserProvider provider.

  See https://angular.io/guide/dependency-injection for more info on providers
  and Angular DI.
*/
var UserProvider = /** @class */ (function () {
    function UserProvider(appEvent, http) {
        this.appEvent = appEvent;
        this.http = http;
    }
    UserProvider.prototype.register = function (data) {
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'users';
        var body = JSON.stringify({
            lastname: data.lastname,
            firstname: data.firstname,
            email: data.email,
            residence_city: data.city,
            birth_date: data.birth,
            password: data.password,
            api: __WEBPACK_IMPORTED_MODULE_3__app_config__["a" /* API_VERSION */]
        });
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    UserProvider.prototype.registerFollow = function (data) {
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'users/register/follow';
        var body = JSON.stringify({
            lastname: data.lastname,
            firstname: data.firstname,
            email: data.email,
            residence_city: data.city,
            birth_date: data.birth,
            password: data.password,
            communities: data.communities,
            api: __WEBPACK_IMPORTED_MODULE_3__app_config__["a" /* API_VERSION */]
        });
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    UserProvider.prototype.findCurrentUser = function () {
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'user?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    UserProvider.prototype.findCurrentUserAssociations = function () {
        var _this = this;
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'user/associations?NousEnsembleToken=' + localStorage.getItem("token");
        return new Promise(function (resolve) {
            _this.http.get(url)
                .subscribe(function (data) {
                resolve(data.json());
            });
        });
    };
    UserProvider.prototype.findCurrentUserAdherentAsso = function () {
        var _this = this;
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'user/adherentAsso?NousEnsembleToken=' + localStorage.getItem("token");
        return new Promise(function (resolve) {
            _this.http.get(url)
                .subscribe(function (data) {
                resolve(data.json());
            });
        });
    };
    UserProvider.prototype.findCurrentUserAdherentMerchant = function () {
        var _this = this;
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'user/adherentMerchant?NousEnsembleToken=' + localStorage.getItem("token");
        return new Promise(function (resolve) {
            _this.http.get(url)
                .subscribe(function (data) {
                resolve(data.json());
            });
        });
    };
    UserProvider.prototype.findCurrentUserMerchants = function () {
        var _this = this;
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'user/merchants?NousEnsembleToken=' + localStorage.getItem("token");
        return new Promise(function (resolve) {
            _this.http.get(url)
                .subscribe(function (data) {
                resolve(data.json());
            });
        });
    };
    UserProvider.prototype.forgetPassword = function (email) {
        return this.http.get(__WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'user/reset_password?email=' + email)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    UserProvider.prototype.findCategories = function () {
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'categories?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    UserProvider.prototype.findCategoriesByUser = function () {
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'user_categories?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    UserProvider.prototype.logout = function () {
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'user/logout?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    UserProvider.prototype.search = function (criteria, cities) {
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'user/advanced/search?NousEnsembleToken=' + localStorage.getItem("token");
        var body = JSON.stringify({
            key: criteria.key,
            theme: criteria.theme,
            events: criteria.event,
            articles: criteria.article,
            accounts: criteria.account,
            goodplans: criteria.goodplans,
            cities: cities
        });
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    UserProvider.prototype.searchCities = function (key) {
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'searchcities';
        var body = JSON.stringify({
            pattern: key
        });
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    UserProvider.prototype.findIntercomCities = function (primaryCity) {
        var _this = this;
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'intercommunal/' + primaryCity;
        return new Promise(function (resolve) {
            _this.http.get(url)
                .subscribe(function (data) {
                resolve(data.json());
            });
        });
    };
    UserProvider.prototype.postCity = function (city) {
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'user/profile/secondarycity?NousEnsembleToken=' + localStorage.getItem("token");
        var body = JSON.stringify({
            city: city,
        });
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    UserProvider.prototype.deleteCity = function (city) {
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'user/secondarycity/remove?NousEnsembleToken=' + localStorage.getItem("token");
        var body = JSON.stringify({
            city: city,
        });
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    UserProvider.prototype.putInterests = function (interest, action) {
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'user/profile/interests?NousEnsembleToken=' + localStorage.getItem("token");
        var body = JSON.stringify({
            interest: interest,
            action: action,
        });
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    UserProvider.prototype.putDays = function (day, action) {
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'user/profile/days?NousEnsembleToken=' + localStorage.getItem("token");
        var body = JSON.stringify({
            day: day,
            action: action,
        });
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    UserProvider.prototype.putChildrens = function (children, action) {
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'user/profile/childrens?NousEnsembleToken=' + localStorage.getItem("token");
        var body = JSON.stringify({
            children: children,
            action: action,
        });
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    UserProvider.prototype.putPassword = function (data) {
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'user/password?NousEnsembleToken=' + localStorage.getItem("token");
        var body = JSON.stringify({
            actual_password: data.actual_password,
            password: data.password,
        });
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    UserProvider.prototype.put = function (data) {
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'user/edit?NousEnsembleToken=' + localStorage.getItem("token");
        var body = JSON.stringify({
            firstname: data.firstname,
            lastname: data.lastname,
            email: data.email,
            city: data.city,
            birth: data.birth,
            phone: data.phone
        });
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    UserProvider.prototype.getNotifications = function (page) {
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'user/notifications?limit=' + 12 + '&start=' + page + '&NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    UserProvider.prototype.getParticipationNotif = function () {
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'user/notifications/participation?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    UserProvider.prototype.deviceToken = function (registrationId, deviceType) {
        var userToken = localStorage.getItem("token");
        if (userToken && userToken != null) {
            var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'user/deviceToken?NousEnsembleToken=' + localStorage.getItem("token");
            var body = JSON.stringify({
                deviceToken: registrationId,
                deviceType: deviceType
            });
            return this.http.post(url, body)
                .map(function (res) { return res.json(); })
                .toPromise();
        }
    };
    UserProvider.prototype.deleteDeviceToken = function (deviceToken) {
        var userToken = localStorage.getItem("token");
        if (userToken && userToken != null) {
            var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'user/deviceToken/delete?NousEnsembleToken=' + localStorage.getItem("token");
            var body = JSON.stringify({
                deviceToken: deviceToken
            });
            return this.http.post(url, body)
                .map(function (res) { return res.json(); })
                .toPromise();
        }
    };
    UserProvider.prototype.getAssociationsMerchants = function () {
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'associations/merchants?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    UserProvider.prototype.postSuperAdminAssociationsMerchants = function (items) {
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'associations/merchants/save/superadmin?NousEnsembleToken=' + localStorage.getItem("token");
        var body = JSON.stringify({
            items: items,
        });
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    UserProvider.prototype.deleteAccount = function (reason) {
        var body = JSON.stringify({
            reason: reason
        });
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'account/delete?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    UserProvider.prototype.getNumbers = function (category) {
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'user/number/' + category + '?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    UserProvider.prototype.findNumberCategories = function () {
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'number/categories?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    UserProvider.prototype.findLocalActor = function (id) {
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'localActor/' + id + '?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    UserProvider.prototype.getMapInterest = function (categories) {
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'user/map/interest?categories=' + categories + '&NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    UserProvider.prototype.postInvitation = function (email) {
        var body = JSON.stringify({
            email: email,
        });
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'user/invitation?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    UserProvider.prototype.putProfilePicture = function (photo) {
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'user/profile/picture?NousEnsembleToken=' + localStorage.getItem("token");
        var body = JSON.stringify({
            photo: photo,
        });
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    UserProvider = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Injectable"])(),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_4_ionic_angular__["j" /* Events */], __WEBPACK_IMPORTED_MODULE_1__angular_http__["c" /* Http */]])
    ], UserProvider);
    return UserProvider;
}());

//# sourceMappingURL=user.js.map

/***/ }),

/***/ 197:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return GroupitemsPipe; });
/* unused harmony export isUndefined */
/* unused harmony export isNull */
/* unused harmony export isNumber */
/* unused harmony export isNumberFinite */
/* unused harmony export isPositive */
/* unused harmony export isInteger */
/* unused harmony export isNil */
/* unused harmony export isString */
/* unused harmony export isObject */
/* unused harmony export isArray */
/* unused harmony export isFunction */
/* unused harmony export toDecimal */
/* unused harmony export upperFirst */
/* unused harmony export createRound */
/* unused harmony export leftPad */
/* unused harmony export rightPad */
/* unused harmony export toString */
/* unused harmony export pad */
/* unused harmony export flatten */
/* unused harmony export getProperty */
/* unused harmony export sum */
/* unused harmony export shuffle */
/* unused harmony export deepIndexOf */
/* unused harmony export deepEqual */
/* unused harmony export isDeepObject */
/* unused harmony export wrapDeep */
/* unused harmony export unwrapDeep */
/* unused harmony export DeepWrapper */
/* unused harmony export count */
/* unused harmony export empty */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};

/**
 * Generated class for the GroupitemsPipe pipe.
 *
 * See https://angular.io/docs/ts/latest/guide/pipes.html for more info on
 * Angular Pipes.
 */
var GroupitemsPipe = /** @class */ (function () {
    function GroupitemsPipe() {
    }
    GroupitemsPipe.prototype.transform = function (input, prop) {
        if (!isArray(input)) {
            return input;
        }
        var arr = {};
        for (var _i = 0, input_1 = input; _i < input_1.length; _i++) {
            var value = input_1[_i];
            var field = getProperty(value, prop);
            if (isUndefined(arr[field])) {
                arr[field] = [];
            }
            arr[field].push(value);
        }
        return Object.keys(arr).map(function (key) { return ({ key: key, 'value': arr[key] }); });
    };
    GroupitemsPipe = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Pipe"])({
            name: 'groupitems',
        })
    ], GroupitemsPipe);
    return GroupitemsPipe;
}());

function isUndefined(value) {
    return typeof value === 'undefined';
}
function isNull(value) {
    return value === null;
}
function isNumber(value) {
    return typeof value === 'number';
}
function isNumberFinite(value) {
    return isNumber(value) && isFinite(value);
}
// Not strict positive
function isPositive(value) {
    return value >= 0;
}
function isInteger(value) {
    // No rest, is an integer
    return (value % 1) === 0;
}
function isNil(value) {
    return value === null || typeof (value) === 'undefined';
}
function isString(value) {
    return typeof value === 'string';
}
function isObject(value) {
    return typeof value === 'object';
}
function isArray(value) {
    return Array.isArray(value);
}
function isFunction(value) {
    return typeof value === 'function';
}
function toDecimal(value, decimal) {
    return Math.round(value * Math.pow(10, decimal)) / Math.pow(10, decimal);
}
function upperFirst(value) {
    return value.slice(0, 1).toUpperCase() + value.slice(1);
}
function createRound(method) {
    // <any>Math to suppress error
    var func = Math[method];
    return function (value, precision) {
        if (precision === void 0) { precision = 0; }
        if (typeof value === 'string') {
            throw new TypeError('Rounding method needs a number');
        }
        if (typeof precision !== 'number' || isNaN(precision)) {
            precision = 0;
        }
        if (precision) {
            var pair = (value + "e").split('e');
            var val = func(pair[0] + "e" + (+pair[1] + precision));
            pair = (val + "e").split('e');
            return +(pair[0] + 'e' + (+pair[1] - precision));
        }
        return func(value);
    };
}
function leftPad(str, len, ch) {
    if (len === void 0) { len = 0; }
    if (ch === void 0) { ch = ' '; }
    str = String(str);
    ch = toString(ch);
    var i = -1;
    var length = len - str.length;
    while (++i < length && (str.length + ch.length) <= len) {
        str = ch + str;
    }
    return str;
}
function rightPad(str, len, ch) {
    if (len === void 0) { len = 0; }
    if (ch === void 0) { ch = ' '; }
    str = String(str);
    ch = toString(ch);
    var i = -1;
    var length = len - str.length;
    while (++i < length && (str.length + ch.length) <= len) {
        str += ch;
    }
    return str;
}
function toString(value) {
    return "" + value;
}
function pad(str, len, ch) {
    if (len === void 0) { len = 0; }
    if (ch === void 0) { ch = ' '; }
    str = String(str);
    ch = toString(ch);
    var i = -1;
    var length = len - str.length;
    var left = true;
    while (++i < length) {
        var l = (str.length + ch.length <= len) ? (str.length + ch.length) : (str.length + 1);
        if (left) {
            str = leftPad(str, l, ch);
        }
        else {
            str = rightPad(str, l, ch);
        }
        left = !left;
    }
    return str;
}
function flatten(input, index) {
    if (index === void 0) { index = 0; }
    if (index >= input.length) {
        return input;
    }
    if (isArray(input[index])) {
        return flatten(input.slice(0, index).concat(input[index], input.slice(index + 1)), index);
    }
    return flatten(input, index + 1);
}
function getProperty(value, key) {
    if (isNil(value) || !isObject(value)) {
        return undefined;
    }
    var keys = key.split('.');
    var result = value[keys.shift()];
    for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {
        var key_1 = keys_1[_i];
        if (isNil(result) || !isObject(result)) {
            return undefined;
        }
        result = result[key_1];
    }
    return result;
}
function sum(input, initial) {
    if (initial === void 0) { initial = 0; }
    return input.reduce(function (previous, current) { return previous + current; }, initial);
}
// http://stackoverflow.com/questions/6274339/how-can-i-shuffle-an-array-in-javascript
function shuffle(input) {
    if (!isArray(input)) {
        return input;
    }
    var copy = input.slice();
    for (var i = copy.length; i; --i) {
        var j = Math.floor(Math.random() * i);
        var x = copy[i - 1];
        copy[i - 1] = copy[j];
        copy[j] = x;
    }
    return copy;
}
function deepIndexOf(collection, value) {
    var index = -1;
    var length = collection.length;
    while (++index < length) {
        if (deepEqual(value, collection[index])) {
            return index;
        }
    }
    return -1;
}
function deepEqual(a, b) {
    if (a === b) {
        return true;
    }
    if (!(typeof a === 'object' && typeof b === 'object')) {
        return a === b;
    }
    var keysA = Object.keys(a);
    var keysB = Object.keys(b);
    if (keysA.length !== keysB.length) {
        return false;
    }
    // Test for A's keys different from B.
    var hasOwn = Object.prototype.hasOwnProperty;
    for (var i = 0; i < keysA.length; i++) {
        var key = keysA[i];
        if (!hasOwn.call(b, keysA[i]) || !deepEqual(a[key], b[key])) {
            return false;
        }
    }
    return true;
}
function isDeepObject(object) {
    return object.__isDeepObject__;
}
function wrapDeep(object) {
    return new DeepWrapper(object);
}
function unwrapDeep(object) {
    if (isDeepObject(object)) {
        return object.data;
    }
    return object;
}
var DeepWrapper = /** @class */ (function () {
    function DeepWrapper(data) {
        this.data = data;
        this.__isDeepObject__ = true;
    }
    return DeepWrapper;
}());

function count(input) {
    if (!isArray(input) && !isObject(input) && !isString(input)) {
        return input;
    }
    if (isObject(input)) {
        return Object.keys(input).map(function (value) { return input[value]; }).length;
    }
    return input.length;
}
function empty(input) {
    if (!isArray(input)) {
        return input;
    }
    return input.length === 0;
}
//# sourceMappingURL=groupitems.js.map

/***/ }),

/***/ 198:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return DetailSurveyPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_comment_comment__ = __webpack_require__(22);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_article_article__ = __webpack_require__(31);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_globals_globals__ = __webpack_require__(8);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__pages_news_news__ = __webpack_require__(35);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__providers_eventsrest_eventsrest__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__ionic_native_social_sharing__ = __webpack_require__(46);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__providers_survey_survey__ = __webpack_require__(566);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};









/**
 * Generated class for the DetailArticlePage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var DetailSurveyPage = /** @class */ (function () {
    function DetailSurveyPage(event, articleService, commentService, navCtrl, navParams, loader, myAlert, myModal, surveyService, serviceEvent, loadingCtrl, alertCtrl, toastCtrl, actionSheetCtrl, appGlobals, platform, socialsharing) {
        this.event = event;
        this.articleService = articleService;
        this.commentService = commentService;
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.loader = loader;
        this.myAlert = myAlert;
        this.myModal = myModal;
        this.surveyService = surveyService;
        this.serviceEvent = serviceEvent;
        this.loadingCtrl = loadingCtrl;
        this.alertCtrl = alertCtrl;
        this.toastCtrl = toastCtrl;
        this.actionSheetCtrl = actionSheetCtrl;
        this.appGlobals = appGlobals;
        this.platform = platform;
        this.socialsharing = socialsharing;
        this.items = [];
        this.appGlobals.showHeader = false;
        this.event.publish('user:current');
        this.idUsers = JSON.parse(localStorage.getItem("tableUser"));
        this.currentUser = JSON.parse(localStorage.getItem("currentUser"));
        this.showPush = navParams.get('pushNotification');
        if (navParams.get('article')) {
            this.currentArticle = navParams.get('article');
            this.articleId = this.currentArticle.id;
        }
        else {
            this.articleId = navParams.get('articleId');
        }
    }
    DetailSurveyPage.prototype.ionViewWillEnter = function () {
        this.appGlobals.showHeader = false;
        this.currentArticle = this.navParams.get('article');
        this.appGlobals.showFooter = true;
        this.event.publish('updateFooter');
    };
    DetailSurveyPage.prototype.ionViewWillLeave = function () {
        this.appGlobals.showHeader = true;
        this.appGlobals.showFooter = true;
    };
    DetailSurveyPage.prototype.capitalizeData = function (data) {
        return data.charAt(0).toUpperCase() + data.slice(1);
    };
    DetailSurveyPage.prototype.news = function () {
        this.navCtrl.setRoot(__WEBPACK_IMPORTED_MODULE_5__pages_news_news__["a" /* NewsPage */]);
    };
    DetailSurveyPage.prototype.choiceSelected = function (id, questionAnswer) {
        var _this = this;
        if (!questionAnswer) {
            var loadingPopup_1 = this.loadingCtrl.create({});
            loadingPopup_1.present();
            var result_1;
            this.surveyService.postAnswerSurvey(id, this.currentArticle).then(function (data) {
                loadingPopup_1.dismiss();
                result_1 = data;
                if (result_1.success) {
                    _this.currentArticle = JSON.parse(result_1.article);
                    _this.event.publish('news:refresh');
                }
            }, function (err) {
                loadingPopup_1.dismiss();
                _this.event.publish('http:errors', err);
            });
        }
    };
    DetailSurveyPage.prototype.goBack = function () {
        if (this.showPush) {
            this.navCtrl.setRoot(__WEBPACK_IMPORTED_MODULE_5__pages_news_news__["a" /* NewsPage */]);
        }
        else {
            this.navCtrl.pop();
        }
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["ViewChild"])(__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* Content */]),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* Content */])
    ], DetailSurveyPage.prototype, "content", void 0);
    DetailSurveyPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-detail-survey',template:/*ion-inline-start:"D:\celaneo\mobile\new-mobile\test\src\pages\detail-survey\detail-survey.html"*/'<!--\n\n  Generated template for the DetailArticlePage page.\n\n\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n\n  Ionic pages and navigation.\n\n-->\n\n<ion-header class="mobile-header MMS" *ngIf="appGlobals.token">\n\n    <ion-grid>\n\n        <ion-row>\n\n            <ion-col col-2 text-left>\n\n                <div class="item">\n\n                    <ion-icon name="ios-arrow-back" (click)="goBack()"></ion-icon>\n\n                </div>\n\n            </ion-col>\n\n            <ion-col col-8 text-center class="page-title">\n\n\n\n                <ion-title></ion-title>\n\n            </ion-col>\n\n            <ion-col col-2>\n\n                <div class="item" text-right *ngIf="currentArticle">\n\n                </div>\n\n            </ion-col>\n\n        </ion-row>\n\n    </ion-grid>\n\n</ion-header>\n\n\n\n<ion-content no-padding>\n\n    <div class="div-left">\n\n        <div text-center class="back"><img src="assets/imgs/icons/1.png" (click)="goBack()"></div>\n\n    </div>\n\n    <div class="div-center" *ngIf="currentArticle">\n\n        <ion-card>\n\n            <ion-card-content>\n\n                <ion-card-title text-left>\n\n                    {{currentArticle.community | capitalize}}</ion-card-title>\n\n                <p text-left>\n\n                    <span>\n\n                        {{currentArticle.createAt| amLocale:\'fr\' | amTimeAgo | capitalize}}\n\n                        <span>à\n\n                            {{currentArticle.city}}</span>\n\n                    </span>\n\n                    <img float-end class="icon-agenda move img-calendar" src="assets/imgs/icons/survey-detail.png" alt="NOUS-Ensemble" />\n\n                </p>\n\n\n\n                <div *ngIf="currentArticle.image ">\n\n                    <div class="image home-card-slides">\n\n                        <div *ngIf="currentArticle.imageURL">\n\n                            <img data-src="{{currentArticle.imageURL}}" imageViewer>\n\n                        </div>\n\n                    </div>\n\n                </div>\n\n\n\n                <ion-col col-12>\n\n                    <h5>{{currentArticle.title}}</h5>\n\n                    <h6 [innerHtml]="appGlobals.linky(currentArticle.description)|nl2br"></h6>\n\n                </ion-col>\n\n                 <ion-col col-12 *ngFor="let question of currentArticle[\'questions\']">\n\n                     <p text-center class="black-text" *ngIf="question.alreadyAnswer">Résultats <span class="text-gris">({{currentArticle.nbrResponse}} votant<span *ngIf="currentArticle.nbrResponse > 1">s</span>)</span></p>\n\n                        <ion-list radio-group class="listScrolled">\n\n                            <div *ngFor="let answer of question[\'choices\']">\n\n                            <ion-item class="no-padding">\n\n                                <ion-label>{{answer.title}}</ion-label>\n\n                                <ion-radio [disabled]="question.alreadyAnswer" [checked]="answer.id == question.alreadyAnswer" (ionSelect)="choiceSelected(answer.id,question.alreadyAnswer)"></ion-radio>\n\n                            </ion-item>\n\n                                <div id="progressBarContainer" *ngIf="question.alreadyAnswer">\n\n                                    <span>{{(answer.responseNumbr * 100)/currentArticle.nbrResponse | number:\'1.0-0\'}} %</span>\n\n                                  <div id="progressbar">\n\n                                    <div [ngStyle]="{\'width\': (answer.responseNumbr * 100)/currentArticle.nbrResponse +\'%\'}"></div>\n\n                                  </div>\n\n                                </div>\n\n                            </div>\n\n                        </ion-list>\n\n                 </ion-col>\n\n\n\n            </ion-card-content>\n\n        </ion-card>\n\n    </div>\n\n    <div class="div-right"></div>\n\n</ion-content>'/*ion-inline-end:"D:\celaneo\mobile\new-mobile\test\src\pages\detail-survey\detail-survey.html"*/,
            providers: [__WEBPACK_IMPORTED_MODULE_8__providers_survey_survey__["a" /* SurveyProvider */]]
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_3__providers_article_article__["a" /* ArticleProvider */],
            __WEBPACK_IMPORTED_MODULE_2__providers_comment_comment__["a" /* CommentProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_8__providers_survey_survey__["a" /* SurveyProvider */],
            __WEBPACK_IMPORTED_MODULE_6__providers_eventsrest_eventsrest__["a" /* EventsrestProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["z" /* ToastController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["a" /* ActionSheetController */],
            __WEBPACK_IMPORTED_MODULE_4__providers_globals_globals__["a" /* GlobalsProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["x" /* Platform */],
            __WEBPACK_IMPORTED_MODULE_7__ionic_native_social_sharing__["a" /* SocialSharing */]])
    ], DetailSurveyPage);
    return DetailSurveyPage;
}());

//# sourceMappingURL=detail-survey.js.map

/***/ }),

/***/ 199:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ListGoodplanPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_globals_globals__ = __webpack_require__(8);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_user_user__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_eventsrest_eventsrest__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__ionic_native_google_analytics__ = __webpack_require__(58);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_moment__ = __webpack_require__(1);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_moment__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__ionic_native_calendar__ = __webpack_require__(54);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__butalso_butalso__ = __webpack_require__(129);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__providers_comment_comment__ = __webpack_require__(22);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__ionic_native_camera__ = __webpack_require__(29);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__ionic_native_social_sharing__ = __webpack_require__(46);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__providers_goodplanrest_goodplanrest__ = __webpack_require__(72);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__good_plan_details_good_plan_details__ = __webpack_require__(105);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__providers_cache_cache__ = __webpack_require__(47);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__merchant_card_merchant_card__ = __webpack_require__(130);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
















/**
 * Generated class for the AgendaPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var ListGoodplanPage = /** @class */ (function () {
    function ListGoodplanPage(event, navCtrl, appGlobals, userService, goodPlanService, eventService, platform, camera, commentService, myAlert, loader, appEvents, ga, calendarPlugin, myModal, socialsharing, cacheService, navParams) {
        var _this = this;
        this.event = event;
        this.navCtrl = navCtrl;
        this.appGlobals = appGlobals;
        this.userService = userService;
        this.goodPlanService = goodPlanService;
        this.eventService = eventService;
        this.platform = platform;
        this.camera = camera;
        this.commentService = commentService;
        this.myAlert = myAlert;
        this.loader = loader;
        this.appEvents = appEvents;
        this.ga = ga;
        this.calendarPlugin = calendarPlugin;
        this.myModal = myModal;
        this.socialsharing = socialsharing;
        this.cacheService = cacheService;
        this.navParams = navParams;
        this.cities = [];
        this.selectedCities = [];
        this.selectedCategories = [];
        this.page = 1;
        this.items = [];
        this.itemsDates = [];
        this.loaderShow = true;
        this.init = false;
        this.eventParticipted = [];
        this.hasApprovedCommunities = false;
        this.cacheLifeTime = 3600;
        this.allowInfiniteScroll = true;
        this.commentEvent = {
            content: '',
            photo: null
        };
        this.currentUser = JSON.parse(localStorage.getItem("currentUser"));
        if (this.currentUser.primary_city) {
            this.selectedCities.push(this.currentUser.primary_city.id);
        }
        this.appGlobals.showHeader = false;
        this.account = navParams.get('account');
        this.event.unsubscribe('merchant:goodplan');
        this.event.subscribe('merchant:goodplan', function (data) {
            _this.page = data[0];
            _this.items = data[1];
            _this.event = data[2];
            _this.itemsDates = data[3];
            _this.allowInfiniteScroll = !data[2] || data[2] && data[2].length;
        });
        this.appEvents.unsubscribe('merchant:goodplan:refresh');
        this.appEvents.subscribe('merchant:goodplan:refresh', function () {
            _this.page = 1;
            _this.cacheService.loadArticles(_this.page, _this.items, _this.events, _this.cacheLifeTime, 'goodplanMerch', _this.account, true);
        });
        var label = 'agenda';
        if (this.platform.is('cordova')) {
            this.appEvents.publish("googleAnalytics", label);
        }
    }
    ListGoodplanPage.prototype.showComment = function (event) {
        var _this = this;
        this.commentService.getCommentsGoodPlan(event.id, 0).then(function (data) {
            _this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_13__good_plan_details_good_plan_details__["a" /* GoodPlanDetailsPage */], {
                id: event.id,
                commentList: data,
                showComment: true,
                title: event.title
            });
        }).catch(function (error) {
            console.log("Error from showing comment: ", error);
        });
    };
    ListGoodplanPage.prototype.goBack = function () {
        this.navCtrl.pop();
    };
    ListGoodplanPage.prototype.ShareArticle = function (item) {
        var options = {
            message: item.title + " : " + item.description,
            subject: "NOUS Ensemble",
            image: item.imageURL,
            url: item.imageURL
        };
        if (this.platform.is('cordova') || this.platform.is('core')) {
            this.socialsharing.shareWithOptions(options).then(function (data) {
            }).catch(function (error) {
                console.log("Error from sharing" + error);
            });
        }
    };
    ListGoodplanPage.prototype.ionViewWillEnter = function () {
        this.appGlobals.showFooter = true;
        this.appGlobals.currentPageid = "mySpace";
        this.appGlobals.showSearchAgenda = false;
        this.appGlobals.showHeader = false;
        this.items = [];
        this.page = 1;
        this.cacheService.loadArticles(this.page, this.items, this.events, this.cacheLifeTime, 'goodplanMerch', this.account);
    };
    ListGoodplanPage.prototype.ionViewDidEnter = function () {
        if (this.appGlobals.currentPageid == "goodplans") {
            this.appGlobals.currentPageid = "goodplans";
        }
        else {
            this.appGlobals.currentPageid = "mySpace";
        }
        this.appEvents.publish('updateFooter');
    };
    ListGoodplanPage.prototype.ionViewWillLeave = function () {
        this.loaderShow = true;
        this.appGlobals.showSearchAgenda = false;
    };
    ListGoodplanPage.prototype.showAgendaBenevole = function (event) {
        this.appGlobals.currentEventId = event.id;
        if (event.isVolunteer) {
            var myModal2 = this.myModal.create('PopupPage', { "message": "<p>Vous êtes déjà  bénévole  à cet événement ! </p>" }, { cssClass: 'message-modal' });
            myModal2.onDidDismiss(function () {
            });
            myModal2.present();
        }
        else {
            if (!this.appGlobals.showBenevoleAgenda) {
                this.appGlobals.showBenevoleAgenda = true;
            }
            else {
                this.appGlobals.showBenevoleAgenda = false;
            }
            for (var _i = 0, _a = this.items; _i < _a.length; _i++) {
                var ev = _a[_i];
                if (ev.id == event.id) {
                    ev.isVolunteer = true;
                    ev.nbVolunteers++;
                }
            }
        }
    };
    ListGoodplanPage.prototype.showHideProposeCarpooling = function () {
        if (!this.appGlobals.showproposeCarpooling) {
            this.appGlobals.showproposeCarpooling = true;
        }
        else {
            this.appGlobals.showproposeCarpooling = false;
        }
    };
    ListGoodplanPage.prototype.showHideContactBar = function (id) {
        this.appGlobals.goodPlanCreatorId = id;
        if (!this.appGlobals.showcontactBar) {
            this.appGlobals.showcontactBar = true;
        }
        else {
            this.appGlobals.showcontactBar = false;
        }
    };
    ListGoodplanPage.prototype.showHideNeedCarpooling = function () {
        if (!this.appGlobals.showNeedCarpooling) {
            this.appGlobals.showNeedCarpooling = true;
        }
        else {
            this.appGlobals.showNeedCarpooling = false;
        }
    };
    ListGoodplanPage.prototype.showHidePutAgenda = function (event) {
        var _this = this;
        if (!this.appGlobals.showPutAgenda) {
            this.appGlobals.showPutAgenda = true;
        }
        else {
            this.appGlobals.showPutAgenda = false;
        }
        var result;
        this.goodPlanService.takePart(event.id).then(function (data) {
            result = data;
            if (result.success) {
                event.isParticipated = true;
                event.nbParticipants++;
                event = data.event;
            }
        }, function (err) {
            _this.appEvents.publish('http:errors', err);
        });
    };
    ListGoodplanPage.prototype.dayDiff = function (firstDate, secondDate) {
        return Math.round((secondDate - firstDate) / (1000 * 60 * 60 * 24));
    };
    ListGoodplanPage.prototype.parseDate = function (str) {
        var arrayDateString = str.split('T');
        var arrayDate = arrayDateString[0].split('-');
        return new Date(arrayDate[0], arrayDate[1] - 1, arrayDate[2]);
    };
    ListGoodplanPage.prototype.parseDateNow = function (dateIn) {
        var yyyy = dateIn.getFullYear();
        var mm = dateIn.getMonth() + 1;
        var dd = dateIn.getDate();
        return String(yyyy + "-" + mm + "-" + dd) + "T00:00:00";
    };
    ListGoodplanPage.prototype.doInfinite = function (infiniteScroll) {
        if (this.init) {
            this.init = false;
            infiniteScroll.complete();
        }
        else if (this.allowInfiniteScroll) {
            this.page += 1;
            this.cacheService.loadArticles(this.page, this.items, this.events, this.cacheLifeTime, 'goodplanMerch', this.account, false, infiniteScroll);
        }
        else {
            infiniteScroll.complete();
        }
    };
    ListGoodplanPage.prototype.doRefreshAgenda = function (refresher) {
        this.items = [];
        this.page = 1;
        this.loaderShow = true;
        this.cacheService.loadArticles(this.page, this.items, this.events, this.cacheLifeTime, 'goodplanMerch', this.account, true, null, refresher);
    };
    ListGoodplanPage.prototype.cancelParticipation = function (event) {
        var _this = this;
        var result;
        this.goodPlanService.cancelTakePart(event.id).then(function (data) {
            result = data;
            var start = __WEBPACK_IMPORTED_MODULE_6_moment__(event.startAt).toDate();
            var end = __WEBPACK_IMPORTED_MODULE_6_moment__(event.endAt).toDate();
            _this.calendarPlugin.deleteEvent(event.title, event.place, '', start, end).then(function (msg) {
            }, function (err) {
            });
            if (result.success) {
                event.isParticipated = false;
                event.nbParticipants--;
                event = data.event;
                var myModal2 = _this.myModal.create('PopupPage', { "message": "<p>Votre annulation a été bien enregistrée ! </p>" }, { cssClass: 'message-modal' });
                myModal2.onDidDismiss(function () {
                });
                myModal2.present();
            }
        }, function (err) {
            _this.appEvents.publish('http:errors', err);
        });
    };
    ListGoodplanPage.prototype.showNeedVolunteerPopup = function (event) {
        var _this = this;
        if (event.needVolunteer) {
            var benevoleAlert = this.myAlert.create({
                title: '',
                subTitle: 'Voulez-vous être bénévole à cet évènement?',
                buttons: [
                    {
                        text: 'Non',
                        role: 'cancel',
                        handler: function () {
                        }
                    },
                    {
                        text: 'Oui',
                        handler: function () {
                            var label = 'volunteer-' + event.id;
                            _this.appEvents.publish("googleAnalytics", label);
                            var modalVolunteers = _this.myModal.create('ParticpatelaststepPage', { "id": event.id }, { cssClass: 'style-modal' });
                            modalVolunteers.present();
                        }
                    }
                ]
            });
            benevoleAlert.present();
        }
    };
    ListGoodplanPage.prototype.publish = function () {
        var adminAssociations = JSON.parse(localStorage.getItem("adminAssociations"));
        var adminMerchants = JSON.parse(localStorage.getItem("adminMerchants"));
        var adherentAssociations = JSON.parse(localStorage.getItem("adherentAssociations"));
        var adherentMerchants = JSON.parse(localStorage.getItem("adherentMerchants"));
        if (localStorage.getItem("hasApprovedCommunities") == 'true') {
            this.hasApprovedCommunities = true;
        }
        else {
            this.hasApprovedCommunities = false;
        }
        if (adherentAssociations.length != 0 || adherentMerchants.length != 0 || adminAssociations.length != 0 || adminMerchants.length != 0 || this.currentUser.role == 'community_su_admin' || this.hasApprovedCommunities) {
            var myModal2 = this.myModal.create('ChoicePage', {}, { cssClass: 'style-modal choice-modal' });
            myModal2.onDidDismiss(function () {
            });
            myModal2.present();
        }
        else {
            var myModal2 = this.myModal.create('PopupPage', { "message": "<p>Vous ne pouvez pas publier ! </p>" }, { cssClass: 'message-modal' });
            myModal2.onDidDismiss(function () {
            });
            myModal2.present();
        }
    };
    ListGoodplanPage.prototype.detailsEvent = function (event, withComments) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_13__good_plan_details_good_plan_details__["a" /* GoodPlanDetailsPage */], {
            id: event.id,
            title: event.title,
            withComments: withComments
        });
    };
    ListGoodplanPage.prototype.openButAlso = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_8__butalso_butalso__["a" /* ButAlsoPage */]);
    };
    ListGoodplanPage.prototype.eventProgress = function () {
        var _this = this;
        this.event.publish('user:current');
        this.currentUser = JSON.parse(localStorage.getItem("currentUser"));
        this.eventService.getEventProgress(this.currentUser.id).then(function (data) {
            _this.eventParticipted = data;
        }, function (err) {
            _this.event.publish('http:errors', err);
        });
    };
    ListGoodplanPage.prototype.addPhotoParticipated = function () {
        if (this.eventParticipted.length == 1) {
            this.takePicture();
        }
        else {
            var myModal2 = this.myModal.create('PopinChoiceEventPage', { "events": this.eventParticipted }, { cssClass: 'style-modal' });
            myModal2.present();
        }
    };
    ListGoodplanPage.prototype.takePicture = function () {
        var _this = this;
        this.camera.getPicture({
            destinationType: this.camera.DestinationType.DATA_URL,
            quality: 100,
            targetWidth: 600,
            targetHeight: 600,
            allowEdit: true,
            correctOrientation: true,
            encodingType: this.camera.EncodingType.JPEG
        }).then(function (imageData) {
            _this.commentEvent.photo = "data:image/jpeg;base64," + imageData;
            var myModal2 = _this.myModal.create('EvenCommentPage', {
                "comment": _this.commentEvent,
                "participation": _this.eventParticipted[0].articleId
            }, { cssClass: 'comment-modal' });
            myModal2.present();
        });
    };
    ListGoodplanPage.prototype.goToMerchantCard = function (item) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_15__merchant_card_merchant_card__["a" /* MerchantCardPage */], {
            currentMerchant: item
        });
    };
    ListGoodplanPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-list-goodplan',template:/*ion-inline-start:"D:\celaneo\mobile\new-mobile\test\src\pages\list-goodplan\list-goodplan.html"*/'<!--\n\n  Generated template for the AgendaPage page.\n\n\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n\n  Ionic pages and navigation.\n\n-->\n\n<ion-header class="mobile-header" *ngIf="appGlobals.token">\n\n    <ion-grid>\n\n        <ion-row>\n\n            <ion-col col-2 text-left>\n\n                <div class="item">\n\n                    <ion-icon name="ios-arrow-back" (click)="goBack()"></ion-icon>\n\n                </div>\n\n            </ion-col>\n\n            <ion-col col-8 text-center class="page-title">\n\n                <ion-title>Les bons plans</ion-title>\n\n            </ion-col>\n\n            <ion-col col-2>\n\n                <div class="item" text-right>\n\n\n\n                </div>\n\n            </ion-col>\n\n        </ion-row>\n\n    </ion-grid>\n\n</ion-header>\n\n<ion-content>\n\n    <div class="div-left">\n\n        <div text-right class="back"><img src="assets/imgs/icons/1.png" (click)="goBack()"></div>\n\n    </div>\n\n    <div class="div-center">\n\n        <ion-refresher (ionRefresh)="doRefreshAgenda($event)">\n\n            <ion-refresher-content></ion-refresher-content>\n\n        </ion-refresher>\n\n\n\n        <ion-grid class="grid-bottom">\n\n            <ion-row>\n\n                <div class="agenda-container" *ngFor="let itemDate of itemsDates; let idx = index">\n\n                    <ion-card>\n\n                        <ion-card-header>\n\n                            <strong class="title-date">{{itemDate.key| amLocale:\'fr\' | amDateFormat:\' Do MMMM\'}}</strong>\n\n                            <img float-end class="move lock-icons" src="assets/imgs/icons/lock.png" alt="NOUS-Ensemble" />\n\n                            <p class="title-day" text-capitalize> {{itemDate.key| amLocale:\'fr\' | amDateFormat:\'dddd\'}}\n\n                            </p>\n\n                        </ion-card-header>\n\n                        <ion-card-content *ngFor="let item of itemDate.value">\n\n\n\n                            <ion-row class="event-item" >\n\n                                <ion-col col-3 (click)="detailsEvent(item, false)">\n\n                                    <span class="start-hour">{{item.startAt| amLocale:\'fr\' |\n\n                                        amDateFormat:\'HH\'}}h{{item.startAt| amLocale:\'fr\' | amDateFormat:\'mm\'}}</span>\n\n                                    <img *ngIf="item.private" float-end class="move lock-icons" src="assets/imgs/icons/lock.png" alt="NOUS-Ensemble" />\n\n                                </ion-col>\n\n                                <ion-col col-6>\n\n                                    <div class="bottom-margin-8" (click)="detailsEvent(item, false)"><strong class="event-title">{{item.title}}</strong></div>\n\n                                    <p text-capitalize class=\'AssoTitle\' (click)="goToMerchantCard(item)">\n\n                                        {{item.creatorName}}\n\n                                    </p>\n\n                                    <strong>à {{item.cityName}}</strong>\n\n                                </ion-col>\n\n                                <ion-col col-3 (click)="detailsEvent(item, false)">\n\n                                    <div *ngIf="(item.imageURL && !item.images) || (!item.imageURL && !item.images) || (item.images && !item.imageURL && item.images.length == 1); else elseBlock"\n\n                                        class="home-card-slides img-div">\n\n                                        <div class="img-div" *ngIf="item.imageURL">\n\n                                            <img class="img-div" data-src="{{item.imageURL}}" imageViewer>\n\n                                        </div>\n\n                                        <div class="img-div" *ngFor="let img of item.images">\n\n                                            <img class="img-div" data-src="{{img.url}}" imageViewer>\n\n                                        </div>\n\n                                    </div>\n\n                                    <ng-template #elseBlock>\n\n                                        <ion-slides class="home-card-slides" autoplay="5000" loop="true" pager>\n\n                                            <ion-slide class="img-div" *ngIf="item.imageURL">\n\n                                                <img class="img-div" data-src="{{item.imageURL}}" imageViewer>\n\n                                            </ion-slide>\n\n                                            <ion-slide class="img-div" *ngFor="let img of item.images">\n\n                                                <img class="img-div" data-src="{{img.url}}" imageViewer>\n\n                                            </ion-slide>\n\n                                        </ion-slides>\n\n                                    </ng-template>\n\n                                </ion-col>\n\n                            </ion-row>\n\n                            <ion-col col-12 text-center>\n\n\n\n                            </ion-col>\n\n                            <div text-center>\n\n                                <ion-row class="comment-text-style">\n\n                                    <ion-col class="text-grey">\n\n                                        <span  *ngIf="item.nbComments <= 1">{{item.nbComments}} Commentaire</span>\n\n                                        <span  *ngIf="item.nbComments > 1">{{item.nbComments}} Commentaires</span>\n\n                                    </ion-col>\n\n                                    <ion-col>\n\n                                        <img class="comment-img-style" src="assets/imgs/icons/list-divider.png">\n\n                                    </ion-col>\n\n                                    <ion-col class="text-grey">\n\n                                        <span *ngIf="item.nbParticipants <= 1"> {{item.nbParticipants}} Intérêt</span>\n\n                                        <span *ngIf="item.nbParticipants > 1"> {{item.nbParticipants}} Intérêts</span>\n\n                                    </ion-col>\n\n                                </ion-row>\n\n                            </div>\n\n\n\n                            <ion-row text-center>\n\n                                <ion-col col-4 (click)=\'showComment(item)\'>\n\n                                    <span class="disociate-actions" ><img class="news-comment-action dissociate-comment" src="assets/imgs/icons/comments.png"></span>\n\n                                </ion-col>\n\n\n\n                                <ion-col col-4>\n\n                                    <img alt="NOUS-Ensemble" class="news-comment-action agenda-icons icons-stars"  *ngIf="item.isParticipated" (click)="cancelParticipation(item)"\n\n                                        src="assets/imgs/icons/star-full.png">\n\n                                    <img alt="NOUS-Ensemble" class="news-comment-action agenda-icons icons-stars"  *ngIf="!item.isParticipated" (click)="showHidePutAgenda(item)"\n\n                                        src="assets/imgs/icons/star-empty.png">\n\n                                </ion-col>\n\n                                <ion-col col-4 (click)="showHideContactBar(item.id);" style="float:left;">\n\n                                    <img alt="NOUS-Ensemble" class="news-comment-action agenda-icons icons-contact-merchant" src="assets/imgs/contact-merchant.png" style="float: left">\n\n                                </ion-col>\n\n                            </ion-row>\n\n\n\n\n\n\n\n                        </ion-card-content>\n\n                    </ion-card>\n\n\n\n\n\n                </div>\n\n                <ion-col col-12 text-center *ngIf="itemsDates.length == 0">\n\n                    <p text-center class="no-result"> Pas de résultat correspondant à votre filtre.</p>\n\n                </ion-col>\n\n\n\n            </ion-row>\n\n            <ion-infinite-scroll (ionInfinite)="doInfinite($event)" *ngIf="loaderShow" threshold="100px">\n\n                <ion-infinite-scroll-content loadingSpinner="bubbles" loadingText="Charger plus...">\n\n                </ion-infinite-scroll-content>\n\n            </ion-infinite-scroll>\n\n        </ion-grid>\n\n\n\n    </div>\n\n    <div class="div-right" text-left>\n\n        <img class="publish" src="assets/imgs/icons/image37.png" (click)="publish()">\n\n    </div>\n\n</ion-content>'/*ion-inline-end:"D:\celaneo\mobile\new-mobile\test\src\pages\list-goodplan\list-goodplan.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_2__providers_globals_globals__["a" /* GlobalsProvider */],
            __WEBPACK_IMPORTED_MODULE_3__providers_user_user__["a" /* UserProvider */],
            __WEBPACK_IMPORTED_MODULE_12__providers_goodplanrest_goodplanrest__["a" /* GoodplanrestProvider */],
            __WEBPACK_IMPORTED_MODULE_4__providers_eventsrest_eventsrest__["a" /* EventsrestProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["x" /* Platform */],
            __WEBPACK_IMPORTED_MODULE_10__ionic_native_camera__["a" /* Camera */],
            __WEBPACK_IMPORTED_MODULE_9__providers_comment_comment__["a" /* CommentProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_5__ionic_native_google_analytics__["a" /* GoogleAnalytics */],
            __WEBPACK_IMPORTED_MODULE_7__ionic_native_calendar__["a" /* Calendar */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_11__ionic_native_social_sharing__["a" /* SocialSharing */],
            __WEBPACK_IMPORTED_MODULE_14__providers_cache_cache__["a" /* CacheProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */]])
    ], ListGoodplanPage);
    return ListGoodplanPage;
}());

//# sourceMappingURL=list-goodplan.js.map

/***/ }),

/***/ 200:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ChangeSuAdminPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_globals_globals__ = __webpack_require__(8);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_association_association__ = __webpack_require__(36);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_merchant_merchant__ = __webpack_require__(39);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__pages_my_space_my_space__ = __webpack_require__(62);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__providers_eventsrest_eventsrest__ = __webpack_require__(9);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







/**
 * Generated class for the ChangeSuAdminPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var ChangeSuAdminPage = /** @class */ (function () {
    function ChangeSuAdminPage(navCtrl, appGlobals, loadingCtrl, alertCtrl, associationProvider, merchantProvider, serviceEvent, event, navParams) {
        this.navCtrl = navCtrl;
        this.appGlobals = appGlobals;
        this.loadingCtrl = loadingCtrl;
        this.alertCtrl = alertCtrl;
        this.associationProvider = associationProvider;
        this.merchantProvider = merchantProvider;
        this.serviceEvent = serviceEvent;
        this.event = event;
        this.navParams = navParams;
        this.submited = false;
        this.errors = [];
        this.validateEmail = false;
        this.eventParticipted = [];
        this.account = this.navParams.get("account");
        this.type = this.navParams.get("type");
    }
    ChangeSuAdminPage.prototype.changeSuAdmin = function (formValidation) {
        var _this = this;
        this.submited = true;
        if (!formValidation) {
            var loadingPopup_1 = this.loadingCtrl.create({});
            // Show the popup
            loadingPopup_1.present();
            if (this.type == "association") {
                this.associationProvider.putSuAdmin(this.account.id, this.newSuAdmin).then(function (data) {
                    loadingPopup_1.dismiss();
                    if (data.sucess) {
                        var errorAlert = _this.alertCtrl.create({
                            title: "Succès",
                            subTitle: "Le super administrateur de " + _this.account.name + " a été changer avec succès.",
                            buttons: [
                                {
                                    text: 'OK',
                                    handler: function () {
                                        _this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_5__pages_my_space_my_space__["a" /* MySpacePage */]);
                                    }
                                }
                            ]
                        });
                        errorAlert.present();
                    }
                    else {
                        _this.errors = data.errors;
                    }
                }, function (err) {
                    loadingPopup_1.dismiss();
                    _this.event.publish('http:errors', err);
                });
            }
            else if (this.type == "merchant") {
                this.merchantProvider.putSuAdmin(this.account.id, this.newSuAdmin).then(function (data) {
                    loadingPopup_1.dismiss();
                    if (data.sucess) {
                        var errorAlert = _this.alertCtrl.create({
                            title: "Succès",
                            subTitle: "Le super administrateur de " + _this.account.name + " a été changer avec succès.",
                            buttons: [
                                {
                                    text: 'OK',
                                    handler: function () {
                                        _this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_5__pages_my_space_my_space__["a" /* MySpacePage */]);
                                    }
                                }
                            ]
                        });
                        errorAlert.present();
                    }
                    else {
                        _this.errors = data.errors;
                    }
                }, function (err) {
                    loadingPopup_1.dismiss();
                    _this.event.publish('http:errors', err);
                });
            }
        }
    };
    ChangeSuAdminPage.prototype.goBack = function () {
        this.navCtrl.pop();
    };
    ChangeSuAdminPage.prototype.ionViewWillEnter = function () {
        this.appGlobals.showHeader = false;
        this.appGlobals.showFooter = true;
        this.event.publish('updateFooter');
    };
    ChangeSuAdminPage.prototype.onBlurEmail = function () {
        this.validateEmail = true;
    };
    ChangeSuAdminPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-change-su-admin',template:/*ion-inline-start:"D:\celaneo\mobile\new-mobile\test\src\pages\change-su-admin\change-su-admin.html"*/'<ion-header class="mobile-header" *ngIf="appGlobals.token">\n\n    <ion-grid>\n\n        <ion-row>\n\n            <ion-col col-2 text-left>\n\n                <div class="item">\n\n                    <ion-icon name="ios-arrow-back" (click)="goBack()"></ion-icon>\n\n                </div>\n\n            </ion-col>\n\n            <ion-col col-8 text-center class="page-title">\n\n                <ion-title> Changer super administrateur </ion-title>\n\n            </ion-col>\n\n            <ion-col col-2>\n\n                <div class="item" text-right>\n\n\n\n                </div>\n\n            </ion-col>\n\n        </ion-row>\n\n    </ion-grid>\n\n</ion-header>\n\n\n\n<ion-content class="no-padding">\n\n    <div class="div-left">\n\n        <div text-right class="back"><img src="assets/imgs/icons/1.png" (click)="goBack()"></div>\n\n    </div>\n\n    <div class="div-center div-margin-top">\n\n        <div padding>\n\n            <ion-grid class="padding-horizontal">\n\n                <ion-row>\n\n                    <ion-col col-12 text-left>\n\n                        Pour supprimer votre compte , veuillez associer le rôle super administrateur de vos\n\n                        associations et commerçants à un autre utilisateur de nous ensemble.\n\n                    </ion-col>\n\n                </ion-row>\n\n                <ion-row>\n\n                    <div class="form-item">\n\n                        <p class="error" *ngFor="let error of errors">{{error}}</p>\n\n                    </div>\n\n                </ion-row>\n\n            </ion-grid>\n\n\n\n        </div>\n\n        <form class="form" #suAdminEdit="ngForm">\n\n            <ion-row>\n\n\n\n                <ion-col col-12 text-center>\n\n                    <div text-center class="full-width-s">\n\n                        <button ion-button color="white-color" round class="button-white" text-center no-padding>\n\n                            <div class="block-image" text-center>\n\n                                <img *ngIf="account.imageURL" class="block-button-img" src="{{account.imageURL}}" />\n\n                                <img *ngIf="!account.imageURL" class="block-button-img" src="assets/imgs/icons/user_default.png" />\n\n                            </div>\n\n                            <div class="block-name">{{account.name}}</div>\n\n                            <div class="block-icon"></div>\n\n                        </button>\n\n\n\n                        <!-- -->\n\n\n\n                        <ion-item class="item-input-white item-input-white-custom" [class.formError]="email.invalid && (email.dirty || submited || email.touched)">\n\n                            <ion-input name="email" type="email" autocapitalize="none" [(ngModel)]="newSuAdmin" #email="ngModel"\n\n                                (mouseout)="onBlurEmail()" pattern="[a-z0-9!#$%&\'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&\'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?"\n\n                                placeholder="Email du nouveau super administrateur" required></ion-input>\n\n                        </ion-item>\n\n                        <div class="error-msg" *ngIf="email.invalid && (email.dirty || submited || email.touched)">\n\n                            <span class="error">Champs adresse mail obligatoire</span>\n\n                        </div>\n\n                        <!-- -->\n\n\n\n                        <div class="form-item">\n\n                            <button (click)="changeSuAdmin(suAdminEdit.invalid)" ion-button full class="button-valid res">Suivant</button>\n\n                        </div>\n\n\n\n                    </div>\n\n                </ion-col>\n\n\n\n\n\n\n\n\n\n            </ion-row>\n\n        </form>\n\n    </div>\n\n    <div class="div-right"></div>\n\n</ion-content>'/*ion-inline-end:"D:\celaneo\mobile\new-mobile\test\src\pages\change-su-admin\change-su-admin.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_2__providers_globals_globals__["a" /* GlobalsProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_3__providers_association_association__["a" /* AssociationProvider */],
            __WEBPACK_IMPORTED_MODULE_4__providers_merchant_merchant__["a" /* MerchantProvider */],
            __WEBPACK_IMPORTED_MODULE_6__providers_eventsrest_eventsrest__["a" /* EventsrestProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */]])
    ], ChangeSuAdminPage);
    return ChangeSuAdminPage;
}());

//# sourceMappingURL=change-su-admin.js.map

/***/ }),

/***/ 201:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return DeleteAccountPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_globals_globals__ = __webpack_require__(8);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_merchant_merchant__ = __webpack_require__(39);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_association_association__ = __webpack_require__(36);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__pages_my_space_my_space__ = __webpack_require__(62);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__providers_eventsrest_eventsrest__ = __webpack_require__(9);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







/**
 * Generated class for the DeleteAccountPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var DeleteAccountPage = /** @class */ (function () {
    function DeleteAccountPage(navCtrl, appGlobals, serviceEvent, loadingCtrl, merchantProvider, associationProvider, alertCtrl, event, navParams) {
        this.navCtrl = navCtrl;
        this.appGlobals = appGlobals;
        this.serviceEvent = serviceEvent;
        this.loadingCtrl = loadingCtrl;
        this.merchantProvider = merchantProvider;
        this.associationProvider = associationProvider;
        this.alertCtrl = alertCtrl;
        this.event = event;
        this.navParams = navParams;
        this.submited = false;
        this.account = this.navParams.get('account');
        this.type = this.navParams.get('type');
    }
    DeleteAccountPage.prototype.goBack = function () {
        this.navCtrl.pop();
    };
    DeleteAccountPage.prototype.ionViewWillEnter = function () {
        this.appGlobals.showHeader = false;
        this.appGlobals.showFooter = true;
    };
    DeleteAccountPage.prototype.deleteAccount = function (errorValidation) {
        var _this = this;
        this.submited = true;
        if (errorValidation) {
            var loadingPopup_1 = this.loadingCtrl.create({});
            loadingPopup_1.present();
            if (this.type == 'merchant') {
                this.merchantProvider.deleteMerchant(this.account.id, this.reason).then(function (data) {
                    loadingPopup_1.dismiss();
                    if (data.succes) {
                        for (var key in _this.appGlobals.adminMerchants) {
                            var value = _this.appGlobals.adminMerchants[key];
                            if (value.id == _this.account.id) {
                                delete _this.appGlobals.adminMerchants[key];
                            }
                        }
                        var errorAlert = _this.alertCtrl.create({
                            title: "Succès",
                            subTitle: "Compte commerçant est supprimer avec succès.",
                            buttons: [
                                {
                                    text: 'OK',
                                    handler: function () {
                                        _this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_5__pages_my_space_my_space__["a" /* MySpacePage */]);
                                    }
                                }
                            ]
                        });
                        errorAlert.present();
                    }
                }, function (err) {
                    loadingPopup_1.dismiss();
                    _this.event.publish('http:errors', err);
                });
            }
            else if (this.type == 'association') {
                this.associationProvider.deleteAssociation(this.account.id, this.reason).then(function (data) {
                    for (var key in _this.appGlobals.adminAssociations) {
                        var value = _this.appGlobals.adminAssociations[key];
                        if (value.id == _this.account.id) {
                            delete _this.appGlobals.adminAssociations[key];
                        }
                    }
                    loadingPopup_1.dismiss();
                    if (data.succes) {
                        var errorAlert = _this.alertCtrl.create({
                            title: "Succès",
                            subTitle: "Compte association est supprimer avec succès.",
                            buttons: [
                                {
                                    text: 'OK',
                                    handler: function () {
                                        _this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_5__pages_my_space_my_space__["a" /* MySpacePage */]);
                                    }
                                }
                            ]
                        });
                        errorAlert.present();
                    }
                }, function (err) {
                    loadingPopup_1.dismiss();
                    _this.event.publish('http:errors', err);
                });
            }
        }
    };
    DeleteAccountPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-delete-account',template:/*ion-inline-start:"D:\celaneo\mobile\new-mobile\test\src\pages\delete-account\delete-account.html"*/'<ion-header class="mobile-header" *ngIf="appGlobals.token">\n\n    <ion-grid>\n\n        <ion-row>\n\n            <ion-col col-2 text-left>\n\n                <div class="item">\n\n                    <ion-icon name="ios-arrow-back" (click)="goBack()"></ion-icon>\n\n                </div>\n\n            </ion-col>\n\n            <ion-col col-8 text-center class="page-title">\n\n\n\n                <ion-title> Supprimer compte </ion-title>\n\n            </ion-col>\n\n            <ion-col col-2>\n\n                <div class="item" text-right>\n\n\n\n                </div>\n\n            </ion-col>\n\n        </ion-row>\n\n    </ion-grid>\n\n</ion-header>\n\n\n\n<ion-content>\n\n    <div class="div-left"> </div>\n\n    <div class="div-center div-margin-top">\n\n        <div padding>\n\n            <ion-grid class="padding-horizontal">\n\n                <ion-row>\n\n                    <div text-center>\n\n                        Etes-vous certain de vouloir supprimer votre compte {{account.name}} ? Si oui dites-nous\n\n                        ci-dessous la raison de cette suppression.\n\n                    </div>\n\n                </ion-row>\n\n                <form class="form" #removeAccountForm="ngForm">\n\n                    <ion-row>\n\n                        <div class="form-item full-width-s">\n\n                            <ion-col col-12 text-center>\n\n                                <ion-item class="item-input-white" text-center>\n\n                                    <ion-textarea [class.formError]="cause.invalid && (cause.dirty || submited || cause.touched)"\n\n                                        class="form-input-text" #cause="ngModel" [(ngModel)]="reason" type="text" id="reason"\n\n                                        name="reason" placeholder="Motif*..." required>\n\n                                    </ion-textarea>\n\n                                </ion-item>\n\n                            </ion-col>\n\n                            <div class="error-msg">\n\n                                <span class="error" *ngIf="cause.invalid && (cause.dirty || submited || cause.touched)">Champs\n\n                                    motif obligatoire</span>\n\n                            </div>\n\n                            <div class="form-item">\n\n                                <button ion-button full class="button-valid res" (click)="deleteAccount(removeAccountForm.valid)">Supprimer\n\n                                    mon compte</button>\n\n                            </div>\n\n                        </div>\n\n\n\n                    </ion-row>\n\n\n\n                </form>\n\n            </ion-grid>\n\n\n\n        </div>\n\n    </div>\n\n    <div class="div-right"></div>\n\n</ion-content>'/*ion-inline-end:"D:\celaneo\mobile\new-mobile\test\src\pages\delete-account\delete-account.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_2__providers_globals_globals__["a" /* GlobalsProvider */],
            __WEBPACK_IMPORTED_MODULE_6__providers_eventsrest_eventsrest__["a" /* EventsrestProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_3__providers_merchant_merchant__["a" /* MerchantProvider */],
            __WEBPACK_IMPORTED_MODULE_4__providers_association_association__["a" /* AssociationProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */]])
    ], DeleteAccountPage);
    return DeleteAccountPage;
}());

//# sourceMappingURL=delete-account.js.map

/***/ }),

/***/ 202:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return DeleteCitzenAccountLastPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_globals_globals__ = __webpack_require__(8);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_user_user__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_eventsrest_eventsrest__ = __webpack_require__(9);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





/**
 * Generated class for the DeleteCitzenAccountLastPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var DeleteCitzenAccountLastPage = /** @class */ (function () {
    function DeleteCitzenAccountLastPage(navCtrl, appGlobals, myUser, appEvents, loader, myAlert, myModal, serviceEvent, loadingCtrl, alertCtrl, event, navParams) {
        this.navCtrl = navCtrl;
        this.appGlobals = appGlobals;
        this.myUser = myUser;
        this.appEvents = appEvents;
        this.loader = loader;
        this.myAlert = myAlert;
        this.myModal = myModal;
        this.serviceEvent = serviceEvent;
        this.loadingCtrl = loadingCtrl;
        this.alertCtrl = alertCtrl;
        this.event = event;
        this.navParams = navParams;
        this.submited = false;
    }
    DeleteCitzenAccountLastPage.prototype.goBack = function () {
        this.navCtrl.pop();
    };
    DeleteCitzenAccountLastPage.prototype.ionViewWillEnter = function () {
        this.appGlobals.showHeader = false;
        this.appGlobals.showFooter = true;
    };
    DeleteCitzenAccountLastPage.prototype.deleteAccountConfirmation = function (errorValidation) {
        var _this = this;
        this.submited = true;
        this.submited = true;
        if (errorValidation) {
            var confirmationAlert = this.alertCtrl.create({
                title: "Confirmation",
                subTitle: "Êtes-vous sûr de vouloir supprimer votre compte.",
                buttons: [
                    {
                        text: 'OK',
                        handler: function () {
                            _this.deleteAccount();
                        }
                    }
                ]
            });
            confirmationAlert.present();
        }
    };
    DeleteCitzenAccountLastPage.prototype.deleteAccount = function () {
        var _this = this;
        var loadingPopup = this.loadingCtrl.create({});
        loadingPopup.present();
        this.myUser.deleteAccount(this.reason).then(function (data) {
            loadingPopup.dismiss();
            if (data.succes) {
                var errorAlert = _this.alertCtrl.create({
                    title: "Succès",
                    subTitle: "Votre compte est supprimé avec succès.",
                    buttons: [
                        {
                            text: 'OK',
                            handler: function () {
                                _this.appEvents.publish('user:logout');
                            }
                        }
                    ]
                });
                errorAlert.present();
            }
        }, function (err) {
            loadingPopup.dismiss();
            _this.event.publish('http:errors', err);
        });
    };
    DeleteCitzenAccountLastPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-delete-citzen-account-last',template:/*ion-inline-start:"D:\celaneo\mobile\new-mobile\test\src\pages\delete-citzen-account-last\delete-citzen-account-last.html"*/'<ion-header class="mobile-header" *ngIf="appGlobals.token">\n\n    <ion-grid>\n\n        <ion-row>\n\n            <ion-col col-2 text-left>\n\n                <div class="item">\n\n                    <ion-icon name="ios-arrow-back" (click)="goBack()"></ion-icon>\n\n                </div>\n\n            </ion-col>\n\n            <ion-col col-8 text-center class="page-title">\n\n\n\n                <ion-title> Supprimer compte </ion-title>\n\n            </ion-col>\n\n            <ion-col col-2>\n\n                <div class="item" text-right>\n\n\n\n                </div>\n\n            </ion-col>\n\n        </ion-row>\n\n    </ion-grid>\n\n</ion-header>\n\n\n\n<ion-content>\n\n    <div class="div-left"> </div>\n\n    <div class="div-center div-margin-top">\n\n        <div padding>\n\n            <ion-grid class="padding-horizontal">\n\n                <ion-row>\n\n                    <div text-center>\n\n                        Etes-vous certain de vouloir supprimer votre compte citoyen? Si oui dites-nous ci-dessous la\n\n                        raison de cette suppression.\n\n                    </div>\n\n                </ion-row>\n\n                <form class="form" #deleteAccountForm="ngForm">\n\n                    <ion-row>\n\n\n\n                        <div class="form-item full-width-s">\n\n                            <ion-col col-12 text-center>\n\n                                <ion-item class="item-input-white" text-center>\n\n                                    <ion-textarea [class.formError]="cause.invalid && (cause.dirty || submited || cause.touched)"\n\n                                        class="form-input-text" #cause="ngModel" [(ngModel)]="reason" type="text" id="reason"\n\n                                        name="reason" placeholder="Motif*..." required>\n\n\n\n                                    </ion-textarea>\n\n                                </ion-item>\n\n                            </ion-col>\n\n                            <div class="error-msg">\n\n                                <span class="error" *ngIf="cause.invalid && (cause.dirty || submited || cause.touched)">Champs\n\n                                    motif obligatoire</span>\n\n                            </div>\n\n                            <div class="form-item">\n\n                                <button ion-button full class="button-valid res" (click)="deleteAccountConfirmation(deleteAccountForm.valid)">Supprimer\n\n                                    mon compte</button>\n\n                            </div>\n\n                        </div>\n\n                    </ion-row>\n\n                </form>\n\n            </ion-grid>\n\n\n\n        </div>\n\n    </div>\n\n    <div class="div-right"></div>\n\n</ion-content>'/*ion-inline-end:"D:\celaneo\mobile\new-mobile\test\src\pages\delete-citzen-account-last\delete-citzen-account-last.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_2__providers_globals_globals__["a" /* GlobalsProvider */],
            __WEBPACK_IMPORTED_MODULE_3__providers_user_user__["a" /* UserProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_4__providers_eventsrest_eventsrest__["a" /* EventsrestProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */]])
    ], DeleteCitzenAccountLastPage);
    return DeleteCitzenAccountLastPage;
}());

//# sourceMappingURL=delete-citzen-account-last.js.map

/***/ }),

/***/ 203:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return User; });
var User = /** @class */ (function () {
    function User() {
        this.firstname = null;
        this.lastname = null;
        this.email = null;
        this.city = null;
        this.phone = null;
        this.password = null;
        this.rePassword = null;
        this.rememberMe = true;
    }
    User.prototype.getId = function () {
        return this.id;
    };
    User.prototype.getFirstname = function () {
        return this.firstname;
    };
    User.prototype.setFirstName = function (firstname) {
        this.firstname = firstname;
    };
    User.prototype.getLastname = function () {
        return this.lastname;
    };
    User.prototype.setLastname = function (lastname) {
        this.lastname = lastname;
    };
    User.prototype.getBirth = function () {
        return this.birth;
    };
    User.prototype.setBirth = function (birth) {
        this.birth = birth;
    };
    User.prototype.getEmail = function () {
        return this.email;
    };
    User.prototype.setEmail = function (email) {
        this.email = email;
    };
    User.prototype.getCity = function () {
        return this.city;
    };
    User.prototype.setCity = function (city) {
        this.city = city;
    };
    User.prototype.getPhone = function () {
        return this.phone;
    };
    User.prototype.setPhone = function (phone) {
        this.phone = phone;
    };
    User.prototype.getImageUrl = function () {
        return this.image_url;
    };
    User.prototype.setImageUrl = function (image_url) {
        this.image_url = image_url;
    };
    User.prototype.getPassword = function () {
        return this.password;
    };
    User.prototype.setPassword = function (password) {
        this.password = password;
    };
    User.prototype.getRePassword = function () {
        return this.rePassword;
    };
    User.prototype.setRePassword = function (rePassword) {
        this.rePassword = rePassword;
    };
    User.prototype.getRememberMe = function () {
        return this.rememberMe;
    };
    User.prototype.setRememberMe = function (rememberMe) {
        this.rememberMe = rememberMe;
    };
    User.prototype.getCurrent = function (currentUser) {
        this.firstname = currentUser.firstname;
        this.lastname = currentUser.lastname;
        this.birth = currentUser.birth_date;
        this.email = currentUser.email;
        this.phone = currentUser.phone;
        this.city = currentUser.city ? currentUser.city.name : null;
        this.image_url = currentUser.image_url;
    };
    return User;
}());

//# sourceMappingURL=user.js.map

/***/ }),

/***/ 204:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CityProjectsPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_globals_globals__ = __webpack_require__(8);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_article_article__ = __webpack_require__(31);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_comment_comment__ = __webpack_require__(22);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__pages_detail_article_detail_article__ = __webpack_require__(56);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__providers_eventsrest_eventsrest__ = __webpack_require__(9);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







/**
 * Generated class for the CityProjectsPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var CityProjectsPage = /** @class */ (function () {
    function CityProjectsPage(navCtrl, navParams, appGlobals, loader, appEvents, serviceEvent, commentService, modal, alertCtrl, articleService) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.appGlobals = appGlobals;
        this.loader = loader;
        this.appEvents = appEvents;
        this.serviceEvent = serviceEvent;
        this.commentService = commentService;
        this.modal = modal;
        this.alertCtrl = alertCtrl;
        this.articleService = articleService;
        this.items = [];
        this.page = 1;
        this.city = [];
        this.cities = [];
        this.comment = [];
        this.numberComments = 0;
        this.eventParticipted = [];
    }
    CityProjectsPage.prototype.ionViewWillEnter = function () {
        this.appGlobals.showHeader = false;
        this.appGlobals.showFooter = true;
        this.appEvents.publish('updateFooter');
        this.currentUser = JSON.parse(localStorage.getItem("currentUser"));
        this.cities = [];
        if (this.currentUser.other_cities) {
            for (var _i = 0, _a = this.currentUser.other_cities; _i < _a.length; _i++) {
                var c = _a[_i];
                this.cities.push(c);
            }
        }
        this.cities.push(this.currentUser.primary_city);
        this.city = this.currentUser.primary_city.id;
        this.getCityHallArticles();
    };
    CityProjectsPage.prototype.ionViewWillLeave = function () {
        this.appGlobals.showHeader = true;
        this.appGlobals.showFooter = true;
    };
    CityProjectsPage.prototype.goBack = function () {
        this.navCtrl.pop();
    };
    CityProjectsPage.prototype.getCityHallArticles = function () {
        var _this = this;
        var loadingPopup = this.loader.create({});
        loadingPopup.present();
        this.items = [];
        this.page = 1;
        this.articleService.findCityHallWallArticles(this.city, this.page).then(function (data) {
            _this.articles = data;
            for (var _i = 0, _a = _this.articles; _i < _a.length; _i++) {
                var article = _a[_i];
                _this.items.push(article);
            }
            loadingPopup.dismiss();
        }, function (err) {
            loadingPopup.dismiss();
            _this.appEvents.publish('http:errors', err);
        });
    };
    CityProjectsPage.prototype.doInfinite = function (infiniteScroll) {
        var _this = this;
        this.page += 1;
        this.articleService.findCityHallWallArticles(this.city, this.page).then(function (data) {
            _this.articles = data;
            for (var _i = 0, _a = _this.articles; _i < _a.length; _i++) {
                var article = _a[_i];
                _this.items.push(article);
            }
            infiniteScroll.complete();
        }, function (err) {
            infiniteScroll.complete();
        });
    };
    CityProjectsPage.prototype.doRefresh = function (refresher) {
        var _this = this;
        this.page = 1;
        this.articleService.findCityHallWallArticles(this.city, this.page).then(function (data) {
            _this.items = [];
            _this.articles = data;
            for (var _i = 0, _a = _this.articles; _i < _a.length; _i++) {
                var article = _a[_i];
                _this.items.push(article);
            }
            refresher.complete();
        }, function (err) {
            _this.appEvents.publish('http:errors', err);
            refresher.complete();
        });
    };
    CityProjectsPage.prototype.filterCities = function () {
        this.getCityHallArticles();
    };
    CityProjectsPage.prototype.like = function (article) {
        var _this = this;
        this.articleService.like(article).then(function () {
            var index = _this.items.findIndex(function (i) { return i.id == article; });
            if (index != -1) {
                _this.items[index].isLiked = true;
                _this.items[index].nbLikes++;
            }
        }, function (err) {
            _this.appEvents.publish('http:errors', err);
        });
    };
    CityProjectsPage.prototype.unlike = function (article) {
        var _this = this;
        this.articleService.unlike(article).then(function () {
            var index = _this.items.findIndex(function (i) { return i.id == article; });
            if (index != -1) {
                _this.items[index].isLiked = false;
                _this.items[index].nbLikes--;
            }
        }, function (err) {
            _this.appEvents.publish('http:errors', err);
        });
    };
    CityProjectsPage.prototype.detailsArticle = function (article) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_5__pages_detail_article_detail_article__["a" /* DetailArticlePage */], {
            article: article
        });
    };
    CityProjectsPage.prototype.detailsArticleComment = function (article) {
        var _this = this;
        var loadingPopup = this.loader.create({});
        loadingPopup.present();
        this.commentService.getCommentsArticlePagination(article.id, 0).then(function (data) {
            _this.comment = data;
            _this.numberComments = article.nbreComments;
            loadingPopup.dismiss();
            _this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_5__pages_detail_article_detail_article__["a" /* DetailArticlePage */], {
                article: article,
                comment: _this.comment,
                numberComments: _this.numberComments,
                showComments: true
            });
        }, function (err) {
            loadingPopup.dismiss();
            _this.appEvents.publish('http:errors', err);
        });
    };
    CityProjectsPage.prototype.refreshNbreComments = function (currentArticle) {
        var _this = this;
        var loadingPopup = this.loader.create({});
        loadingPopup.present();
        this.articleService.getDetailsArticle(currentArticle).then(function (data) {
            var index = _this.items.findIndex(function (i) { return i.id == currentArticle; });
            if (index != -1) {
                _this.items[index].nbreComments = data.nbreComments;
            }
            loadingPopup.dismiss();
        }, function (err) {
            loadingPopup.dismiss();
            _this.appEvents.publish('http:errors', err);
        });
    };
    CityProjectsPage.prototype.editArticle = function (article, accountType, accountId) {
        var _this = this;
        var myModal2 = this.modal.create('EditPublishPage', { "article": article, "accountType": accountType, "accountId": accountId }, { cssClass: 'style-modal' });
        myModal2.onDidDismiss(function (data) {
            if (data == true) {
                _this.items = [];
                _this.page = 1;
                _this.getCityHallArticles();
            }
        });
        myModal2.present();
    };
    CityProjectsPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-city-projects',template:/*ion-inline-start:"D:\celaneo\mobile\new-mobile\test\src\pages\city-projects\city-projects.html"*/'<!--\n\n  Generated template for the NewsPage page.\n\n\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n\n  Ionic pages and navigation.\n\n-->\n\n\n\n\n\n<ion-header class="mobile-header" *ngIf="appGlobals.token">\n\n    <ion-grid>\n\n        <ion-row>\n\n            <ion-col col-2 text-left>\n\n                <div class="item" (click)="goBack()">\n\n                    <ion-icon name="ios-arrow-back"></ion-icon>\n\n                </div>\n\n            </ion-col>\n\n            <ion-col col-8 text-center class="page-title">\n\n                <ion-title>Grands projets dans ma ville</ion-title>\n\n            </ion-col>\n\n            <ion-col col-2 text-right>\n\n                <div class="block-image" *ngIf="currentUser && currentUser.cityhall">\n\n                    <img *ngIf="currentUser.cityhall.image_url" src="{{currentUser.cityhall.image_url}}" class="user-img">\n\n                    <img *ngIf="!currentUser.cityhall.image_url" src="assets/imgs/icons/user_default.png" class="user-img">\n\n                </div>\n\n\n\n            </ion-col>\n\n        </ion-row>\n\n    </ion-grid>\n\n</ion-header>\n\n<ion-content text-center>\n\n    <div class="div-left">\n\n        <div text-right class="back"><img src="assets/imgs/icons/1.png" (click)="goBack()"></div>\n\n    </div>\n\n    <div class="div-center">\n\n        <ion-grid class="grid-bottom">\n\n            <ion-row class="select-filters">\n\n                <ion-col>\n\n                    <ion-select text-center class="select-fitler select-not-ie" placeholder="Votre Ville" [(ngModel)]="city"\n\n                        (ionChange)="filterCities()" multiple submitText="Ok" cancelText="Annuler">\n\n                        <ion-option *ngFor="let city of cities" value="{{city.id}}">{{city.name}}</ion-option>\n\n                    </ion-select>\n\n                    <select text-center class="select-fitler select-ie" placeholder="Votre Ville" [(ngModel)]="city"\n\n                        multiple>\n\n                        <option *ngFor="let city of cities" (click)="filterCities()" value="{{city.id}}">{{city.name}}</option>\n\n                    </select>\n\n                </ion-col>\n\n            </ion-row>\n\n        </ion-grid>\n\n        <ion-refresher (ionRefresh)="doRefresh($event)">\n\n            <ion-refresher-content></ion-refresher-content>\n\n        </ion-refresher>\n\n\n\n        <ion-card *ngFor="let item of items">\n\n            <ion-card-content>\n\n                <ion-card-title text-left *ngIf="item.type == \'cityhall\'"> {{item.cityhallName}} </ion-card-title>\n\n\n\n                <p text-left>\n\n                    <span (click)="detailsArticle(item);">\n\n                        {{item.createAt | capitalize| amLocale:\'fr\' | amTimeAgo}}\n\n                    </span>\n\n                    <ion-icon class="icon-agenda move" name="md-calendar" float-end *ngIf="item.event" (click)="detailsEvent(item.event, item.title, false)"></ion-icon>\n\n                    <span *ngIf="item.type == \'cityhall\' && item.city">à {{item.city}}</span>\n\n                </p>\n\n\n\n\n\n\n\n                <!--<img src="" (click)="publish()">-->\n\n                <div *ngIf="item.imageURL || item.images">\n\n                    <div *ngIf="(item.imageURL && !item.images) || (item.images && !item.imageURL && item.images.length == 1); else elseBlock">\n\n                        <div *ngIf="item.imageURL" (click)="detailsArticle(item);">\n\n                            <img data-src="{{item.imageURL}}">\n\n                        </div>\n\n                        <div *ngFor="let img of item.images" (click)="detailsArticle(item);">\n\n                            <img data-src="{{img.url}}">\n\n                        </div>\n\n                    </div>\n\n\n\n                    <ng-template #elseBlock>\n\n                        <ion-slides loop="true" pager>\n\n                            <ion-slide *ngIf="item.imageURL" (click)="detailsArticle(item);">\n\n                                <img data-src="{{item.imageURL}}">\n\n                            </ion-slide>\n\n                            <ion-slide *ngFor="let img of item.images" (click)="detailsArticle(item);">\n\n                                <img data-src="{{img.url}}">\n\n                            </ion-slide>\n\n                        </ion-slides>\n\n                    </ng-template>\n\n                </div>\n\n                <ion-card-title class="title-article" text-left>\n\n                    <div class="div-title" (click)="detailsArticle(item);">{{item.title}}</div>\n\n                    <ion-icon name="md-create" class="icon-create" float-end *ngIf="currentUser.id == item.userId"\n\n                        (click)="editArticle(item, item.type, item.userId)"></ion-icon>\n\n                </ion-card-title>\n\n\n\n                <p text-left [innerHtml]="item.description|truncate|nl2br" (click)="detailsArticle(item);"></p>\n\n            </ion-card-content>\n\n            <ion-row padding-bottom>\n\n                <ion-col class="no-padding " text-right>\n\n                    <button ion-button clear small color="primary" icon-start (click)="detailsArticleComment(item);">\n\n                        <span class="comments-nbr">{{item.nbreComments}}</span>\n\n                        <img class="news-comment-action move-icon" src="assets/imgs/icons/comments.png">\n\n\n\n                    </button>\n\n                </ion-col>\n\n                <ion-col class="no-padding " text-left>\n\n                    <button ion-button clear small color="primary" icon-start>\n\n                        <img class="news-comment-action" *ngIf="!item.isLiked" src="assets/imgs/icons/dislike.png"\n\n                            (click)="like(item.id);">\n\n                        <img class="news-comment-action" *ngIf="item.isLiked" src="assets/imgs/icons/like.png" (click)="unlike(item.id);">\n\n                        <span class="likes-nbr"> {{item.nbLikes}}</span>\n\n\n\n                    </button>\n\n                </ion-col>\n\n            </ion-row>\n\n        </ion-card>\n\n        <ion-infinite-scroll (ionInfinite)="doInfinite($event)" threshold="100px">\n\n            <ion-infinite-scroll-content loadingSpinner="bubbles" loadingText="Charger plus...">\n\n            </ion-infinite-scroll-content>\n\n        </ion-infinite-scroll>\n\n    </div>\n\n    <div class="div-right">\n\n    </div>\n\n</ion-content>'/*ion-inline-end:"D:\celaneo\mobile\new-mobile\test\src\pages\city-projects\city-projects.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_2__providers_globals_globals__["a" /* GlobalsProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_6__providers_eventsrest_eventsrest__["a" /* EventsrestProvider */],
            __WEBPACK_IMPORTED_MODULE_4__providers_comment_comment__["a" /* CommentProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_3__providers_article_article__["a" /* ArticleProvider */]])
    ], CityProjectsPage);
    return CityProjectsPage;
}());

//# sourceMappingURL=city-projects.js.map

/***/ }),

/***/ 205:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return Contact; });
var Contact = /** @class */ (function () {
    function Contact() {
        this.object = null;
        this.description = null;
        this.location = null;
        this.photo = null;
        this.category = null;
        this.city = null;
        this.document = null;
    }
    Contact.prototype.getId = function () {
        return this.id;
    };
    Contact.prototype.getObject = function () {
        return this.object;
    };
    Contact.prototype.setObject = function (object) {
        this.object = object;
    };
    Contact.prototype.getDescription = function () {
        return this.description;
    };
    Contact.prototype.setDescription = function (description) {
        this.description = description;
    };
    Contact.prototype.getCity = function () {
        return this.city;
    };
    Contact.prototype.setCity = function (city) {
        this.city = city;
    };
    Contact.prototype.getLocation = function () {
        return this.location;
    };
    Contact.prototype.setLocation = function (location) {
        this.location = location;
    };
    Contact.prototype.getPhoto = function () {
        return this.photo;
    };
    Contact.prototype.setPhoto = function (photo) {
        this.photo = photo;
    };
    Contact.prototype.getDocument = function () {
        return this.document;
    };
    Contact.prototype.setDocument = function (documnt) {
        this.document = document;
    };
    Contact.prototype.reset = function () {
        this.object = null;
        this.description = null;
        this.city = null;
        this.location = null;
        this.category = null;
        this.document = null;
    };
    return Contact;
}());

//# sourceMappingURL=contact.js.map

/***/ }),

/***/ 206:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return HelpPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_globals_globals__ = __webpack_require__(8);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_eventsrest_eventsrest__ = __webpack_require__(9);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




/**
 * Generated class for the HelpPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var HelpPage = /** @class */ (function () {
    function HelpPage(navCtrl, navParams, loader, myAlert, myModal, appEvents, serviceEvent, appGlobals) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.loader = loader;
        this.myAlert = myAlert;
        this.myModal = myModal;
        this.appEvents = appEvents;
        this.serviceEvent = serviceEvent;
        this.appGlobals = appGlobals;
        this.appGlobals.showHeader = false;
    }
    HelpPage.prototype.ionViewWillEnter = function () {
        this.appGlobals.showHeader = false;
        this.appGlobals.showFooter = true;
    };
    HelpPage.prototype.ionViewWillLeave = function () {
        this.appGlobals.showHeader = true;
        this.appGlobals.showFooter = true;
    };
    HelpPage.prototype.goBack = function () {
        this.navCtrl.pop();
    };
    HelpPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-help',template:/*ion-inline-start:"D:\celaneo\mobile\new-mobile\test\src\pages\help\help.html"*/'<!--\n\n  Generated template for the HelpPage page.\n\n\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n\n  Ionic pages and navigation.\n\n-->\n\n<ion-header class="mobile-header" *ngIf="appGlobals.token">\n\n    <ion-grid>\n\n        <ion-row>\n\n            <ion-col col-2 text-left>\n\n                <div class="item">\n\n                    <ion-icon name="ios-arrow-back" (click)="goBack()"></ion-icon>\n\n                </div>\n\n            </ion-col>\n\n            <ion-col col-8 text-center class="page-title">\n\n                <ion-title>Aide</ion-title>\n\n            </ion-col>\n\n            <ion-col col-2>\n\n\n\n            </ion-col>\n\n        </ion-row>\n\n    </ion-grid>\n\n</ion-header>\n\n\n\n\n\n<ion-content padding>\n\n    <div class="div-left">\n\n        <div text-right class="back"><img src="assets/imgs/icons/1.png" (click)="goBack()"></div>\n\n    </div>\n\n    <!--bloc central -->\n\n    <div class="div-center">\n\n        <ion-grid class="bar-custom">\n\n            <ion-row>\n\n                <ion-col text-center class="boxed-form">\n\n                    <ion-row>\n\n\n\n                        <ion-col col-12 text-left class="bordered">\n\n                            <div text-center>\n\n                                Contactez nous pour toute question ou suggestion, l\'équipe de NOUS Ensemble est à votre\n\n                                disposition.\n\n                            </div>\n\n                        </ion-col>\n\n\n\n                        <ion-col col-12 text-left>\n\n                            <div text-left>\n\n                                <b>E-mail :</b> <a href="mailto:tvalence@nous-ensemble.com"> tvalence@nous-ensemble.com</a>\n\n                            </div>\n\n                        </ion-col>\n\n\n\n                        <ion-col col-12 text-left>\n\n                            <div text-left>\n\n                                <b>Téléphone : </b> 06.18.40.35.66\n\n                            </div>\n\n                        </ion-col>\n\n\n\n                        <hr>\n\n\n\n                        <ion-col col-12 text-center>\n\n                            <img src="assets/imgs/icons/logo-contact.png" class="logo-contact-container">\n\n                        </ion-col>\n\n                    </ion-row>\n\n\n\n                </ion-col>\n\n            </ion-row>\n\n        </ion-grid>\n\n\n\n    </div>\n\n    <!-- fin bloc central -->\n\n    <div class="div-right" text-center>\n\n    </div>\n\n</ion-content>'/*ion-inline-end:"D:\celaneo\mobile\new-mobile\test\src\pages\help\help.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_3__providers_eventsrest_eventsrest__["a" /* EventsrestProvider */],
            __WEBPACK_IMPORTED_MODULE_2__providers_globals_globals__["a" /* GlobalsProvider */]])
    ], HelpPage);
    return HelpPage;
}());

//# sourceMappingURL=help.js.map

/***/ }),

/***/ 207:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return NumberPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_globals_globals__ = __webpack_require__(8);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_user_user__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__ionic_native_call_number__ = __webpack_require__(239);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__providers_eventsrest_eventsrest__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__ionic_native_in_app_browser__ = __webpack_require__(70);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__ionic_native_file__ = __webpack_require__(71);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__ionic_native_downloader__ = __webpack_require__(48);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};










/**
 * Generated class for the NumberPage page.
 *
 * See http://ionicframework.com/docs/components/#navigation for more info
 * on Ionic pages and navigation.
 */
var NumberPage = /** @class */ (function () {
    function NumberPage(callNumber, event, globals, navCtrl, serviceEvent, navParams, loader, myAlert, appEvents, myModal, userService, loadingCtrl, alertCtrl, platform, file, inAppBrowser, toastCtrl, downloader) {
        this.callNumber = callNumber;
        this.event = event;
        this.globals = globals;
        this.navCtrl = navCtrl;
        this.serviceEvent = serviceEvent;
        this.navParams = navParams;
        this.loader = loader;
        this.myAlert = myAlert;
        this.appEvents = appEvents;
        this.myModal = myModal;
        this.userService = userService;
        this.loadingCtrl = loadingCtrl;
        this.alertCtrl = alertCtrl;
        this.platform = platform;
        this.file = file;
        this.inAppBrowser = inAppBrowser;
        this.toastCtrl = toastCtrl;
        this.downloader = downloader;
        this.filter = {
            category: 0
        };
        this.selectedCategory = this.navParams.get("category");
        this.categories = this.navParams.get("categories");
        this.emergencyPhones = this.navParams.get("emergencyPhones");
        if (this.selectedCategory) {
            this.title = this.selectedCategory.name;
            this.filter.category = this.selectedCategory.id;
            this.getNumbers(this.selectedCategory.id);
        }
    }
    NumberPage.prototype.filterChange = function (selectedValue) {
        var index = this.categories.findIndex(function (e) { return e.id == selectedValue; });
        if (index !== -1) {
            this.title = this.categories[index].name;
        }
        this.getNumbers(selectedValue);
    };
    NumberPage.prototype.getNumbers = function (id) {
        var _this = this;
        var loadingPopup = this.loadingCtrl.create({});
        loadingPopup.present();
        this.userService.getNumbers(id).then(function (data) {
            _this.numbers = data;
            loadingPopup.dismiss();
        }, function (err) {
            loadingPopup.dismiss();
            _this.event.publish('http:errors', err);
        });
    };
    NumberPage.prototype.call = function (number) {
        this.callNumber.callNumber(number, true);
    };
    NumberPage.prototype.goBack = function () {
        this.navCtrl.pop();
    };
    NumberPage.prototype.download = function (url) {
        var _this = this;
        var fileName = url.substring(url.lastIndexOf('/') + 1);
        this.platform.ready().then(function () {
            if (_this.platform.is('android')) {
                var request = {
                    uri: url,
                    title: 'Nous Ensemble',
                    description: fileName,
                    mimeType: '',
                    visibleInDownloadsUi: true,
                    notificationVisibility: __WEBPACK_IMPORTED_MODULE_8__ionic_native_downloader__["b" /* NotificationVisibility */].VisibleNotifyCompleted,
                    destinationInExternalFilesDir: {
                        dirType: 'Downloads',
                        subPath: fileName
                    }
                };
                _this.downloader.download(request)
                    .then(function (location) { return console.log('File downloaded at:' + location); })
                    .catch(function (error) { return console.error(error); });
            }
            else {
                var target = "_system";
                _this.inAppBrowser.create(url, target, "location=no,enableViewportScale=yes");
            }
        });
    };
    NumberPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-number',template:/*ion-inline-start:"D:\celaneo\mobile\new-mobile\test\src\pages\number\number.html"*/'<!--\n\n  Generated template for the NumberPage page.\n\n\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n\n  Ionic pages and navigation.\n\n-->\n\n\n\n<ion-header class="mobile-header" *ngIf="globals.token">\n\n    <ion-grid>\n\n        <ion-row>\n\n            <ion-col col-2 text-left>\n\n                <div class="item">\n\n                    <ion-icon name="ios-arrow-back" (click)="goBack()"></ion-icon>\n\n                </div>\n\n            </ion-col>\n\n            <ion-col col-8 text-center class="page-title" *ngIf="emergencyPhones; else elseBlock1">\n\n                <ion-title>{{emergencyPhones.title}}</ion-title>\n\n            </ion-col>\n\n            <ng-template #elseBlock1>\n\n                <ion-title>{{title}}</ion-title>\n\n            </ng-template>\n\n            <ion-col col-2>\n\n\n\n            </ion-col>\n\n        </ion-row>\n\n    </ion-grid>\n\n</ion-header>\n\n<ion-content padding class="content-page-list-white">\n\n    <div class="div-left">\n\n        <div text-right class="back"><img src="assets/imgs/icons/1.png" (click)="goBack()"></div>\n\n    </div>\n\n    <!--bloc central -->\n\n    <div class="div-center">\n\n        <ion-grid class="margin-bot">\n\n            <div class="margin-num" *ngIf="emergencyPhones; else elseBlock">\n\n                <div>\n\n                    <ion-list class="number-list boxed-container">\n\n                        <ion-item class="bordred">\n\n                            <p class="number-title margin-num">{{emergencyPhones.title}}</p>\n\n                            <p class="littlecatego margin-num" *ngIf="emergencyPhones.category">{{emergencyPhones.category.name}}</p>\n\n                            <div *ngFor="let phone of emergencyPhones.phone_list">\n\n                                <h3 (click)="call(phone)" *ngIf="phone != \'\'">\n\n                                    <ion-icon class="green phone-icon" name="phone-portrait"></ion-icon><span class="phone margin-num"><a>{{phone}}</a></span>\n\n                                </h3>\n\n                            </div>\n\n                            <p class="number-description margin-num">{{emergencyPhones.description}}</p>\n\n                        </ion-item>\n\n                    </ion-list>\n\n                </div>\n\n            </div>\n\n            <ng-template #elseBlock>\n\n                <ion-row class="select-filters" responsive-sm text-center>\n\n                    <ion-col col-12 col-sm>\n\n                        <ion-col class="boxed">\n\n                            <ion-select text-center class="select-fitler select-not-ie" placeholder="Catégories"\n\n                                [(ngModel)]="filter.category" (ionChange)="filterChange($event)" okText="Ok" cancelText="Annuler">\n\n                                <ion-option class="option-text" value="{{category.id}}" *ngFor="let category of categories">{{category.name}}</ion-option>\n\n                            </ion-select>\n\n                            <select text-center class="select-fitler select-ie" placeholder="Catégories" [(ngModel)]="filter.category">\n\n                                <option class="option-text" value="{{category.id}}" *ngFor="let category of categories"\n\n                                    (click)="filterChange($event)">{{category.name}}</option>\n\n                            </select>\n\n                        </ion-col>\n\n                    </ion-col>\n\n                </ion-row>\n\n                <div *ngFor="let number of numbers">\n\n                    <ion-list class="number-list boxed-container">\n\n                        <ion-item class="bordred">\n\n                            <p class="number-title margin-num">{{number.title}}</p>\n\n                            <p class="littlecatego margin-num" *ngIf="number.category">{{number.category.name}}</p>\n\n                            <div *ngFor="let phone of number.phone_list">\n\n                                <h3 (click)="call(phone)" *ngIf="phone != \'\'">\n\n                                    <ion-icon class="green phone-icon" name="phone-portrait"></ion-icon><span class="phone margin-num"><a>{{phone}}</a></span>\n\n                                </h3>\n\n                            </div>\n\n                            <div *ngIf="number.document_url">\n\n\n\n\n\n                                <ion-icon name="attach" (click)="download(number.document_url)"> {{number.document_url.split(\'/\').pop()}}</ion-icon>\n\n\n\n\n\n                            </div>\n\n                            <p class="number-description margin-num">{{number.description}}</p>\n\n\n\n\n\n                        </ion-item>\n\n\n\n                    </ion-list>\n\n                </div>\n\n            </ng-template>\n\n        </ion-grid>\n\n\n\n    </div>\n\n    <!-- fin bloc central -->\n\n    <div class="div-right" text-center>\n\n    </div>\n\n</ion-content>'/*ion-inline-end:"D:\celaneo\mobile\new-mobile\test\src\pages\number\number.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_4__ionic_native_call_number__["a" /* CallNumber */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_2__providers_globals_globals__["a" /* GlobalsProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_5__providers_eventsrest_eventsrest__["a" /* EventsrestProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_3__providers_user_user__["a" /* UserProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["x" /* Platform */],
            __WEBPACK_IMPORTED_MODULE_7__ionic_native_file__["a" /* File */],
            __WEBPACK_IMPORTED_MODULE_6__ionic_native_in_app_browser__["a" /* InAppBrowser */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["z" /* ToastController */],
            __WEBPACK_IMPORTED_MODULE_8__ionic_native_downloader__["a" /* Downloader */]])
    ], NumberPage);
    return NumberPage;
}());

//# sourceMappingURL=number.js.map

/***/ }),

/***/ 208:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return MyTownHallPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_user_user__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_globals_globals__ = __webpack_require__(8);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__pages_city_projects_city_projects__ = __webpack_require__(204);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__map_map__ = __webpack_require__(132);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__number_category_number_category__ = __webpack_require__(131);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__dedicated_dedicated__ = __webpack_require__(493);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__emergency_phones_emergency_phones__ = __webpack_require__(494);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__reprot_problem_reprot_problem__ = __webpack_require__(210);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__propose_propose__ = __webpack_require__(495);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__ionic_native_in_app_browser__ = __webpack_require__(70);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__canteen_menu_canteen_menu__ = __webpack_require__(209);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__providers_eventsrest_eventsrest__ = __webpack_require__(9);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};














/**
 * Generated class for the MyTownHallPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var MyTownHallPage = /** @class */ (function () {
    function MyTownHallPage(event, platform, userService, navCtrl, serviceEvent, navParams, loadingCtrl, loader, myAlert, appEvents, myModal, appGlobals, appEvent, inAppBrowser) {
        var _this = this;
        this.event = event;
        this.platform = platform;
        this.userService = userService;
        this.navCtrl = navCtrl;
        this.serviceEvent = serviceEvent;
        this.navParams = navParams;
        this.loadingCtrl = loadingCtrl;
        this.loader = loader;
        this.myAlert = myAlert;
        this.appEvents = appEvents;
        this.myModal = myModal;
        this.appGlobals = appGlobals;
        this.appEvent = appEvent;
        this.inAppBrowser = inAppBrowser;
        this.communities = [];
        this.appEvent.publish('closeFilters');
        this.userService.findCurrentUser().then(function (user) {
            localStorage.setItem("currentUser", JSON.stringify(user));
            _this.currentUser = user;
        });
        this.appEvent.subscribe('refreshApprovedCommunities', function () {
            _this.communities = JSON.parse(localStorage.getItem("allCommunities"));
        });
        this.communities = JSON.parse(localStorage.getItem("allCommunities"));
    }
    MyTownHallPage.prototype.ionViewWillEnter = function () {
        this.appGlobals.currentPageid = "MyTownHall";
        this.appEvents.publish('updateFooter');
        this.appGlobals.showHeader = true;
        this.appGlobals.showFooter = true;
        this.appGlobals.onNegativeTopSearch = true;
    };
    MyTownHallPage.prototype.ionViewWillLeave = function () {
        this.appGlobals.showHeader = true;
        this.appGlobals.showFooter = true;
        this.appGlobals.onNegativeTopSearch = false;
    };
    MyTownHallPage.prototype.openDedicatedPage = function (id, name, img_url) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_7__dedicated_dedicated__["a" /* DedicatedPage */], {
            id: id,
            name: name,
            img_url: img_url
        });
    };
    MyTownHallPage.prototype.goBack = function () {
        this.navCtrl.pop();
    };
    MyTownHallPage.prototype.aLinkTo = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_4__pages_city_projects_city_projects__["a" /* CityProjectsPage */]);
    };
    MyTownHallPage.prototype.mapAction = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_5__map_map__["a" /* MapPage */]);
    };
    MyTownHallPage.prototype.numbers = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_6__number_category_number_category__["a" /* NumberCategoryPage */]);
    };
    MyTownHallPage.prototype.report = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_9__reprot_problem_reprot_problem__["a" /* ReprotProblemPage */]);
    };
    MyTownHallPage.prototype.canteen = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_12__canteen_menu_canteen_menu__["a" /* CanteenMenuPage */]);
    };
    MyTownHallPage.prototype.propose = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_10__propose_propose__["a" /* ProposePage */]);
    };
    MyTownHallPage.prototype.emergency = function () {
        var _this = this;
        var loadingPopup = this.loadingCtrl.create({});
        // Show the popup
        loadingPopup.present();
        this.userService.getNumbers(10).then(function (data) {
            _this.number = data;
            loadingPopup.dismiss();
            _this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_8__emergency_phones_emergency_phones__["a" /* EmergencyPhonesPage */], {
                numbers: _this.number
            });
        }, function (err) {
            loadingPopup.dismiss();
            _this.event.publish('http:errors', err);
        });
    };
    MyTownHallPage.prototype.openUrl = function () {
        var _this = this;
        this.platform.ready().then(function () {
            _this.inAppBrowser.create('https://www.service-public.fr/');
        });
    };
    MyTownHallPage.prototype.globalSearch = function () {
        this.appGlobals.searchCriteria = {
            key: null,
            theme: null,
            event: true,
            goodplans: true,
            article: true,
            account: true,
            cities: "all"
        };
        this.appGlobals.appSearch = true;
    };
    MyTownHallPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-my-town-hall',template:/*ion-inline-start:"D:\celaneo\mobile\new-mobile\test\src\pages\my-town-hall\my-town-hall.html"*/'<!--\n\n  Generated template for the PracticalInformationPage page.\n\n\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n\n  Ionic pages and navigation.\n\n-->\n\n\n\n<ion-header class="mobile-header" *ngIf="appGlobals.token && appGlobals.showHeader">\n\n    <ion-grid>\n\n        <ion-row>\n\n            <ion-col col-2 text-left>\n\n                <div class="item iconheader" (click)="showHideSearch()">\n\n                    <img class="icon-search" src="assets/imgs/icons/search.png" alt="NOUS-Ensemble" />\n\n                </div>\n\n            </ion-col>\n\n            <ion-col col-8 text-center class="page-title iconheader">\n\n                <div class="communities-div" (click)="communities()">\n\n                    <img class="icon-community" src="assets/imgs/icons/comunity.png" alt="NOUS-Ensemble" />\n\n                    <ion-title class="communityHeader">Communautés </ion-title>\n\n                </div>\n\n            </ion-col>\n\n            <ion-col col-2>\n\n                <div class="item iconheader" text-right (click)="pop_publish()">\n\n                    <img class="icon-new" src="assets/imgs/icons/new.png" alt="NOUS-Ensemble" />\n\n                </div>\n\n            </ion-col>\n\n        </ion-row>\n\n    </ion-grid>\n\n</ion-header>\n\n\n\n<ion-content>\n\n    <div class="div-left">\n\n\n\n    </div>\n\n    <!--bloc central -->\n\n    <div class="div-center">\n\n        <ion-grid padding-bottom class="no-padding grid bar-custom margin-bottom-grid">\n\n            <ion-row>\n\n                <ion-col text-center class="text-center">\n\n                    <div class="choice-communities-label">Cliquez sur la communauté dont vous voulez ouvrir la page dédiée</div>\n\n                </ion-col>\n\n\n\n            </ion-row>\n\n            <ion-row class="scrollRow">\n\n                <ion-col col-12>\n\n                    <ion-list class="listScrolled" no-lines>\n\n\n\n                        <ion-item *ngFor="let community of communities" >\n\n                            <div class="row" (click)="openDedicatedPage(community.id,community.name,community.img_url)">\n\n                                <div col-3>\n\n                                    <ion-avatar float-left="">\n\n                                        <img src="{{community.img_url}}">\n\n                                    </ion-avatar>\n\n                                </div>\n\n                                <div col-9 class="div-middle-allign">\n\n                                    <div>{{community.name}}</div>\n\n                                </div>\n\n                            </div>\n\n\n\n                        </ion-item>\n\n\n\n\n\n                    </ion-list>\n\n                </ion-col>\n\n            </ion-row>\n\n        </ion-grid>\n\n        <!--<ion-grid padding-bottom class="no-padding grid bar-custom margin-bottom-grid">\n\n\n\n            <ion-row>\n\n\n\n                <ion-col text-center>\n\n                    <button class="custom-button-links" color="light" (click)="mapAction()" text-start>\n\n                        <span class="button-sign-affirmation"> Carte pratique </span>\n\n                        <ion-icon name="ios-arrow-forward" role="img" class="icon icon-md ion-ios-arrow-forward colorized"\n\n                            aria-label="arrow forward" ng-reflect-name="ios-arrow-forward"></ion-icon>\n\n                    </button>\n\n\n\n\n\n                    <button class="custom-button-links" color="light" (click)="numbers()" text-start>\n\n                        <span class="button-sign-affirmation"> Annuaire </span>\n\n                        <ion-icon name="ios-arrow-forward" role="img" class="icon icon-md ion-ios-arrow-forward colorized"\n\n                            aria-label="arrow forward" ng-reflect-name="ios-arrow-forward"></ion-icon>\n\n                    </button>\n\n\n\n                    <button class="custom-button-links" color="light" (click)="emergency()" text-start>\n\n                        <span class="button-sign-affirmation"> Téléphones d\'urgence </span>\n\n                        <ion-icon name="ios-arrow-forward" role="img" class="icon icon-md ion-ios-arrow-forward colorized"\n\n                            aria-label="arrow forward" ng-reflect-name="ios-arrow-forward"></ion-icon>\n\n                    </button>\n\n\n\n                    <button class="custom-button-links" color="light" (click)="aLinkTo()" text-start>\n\n                        <span class="button-sign-affirmation"> Grands projets dans ma ville </span>\n\n                        <ion-icon name="ios-arrow-forward" role="img" class="icon icon-md ion-ios-arrow-forward colorized"\n\n                            aria-label="arrow forward" ng-reflect-name="ios-arrow-forward"></ion-icon>\n\n                    </button>\n\n\n\n                    <button class="custom-button-links" color="light" text-start>\n\n                        <span class="button-sign-affirmation" (click)="openUrl()"> Démarches administratives </span>\n\n                        <ion-icon name="ios-arrow-forward" role="img" class="icon icon-md ion-ios-arrow-forward colorized"\n\n                            aria-label="arrow forward" ng-reflect-name="ios-arrow-forward"></ion-icon>\n\n                    </button>\n\n\n\n                    <button class="custom-button-links" color="light" (click)="canteen()" text-start>\n\n                        <span class="button-sign-affirmation"> Menus des cantines </span>\n\n                        <ion-icon name="ios-arrow-forward" role="img" class="icon icon-md ion-ios-arrow-forward colorized"\n\n                            aria-label="arrow forward" ng-reflect-name="ios-arrow-forward"></ion-icon>\n\n                    </button>\n\n\n\n                    <button class="custom-button-links" color="light" (click)="report()" text-start>\n\n                        <span class="button-sign-affirmation"> Signaler un problème </span>\n\n                        <ion-icon name="ios-arrow-forward" role="img" class="icon icon-md ion-ios-arrow-forward colorized"\n\n                            aria-label="arrow forward" ng-reflect-name="ios-arrow-forward"></ion-icon>\n\n                    </button>\n\n                    <button class="custom-button-links" color="light" (click)="propose()" text-start>\n\n                        <span class="button-sign-affirmation"> Proposer une Initiative </span>\n\n                        <ion-icon name="ios-arrow-forward" role="img" class="icon icon-md ion-ios-arrow-forward colorized"\n\n                            aria-label="arrow forward" ng-reflect-name="ios-arrow-forward"></ion-icon>\n\n                    </button>\n\n                </ion-col>\n\n\n\n            </ion-row>\n\n\n\n\n\n\n\n        </ion-grid>-->\n\n\n\n    </div>\n\n    <!-- fin bloc central -->\n\n    <div class="div-right" text-center>\n\n    </div>\n\n</ion-content>'/*ion-inline-end:"D:\celaneo\mobile\new-mobile\test\src\pages\my-town-hall\my-town-hall.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["x" /* Platform */],
            __WEBPACK_IMPORTED_MODULE_2__providers_user_user__["a" /* UserProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_13__providers_eventsrest_eventsrest__["a" /* EventsrestProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_3__providers_globals_globals__["a" /* GlobalsProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_11__ionic_native_in_app_browser__["a" /* InAppBrowser */]])
    ], MyTownHallPage);
    return MyTownHallPage;
}());

//# sourceMappingURL=my-town-hall.js.map

/***/ }),

/***/ 209:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CanteenMenuPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_globals_globals__ = __webpack_require__(8);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_article_article__ = __webpack_require__(31);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_comment_comment__ = __webpack_require__(22);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__pages_detail_article_detail_article__ = __webpack_require__(56);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__providers_eventsrest_eventsrest__ = __webpack_require__(9);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







/**
 * Generated class for the CanteenMenuPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var CanteenMenuPage = /** @class */ (function () {
    function CanteenMenuPage(navCtrl, navParams, appGlobals, serviceEvent, loader, appEvents, modal, alertCtrl, commentService, articleService) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.appGlobals = appGlobals;
        this.serviceEvent = serviceEvent;
        this.loader = loader;
        this.appEvents = appEvents;
        this.modal = modal;
        this.alertCtrl = alertCtrl;
        this.commentService = commentService;
        this.articleService = articleService;
        this.items = [];
        this.page = 1;
        this.comment = [];
        this.numberComments = 0;
        this.eventParticipted = [];
        this.idHeading = navParams.get('data');
        this.comment_allowed = navParams.get('allowComment');
        this.community = JSON.parse(localStorage.getItem('currentCommunity'));
        this.currentUser = JSON.parse(localStorage.getItem("currentUser"));
    }
    CanteenMenuPage.prototype.ionViewWillEnter = function () {
        this.appGlobals.showHeader = false;
        this.appGlobals.showFooter = true;
        this.currentUser = JSON.parse(localStorage.getItem("currentUser"));
        this.getCityHallArticles();
    };
    CanteenMenuPage.prototype.ionViewDidEnter = function () {
        this.appEvents.publish('updateFooter');
    };
    CanteenMenuPage.prototype.ionViewWillLeave = function () {
        this.appGlobals.showHeader = true;
        this.appGlobals.showFooter = true;
    };
    CanteenMenuPage.prototype.goBack = function () {
        this.navCtrl.pop();
    };
    CanteenMenuPage.prototype.getCityHallArticles = function () {
        var _this = this;
        var loadingPopup = this.loader.create({});
        loadingPopup.present();
        this.items = [];
        this.page = 1;
        this.articleService.findArticlesByHeadings(this.idHeading, this.page).then(function (data) {
            _this.articles = data;
            for (var _i = 0, _a = _this.articles; _i < _a.length; _i++) {
                var article = _a[_i];
                _this.items.push(article);
            }
            loadingPopup.dismiss();
        }, function (err) {
            loadingPopup.dismiss();
            _this.appEvents.publish('http:errors', err);
        });
    };
    CanteenMenuPage.prototype.doInfinite = function (infiniteScroll) {
        var _this = this;
        this.page += 1;
        this.articleService.findArticlesByHeadings(this.idHeading, this.page).then(function (data) {
            _this.articles = data;
            for (var _i = 0, _a = _this.articles; _i < _a.length; _i++) {
                var article = _a[_i];
                _this.items.push(article);
            }
            infiniteScroll.complete();
        }, function (err) {
            infiniteScroll.complete();
        });
    };
    CanteenMenuPage.prototype.doRefresh = function (refresher) {
        var _this = this;
        this.page = 1;
        this.articleService.findArticlesByHeadings(this.idHeading, this.page).then(function (data) {
            _this.articles = data;
            _this.items = [];
            for (var _i = 0, _a = _this.articles; _i < _a.length; _i++) {
                var article = _a[_i];
                _this.items.push(article);
            }
            refresher.complete();
        }, function (err) {
            _this.appEvents.publish('http:errors', err);
            refresher.complete();
        });
    };
    CanteenMenuPage.prototype.filterCities = function () {
        this.getCityHallArticles();
    };
    CanteenMenuPage.prototype.like = function (article) {
        var _this = this;
        this.articleService.like(article).then(function () {
            var index = _this.items.findIndex(function (i) { return i.id == article; });
            if (index != -1) {
                _this.items[index].isLiked = true;
                _this.items[index].nbLikes++;
            }
        }, function (err) {
            _this.appEvents.publish('http:errors', err);
        });
    };
    CanteenMenuPage.prototype.unlike = function (article) {
        var _this = this;
        this.articleService.unlike(article).then(function () {
            var index = _this.items.findIndex(function (i) { return i.id == article; });
            if (index != -1) {
                _this.items[index].isLiked = false;
                _this.items[index].nbLikes--;
            }
        }, function (err) {
            _this.appEvents.publish('http:errors', err);
        });
    };
    CanteenMenuPage.prototype.detailsArticle = function (article) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_5__pages_detail_article_detail_article__["a" /* DetailArticlePage */], {
            article: article,
            allowComment: this.comment_allowed
        });
    };
    CanteenMenuPage.prototype.detailsArticleComment = function (article) {
        var _this = this;
        var loadingPopup = this.loader.create({});
        loadingPopup.present();
        this.commentService.getCommentsArticlePagination(article.id, 0).then(function (data) {
            _this.comment = data;
            _this.numberComments = article.nbreComments;
            loadingPopup.dismiss();
            _this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_5__pages_detail_article_detail_article__["a" /* DetailArticlePage */], {
                article: article,
                comment: _this.comment,
                numberComments: _this.numberComments,
                showComments: true
            });
        }, function (err) {
            loadingPopup.dismiss();
            _this.appEvents.publish('http:errors', err);
        });
    };
    CanteenMenuPage.prototype.refreshNbreComments = function (currentArticle) {
        var _this = this;
        var loadingPopup = this.loader.create({});
        loadingPopup.present();
        this.articleService.getDetailsArticle(currentArticle).then(function (data) {
            var index = _this.items.findIndex(function (i) { return i.id == currentArticle; });
            if (index != -1) {
                _this.items[index].nbreComments = data.nbreComments;
            }
            loadingPopup.dismiss();
        }, function (err) {
            loadingPopup.dismiss();
            _this.appEvents.publish('http:errors', err);
        });
    };
    CanteenMenuPage.prototype.editArticle = function (article, accountType, accountId) {
        var _this = this;
        var myModal2 = this.modal.create('EditPublishPage', { "article": article, "accountType": accountType, "accountId": accountId }, { cssClass: 'style-modal' });
        myModal2.onDidDismiss(function (data) {
            if (data == true) {
                _this.items = [];
                _this.page = 1;
                _this.getCityHallArticles();
            }
        });
        myModal2.present();
    };
    CanteenMenuPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-canteen-menu',template:/*ion-inline-start:"D:\celaneo\mobile\new-mobile\test\src\pages\canteen-menu\canteen-menu.html"*/'<!--\n\n  Generated template for the NewsPage page.\n\n\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n\n  Ionic pages and navigation.\n\n-->\n\n\n\n\n\n<ion-header class="mobile-header" *ngIf="appGlobals.token">\n\n    <ion-grid>\n\n        <ion-row>\n\n            <ion-col col-2 text-left>\n\n                <div class="item" (click)="goBack()">\n\n                    <ion-icon name="ios-arrow-back"></ion-icon>\n\n                </div>\n\n            </ion-col>\n\n            <ion-col col-8 text-center class="page-title">\n\n                <ion-title>{{community.name}}</ion-title>\n\n            </ion-col>\n\n            <ion-col col-2 text-right>\n\n                <ion-avatar class="blason">\n\n                    <img src="{{community.img_url}}">\n\n                </ion-avatar>\n\n\n\n            </ion-col>\n\n        </ion-row>\n\n    </ion-grid>\n\n</ion-header>\n\n<ion-content text-center>\n\n    <div class="div-left">\n\n        <div text-right class="back"><img src="assets/imgs/icons/1.png" (click)="goBack()"></div>\n\n    </div>\n\n    <div class="div-center">\n\n        <ion-grid class="grid-bottom">\n\n\n\n        </ion-grid>\n\n        <ion-refresher (ionRefresh)="doRefresh($event)">\n\n            <ion-refresher-content></ion-refresher-content>\n\n        </ion-refresher>\n\n        <ion-card *ngFor="let item of items">\n\n            <ion-card-content>\n\n                <ion-card-title text-left *ngIf="item.type == \'cityhall\'"> {{item.cityhallName}} </ion-card-title>\n\n\n\n                <p text-left>\n\n                    <span (click)="detailsArticle(item);">\n\n                        {{item.createAt | capitalize| amLocale:\'fr\' | amTimeAgo}}\n\n                    </span>\n\n                    <ion-icon class="icon-agenda move" name="md-calendar" float-end *ngIf="item.event" (click)="detailsEvent(item.event, item.title, false)"></ion-icon>\n\n                    <span *ngIf="item.type == \'cityhall\' && item.city">à {{item.city}}</span>\n\n                </p>\n\n\n\n\n\n\n\n                <!--<img src="" (click)="publish()">-->\n\n                <div *ngIf="item.imageURL || item.images || item.videoFile">\n\n                    <div *ngIf="(item.imageURL && !item.images && !item.videoFile) || (!item.imageURL && !item.images && item.videoFile) || (item.images && !item.imageURL && item.images.length == 1); else elseBlock">\n\n                        <div *ngIf="item.imageURL" (click)="detailsArticle(item);">\n\n                            <img data-src="{{item.imageURL}}">\n\n                        </div>\n\n                        <div *ngFor="let img of item.images" (click)="detailsArticle(item);">\n\n                            <img data-src="{{img.url}}">\n\n                        </div>\n\n                        <video style="width: 100%; height: 100%" *ngIf="item.videoFile !== null" controls poster="assets/img/video_default.png">\n\n                            <source [src]="item.videoFile" type="video/mp4">\n\n                        </video>\n\n                    </div>\n\n\n\n                    <ng-template #elseBlock>\n\n                        <ion-slides loop="true" pager>\n\n                            <ion-slide *ngIf="item.videoFile != null">\n\n                                <video style="width: 100%; height: 100%" controls poster="assets/img/video_default.png">\n\n                                    <source [src]="item.videoFile" type="video/mp4">\n\n                                </video>\n\n                            </ion-slide>\n\n                            <ion-slide *ngIf="item.imageURL" (click)="detailsArticle(item);">\n\n                                <img data-src="{{item.imageURL}}">\n\n                            </ion-slide>\n\n                            <ion-slide *ngFor="let img of item.images" (click)="detailsArticle(item);">\n\n                                <img data-src="{{img.url}}">\n\n                            </ion-slide>\n\n                        </ion-slides>\n\n                    </ng-template>\n\n                </div>\n\n                <ion-card-title class="title-article" text-left>\n\n                    <div class="div-title" (click)="detailsArticle(item);">{{item.title}}</div>\n\n                    <ion-icon name="md-create" class="icon-create" float-end *ngIf="currentUser.id == item.userId"\n\n                        (click)="editArticle(item, item.type, item.userId)"></ion-icon>\n\n                </ion-card-title>\n\n\n\n                <p text-left [innerHtml]="item.description|truncate|nl2br" (click)="detailsArticle(item);"></p>\n\n            </ion-card-content>\n\n            <div text-center>\n\n                <ion-row class="comment-text-style">\n\n                    <ion-col class="text-grey" *ngIf="item.addComments">\n\n                        <span  *ngIf="item.nbreComments <= 1">{{item.nbreComments}} Commentaire</span>\n\n                        <span  *ngIf="item.nbreComments > 1">{{item.nbreComments}} Commentaires</span>\n\n                    </ion-col>\n\n                    <ion-col *ngIf="item.addComments">\n\n                        <img class="comment-img-style" src="assets/imgs/icons/list-divider.png">\n\n                    </ion-col>\n\n                    <ion-col class="text-grey">\n\n                        <span> {{item.nbLikes}} J\'aime</span>\n\n                    </ion-col>\n\n                </ion-row>\n\n            </div>\n\n            <ion-row padding-bottom >\n\n                <ion-col class="no-padding " *ngIf="item.addComments" text-right>\n\n                    <span class="disociate-actions" (click)="detailsArticleComment(item);">\n\n                        <!--<span class="comments-nbr">{{item.nbreComments}}</span>-->\n\n                        <img class="news-comment-action move-icon" src="assets/imgs/icons/comments.png">\n\n\n\n                    </span>\n\n                </ion-col>\n\n                <ion-col class="no-padding text-center" [class.icon-right]="!item.addComments" text-left>\n\n                    <span class="disociate-actions">\n\n                        <img class="news-comment-action" *ngIf="!item.isLiked" src="assets/imgs/icons/dislike.png"\n\n                            (click)="like(item.id);">\n\n                        <img class="news-comment-action" *ngIf="item.isLiked" src="assets/imgs/icons/like.png" (click)="unlike(item.id);">\n\n                        <!--<span class="likes-nbr"> {{item.nbLikes}}</span>-->\n\n\n\n                    </span>\n\n                </ion-col>\n\n                <ion-col class="no-padding ">\n\n                    <span class="disociate-actions" (click)="ShareArticle(item);">\n\n                        <!--<span class="comments-nbr">{{item.nbreComments}}</span>-->\n\n                        <img class="news-comment-action dissociate-share" src="assets/imgs/icons/share.png">\n\n                    </span>\n\n                </ion-col>\n\n            </ion-row>\n\n        </ion-card>\n\n        <ion-infinite-scroll (ionInfinite)="doInfinite($event)" threshold="100px">\n\n            <ion-infinite-scroll-content loadingSpinner="bubbles" loadingText="Charger plus...">\n\n            </ion-infinite-scroll-content>\n\n        </ion-infinite-scroll>\n\n    </div>\n\n    <div class="div-right">\n\n    </div>\n\n</ion-content>'/*ion-inline-end:"D:\celaneo\mobile\new-mobile\test\src\pages\canteen-menu\canteen-menu.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_2__providers_globals_globals__["a" /* GlobalsProvider */],
            __WEBPACK_IMPORTED_MODULE_6__providers_eventsrest_eventsrest__["a" /* EventsrestProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_4__providers_comment_comment__["a" /* CommentProvider */],
            __WEBPACK_IMPORTED_MODULE_3__providers_article_article__["a" /* ArticleProvider */]])
    ], CanteenMenuPage);
    return CanteenMenuPage;
}());

//# sourceMappingURL=canteen-menu.js.map

/***/ }),

/***/ 210:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ReprotProblemPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_globals_globals__ = __webpack_require__(8);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__angular_forms__ = __webpack_require__(21);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_app_app__ = __webpack_require__(38);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__providers_user_user__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__Models_contact__ = __webpack_require__(205);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__providers_eventsrest_eventsrest__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__ionic_native_camera__ = __webpack_require__(29);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__providers_files_files__ = __webpack_require__(108);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};










/**
 * Generated class for the ReprotProblemPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var ReprotProblemPage = /** @class */ (function () {
    function ReprotProblemPage(navCtrl, navParams, appGlobals, userService, appService, appEvents, serviceEvent, myModal, formBuilder, myAlert, actionSheetCtrl, loader, platform, loadingCtrl, camera, filesProvider) {
        var _this = this;
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.appGlobals = appGlobals;
        this.userService = userService;
        this.appService = appService;
        this.appEvents = appEvents;
        this.serviceEvent = serviceEvent;
        this.myModal = myModal;
        this.formBuilder = formBuilder;
        this.myAlert = myAlert;
        this.actionSheetCtrl = actionSheetCtrl;
        this.loader = loader;
        this.platform = platform;
        this.loadingCtrl = loadingCtrl;
        this.camera = camera;
        this.filesProvider = filesProvider;
        this.submited = false;
        this.contactObj = new __WEBPACK_IMPORTED_MODULE_6__Models_contact__["a" /* Contact */]();
        this.objects = [];
        this.idHeading = navParams.get('data');
        this.community = JSON.parse(localStorage.getItem('currentCommunity'));
        this.appGlobals.showHeader = false;
        this.currentUser = JSON.parse(localStorage.getItem("currentUser"));
        this.slideOneForm = formBuilder.group({
            'object': ['', __WEBPACK_IMPORTED_MODULE_3__angular_forms__["h" /* Validators */].required],
            'description': ['', __WEBPACK_IMPORTED_MODULE_3__angular_forms__["h" /* Validators */].required]
        });
        var loadingPopup = this.loadingCtrl.create({});
        loadingPopup.present();
        Promise.all([this.appService.getObjects(this.idHeading)]).then(function (data) {
            _this.objects = data[0];
            loadingPopup.dismiss();
        }, function (err) {
            loadingPopup.dismiss();
        });
    }
    ReprotProblemPage.prototype.ionViewWillEnter = function () {
        this.appGlobals.showHeader = false;
        this.appGlobals.showFooter = true;
    };
    ReprotProblemPage.prototype.ionViewWillLeave = function () {
        this.appGlobals.showHeader = true;
        this.appGlobals.showFooter = true;
    };
    ReprotProblemPage.prototype.goBack = function () {
        this.navCtrl.pop();
    };
    ReprotProblemPage.prototype.contact = function (errorValidation) {
        var _this = this;
        this.submited = true;
        if (!errorValidation) {
            var loadingPopup_1 = this.loader.create({});
            // Show the popup
            loadingPopup_1.present();
            this.contactObj.setDescription(this.contactObj.description);
            this.appService.postContact(this.contactObj).then(function () {
                loadingPopup_1.dismiss();
                var successAlert = _this.myAlert.create({
                    title: 'Succès',
                    subTitle: 'Votre message a été envoyé avec succès.',
                    buttons: [
                        {
                            text: 'OK',
                            handler: function () {
                                _this.goBack();
                            }
                        }
                    ]
                });
                successAlert.present();
            }, function (err) {
                loadingPopup_1.dismiss();
                _this.appEvents.publish('http:errors', err);
            });
        }
    };
    ReprotProblemPage.prototype.checkFocus = function (element) {
        if (this.platform.is('android')) {
            var requiredElement = element.target.offsetParent.parentElement;
            var yOffset = requiredElement.offsetTop;
            this.content.scrollTo(0, yOffset, 2000);
        }
    };
    ReprotProblemPage.prototype.presentActionSheet = function () {
        var _this = this;
        var actionSheet = this.actionSheetCtrl.create({
            title: 'Sélectionner la source d image',
            buttons: [
                {
                    text: 'Choisir une photo de la bibliothèque',
                    handler: function () {
                        _this.loadImageFromLibrary();
                    }
                },
                {
                    text: 'Prendre une photo',
                    handler: function () {
                        _this.takePicture();
                    }
                },
                {
                    text: 'Choisir un document (Pdf, Doc, Docx ...)',
                    handler: function () {
                        _this.presentActionSheetDocument();
                    }
                },
                {
                    text: 'Annuler',
                    role: 'cancel'
                }
            ]
        });
        actionSheet.present();
    };
    ReprotProblemPage.prototype.presentActionSheetDocument = function () {
        var _this = this;
        this.filesProvider.presentFileChooser(function (base64) {
            _this.contactObj.document = base64;
        }, function (failure) {
            document.getElementById("fileInput").click();
        });
    };
    ReprotProblemPage.prototype.onFileChange = function (event) {
        var _this = this;
        var reader = new FileReader();
        if (event.target.files && event.target.files.length > 0) {
            var file = event.target.files[0];
            reader.readAsDataURL(file);
            if (file.size > 5242880) {
                this.filesProvider.generateFileSizeError();
            }
            else {
                reader.onload = function () {
                    var mimeTypeAllowed = _this.filesProvider.allowedMimeType(reader.result);
                    if (mimeTypeAllowed) {
                        _this.contactObj.document = reader.result;
                    }
                    else {
                        _this.filesProvider.generateMimeTypeError();
                    }
                };
            }
        }
    };
    ReprotProblemPage.prototype.takePicture = function () {
        var _this = this;
        this.camera.getPicture({
            destinationType: this.camera.DestinationType.DATA_URL,
            quality: 100,
            targetWidth: 600,
            targetHeight: 600,
            allowEdit: true,
            correctOrientation: true,
            encodingType: this.camera.EncodingType.JPEG
        }).then(function (imageData) {
            _this.contactObj.setPhoto("data:image/jpeg;base64," + imageData);
        });
    };
    ReprotProblemPage.prototype.loadImageFromLibrary = function () {
        var _this = this;
        this.camera.getPicture({
            destinationType: this.camera.DestinationType.DATA_URL,
            sourceType: this.camera.PictureSourceType.PHOTOLIBRARY,
            quality: 100,
            targetWidth: 600,
            targetHeight: 600,
            allowEdit: true,
            correctOrientation: true,
            encodingType: this.camera.EncodingType.JPEG
        }).then(function (imageData) {
            _this.contactObj.setPhoto("data:image/jpeg;base64," + imageData);
        });
    };
    ReprotProblemPage.prototype.deletePhoto = function () {
        this.contactObj.setPhoto(null);
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["ViewChild"])(__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* Content */]),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* Content */])
    ], ReprotProblemPage.prototype, "content", void 0);
    ReprotProblemPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-reprot-problem',template:/*ion-inline-start:"D:\celaneo\mobile\new-mobile\test\src\pages\reprot-problem\reprot-problem.html"*/'<!--\n\n  Generated template for the ContactPage page.\n\n\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n\n  Ionic pages and navigation.\n\n-->\n\n<ion-header class="mobile-header" *ngIf="appGlobals.token">\n\n    <ion-grid>\n\n        <ion-row>\n\n            <ion-col col-2 text-left>\n\n                <div class="item">\n\n                    <ion-icon name="ios-arrow-back" (click)="goBack()"></ion-icon>\n\n                </div>\n\n            </ion-col>\n\n            <ion-col col-8 text-center class="page-title">\n\n                <ion-title>{{community.name}}</ion-title>\n\n            </ion-col>\n\n            <ion-col col-2 text-right>\n\n                <ion-avatar class="blason">\n\n                    <img src="{{community.img_url}}">\n\n                </ion-avatar>\n\n\n\n            </ion-col>\n\n        </ion-row>\n\n    </ion-grid>\n\n</ion-header>\n\n\n\n<ion-content>\n\n    <div class="div-left">\n\n        <div text-right class="back"><img src="assets/imgs/icons/1.png" (click)="goBack()"></div>\n\n    </div>\n\n    <!--bloc central -->\n\n    <div class="div-center">\n\n        <ion-grid>\n\n\n\n            <ion-row>\n\n\n\n                <ion-col text-center>\n\n\n\n                    <form (ngSubmit)="contact(contactForm.invalid)" #contactForm="ngForm">\n\n                        <ion-row>\n\n\n\n                            <ion-col col-12 text-left class="bordered">\n\n                                <div text-center>\n\n                                    Vous pouvez envoyer un email à votre communauté. Celui-ci sera traité au même titre\n\n                                    qu\'un email classique\n\n                                </div>\n\n                            </ion-col>\n\n\n\n                            <ion-col col-12 text-center>\n\n                                <ion-label text-left color="light-black" stacked>De quoi s’agit-il ?*</ion-label>\n\n                                <ion-item class="item-input-white no-padding select-not-ie" [class.formError]="object.invalid && (object.dirty || submited || object.touched)">\n\n                                    <ion-select class="select-white" name="object" [(ngModel)]="contactObj.object"\n\n                                        #object="ngModel" placeholder="Cliquez" required>\n\n\n\n                                        <ion-option *ngFor="let object of objects" [value]="object.id">{{object.objet}}</ion-option>\n\n\n\n\n\n                                    </ion-select>\n\n                                </ion-item>\n\n                                <ion-col class="item-input-white no-padding select-ie" [class.formError]="object.invalid && (object.dirty || submited || object.touched)">\n\n                                    <select class="select-white input-select-ie" name="object" [(ngModel)]="contactObj.object"\n\n                                        #object="ngModel" placeholder="objet" required>\n\n                                        <option></option>\n\n                                        <option *ngFor="let object of objects" [ngValue]="object.id">{{object.objet}}</option>\n\n\n\n                                    </select>\n\n                                </ion-col>\n\n                                <div class="error-msg" *ngIf="object.invalid && (object.dirty || submited || object.touched)">\n\n                                    <span class="error">Champs objet obligatoire.</span>\n\n                                </div>\n\n                                <ion-row>\n\n                                    <div *ngIf="contactObj.photo; else elseBlock" text-center>\n\n                                        <img src="{{contactObj.photo}}" *ngIf="contactObj.photo" (click)="presentActionSheet()">\n\n                                        <ion-icon name="trash" class="icon-delete" (click)="deletePhoto();" *ngIf="contactObj.photo"></ion-icon>\n\n                                    </div>\n\n                                </ion-row>\n\n                                <ng-template #elseBlock>\n\n                                    <ion-col col-12 text-center> <img class="button-img" src="assets/imgs/icons/boutton-white.png"\n\n                                            (click)="presentActionSheet()"></ion-col>\n\n                                </ng-template>\n\n                                <div *ngIf="contactObj.document" style="position: relative;">\n\n                                    <img class="button-img" src="assets/imgs/icons/doc-icon.png">\n\n                                    <ion-icon name="trash"\n\n                                              class="icon-delete delete-icon"\n\n                                              (click)="deleteDocument();"\n\n                                              *ngIf="contactObj.document">\n\n                                    </ion-icon>\n\n                                </div>\n\n                                <div>\n\n\n\n                                    <input type="file" id="fileInput" (change)="onFileChange($event)" >\n\n\n\n                                </div>\n\n\n\n                            </ion-col>\n\n                            <ion-col col-12 text-center>\n\n                                <ion-label text-left color="light-black" stacked>Adresse du signalement ou de la suggestion </ion-label>\n\n                                <ion-item class="item-input-white">\n\n                                    <ion-textarea (change)="appGlobals.capitalizeData($event.target.value, \'location\')"\n\n                                        (focus)="checkFocus($event)" #description="ngModel" name="location" [(ngModel)]="contactObj.location"\n\n\n\n                                        placeholder="indiquez le lieu" required></ion-textarea>\n\n\n\n                                </ion-item>\n\n                            </ion-col>\n\n                            <ion-col col-12 text-center>\n\n                                <ion-label text-left color="light-black" stacked>Votre message</ion-label>\n\n                                <ion-item class="item-input-white" [class.formError]="description.invalid && (description.dirty || submited || description.touched)">\n\n                                    <ion-textarea (focus)="checkFocus($event)" (change)="appGlobals.capitalizeData($event.target.value, \'description\')"\n\n                                        (focus)="checkFocus($event)" #description="ngModel" name="description"\n\n                                        [(ngModel)]="contactObj.description" placeholder="Votre message" required></ion-textarea>\n\n                                </ion-item>\n\n                                <div class="error-msg" *ngIf="description.invalid && (description.dirty || submited || description.touched)">\n\n                                    <span class="error">Champs message obligatoire.</span>\n\n                                </div>\n\n                            </ion-col>\n\n                            <ion-col col-12 text-center>\n\n                                <button ion-button color="primary" type="submit" round>Envoyer</button>\n\n                            </ion-col>\n\n                        </ion-row>\n\n                    </form>\n\n\n\n                </ion-col>\n\n\n\n            </ion-row>\n\n\n\n        </ion-grid>\n\n\n\n    </div>\n\n    <!-- fin bloc central -->\n\n    <div class="div-right" text-center>\n\n    </div>\n\n</ion-content>'/*ion-inline-end:"D:\celaneo\mobile\new-mobile\test\src\pages\reprot-problem\reprot-problem.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_2__providers_globals_globals__["a" /* GlobalsProvider */],
            __WEBPACK_IMPORTED_MODULE_5__providers_user_user__["a" /* UserProvider */],
            __WEBPACK_IMPORTED_MODULE_4__providers_app_app__["a" /* AppProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_7__providers_eventsrest_eventsrest__["a" /* EventsrestProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_3__angular_forms__["a" /* FormBuilder */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["a" /* ActionSheetController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["x" /* Platform */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_8__ionic_native_camera__["a" /* Camera */],
            __WEBPACK_IMPORTED_MODULE_9__providers_files_files__["a" /* FilesProvider */]])
    ], ReprotProblemPage);
    return ReprotProblemPage;
}());

//# sourceMappingURL=reprot-problem.js.map

/***/ }),

/***/ 211:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return LoginProvider; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_rxjs_Rx__ = __webpack_require__(191);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_rxjs_Rx___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_rxjs_Rx__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__app_config__ = __webpack_require__(28);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__angular_http__ = __webpack_require__(25);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




/*
  Generated class for the LoginProvider provider.

  See https://angular.io/docs/ts/latest/guide/dependency-injection.html
  for more info on providers and Angular 2 DI.
*/
var LoginProvider = /** @class */ (function () {
    function LoginProvider(http) {
        this.http = http;
    }
    LoginProvider.prototype.login = function (email, password) {
        var headers = new __WEBPACK_IMPORTED_MODULE_3__angular_http__["b" /* Headers */]({
            'Content-Type': 'application/x-www-form-urlencoded'
        });
        var options = new __WEBPACK_IMPORTED_MODULE_3__angular_http__["e" /* RequestOptions */]({
            headers: headers
        });
        return this.http.post(__WEBPACK_IMPORTED_MODULE_2__app_config__["d" /* SERVER_LOGIN_URL */], 'username=' + encodeURIComponent(email) + '&password=' + password + '&api=' + __WEBPACK_IMPORTED_MODULE_2__app_config__["a" /* API_VERSION */], options)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    LoginProvider.prototype.currentUserInformation = function (token) {
        var url = __WEBPACK_IMPORTED_MODULE_2__app_config__["e" /* SERVER_URL */] + 'user?NousEnsembleToken=' + token;
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    LoginProvider = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["Injectable"])(),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_3__angular_http__["c" /* Http */]])
    ], LoginProvider);
    return LoginProvider;
}());

//# sourceMappingURL=login.js.map

/***/ }),

/***/ 212:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return RegisterFirstPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__register_last_register_last__ = __webpack_require__(500);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__home_home__ = __webpack_require__(90);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




/**
 * Generated class for the RegisterFirstPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var RegisterFirstPage = /** @class */ (function () {
    function RegisterFirstPage(navCtrl, platform, appEvents, navParams) {
        this.navCtrl = navCtrl;
        this.platform = platform;
        this.appEvents = appEvents;
        this.navParams = navParams;
        this.submited = false;
        this.newUser = this.navParams.get("newUser");
    }
    RegisterFirstPage.prototype.registerSecondStep = function (errorValidation) {
        this.submited = true;
        if (!errorValidation) {
            this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_2__register_last_register_last__["a" /* RegisterLastPage */], {
                newUser: this.newUser
            });
        }
    };
    RegisterFirstPage.prototype.homePage = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_3__home_home__["a" /* HomePage */]);
    };
    RegisterFirstPage.prototype.checkFocus = function (element) {
        if (this.platform.is('android')) {
            var requiredElement = element.target.offsetParent.parentElement;
            var yOffset = requiredElement.offsetTop;
            this.content.scrollTo(0, yOffset, 2000);
        }
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["ViewChild"])(__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* Content */]),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* Content */])
    ], RegisterFirstPage.prototype, "content", void 0);
    RegisterFirstPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-register-first',template:/*ion-inline-start:"D:\celaneo\mobile\new-mobile\test\src\pages\register-first\register-first.html"*/'<!--\n\n  Generated template for the RegisterFirstPage page.\n\n\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n\n  Ionic pages and navigation.\n\n-->\n\n\n\n<ion-content padding>\n\n    <div class="div-left">\n\n    </div>\n\n    <div class="div-center">\n\n        <div class="back-page" (click)="homePage()">\n\n            <ion-icon name="ios-arrow-back-outline"></ion-icon>\n\n        </div>\n\n        <ion-grid class="no-padding padding-horizontal">\n\n            <ion-row>\n\n                <ion-col text-center>\n\n                    <img class="img-logo" src="assets/imgs/icons/logo-simple.png" alt="NOUS-Ensemble">\n\n                </ion-col>\n\n            </ion-row>\n\n            <ion-row>\n\n                <ion-col text-center>\n\n                    <div class="register-title" text-center>\n\n                        Comment vous <span class="br"> </span> appelez vous ?\n\n                    </div>\n\n                    <img class="img-cloud" src="assets/imgs/cloud.png" alt="NOUS-Ensemble" />\n\n                </ion-col>\n\n            </ion-row>\n\n            <ion-row>\n\n                <ion-col text-center margin-top>\n\n                    <h6 class="notice-register" padding-horizontal>\n\n                        <br><br>\n\n                    </h6>\n\n                </ion-col>\n\n            </ion-row>\n\n            <ion-row>\n\n                <form #registerStepOneForm="ngForm">\n\n                    <ion-row class="padding-horizontal">\n\n                        <ion-col class="col-input">\n\n                            <ion-label color="light-black" stacked>Nom</ion-label>\n\n                            <ion-item text-center [class.formError]="lastname.invalid && (lastname.dirty || submited || lastname.touched)">\n\n                                <ion-input text-capitalize type="text" id="lastname" name="lastname" #lastname="ngModel"\n\n                                    (focus)="checkFocus($event)" required [(ngModel)]="newUser.lastname"></ion-input>\n\n                            </ion-item>\n\n                            <div class="error-msg" *ngIf="lastname.invalid && (lastname.dirty || submited || lastname.touched)">\n\n                                <span class="error">Veuillez indiquer votre nom</span>\n\n                            </div>\n\n                        </ion-col>\n\n                    </ion-row>\n\n                    <ion-row class="padding-horizontal">\n\n                        <ion-col class="col-input">\n\n                            <ion-label color="light-black" stacked>Prénom</ion-label>\n\n                            <ion-item text-center [class.formError]="firstname.invalid && (firstname.dirty || submited || firstname.touched)">\n\n                                <ion-input text-capitalize type="text" id="firstname" name="firstname" (focus)="checkFocus($event)"\n\n                                    #firstname="ngModel" required [(ngModel)]="newUser.firstname"></ion-input>\n\n                            </ion-item>\n\n                            <div class="error-msg" *ngIf="firstname.invalid && (firstname.dirty || submited || firstname.touched)">\n\n                                <span class="error">Veuillez indiquer votre prénom</span>\n\n                            </div>\n\n                        </ion-col>\n\n                    </ion-row>\n\n                    <ion-row class="padding-horizontal">\n\n                        <ion-col class="col-submit" col-12 text-center>\n\n                            <button ion-button color="primary" round class="button-big" (click)="registerSecondStep(registerStepOneForm.invalid)">C\'est\n\n                                bon</button>\n\n                        </ion-col>\n\n                    </ion-row>\n\n                    <ion-row class="padding-horizontal">\n\n                        <ion-col class="div-img">\n\n                            <img  src="assets/imgs/forget-password.png" alt="NOUS-Ensemble" class="img-bottom"/>\n\n\n\n                        </ion-col>\n\n                    </ion-row>\n\n                </form>\n\n            </ion-row>\n\n\n\n        </ion-grid>\n\n    </div>\n\n    <div class="div-right">\n\n    </div>\n\n</ion-content>\n\n'/*ion-inline-end:"D:\celaneo\mobile\new-mobile\test\src\pages\register-first\register-first.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["x" /* Platform */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */]])
    ], RegisterFirstPage);
    return RegisterFirstPage;
}());

//# sourceMappingURL=register-first.js.map

/***/ }),

/***/ 213:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ModerationPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_forms__ = __webpack_require__(21);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_user_user__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_globals_globals__ = __webpack_require__(8);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__providers_community_community__ = __webpack_require__(40);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__empty_news_empty_news__ = __webpack_require__(106);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__pages_news_news__ = __webpack_require__(35);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__providers_login_login__ = __webpack_require__(211);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__login_login__ = __webpack_require__(133);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};










/**
 * Generated class for the ModerationPage page.
 *
 * See http://ionicframework.com/docs/components/#navigation for more info
 * on Ionic pages and navigation.
 */
var ModerationPage = /** @class */ (function () {
    function ModerationPage(navCtrl, navParams, modal, serviceUser, loader, myAlert, appGlobals, service, platform, serviceCommunity, appEvents, formBuilder) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.modal = modal;
        this.serviceUser = serviceUser;
        this.loader = loader;
        this.myAlert = myAlert;
        this.appGlobals = appGlobals;
        this.service = service;
        this.platform = platform;
        this.serviceCommunity = serviceCommunity;
        this.appEvents = appEvents;
        this.formBuilder = formBuilder;
        this.moduration = {
            email: null,
            lastname: null,
            city: null,
            firstname: null,
            password: null,
            communities: []
        };
        this.communities = {
            id: null,
            type: "public",
            password: null
        };
        this.invalidCity = false;
        this.invalidPassword = false;
        this.invalidEmail = false;
        this.invalidFirstname = false;
        this.invalidlastname = false;
        this.invalidCode = false;
        this.communaute = this.navParams.get('item');
        console.log("this.communaute = " + JSON.stringify(this.communaute));
        if (this.communaute.isPrivate) {
            this.fromGroup = this.formBuilder.group({
                // email:['',Validators.required],
                email: ['', __WEBPACK_IMPORTED_MODULE_2__angular_forms__["h" /* Validators */].compose([__WEBPACK_IMPORTED_MODULE_2__angular_forms__["h" /* Validators */].maxLength(70), __WEBPACK_IMPORTED_MODULE_2__angular_forms__["h" /* Validators */].pattern('^[_A-Za-z0-9-\\+]+(\\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\\.[A-Za-z0-9]+)*(\\.[A-Za-z]{2,})$'), __WEBPACK_IMPORTED_MODULE_2__angular_forms__["h" /* Validators */].required])],
                city: ['', __WEBPACK_IMPORTED_MODULE_2__angular_forms__["h" /* Validators */].required],
                lastname: ['', __WEBPACK_IMPORTED_MODULE_2__angular_forms__["h" /* Validators */].required],
                firstname: ['', __WEBPACK_IMPORTED_MODULE_2__angular_forms__["h" /* Validators */].required],
                password: ['', __WEBPACK_IMPORTED_MODULE_2__angular_forms__["h" /* Validators */].required],
                code: ['', __WEBPACK_IMPORTED_MODULE_2__angular_forms__["h" /* Validators */].required],
            });
        }
        else {
            this.fromGroup = this.formBuilder.group({
                // email:['',Validators.required],
                email: ['', __WEBPACK_IMPORTED_MODULE_2__angular_forms__["h" /* Validators */].compose([__WEBPACK_IMPORTED_MODULE_2__angular_forms__["h" /* Validators */].maxLength(70), __WEBPACK_IMPORTED_MODULE_2__angular_forms__["h" /* Validators */].pattern('^[_A-Za-z0-9-\\+]+(\\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\\.[A-Za-z0-9]+)*(\\.[A-Za-z]{2,})$'), __WEBPACK_IMPORTED_MODULE_2__angular_forms__["h" /* Validators */].required])],
                city: ['', __WEBPACK_IMPORTED_MODULE_2__angular_forms__["h" /* Validators */].required],
                lastname: ['', __WEBPACK_IMPORTED_MODULE_2__angular_forms__["h" /* Validators */].required],
                firstname: ['', __WEBPACK_IMPORTED_MODULE_2__angular_forms__["h" /* Validators */].required],
                password: ['', __WEBPACK_IMPORTED_MODULE_2__angular_forms__["h" /* Validators */].required],
            });
        }
    }
    ModerationPage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad ModerationPage');
    };
    ModerationPage.prototype.SelectCity = function () {
        var _this = this;
        var myModal2 = this.modal.create('SelectCityPage', {}, { cssClass: 'cities-modal' });
        myModal2.onDidDismiss(function (data) {
            if (data) {
                _this.moduration.city = data.name;
                _this.invalidCity = false;
            }
        });
        myModal2.present();
    };
    ModerationPage.prototype.capitalize = function (event, type) {
        if (event) {
            if (type == 'lastname') {
                this.invalidlastname = false;
            }
            if (type == 'firstname') {
                this.invalidFirstname = false;
            }
            if (type == 'email') {
                if (this.moduration.email.indexOf(".") > -1 && this.moduration.email.indexOf("@") > -1 &&
                    this.moduration.email.indexOf("@") < this.moduration.email.indexOf(".")) {
                    this.invalidEmail = false;
                }
                else {
                    this.invalidEmail = true;
                }
            }
            if (type == 'password') {
                this.invalidPassword = false;
            }
            if (type == 'code') {
                this.invalidCode = false;
            }
        }
    };
    ModerationPage.prototype.alertErreur = function (message) {
        var errorAlert = this.myAlert.create({
            title: "Erreur",
            subTitle: message,
            buttons: [
                {
                    text: 'OK',
                    handler: function () {
                    }
                }
            ]
        });
        errorAlert.present();
    };
    ModerationPage.prototype.register = function (errorValidation) {
        var _this = this;
        if (!errorValidation) {
            var array = [];
            this.communities.id = this.communaute.id;
            if (this.communaute.isPrivate) {
                this.communities.type = "private";
            }
            array.push(this.communities);
            this.moduration.communities = array;
            var loadingPopup_1 = this.loader.create({});
            loadingPopup_1.present();
            this.serviceUser.registerFollow(this.moduration).then(function (data) {
                if (data) {
                    loadingPopup_1.dismiss();
                    if (data.code == 412) {
                        _this.alertErreur(data.message);
                    }
                    else if (data.code == 404) {
                        _this.alertErreur(data.message);
                    }
                    else if (data.code == 406) {
                        _this.alertErreur(data.message);
                    }
                    else if (data.code == 409) {
                        _this.alertErreur(data.message);
                    }
                    else if (data.code == 410) {
                        _this.alertErreur(data.message);
                    }
                    else if (data.code == 200) {
                        _this.appGlobals.token = data.token;
                        localStorage.setItem('token', data.token);
                        localStorage.setItem("adminAssociations", JSON.stringify([]));
                        localStorage.setItem("adminMerchants", JSON.stringify([]));
                        localStorage.setItem("adherentAssociations", JSON.stringify([]));
                        localStorage.setItem("adherentMerchants", JSON.stringify([]));
                        var expiration_date = new Date();
                        expiration_date.setDate(expiration_date.getDate() + 7);
                        localStorage.setItem('expiration_date', expiration_date.toString());
                        localStorage.setItem('account_type', 'citoyen');
                        localStorage.setItem('ga', data.ga);
                        if (data.token) {
                            localStorage.setItem("currentUser", JSON.stringify(data.user));
                            localStorage.setItem("isLoggedIn", "1");
                            localStorage.setItem("hasCommunities", "false");
                            localStorage.setItem("hasApprovedCommunities", "false");
                            var Communities = [];
                            localStorage.setItem("allCommunities", JSON.stringify(Communities));
                            Promise.all([_this.serviceCommunity.getAllPublicCommunities(), _this.serviceCommunity.getAllPrivateCommunities(), _this.serviceCommunity.findCurrentUserCommunities()]).then(function (user) {
                                localStorage.setItem("publicCommunities", JSON.stringify(user[0]));
                                localStorage.setItem("privateCommunities", JSON.stringify(user[1]));
                                localStorage.setItem("allCommunities", JSON.stringify(user[2]));
                                _this.approved = user[2];
                                if (_this.approved.length != 0) {
                                    localStorage.setItem("hasApprovedCommunities", "true");
                                }
                                else {
                                    localStorage.setItem("hasApprovedCommunities", "false");
                                }
                                _this.appEvents.publish('refreshCommunities');
                            });
                            Promise.all([_this.service.currentUserInformation(data.token), _this.serviceCommunity.findCurrentUserFollowedCommunities()]).then(function (datas) {
                                localStorage.setItem("currentUser", JSON.stringify(datas[0]));
                                localStorage.setItem("followedCommunities", JSON.stringify(datas[1]));
                                _this.appEvents.publish('refreshCurrentUser');
                                _this.appEvents.publish('refreshApprovedCommunities');
                                localStorage.setItem("isLoggedIn", "1");
                                localStorage.setItem('ga', data.ga);
                                loadingPopup_1.dismiss();
                                localStorage.removeItem('communityDeeplink');
                                _this.communities = datas[1];
                                if (_this.communities.length != 0) {
                                    localStorage.setItem("hasCommunities", "true");
                                    _this.navCtrl.setRoot(__WEBPACK_IMPORTED_MODULE_7__pages_news_news__["a" /* NewsPage */]);
                                }
                                else {
                                    localStorage.setItem("hasCommunities", "false");
                                    _this.navCtrl.setRoot(__WEBPACK_IMPORTED_MODULE_6__empty_news_empty_news__["a" /* EmptyNewsPage */]);
                                }
                            });
                        }
                    }
                }
            });
        }
        else {
            if (this.moduration.lastname == null) {
                this.invalidlastname = true;
            }
            if (this.moduration.firstname == null) {
                this.invalidFirstname = true;
            }
            if (this.moduration.city == null) {
                this.invalidCity = true;
            }
            if (this.moduration.password == null) {
                this.invalidPassword = true;
            }
            if (this.moduration.email == null) {
                this.invalidEmail = true;
            }
            if (this.communaute.isPrivate && this.communities.password == null) {
                this.invalidCode = true;
            }
        }
    };
    ModerationPage.prototype.login = function () {
        this.navCtrl.setRoot(__WEBPACK_IMPORTED_MODULE_9__login_login__["a" /* LoginPage */]);
    };
    ModerationPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-moderation',template:/*ion-inline-start:"D:\celaneo\mobile\new-mobile\test\src\pages\moderation\moderation.html"*/'<!--\n\n  Generated template for the ModerationPage page.\n\n\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n\n  Ionic pages and navigation.\n\n-->\n\n<ion-header>\n\n\n\n  \n\n\n\n</ion-header>\n\n\n\n\n\n<ion-content padding>\n\n\n\n  \n\n\n\n  <ion-col col-12 text-centre class="padding-top">\n\n    <form [formGroup]="fromGroup" >\n\n    <ion-grid class="margin-top-grid padding-horizontal">\n\n\n\n      <ion-row>\n\n        <ion-col text-center>\n\n            <img class="img-logo" src="assets/imgs/icons/logo-simple.png" alt="NOUS-Ensemble">\n\n        </ion-col>\n\n    </ion-row>\n\n    \n\n    <ion-row>\n\n        <ion-col text-center margin-top>\n\n            <h6 class="notice-register" padding-horizontal>\n\n                <br><br>\n\n            </h6>\n\n        </ion-col>\n\n    </ion-row>\n\n\n\n\n\n\n\n      <ion-list>\n\n\n\n        <ion-col col-12 text-center class="margin-top select-not-ie">\n\n          <ion-item [class.formError]="(fromGroup.controls[\'lastname\'].errors?.required && fromGroup.controls[\'lastname\'].touched)|| invalidlastname ">\n\n            <ion-input type="text" formControlName="lastname"  placeholder="Nom" [(ngModel)]="moduration.lastname"  required (change)="capitalize($event.target.value, \'lastname\')" ></ion-input>\n\n          </ion-item>\n\n  \n\n        \n\n  \n\n          <div *ngIf="(fromGroup.controls[\'lastname\'].errors?.required && fromGroup.controls[\'lastname\'].touched) || invalidlastname">\n\n                  <span class="error">Veuillez indiquer votre nom</span>\n\n          </div>\n\n          </ion-col>\n\n\n\n\n\n\n\n          <ion-col col-12 text-center class="margin-top select-not-ie">\n\n            <ion-item [class.formError]="(fromGroup.controls[\'firstname\'].errors?.required && fromGroup.controls[\'firstname\'].touched)|| invalidFirstname ">\n\n              <ion-input type="text" formControlName="firstname"  placeholder="Prénom" [(ngModel)]="moduration.firstname"  required (change)="capitalize($event.target.value, \'firstname\')" ></ion-input>\n\n            </ion-item>\n\n    \n\n          \n\n    \n\n            <div *ngIf="(fromGroup.controls[\'firstname\'].errors?.required && fromGroup.controls[\'firstname\'].touched) || invalidFirstname">\n\n                    <span class="error">Veuillez indiquer votre prénom</span>\n\n            </div>\n\n            </ion-col>\n\n\n\n        \n\n        <ion-col col-12 text-center class="margin-top select-not-ie">\n\n        <ion-item [class.formError]="(fromGroup.controls[\'email\'].errors?.required && fromGroup.controls[\'email\'].touched) || invalidEmail">\n\n          <ion-input type="text" formControlName="email"  placeholder="E-mail" [(ngModel)]="moduration.email"  required (change)="capitalize($event.target.value, \'email\')" ></ion-input>\n\n        </ion-item>\n\n\n\n      \n\n\n\n        <div *ngIf="(fromGroup.controls[\'email\'].errors?.required && fromGroup.controls[\'email\'].touched) || invalidEmail">\n\n                <span class="error">Veuillez indiquer votre E-mail</span>\n\n        </div>\n\n        </ion-col>\n\n\n\n\n\n\n\n        <ion-col col-12 text-center class="margin-top select-not-ie">\n\n          <ion-item [class.formError]="(fromGroup.controls[\'password\'].errors?.required && fromGroup.controls[\'password\'].touched)  || invalidPassword">\n\n            <ion-input type="password" formControlName="password"  placeholder="Mot de passe" [(ngModel)]="moduration.password"  required (change)="capitalize($event.target.value, \'password\')" ></ion-input>\n\n          </ion-item>\n\n  \n\n        \n\n  \n\n          <div *ngIf="(fromGroup.controls[\'password\'].errors?.required && fromGroup.controls[\'password\'].touched) || invalidPassword">\n\n                  <span class="error">Veuillez indiquer votre mot de passe</span>\n\n          </div>\n\n          </ion-col>\n\n       \n\n        <ion-col col-12 text-center class="margin-top select-not-ie">\n\n          <ion-item [class.formError]="(fromGroup.controls[\'city\'].errors?.required && fromGroup.controls[\'city\'].touched) || invalidCity ">\n\n              <ion-input  required (click)="SelectCity()" formControlName="city"  readonly autocomplete="off" autocorrect="on"  type="text"  placeholder="Ville" [(ngModel)]="moduration.city" ></ion-input>\n\n          </ion-item>         \n\n          <div *ngIf="(fromGroup.controls[\'city\'].errors?.required && fromGroup.controls[\'city\'].touched) || invalidCity ">\n\n              <span class="error">Champs ville obligatoire</span>\n\n          </div>\n\n        </ion-col>\n\n\n\n\n\n        <ion-col class="margin-top select-not-ie">\n\n        <ion-item style="border-radius: 25px;\n\n        background-color: grey;">\n\n          <p>{{communaute.name}}</p>\n\n        </ion-item>         \n\n     \n\n        </ion-col>\n\n\n\n\n\n        <ion-col col-12 text-center class="margin-top select-not-ie" *ngIf="communaute.isPrivate" >\n\n          <ion-item [class.formError]="(fromGroup.controls[\'code\'].errors?.required && fromGroup.controls[\'code\'].touched)|| invalidCode ">\n\n            <ion-input type="text" formControlName="code"  placeholder="Code" [(ngModel)]="communities.password"  required (change)="capitalize($event.target.value, \'code\')" ></ion-input>\n\n          </ion-item>\n\n  \n\n        \n\n  \n\n          <div *ngIf="(fromGroup.controls[\'code\'].errors?.required && fromGroup.controls[\'code\'].touched) || invalidCode">\n\n                  <span class="error">Veuillez indiquer le code de communauté</span>\n\n          </div>\n\n          </ion-col>\n\n\n\n\n\n      </ion-list>  \n\n      \n\n      \n\n     \n\n      \n\n    \n\n      <ion-row class="padding-horizontal">\n\n        <ion-col class="col-submit" col-12 text-center>\n\n            <button ion-button color="primary" round class="button-big" (click)="register(fromGroup.invalid)">C\'est\n\n                bon</button>\n\n                <button ion-button color="primary" round class="button-big" (click)="login()">J\'ai un compte</button>\n\n        </ion-col>\n\n    </ion-row>\n\n\n\n      <ion-row class="padding-horizontal">\n\n        <ion-col class="div-img">\n\n            <img  src="assets/imgs/forget-password.png" alt="NOUS-Ensemble" class="img-bottom"/>\n\n\n\n        </ion-col>\n\n    </ion-row>\n\n\n\n      </ion-grid>\n\n    </form>\n\n</ion-col>\n\n\n\n\n\n\n\n</ion-content>\n\n'/*ion-inline-end:"D:\celaneo\mobile\new-mobile\test\src\pages\moderation\moderation.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_3__providers_user_user__["a" /* UserProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_4__providers_globals_globals__["a" /* GlobalsProvider */],
            __WEBPACK_IMPORTED_MODULE_8__providers_login_login__["a" /* LoginProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["x" /* Platform */],
            __WEBPACK_IMPORTED_MODULE_5__providers_community_community__["a" /* CommunityProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_2__angular_forms__["a" /* FormBuilder */]])
    ], ModerationPage);
    return ModerationPage;
}());

//# sourceMappingURL=moderation.js.map

/***/ }),

/***/ 22:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CommentProvider; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_http__ = __webpack_require__(25);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_rxjs_add_operator_map__ = __webpack_require__(27);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_rxjs_add_operator_map___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_rxjs_add_operator_map__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__app_config__ = __webpack_require__(28);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




var CommentURL = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'comment/';
/*
  Generated class for the CommentProvider provider.

  See https://angular.io/docs/ts/latest/guide/dependency-injection.html
  for more info on providers and Angular 2 DI.
*/
var CommentProvider = /** @class */ (function () {
    function CommentProvider(http) {
        this.http = http;
    }
    /**
     *  ajout commentaire sur un article
     */
    CommentProvider.prototype.postArticleComment = function (article, data) {
        var url = CommentURL + 'article/' + article + '/citoyen/new?NousEnsembleToken=' + localStorage.getItem("token");
        var body = JSON.stringify({
            content: data.content,
            photo: data.photo,
            document: data.document
        });
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    /**
     * Ajouter commentaire sur un evenement
     */
    CommentProvider.prototype.postEventComment = function (event, data) {
        var url = CommentURL + 'event/' + event + '/citoyen/new?NousEnsembleToken=' + localStorage.getItem("token");
        var body = JSON.stringify({
            content: data.content,
            photo: data.photo,
        });
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    /**
     * répondre à un commentaire sur un article
     */
    CommentProvider.prototype.postArticleCommentReply = function (data) {
        var url = CommentURL + data.comment + '/citoyen/article/reply?NousEnsembleToken=' + localStorage.getItem("token");
        var body = JSON.stringify({
            content: data.content,
            photo: data.photo,
            document: data.document
        });
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    /**
     * répondre à un commentaire sur un evenement
     */
    CommentProvider.prototype.postEventCommentReply = function (data) {
        var url = CommentURL + data.comment + '/citoyen/event/reply?NousEnsembleToken=' + localStorage.getItem("token");
        var body = JSON.stringify({
            content: data.content,
            photo: data.photo,
        });
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    /**
     * supprimer un commentaire sur un article
     */
    CommentProvider.prototype.deleteArticleComment = function (comment) {
        var url = CommentURL + comment + '/citoyen/article/delete?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    /**
     * supprimer un commentaire sur un evénement
     */
    CommentProvider.prototype.deleteEventComment = function (comment) {
        var url = CommentURL + comment + '/citoyen/event/delete?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    /**
     * supprimer un commentaire sur un article
     */
    CommentProvider.prototype.deleteArticleCommentReply = function (comment) {
        var url = CommentURL + comment + '/citoyen/article/reply/delete?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    /**
     * supprimer un commentaire sur un evénement
     */
    CommentProvider.prototype.deleteEventCommentReply = function (comment) {
        var url = CommentURL + comment + '/citoyen/event/reply/delete?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    /**
     * mettre à jour un commentaire sur un article
     */
    CommentProvider.prototype.putArticleComment = function (comment, data) {
        var url = CommentURL + comment + '/citoyen/article/update?NousEnsembleToken=' + localStorage.getItem("token");
        var body = JSON.stringify({
            content: data
        });
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    /**
     * mettre à jour un commentaire sur un article
     */
    CommentProvider.prototype.putEventComment = function (comment, data) {
        var url = CommentURL + comment + '/citoyen/event/update?NousEnsembleToken=' + localStorage.getItem("token");
        var body = JSON.stringify({
            content: data
        });
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    /**
     * mettre à jour un commentaire sur un article
     */
    CommentProvider.prototype.putArticleCommentReply = function (comment, data) {
        var url = CommentURL + comment + '/citoyen/article/reply/update?NousEnsembleToken=' + localStorage.getItem("token");
        var body = JSON.stringify({
            content: data
        });
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    /**
     * mettre à jour un commentaire sur un article
     */
    CommentProvider.prototype.putEventCommentReply = function (comment, data) {
        var url = CommentURL + comment + '/citoyen/event/reply/update?NousEnsembleToken=' + localStorage.getItem("token");
        var body = JSON.stringify({
            content: data
        });
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    CommentProvider.prototype.findEventCommentAssociation = function (id, page) {
        var url = CommentURL + 'association/' + id + '/event/' + page + '/' + 10 + '?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    CommentProvider.prototype.findArticleCommentAssociation = function (id, page) {
        var url = CommentURL + 'association/' + id + '/article/' + page + '/' + 10 + '?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    CommentProvider.prototype.findEventCommentMerchant = function (id, page) {
        var url = CommentURL + 'merchant/' + id + '/event/' + page + '/' + 10 + '?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    CommentProvider.prototype.findArticleCommentMerchant = function (id, page) {
        var url = CommentURL + 'merchant/' + id + '/article/' + page + '/' + 10 + '?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    CommentProvider.prototype.markCommentsArticleAsRead = function (article) {
        var url = CommentURL + 'read/' + article + '/article?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    CommentProvider.prototype.markCommentsEventAsRead = function (event) {
        var url = CommentURL + 'read/' + event + '/event?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    /**
     * supprimer un commentaire sur un article
     */
    CommentProvider.prototype.deleteArticleListComment = function (comment) {
        var url = CommentURL + comment + '/citoyen/article/list/delete?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    /**
     * supprimer un commentaire sur un evénement
     */
    CommentProvider.prototype.deleteEventListComment = function (comment) {
        var url = CommentURL + comment + '/citoyen/event/list/delete?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    CommentProvider.prototype.postCommentsArticle = function (article) {
        var url = CommentURL + 'article/' + article + '?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    CommentProvider.prototype.getCommentsEvent = function (event, page) {
        var url = CommentURL + 'event/' + event + '/pagination/' + page + '?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    CommentProvider.prototype.getCommentsArticlePagination = function (article, page) {
        var url = CommentURL + 'article/' + article + '/pagination/' + page + '?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    /**
     * Méthodes de commentaire BonPlan
     */
    CommentProvider.prototype.postCommentsGoodPlan = function (goodPlan, comment) {
        var url = CommentURL + 'goodplan/' + goodPlan + '/citoyen/new?NousEnsembleToken=' + localStorage.getItem("token");
        var body = JSON.stringify({
            content: comment.content,
            photo: comment.photo,
            document: comment.document
        });
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    CommentProvider.prototype.postGoodPlanCommentReply = function (id, data) {
        var url = CommentURL + id + '/citoyen/goodplan/reply?NousEnsembleToken=' + localStorage.getItem("token");
        var body = JSON.stringify({
            content: data.content,
            photo: data.photo,
            document: data.document
        });
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    CommentProvider.prototype.getCommentsGoodPlan = function (event, page) {
        var url = CommentURL + 'goodplan/' + event + '/pagination/' + page + '?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    CommentProvider.prototype.deleteGoodPlanComment = function (comment) {
        var url = CommentURL + comment + '/citoyen/goodplan/delete?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    CommentProvider.prototype.deleteGoodPlanCommentReply = function (comment) {
        var url = CommentURL + comment + '/citoyen/goodplan/reply/delete?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    CommentProvider = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Injectable"])(),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__angular_http__["c" /* Http */]])
    ], CommentProvider);
    return CommentProvider;
}());

//# sourceMappingURL=comment.js.map

/***/ }),

/***/ 238:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return VolunteersProvider; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_http__ = __webpack_require__(25);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_rxjs_add_operator_map__ = __webpack_require__(27);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_rxjs_add_operator_map___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_rxjs_add_operator_map__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__app_config__ = __webpack_require__(28);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




/*
  Generated class for the BenevolesProvider provider.

  See https://angular.io/docs/ts/latest/guide/dependency-injection.html
  for more info on providers and Angular 2 DI.
*/
var VolunteersProvider = /** @class */ (function () {
    function VolunteersProvider(http) {
        this.http = http;
    }
    VolunteersProvider.prototype.getEventBenevoles = function (event) {
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'event/' + event + '/volunteers?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    VolunteersProvider.prototype.postMails = function (data) {
        var benevoles_string = localStorage.getItem("benevoles");
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'event/volunteers/mails?NousEnsembleToken=' + localStorage.getItem("token");
        var body = JSON.stringify({
            benevoles: benevoles_string.split(","),
            object: data.objet,
            email: data.email,
            event_id: localStorage.getItem("currentEvent"),
            account_id: localStorage.getItem("account_id"),
            account_type: localStorage.getItem("account_type")
        });
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    VolunteersProvider.prototype.postAllMails = function (data, volunteers, account) {
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'event/volunteers/mails/all?NousEnsembleToken=' + localStorage.getItem("token");
        var body = JSON.stringify({
            benevoles: volunteers,
            object: data.objet,
            email: data.email,
            account_id: account.id,
            account_type: account.type
        });
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    VolunteersProvider.prototype.getAll = function (account) {
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + account.type + '/' + account.id + '/volunteers?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    VolunteersProvider.prototype.deleteVolunteer = function (id) {
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'association/' + id + '/volunteers/delete?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    VolunteersProvider = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Injectable"])(),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__angular_http__["c" /* Http */]])
    ], VolunteersProvider);
    return VolunteersProvider;
}());

//# sourceMappingURL=volunteers.js.map

/***/ }),

/***/ 271:
/***/ (function(module, exports) {

function webpackEmptyAsyncContext(req) {
	// Here Promise.resolve().then() is used instead of new Promise() to prevent
	// uncatched exception popping up in devtools
	return Promise.resolve().then(function() {
		throw new Error("Cannot find module '" + req + "'.");
	});
}
webpackEmptyAsyncContext.keys = function() { return []; };
webpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;
module.exports = webpackEmptyAsyncContext;
webpackEmptyAsyncContext.id = 271;

/***/ }),

/***/ 28:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "e", function() { return SERVER_URL; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "d", function() { return SERVER_LOGIN_URL; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return APP_PACKAGE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return APP_VERSION; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return API_VERSION; });
//export let SERVER_URL = "https://nousensemble-v3-bo.mila.celaneo.com/app_dev.php/api/";
//export let SERVER_URL = "https://admin.nous-ensemble.com/api/";
var SERVER_URL = "http://127.0.0.1:8000/app_dev.php/api/";
//export let SERVER_URL = "https://www.nous-ensemble.fr/admin/api/";
//export let SERVER_URL = "http://demo.nous-ensemble.fr/admin/api/";
/******** LOGIN *********/
//export let SERVER_LOGIN_URL = 'https://nousensemble-v3-bo.mila.celaneo.com/app_dev.php/api/user/login';
//export let SERVER_LOGIN_URL = 'https://admin.nous-ensemble.com/api/user/login';
//export let SERVER_LOGIN_URL = 'http://127.0.0.1:8000/app_dev.php/api/user/login';
//export let SERVER_LOGIN_URL = 'https://www.nous-ensemble.fr/admin/api/user/login';
var SERVER_LOGIN_URL = 'http://127.0.0.1:8000/app_dev.php/api/user/login';
var APP_PACKAGE = "app.io.nousensemble";
var APP_VERSION = "1.3.6";
var API_VERSION = "4";
//# sourceMappingURL=config.js.map

/***/ }),

/***/ 31:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ArticleProvider; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_http__ = __webpack_require__(25);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_rxjs_add_operator_map__ = __webpack_require__(27);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_rxjs_add_operator_map___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_rxjs_add_operator_map__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__app_config__ = __webpack_require__(28);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_moment__ = __webpack_require__(1);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_moment__);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




var ArticleURL = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'article/';

var ArticleProvider = /** @class */ (function () {
    function ArticleProvider(http) {
        this.http = http;
    }
    ArticleProvider.prototype.getRefreshParameter = function () {
        var v = new Date().valueOf();
        return '&_=' + v;
    };
    ArticleProvider.prototype.getAccueilCitoyenArticles = function (page, parameters) {
        var url = ArticleURL + 'citzen/home/' + page + '/' + 5 + '?NousEnsembleToken=' + localStorage.getItem("token") + this.getRefreshParameter() + parameters;
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    ArticleProvider.prototype.getPastilleJCounter = function () {
        var url = ArticleURL + 'j_tags?NousEnsembleToken=' + localStorage.getItem("token") + this.getRefreshParameter();
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    ArticleProvider.prototype.getCategories = function () {
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'categories?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    ArticleProvider.prototype.postArticle = function (type, id, data) {
        var url = ArticleURL + 'new/' + type + '/' + id + '?NousEnsembleToken=' + localStorage.getItem("token");
        var body = JSON.stringify({
            title: data.title,
            photo: data.photo,
            photos: data.photos,
            photo2: data.secondPhoto,
            photo3: data.thirdPhoto,
            video: data.videoFile,
            document: data.document,
            event: data.event,
            description: data.description,
            categories: data.category,
            public_At: data.publicAt.fullDate,
            private: data.private,
            community: data.community,
            heading: data.heading,
            push_hour: data.push.hour,
            push_date: data.push.date,
            push_content: data.push.content,
            push_enabled: data.push.enabled,
            city: data.city
        });
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    ArticleProvider.prototype.postCitoyenArticle = function (id, data) {
        var url = ArticleURL + 'new/user/' + id + '?NousEnsembleToken=' + localStorage.getItem("token");
        var body = JSON.stringify({
            title: data.title,
            video: data.videoFile,
            document: data.document,
            photo: data.photo,
            photos: data.photos,
            photo2: data.secondPhoto,
            photo3: data.thirdPhoto,
            description: data.description,
            private: data.private,
            community: data.community,
            group: data.group,
            categories: data.category,
            public_At: data.publicAt.fullDate,
            push_hour: data.push.hour,
            push_date: data.push.date,
            push_content: data.push.content,
            push_enabled: data.push.enabled,
            city: data.city
        });
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    ArticleProvider.prototype.postCityhallArticle = function (type, id, data) {
        var url = ArticleURL + 'new/cityhall/' + id + '?NousEnsembleToken=' + localStorage.getItem("token");
        var body = JSON.stringify({
            title: data.title,
            video: data.videoFile,
            document: data.document,
            photo: data.photo,
            photos: data.photos,
            photo2: data.secondPhoto,
            photo3: data.thirdPhoto,
            description: data.description,
            city: data.city,
            category: data.category,
            public_At: data.publicAt.fullDate,
            publishing: type
        });
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    ArticleProvider.prototype.putArticle = function (article, articleImgs) {
        var url = ArticleURL + article.id + '/update?NousEnsembleToken=' + localStorage.getItem("token");
        var body = JSON.stringify({
            title: article.title,
            video: article.videoFile,
            documentUpd: article.documentUpd,
            deletedoc: article.deletedoc,
            photo: articleImgs.articlePhoto,
            photos: articleImgs.photos,
            imges: article.images,
            todelete: articleImgs.toDelete,
            photo2: articleImgs.articleSecondPhoto,
            todelete2: articleImgs.toDeleteSecond,
            photoId2: articleImgs.secondId,
            photo3: articleImgs.articleThirdPhoto,
            todelete3: articleImgs.toDeleteThird,
            photoId3: articleImgs.thirdId,
            description: article.description,
            category: article.category,
            event: article.event,
            group: article.group,
            private: article.private,
            public_At: article.publicAt,
            city: article.city,
            push_hour: article.push.hour,
            push_date: article.push.date,
            push_content: article.push.content,
            push_enabled: article.push.enabled,
            mode: article.mode
        });
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    ArticleProvider.prototype.articlesDuplicateNew = function (article, id, articleImgs) {
        var url = ArticleURL + id + '/duplicate' + '?NousEnsembleToken=' + localStorage.getItem("token");
        var body = JSON.stringify({
            title: article.title,
            video: article.videoFile,
            document: article.document,
            photo: articleImgs.articlePhoto,
            photos: articleImgs.photos,
            photo2: articleImgs.articleSecondPhoto,
            photo3: articleImgs.articleThirdPhoto,
            description: article.description,
            private: article.private,
            publicAt: article.publicAt,
            city: article.city,
            recursivity_end: article.limit_date || null,
            recurivity_period: article.period || null,
            recursivity_day: article.day || null,
            images: article.images,
        });
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    ArticleProvider.prototype.putCitoyenArticle = function (article, articleImgs) {
        console.log("hhhhhhhhhhhhhhhhhhhhhhhh = " + JSON.stringify(article));
        var url = ArticleURL + article.id + '/update?NousEnsembleToken=' + localStorage.getItem("token");
        var body = JSON.stringify({
            title: article.title,
            video: article.videoFile,
            documentUpd: article.documentUpd,
            deletedoc: article.deletedoc,
            photo: articleImgs.articlePhoto,
            photos: articleImgs.photos,
            todelete: articleImgs.toDelete,
            photo2: articleImgs.articleSecondPhoto,
            todelete2: articleImgs.toDeleteSecond,
            photoId2: articleImgs.secondId,
            photo3: articleImgs.articleThirdPhoto,
            todelete3: articleImgs.toDeleteThird,
            photoId3: articleImgs.thirdId,
            description: article.description,
            city: article.city,
            category: article.category,
            event: article.event,
            /*  push:{
                  hour:article.push.hour,
                  date:article.push.date,
                  content:article.push.content,
                  enabled:article.push.enabled,
              }*/
            push_hour: article.push.hour,
            push_date: article.push.date,
            push_content: article.push.content,
            push_enabled: article.push.enabled,
        });
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    ArticleProvider.prototype.findAssociationArticles = function (id, page) {
        var url = ArticleURL + id + '/association/' + page + '/' + 4 + '?NousEnsembleToken=' + localStorage.getItem("token");
        console.log("URL C " + url);
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    ArticleProvider.prototype.eventDuplicateListe = function (id) {
        var url = ArticleURL + id + '/listeEvent' + '?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    ArticleProvider.prototype.articlesDuplicateListe = function (id) {
        var url = ArticleURL + id + '/liste' + '?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    ArticleProvider.prototype.findMerchantArticles = function (id, page) {
        var url = ArticleURL + id + '/merchant/' + page + '/' + 5 + '?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    ArticleProvider.prototype.deleteArticle = function (id, mode) {
        var url = ArticleURL + "delete/" + id + '?NousEnsembleToken=' + localStorage.getItem("token") + '&mode=' + mode;
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    ArticleProvider.prototype.deleteAll = function (data) {
        var url = ArticleURL + "deleteAll" + '?NousEnsembleToken=' + localStorage.getItem("token");
        var body = JSON.stringify({
            minDate: __WEBPACK_IMPORTED_MODULE_4_moment__(data.minDate).format("YYYY-MM-DD HH:mm:ss"),
            duplicateEventId: data.duplicateEventId,
        });
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    ArticleProvider.prototype.deleteEventDuplicate = function (id) {
        var url = ArticleURL + "deleteDuplicate/" + id + '?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    ArticleProvider.prototype.getDetailsArticle = function (id) {
        var url = ArticleURL + "view/" + id + '?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    ArticleProvider.prototype.activateArticle = function (id) {
        var url = ArticleURL + id + '/activate?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    ArticleProvider.prototype.desactivateArticle = function (id) {
        var url = ArticleURL + id + '/deactivate?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    ArticleProvider.prototype.findMerchantsWallArticles = function (filter, arrayfiltercity, page) {
        if (arrayfiltercity.length == 0) {
            arrayfiltercity = [0];
        }
        var url = ArticleURL + 'merchant/city/' + arrayfiltercity + '/category/' + filter.category + '/wall/' + page + '/' + 5 + '?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    ArticleProvider.prototype.findAssociationsWallArticles = function (filter, arrayfiltercity, page) {
        if (arrayfiltercity.length == 0) {
            arrayfiltercity = [0];
        }
        var url = ArticleURL + 'association/city/' + arrayfiltercity + '/category/' + filter.category + '/wall/' + page + '/' + 5 + '?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    ArticleProvider.prototype.findCityHallWallArticles = function (city, page) {
        var url = ArticleURL + 'cityhall/city/' + city + '/wall/' + page + '/' + 5 + '?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    ArticleProvider.prototype.findCitzensWallArticles = function (filter, arrayfiltercity, page) {
        if (arrayfiltercity.length == 0) {
            arrayfiltercity = [0];
        }
        var url = ArticleURL + 'citzen/city/' + arrayfiltercity + '/category/' + filter.category + '/wall/' + page + '/' + 5 + '?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    ArticleProvider.prototype.reportAbuse = function (id, abuse) {
        var url = ArticleURL + 'report/abuse/' + id + '?NousEnsembleToken=' + localStorage.getItem("token");
        var body = JSON.stringify({
            message: abuse.message
        });
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    ArticleProvider.prototype.like = function (id) {
        var url = ArticleURL + id + '/like?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    ArticleProvider.prototype.unlike = function (id) {
        var url = ArticleURL + id + '/unlike?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    ArticleProvider.prototype.getLikes = function (id) {
        var url = ArticleURL + id + '/likes?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    ArticleProvider.prototype.findCanteenArticles = function (city, page) {
        var url = ArticleURL + 'cityhall/city/' + city + '/canteen/' + page + '/' + 5 + '?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    ArticleProvider.prototype.findArticlesByHeadings = function (id_heading, page) {
        var url = ArticleURL + 'community/articleheading/' + id_heading + '/canteen/' + page + '/' + 5 + '?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    ArticleProvider = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Injectable"])(),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__angular_http__["c" /* Http */]])
    ], ArticleProvider);
    return ArticleProvider;
}());

//# sourceMappingURL=article.js.map

/***/ }),

/***/ 312:
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"../pages/add-participants-nbre/add-participants-nbre.module": [
		1015,
		21
	],
	"../pages/add-selected-admin/add-selected-admin.module": [
		1016,
		20
	],
	"../pages/choice/choice.module": [
		1017,
		19
	],
	"../pages/dupliquer-article/dupliquer-article.module": [
		1018,
		18
	],
	"../pages/dupliquer/dupliquer.module": [
		1019,
		17
	],
	"../pages/edit-event/edit-event.module": [
		1020,
		16
	],
	"../pages/edit-publish/edit-publish.module": [
		1021,
		15
	],
	"../pages/even-comment/even-comment.module": [
		1022,
		14
	],
	"../pages/event-dep-info/event-dep-info.module": [
		1023,
		13
	],
	"../pages/interest-details/interest-details.module": [
		1024,
		12
	],
	"../pages/moderation/moderation.module": [
		501
	],
	"../pages/password-community/password-community.module": [
		1025,
		11
	],
	"../pages/pop-edit-event/pop-edit-event.module": [
		1026,
		10
	],
	"../pages/popin-choice-event/popin-choice-event.module": [
		1027,
		9
	],
	"../pages/popin-membership-association/popin-membership-association.module": [
		1028,
		0
	],
	"../pages/popup-art-duplicate-detail/popup-art-duplicate-detail.module": [
		1030,
		8
	],
	"../pages/popup-ask-room/popup-ask-room.module": [
		1029,
		7
	],
	"../pages/popup-even-duplicate-detail/popup-even-duplicate-detail.module": [
		1031,
		6
	],
	"../pages/popup/popup.module": [
		1032,
		5
	],
	"../pages/publish/publish.module": [
		1033,
		4
	],
	"../pages/select-city/select-city.module": [
		1034,
		3
	],
	"../pages/sondage/sondage.module": [
		1035,
		2
	],
	"../pages/volunteers-mail/volunteers-mail.module": [
		1036,
		1
	]
};
function webpackAsyncContext(req) {
	var ids = map[req];
	if(!ids)
		return Promise.reject(new Error("Cannot find module '" + req + "'."));
	return Promise.all(ids.slice(1).map(__webpack_require__.e)).then(function() {
		return __webpack_require__(ids[0]);
	});
};
webpackAsyncContext.keys = function webpackAsyncContextKeys() {
	return Object.keys(map);
};
webpackAsyncContext.id = 312;
module.exports = webpackAsyncContext;

/***/ }),

/***/ 35:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return NewsPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__ionic_native_camera__ = __webpack_require__(29);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_rxjs_add_operator_map__ = __webpack_require__(27);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_rxjs_add_operator_map___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_rxjs_add_operator_map__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_article_article__ = __webpack_require__(31);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__providers_user_user__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__providers_globals_globals__ = __webpack_require__(8);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__providers_eventsrest_eventsrest__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__pages_create_merchant_create_merchant__ = __webpack_require__(77);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__home_home__ = __webpack_require__(90);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__pages_detail_article_detail_article__ = __webpack_require__(56);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__providers_comment_comment__ = __webpack_require__(22);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__merchant_sheet_merchant_sheet__ = __webpack_require__(128);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__association_sheet_association_sheet__ = __webpack_require__(78);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__event_details_event_details__ = __webpack_require__(55);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__detail_survey_detail_survey__ = __webpack_require__(198);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__providers_cache_cache__ = __webpack_require__(47);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17__providers_app_app__ = __webpack_require__(38);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_18__ionic_native_file__ = __webpack_require__(71);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_19__ionic_native_in_app_browser__ = __webpack_require__(70);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_20__providers_community_community__ = __webpack_require__(40);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_21__ionic_native_downloader__ = __webpack_require__(48);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_22__ionic_native_social_sharing__ = __webpack_require__(46);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_23_rxjs_Observable__ = __webpack_require__(32);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_23_rxjs_Observable___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_23_rxjs_Observable__);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};

























/**
 * Generated class for the NewsPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var NewsPage = /** @class */ (function () {
    function NewsPage(event, platform, camera, userService, serviceEvent, navCtrl, modal, navParams, actionSheetController, service, commentService, loadingCtrl, alertCtrl, appGlobals, socialsharing, cacheService, toastCtrl, appservice, file, inAppBrowser, serviceCommunity, downloader) {
        var _this = this;
        this.event = event;
        this.platform = platform;
        this.camera = camera;
        this.userService = userService;
        this.serviceEvent = serviceEvent;
        this.navCtrl = navCtrl;
        this.modal = modal;
        this.navParams = navParams;
        this.actionSheetController = actionSheetController;
        this.service = service;
        this.commentService = commentService;
        this.loadingCtrl = loadingCtrl;
        this.alertCtrl = alertCtrl;
        this.appGlobals = appGlobals;
        this.socialsharing = socialsharing;
        this.cacheService = cacheService;
        this.toastCtrl = toastCtrl;
        this.appservice = appservice;
        this.file = file;
        this.inAppBrowser = inAppBrowser;
        this.serviceCommunity = serviceCommunity;
        this.downloader = downloader;
        this.items = [];
        this.page = 1;
        this.init = false;
        this.comment = [];
        this.numberComments = 0;
        this.hasApprovedCommunities = false;
        this.pastilles = [];
        this.allowInfiniteScroll = true;
        this.cacheLifeTime = 3600;
        this.communities = [];
        this.tableUser = { communities: [], associations: [], merchants: [], users: [] };
        this.eventParticipted = [];
        this.commentEvent = {
            content: '',
            photo: null
        };
        this.registredUser = false;
        this.appGlobals.currentPageid = "news";
        this.event.publish('updateFooter');
        this.registredUser = this.navParams.get("register");
        this.event.publish('loginEvents');
        this.event.publish('getNotifications');
        this.userImg = localStorage.getItem("user_image");
        this.userFullname = localStorage.getItem("user_firstname") + " " + localStorage.getItem("user_lastname");
        this.items = [];
        this.page = 1;
        this.init = true;
        this.showJFilter = true;
        this.filterJ = '';
        this.appGlobals.showHeader = true;
        localStorage.removeItem('selectedJ');
        this.event.publish('closeFilters');
        this.event.publish('resetFilters');
        this.refreshCommunities();
        this.event.publish('refreshApprovedCommunities');
        this.event.publish('refreshCommunities');
        this.event.unsubscribe('news:cache');
        this.event.subscribe('news:cache', function (data) {
            _this.page = data[0];
            _this.items = data[1];
            _this.articles = data[2];
            _this.cacheLifeTime = data[3];
            _this.allowInfiniteScroll = !data[2] || data[2] && data[2].length;
        });
        this.event.unsubscribe('news:pastilles:cache');
        this.event.subscribe('news:pastilles:cache', function (data) {
            _this.pastilles = data;
        });
        if (localStorage.getItem("token")) {
            this.users();
            this.eventProgress();
            this.getArticles();
            this.getPastillesJ(false, null, null);
            this.event.publish("refreshNotifications");
        }
        else {
            this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_9__home_home__["a" /* HomePage */]);
        }
        this.event.unsubscribe('news:refresh');
        this.event.subscribe('news:refresh', function (loadingPopup) {
            _this.page = 1;
            _this.cacheService.loadArticles(_this.page, _this.items, _this.articles, _this.cacheLifeTime, 'news', null, true);
            console.log("constructor =" + _this.page);
            _this.getPastillesJ(true, null, null);
            if (loadingPopup) {
                loadingPopup.dismiss();
            }
        });
        __WEBPACK_IMPORTED_MODULE_23_rxjs_Observable__["Observable"].interval(100 * 300).subscribe(function (x) {
            _this.event.publish("news:refresh");
        });
        this.event.unsubscribe('news:refresh:pastilles');
        this.event.subscribe('news:refresh:pastilles', function (data) {
            _this.pastilles = data;
        });
        if (localStorage.getItem("communityDeeplink") && localStorage.getItem("communityDeeplink") != "null") {
            var communityDeeplink = JSON.parse(localStorage.getItem("communityDeeplink"));
            if (communityDeeplink.isPrivate) {
                var privateCommunities = JSON.parse(localStorage.getItem("privateCommunities"));
                if (this.filterItems(privateCommunities, communityDeeplink.id)) {
                    this.presentAlertPrompt(communityDeeplink.id);
                }
                else {
                    this.isFollow("vous êtes déjà inscrit dans la communauté " + communityDeeplink.name);
                }
            }
            else {
                var publicCommunities = JSON.parse(localStorage.getItem("publicCommunities"));
                console.log("publicCommunities = " + JSON.stringify(publicCommunities));
                if (this.filterItems(publicCommunities, communityDeeplink.id)) {
                    var communities = [];
                    var communitie = {
                        id: communityDeeplink.id,
                        type: "public"
                    };
                    communities.push(communitie);
                    this.serviceCommunity.communityAddFollow(communities).then(function (data) {
                        if (data.code == 404) {
                            _this.alertErreur(data.message, null);
                        }
                        if (data.code == 409) {
                            _this.alertErreur(data.message, null);
                        }
                        if (data.code == 412) {
                            _this.alertErreur(data.message, null);
                        }
                        if (data.code == 406) {
                            _this.alertErreur(data.message, null);
                        }
                        if (data.code == 410) {
                            _this.alertErreur(data.message, null);
                        }
                        if (data.code == 200) {
                            _this.isFollow(data.message);
                        }
                    });
                }
                else {
                    this.isFollow("vous êtes déjà inscrit dans la communauté " + communityDeeplink.name);
                }
            }
        }
    }
    NewsPage_1 = NewsPage;
    NewsPage.prototype.presentAlertPrompt = function (id) {
        return __awaiter(this, void 0, void 0, function () {
            var alert;
            var _this = this;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.alertCtrl.create({
                            title: 'Entrer votre code!',
                            inputs: [
                                {
                                    name: 'code',
                                    type: 'text',
                                    placeholder: 'Votre code'
                                }
                            ],
                            buttons: [
                                {
                                    text: 'Anuller',
                                    role: 'cancel',
                                    cssClass: 'secondary',
                                    handler: function () {
                                        localStorage.removeItem('communityDeeplink');
                                    }
                                }, {
                                    text: 'Valider',
                                    handler: function (data) {
                                        var communities = [];
                                        var communitie = {
                                            id: id,
                                            type: "private",
                                            password: data.code
                                        };
                                        communities.push(communitie);
                                        _this.serviceCommunity.communityAddFollow(communities).then(function (data) {
                                            if (data.code == 404) {
                                                _this.alertErreur(data.message, null);
                                            }
                                            if (data.code == 409) {
                                                _this.alertErreur(data.message, null);
                                            }
                                            if (data.code == 412) {
                                                _this.alertErreur(data.message, null);
                                            }
                                            if (data.code == 406) {
                                                _this.alertErreur(data.message, id);
                                            }
                                            if (data.code == 410) {
                                                _this.alertErreur(data.message, null);
                                            }
                                            if (data.code == 200) {
                                                _this.isFollow(data.message);
                                            }
                                        });
                                    }
                                }
                            ]
                        })];
                    case 1:
                        alert = _a.sent();
                        return [4 /*yield*/, alert.present()];
                    case 2:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    NewsPage.prototype.isFollow = function (message) {
        var isFollow = this.alertCtrl.create({
            subTitle: message,
            buttons: [
                {
                    text: 'OK',
                    handler: function () {
                        localStorage.removeItem('communityDeeplink');
                    }
                }
            ]
        });
        isFollow.present();
    };
    NewsPage.prototype.alertErreur = function (message, id) {
        var _this = this;
        var isFollow = this.alertCtrl.create({
            title: "Erreur",
            subTitle: message,
            buttons: [
                {
                    text: 'OK',
                    handler: function () {
                        if (id != null) {
                            _this.presentAlertPrompt(id);
                        }
                    }
                }
            ]
        });
        isFollow.present();
    };
    NewsPage.prototype.filterItems = function (items, searchTerm) {
        var test = false;
        items.forEach(function (data) {
            if (data.id == searchTerm) {
                test = true;
                return true;
            }
        });
        return test;
    };
    NewsPage.prototype.moreParent = function (item, type, id) {
        return __awaiter(this, void 0, void 0, function () {
            var actionSheet;
            var _this = this;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.actionSheetController.create({
                            buttons: [{
                                    text: 'Supprimer',
                                    icon: 'trash',
                                    handler: function () {
                                        _this.supprimer(item, item.id, "current");
                                    }
                                }, {
                                    text: 'Modifier',
                                    icon: 'create',
                                    handler: function () {
                                        _this.editArticle(item, type, id);
                                    }
                                }, {
                                    text: 'Annuler',
                                    icon: 'close',
                                    role: 'cancel',
                                    handler: function () {
                                    }
                                }]
                        })];
                    case 1:
                        actionSheet = _a.sent();
                        return [4 /*yield*/, actionSheet.present()];
                    case 2:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    NewsPage.prototype.moreNotParent = function (item, type, id) {
        return __awaiter(this, void 0, void 0, function () {
            var actionSheet;
            var _this = this;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.actionSheetController.create({
                            buttons: [{
                                    text: 'Supprimer',
                                    icon: 'trash',
                                    handler: function () {
                                        _this.supprimerNoteParent(item, item.id);
                                    }
                                }, {
                                    text: 'Modifier',
                                    icon: 'create',
                                    handler: function () {
                                        _this.editeNotParent(item, type, id);
                                    }
                                }, {
                                    text: 'Annuler',
                                    icon: 'close',
                                    role: 'cancel',
                                    handler: function () {
                                    }
                                }]
                        })];
                    case 1:
                        actionSheet = _a.sent();
                        return [4 /*yield*/, actionSheet.present()];
                    case 2:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    NewsPage.prototype.supprimerNoteParent = function (item, id) {
        return __awaiter(this, void 0, void 0, function () {
            var actionSheet;
            var _this = this;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.actionSheetController.create({
                            buttons: [{
                                    text: 'Cet article',
                                    icon: 'ios-backspace',
                                    handler: function () {
                                        _this.supprimer(item, id, "current");
                                    }
                                }, {
                                    text: 'Cet article et les articles à venir',
                                    icon: 'trash',
                                    handler: function () {
                                        _this.supprimer(item, id, "currentAndNext");
                                    }
                                }, {
                                    text: 'Annuler',
                                    icon: 'close',
                                    role: 'cancel',
                                    handler: function () {
                                    }
                                }]
                        })];
                    case 1:
                        actionSheet = _a.sent();
                        return [4 /*yield*/, actionSheet.present()];
                    case 2:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    NewsPage.prototype.editeNotParent = function (item, type, id) {
        return __awaiter(this, void 0, void 0, function () {
            var actionSheet;
            var _this = this;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.actionSheetController.create({
                            buttons: [{
                                    text: 'Cet article',
                                    icon: 'create',
                                    handler: function () {
                                        _this.editeNoteParentArticle(item, type, id, "current");
                                    }
                                }, {
                                    text: 'Cet article et les articles à venir',
                                    icon: 'ios-create',
                                    handler: function () {
                                        _this.editeNoteParentArticle(item, type, id, "currentAndNext");
                                    }
                                }, {
                                    text: 'Annuler',
                                    icon: 'close',
                                    role: 'cancel',
                                    handler: function () {
                                    }
                                }]
                        })];
                    case 1:
                        actionSheet = _a.sent();
                        return [4 /*yield*/, actionSheet.present()];
                    case 2:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    NewsPage.prototype.editeNoteParentArticle = function (item, type, id, mode) {
        var _this = this;
        var myModal2 = this.modal.create('PopupArtDuplicateDetailPage', { "article": item, "accountType": type, "accountId": id, "mode": mode }, { cssClass: 'style-modal' });
        myModal2.onDidDismiss(function (data) {
            if (data == true) {
                _this.items = [];
                _this.page = 1;
                _this.getArticles();
            }
        });
        myModal2.present();
    };
    NewsPage.prototype.supprimer = function (item, id, mode) {
        var _this = this;
        var loadingPopup = this.loadingCtrl.create({});
        loadingPopup.present();
        this.service.deleteArticle(id, mode).then(function (data) {
            _this.event.publish('news:refresh');
            loadingPopup.dismiss();
            var toast = _this.toastCtrl.create({
                message: 'Article supprimé avec succès',
                duration: 3000,
                position: 'top'
            });
            toast.present();
        }, function (err) {
            loadingPopup.dismiss();
            _this.event.publish('http:errors', err);
        });
    };
    NewsPage.prototype.profile = function () {
        this.navCtrl.setRoot(__WEBPACK_IMPORTED_MODULE_8__pages_create_merchant_create_merchant__["a" /* CreateMerchantPage */]);
    };
    NewsPage.prototype.users = function () {
        localStorage.removeItem('tableUser');
        this.event.publish('user:current');
        this.currentUser = JSON.parse(localStorage.getItem("currentUser"));
        this.associations = JSON.parse(localStorage.getItem("adminAssociations"));
        this.merchants = JSON.parse(localStorage.getItem("adminMerchants"));
        this.communities = JSON.parse(localStorage.getItem("allCommunities"));
        if (Array.isArray(this.communities) && this.communities.length > 0) {
            for (var _i = 0, _a = this.communities; _i < _a.length; _i++) {
                var community = _a[_i];
                if (community["isAdminPublish"]) {
                    this.tableUser.communities.push(community.id);
                }
            }
        }
        for (var _b = 0, _c = this.associations; _b < _c.length; _b++) {
            var association = _c[_b];
            this.tableUser.associations.push(association.id);
        }
        for (var _d = 0, _e = this.merchants; _d < _e.length; _d++) {
            var merchant = _e[_d];
            this.tableUser.merchants.push(merchant.id);
        }
        this.tableUser.users.push(this.currentUser.id);
        this.idUsers = this.tableUser;
        localStorage.setItem("tableUser", JSON.stringify(this.tableUser));
    };
    NewsPage.prototype.ShareArticle = function (item) {
        var _this = this;
        var options = {
            message: item.title + " : " + item.description,
            subject: "NOUS Ensemble",
            image: item.imageURL,
            url: item.imageURL
        };
        /*  this.socialsharing.shareWithOptions(options).then(data =>{
          }).catch( error =>{
              console.log("Error from sharing:"+ error)
          });*/
        this.socialsharing
            .canShareVia("www.twitter.com", "message", "subject", item.imageURL, item.imageURL)
            .then(function () {
            _this.socialsharing
                .shareViaTwitter("message", item.imageURL, item.imageURL)
                .catch(function (err) {
                console.log("error fadhel");
            });
        })
            .catch(function (err) {
            console.log("error fadhel = " + err);
        });
    };
    NewsPage.prototype.onSuccessSharring = function () {
    };
    NewsPage.prototype.onErrorSharring = function () {
    };
    NewsPage.prototype.detailsArticle = function (article) {
        // ModerationPage
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_10__pages_detail_article_detail_article__["a" /* DetailArticlePage */], {
            article: article
        });
    };
    NewsPage.prototype.detailsSurvey = function (article) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_15__detail_survey_detail_survey__["a" /* DetailSurveyPage */], {
            article: article
        });
    };
    NewsPage.prototype.detailsArticleComment = function (article) {
        var _this = this;
        var loadingPopup = this.loadingCtrl.create({});
        loadingPopup.present();
        this.commentService.getCommentsArticlePagination(article.id, 0).then(function (data) {
            _this.comment = data;
            _this.numberComments = article.nbreComments;
            loadingPopup.dismiss();
            _this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_10__pages_detail_article_detail_article__["a" /* DetailArticlePage */], {
                article: article,
                comment: _this.comment,
                numberComments: _this.numberComments,
                showComments: true,
                allowComment: true
            });
        }, function (err) {
            loadingPopup.dismiss();
            _this.event.publish('http:errors', err);
        });
    };
    NewsPage.prototype.refreshNbreComments = function (currentArticle) {
        var _this = this;
        var loadingPopup = this.loadingCtrl.create({});
        loadingPopup.present();
        this.service.getDetailsArticle(currentArticle).then(function (data) {
            var index = _this.items.findIndex(function (i) { return i.id == currentArticle; });
            if (index != -1) {
                _this.items[index].nbreComments = data.nbreComments;
            }
            loadingPopup.dismiss();
        }, function (err) {
            loadingPopup.dismiss();
            _this.event.publish('http:errors', err);
        });
    };
    NewsPage.prototype.getArticles = function () {
        console.log("get article = " + this.page);
        this.cacheService.loadArticles(this.page, this.items, this.articles, this.cacheLifeTime, 'news');
    };
    NewsPage.prototype.doInfinite = function (infiniteScroll) {
        if (this.init) {
            this.init = false;
            infiniteScroll.complete();
        }
        else if (this.allowInfiniteScroll) {
            this.page += 1;
            this.cacheService.loadArticles(this.page, this.items, this.articles, this.cacheLifeTime, 'news', null, false, infiniteScroll);
            console.log("scroll =" + this.page);
            this.event.publish('refreshCommunities');
        }
        else {
            infiniteScroll.complete();
        }
    };
    NewsPage.prototype.showFilterTheme = function () {
        if (!this.appGlobals.themeFilter) {
            this.appGlobals.themeFilter = true;
        }
        else {
            this.appGlobals.themeFilter = false;
        }
    };
    NewsPage.prototype.ionViewWillEnter = function () {
        this.appGlobals.showFooter = true;
        this.appGlobals.currentPageid = "news";
        this.event.publish('updateFooter');
        if (this.showJFilter) {
            this.appGlobals.showSearchNews = true;
            this.appGlobals.currentPageTitle = "A la Une";
            this.appGlobals.currentPageLogo = "md-paper";
        }
        switch (this.filterJ) {
            case 'J':
                this.navJ();
                break;
            case 'JB2':
                this.navJB2();
                break;
            case 'JN2':
                this.navJN2();
                break;
            default:
                break;
        }
        this.event.publish('showMenus');
    };
    NewsPage.prototype.ionViewWillLeave = function () {
        this.appGlobals.showSearchNews = false;
    };
    NewsPage.prototype.openAssociation = function (association, name) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_13__association_sheet_association_sheet__["a" /* AssociationSheetPage */], {
            id: association,
            name: name
        });
    };
    NewsPage.prototype.openMerchant = function (merchant, name) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_12__merchant_sheet_merchant_sheet__["a" /* MerchantSheetPage */], {
            id: merchant,
            name: name
        });
    };
    NewsPage.prototype.like = function (article) {
        var _this = this;
        var loadingPopup = this.loadingCtrl.create({});
        loadingPopup.present();
        this.service.like(article).then(function (data) {
            var index = _this.items.findIndex(function (i) { return i.id == article; });
            if (index != -1) {
                _this.items[index].isLiked = true;
                _this.items[index].nbLikes++;
                _this.refreshItem(_this.items[index]);
                loadingPopup.dismiss();
            }
        }, function (err) {
            loadingPopup.dismiss();
            _this.event.publish('http:errors', err);
        });
    };
    NewsPage.prototype.unlike = function (article) {
        var _this = this;
        var loadingPopup = this.loadingCtrl.create({});
        loadingPopup.present();
        this.service.unlike(article).then(function (data) {
            var index = _this.items.findIndex(function (i) { return i.id == article; });
            if (index != -1) {
                _this.items[index].isLiked = false;
                _this.items[index].nbLikes--;
                _this.refreshItem(_this.items[index]);
                loadingPopup.dismiss();
            }
        }, function (err) {
            loadingPopup.dismiss();
            _this.event.publish('http:errors', err);
        });
    };
    NewsPage.prototype.refreshItem = function (item) {
        this.cacheService.refreshItem(item, 'news.articles');
    };
    NewsPage.prototype.capitalizeData = function (data) {
        return data.charAt(0).toUpperCase() + data.slice(1);
    };
    NewsPage.prototype.publish = function () {
        var adminAssociations = JSON.parse(localStorage.getItem("adminAssociations"));
        var adminMerchants = JSON.parse(localStorage.getItem("adminMerchants"));
        var adherentAssociations = JSON.parse(localStorage.getItem("adherentAssociations"));
        var adherentMerchants = JSON.parse(localStorage.getItem("adherentMerchants"));
        if (localStorage.getItem("hasApprovedCommunities") == 'true') {
            this.hasApprovedCommunities = true;
        }
        else {
            this.hasApprovedCommunities = false;
        }
        if (adherentAssociations.length != 0 || adherentMerchants.length != 0 || adminAssociations.length != 0 || adminMerchants.length != 0 || this.currentUser.role == 'community_su_admin' || this.hasApprovedCommunities) {
            var myModal2 = this.modal.create('ChoicePage', {}, { cssClass: 'style-modal choice-modal' });
            myModal2.onDidDismiss(function () {
            });
            myModal2.present();
        }
        else {
            var myModal2 = this.modal.create('PopupPage', { "message": "<p>Vous ne pouvez pas publier ! </p>" }, { cssClass: 'message-modal' });
            myModal2.onDidDismiss(function () {
            });
            myModal2.present();
        }
    };
    NewsPage.prototype.hideConfirmationMessage = function () {
        this.registredUser = false;
    };
    NewsPage.prototype.editArticle = function (article, accountType, accountId) {
        var _this = this;
        var myModal2 = this.modal.create('EditPublishPage', { "article": article, "accountType": accountType, "accountId": accountId }, { cssClass: 'style-modal' });
        myModal2.onDidDismiss(function (data) {
            if (data == true) {
                _this.items = [];
                _this.page = 1;
                _this.getArticles();
            }
        });
        myModal2.present();
    };
    NewsPage.prototype.linkTo = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_12__merchant_sheet_merchant_sheet__["a" /* MerchantSheetPage */]);
    };
    NewsPage.prototype.themeFilterClose = function () {
        this.appGlobals.themeFilter = false;
    };
    NewsPage.prototype.detailsEvent = function (eventId, title, withComments, moderateEvent, moderateEventSecondary, primaryCommunity, secondaryCommunity, associationId) {
        if (this.isAllowedEvent(primaryCommunity, moderateEvent) ||
            this.isAllowedEvent(secondaryCommunity, moderateEventSecondary) ||
            this.tableUser.communities.some(function (x) { return x === primaryCommunity; }) ||
            this.tableUser.communities.some(function (x) { return x === secondaryCommunity; }) ||
            this.tableUser.associations.some(function (x) { return x === associationId; })) {
            this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_14__event_details_event_details__["a" /* EventDetailsPage */], {
                id: eventId,
                title: title,
                withComments: withComments
            });
        }
        else {
            var errorAlert = this.alertCtrl.create({
                subTitle: 'Cet événement est en attente',
                buttons: [
                    {
                        text: 'Fermer',
                        role: 'cancel',
                        handler: function () {
                        }
                    }
                ]
            });
            errorAlert.present();
        }
    };
    NewsPage.prototype.isAllowedEvent = function (community, moderate) {
        var communities = JSON.parse(localStorage.getItem("followedCommunities"));
        if (community) {
            if (communities.filter(function (item) { return item.id == community; }).length == 0) {
                return false;
            }
            else {
                if (moderate == 'accepted') {
                    return true;
                }
            }
        }
        return false;
    };
    NewsPage.prototype.doRefreshNews = function (refresher) {
        var _this = this;
        this.page = 1;
        this.cacheService.loadArticles(this.page, this.items, this.articles, this.cacheLifeTime, 'news', null, true, null, refresher);
        console.log("refresh =" + this.page);
        this.getPastillesJ(true, null, refresher);
        this.refreshCommunities();
        this.userService.searchCities('').then(function (data) {
            _this.appGlobals.allCities = data;
        }, function (err) {
            _this.event.publish('http:errors', err);
        });
    };
    NewsPage.prototype.getPastillesJ = function (refresh, infiniteScroll, refresher) {
        this.cacheService.getCachedData('this.service.getPastilleJCounter()', refresh, 'news:refresh:pastilles', 'news:pastilles', 'news:pastilles:cache', this.cacheLifeTime, null, refresher);
    };
    NewsPage.prototype.eventProgress = function () {
        var _this = this;
        this.event.publish('user:current');
        this.currentUser = JSON.parse(localStorage.getItem("currentUser"));
        this.serviceEvent.getEventProgress(this.currentUser.id).then(function (data) {
            _this.eventParticipted = data;
        }, function (err) {
            _this.event.publish('http:errors', err);
        });
    };
    NewsPage.prototype.addPhotoParticipated = function () {
        if (this.eventParticipted.length == 1) {
            this.takePicture();
        }
        else {
            var myModal2 = this.modal.create('PopinChoiceEventPage', { "events": this.eventParticipted }, { cssClass: 'style-modal' });
            myModal2.present();
        }
    };
    NewsPage.prototype.refreshCommunities = function () {
        var _this = this;
        Promise.all([this.serviceCommunity.findCurrentUserFollowedCommunities()]).then(function (user) {
            localStorage.setItem("followedCommunities", JSON.stringify(user[0]));
            _this.event.publish('refreshCommunities');
            _this.event.publish('refreshApprovedCommunities');
        }, function (err) {
            _this.event.publish('http:errors', err);
        });
    };
    NewsPage.prototype.takePicture = function () {
        var _this = this;
        this.camera.getPicture({
            destinationType: this.camera.DestinationType.DATA_URL,
            quality: 100,
            targetWidth: 600,
            targetHeight: 600,
            allowEdit: true,
            correctOrientation: true,
            encodingType: this.camera.EncodingType.JPEG
        }).then(function (imageData) {
            _this.commentEvent.photo = "data:image/jpeg;base64," + imageData;
            var myModal2 = _this.modal.create('EvenCommentPage', { "comment": _this.commentEvent, "participation": _this.eventParticipted[0].articleId }, { cssClass: 'comment-modal' });
            myModal2.present();
        });
    };
    NewsPage.prototype.ionViewDidEnter = function () {
        this.appGlobals.currentPageid = "news";
        this.event.publish('updateFooter');
    };
    NewsPage.prototype.navJB2 = function () {
        this.appGlobals.showSearchNews = false;
        this.appGlobals.showHeader = false;
        this.appGlobals.currentPageTitle = "Evénements des 2 derniers jours";
        this.showJFilter = false;
        this.filterJ = 'JB2';
        this.event.publish('resetFilters');
        localStorage.setItem('selectedJ', 'JB2');
        this.cacheService.loadArticles(this.page, this.items, this.articles, this.cacheLifeTime, 'news');
        console.log("navjb2 =" + this.page);
    };
    NewsPage.prototype.navJN2 = function () {
        this.appGlobals.showSearchNews = false;
        this.appGlobals.showHeader = false;
        this.appGlobals.currentPageTitle = "Evénements des 2 prochains jours";
        this.showJFilter = false;
        this.filterJ = 'JN2';
        this.event.publish('resetFilters');
        localStorage.setItem('selectedJ', 'JN2');
        this.cacheService.loadArticles(this.page, this.items, this.articles, this.cacheLifeTime, 'news');
        console.log("najjn2 =" + this.page);
    };
    NewsPage.prototype.navJ = function () {
        this.appGlobals.showSearchNews = false;
        this.appGlobals.showHeader = false;
        this.appGlobals.currentPageTitle = "Événements d'aujourd’hui";
        this.showJFilter = false;
        this.filterJ = 'J';
        this.event.publish('resetFilters');
        localStorage.setItem('selectedJ', 'J');
        this.cacheService.loadArticles(this.page, this.items, this.articles, this.cacheLifeTime, 'news');
        console.log("navj =" + this.page);
    };
    NewsPage.prototype.goBack = function () {
        localStorage.removeItem('selectedJ');
        this.navCtrl.setRoot(NewsPage_1);
        this.showJFilter = true;
        this.filterJ = '';
    };
    NewsPage.prototype.download = function (url) {
        var _this = this;
        var fileName = url.substring(url.lastIndexOf('/') + 1);
        this.platform.ready().then(function () {
            if (_this.platform.is('android')) {
                var request = {
                    uri: url,
                    title: 'Nous Ensemble',
                    description: fileName,
                    mimeType: '',
                    visibleInDownloadsUi: true,
                    notificationVisibility: __WEBPACK_IMPORTED_MODULE_21__ionic_native_downloader__["b" /* NotificationVisibility */].VisibleNotifyCompleted,
                    destinationInExternalFilesDir: {
                        dirType: 'Downloads',
                        subPath: fileName
                    }
                };
                _this.downloader.download(request)
                    .then(function (location) { return console.log('File downloaded at:' + location); })
                    .catch(function (error) { return console.error(error); });
            }
            else {
                var target = "_system";
                _this.inAppBrowser.create(url, target, "location=no,enableViewportScale=yes");
            }
        });
    };
    NewsPage.prototype.getMIMEtype = function (extn) {
        var ext = extn.toLowerCase();
        var MIMETypes = {
            'txt': 'text/plain',
            'docx': 'application/vnd.openxmlformats-officedocument.wordprocessingml.document',
            'doc': 'application/msword',
            'pdf': 'application/pdf',
            'jpg': 'image/jpeg',
            'bmp': 'image/bmp',
            'png': 'image/png',
            'xls': 'application/vnd.ms-excel',
            'xlsx': 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',
            'rtf': 'application/rtf',
            'ppt': 'application/vnd.ms-powerpoint',
            'pptx': 'application/vnd.openxmlformats-officedocument.presentationml.presentation'
        };
        return MIMETypes[ext];
    };
    NewsPage.prototype.dupliquer = function (item) {
        var myModal2 = this.modal.create('DupliquerArticlePage', { "article": item, "accountType": "accountType" }, { cssClass: 'style-modal' });
        myModal2.onDidDismiss(function (data) {
        });
        myModal2.present();
    };
    NewsPage.prototype.detailsduplication = function (id) {
        var myModalOptions = {
            enableBackdropDismiss: false
        };
        var myModal2 = this.modal.create('PopupArtDuplicateDetailPage', {
            "parentId": id,
        }, myModalOptions);
        myModal2.present();
    };
    var NewsPage_1;
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["ViewChild"])(__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["y" /* Slides */]),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["y" /* Slides */])
    ], NewsPage.prototype, "slides", void 0);
    NewsPage = NewsPage_1 = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-news',template:/*ion-inline-start:"D:\celaneo\mobile\new-mobile\test\src\pages\news\news.html"*/'<!--\n\n  Generated template for the NewsPage page.\n\n\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n\n  Ionic pages and navigation.\n\n-->\n\n\n\n<ion-header class="mobile-header MMS" *ngIf="appGlobals.token">\n\n    <ion-grid>\n\n        <ion-row>\n\n            <ion-col col-2 text-left>\n\n                <div class="item">\n\n                    <ion-icon name="ios-arrow-back" (click)="goBack()"></ion-icon>\n\n                </div>\n\n            </ion-col>\n\n            <ion-col col-8 text-center class="page-title">\n\n                <ion-title>{{appGlobals.currentPageTitle}} </ion-title>\n\n            </ion-col>\n\n            <ion-col col-2>\n\n                \n\n            </ion-col>\n\n        </ion-row>\n\n    </ion-grid>\n\n</ion-header>\n\n\n\n<ion-content text-center>\n\n    <ion-fab *ngIf="eventParticipted.length != 0" bottom right showWhen="android, ios, windows" class="fab-participted">\n\n        <button color="primary" ion-fab class="fab" (click)="addPhotoParticipated()">\n\n\n\n            <span class="button-inner">\n\n                <ion-icon name="camera" role="img" class="icon icon-ios ion-ios-camera-outline icon-particited" ios="ion-ios-camera-outline"\n\n                          md="ion-ios-camera-outline" style="font-weight: bold" aria-label="camera"></ion-icon>\n\n            </span>\n\n            <div class="button-effect"></div>\n\n        </button>\n\n    </ion-fab> \n\n    <div class="div-left">\n\n        <div text-center class="back" *ngIf="showJFilter === false"><img src="assets/imgs/icons/1.png" (click)="goBack()"></div>\n\n    </div>\n\n    <div class="div-center">\n\n\n\n        <ion-refresher (ionRefresh)="doRefreshNews($event)">\n\n            <ion-refresher-content></ion-refresher-content>\n\n        </ion-refresher>\n\n\n\n        <div class="filterNews" *ngIf="showJFilter">\n\n            <ion-grid>\n\n                <ion-row>\n\n                    <ion-col col-4 (click)="navJB2()">\n\n                        <span>J-2</span>\n\n                        <ion-badge>{{ pastilles[\'JB2\'] }}</ion-badge>\n\n                    </ion-col>\n\n                    <ion-col col-4 (click)="navJ()">\n\n                        <span>J</span>\n\n                        <ion-badge>{{ pastilles[\'J\'] }}</ion-badge>\n\n                    </ion-col>\n\n                    <ion-col col-4 (click)="navJN2()">\n\n                        <span>J+2</span>\n\n                        <ion-badge>{{ pastilles[\'JN2\'] }}</ion-badge>\n\n                    </ion-col>\n\n                </ion-row>\n\n            </ion-grid>\n\n\n\n        </div>\n\n\n\n        <ion-card *ngFor="let item of items">\n\n            <ion-card-content>\n\n                <ion-card-title class="titleAsso display-block" text-left *ngIf="item.type == \'association\'" (click)="openAssociation(item.associationId, item.associationName)">\n\n                    {{item.associationName | capitalize}}</ion-card-title>\n\n                <ion-card-title class="titleAsso display-block" text-left *ngIf="item.type == \'merchant\'" (click)="openMerchant(item.merchantId, item.merchantName)">\n\n                    {{item.merchantName | capitalize}}</ion-card-title>\n\n                <ion-card-title class="display-block" text-left *ngIf="item.type == \'community\'"> {{item.community | capitalize}}\n\n                </ion-card-title>\n\n                <ion-card-title class="display-block" text-left *ngIf="item.type == \'survey\'" (click)="detailsSurvey(item);"> {{item.community | capitalize}}\n\n                </ion-card-title>\n\n                <ion-card-title class="display-block" text-left *ngIf="item.type == \'user\'"> {{item.userFirstname | capitalize}} {{item.userLastname | capitalize}}\n\n                </ion-card-title>\n\n                <div class="iconContainer">\n\n                    <p class="pTextContainer">\n\n                        <ng-container *ngIf="item.type == \'user\' || item.type == \'association\' || item.type == \'merchant\' || item.type == \'community\'" (click)="detailsArticle(item);">\n\n                            <ng-container *ngIf="filterJ == \'\'">{{item.publicAt| amLocale:\'fr\' | amTimeAgo }}</ng-container>\n\n                            <ng-container *ngIf="filterJ == \'J\'">En cours</ng-container>\n\n                            <ng-container *ngIf="filterJ == \'JN2\'">Dans {{ item.nextDayDiff }}</ng-container>\n\n                            <ng-container *ngIf="filterJ == \'JB2\'">Il y a {{ item.nextDayDiff }}</ng-container> \n\n                            <ng-container *ngIf="item.type == \'user\' && item.city">à {{item.city}} - {{item.communityName ? item.communityName : item.community}}</ng-container>\n\n                            <ng-container *ngIf="item.type == \'association\' && item.city">à {{item.city}} - {{item.communityName ? item.communityName : item.community}}</ng-container>\n\n                            <ng-container *ngIf="item.type == \'merchant\' && item.city">à {{item.city}} - {{item.communityName ? item.communityName : item.community}}</ng-container>\n\n                        </ng-container>\n\n                        <ng-container *ngIf="item.type == \'survey\' && item.city" (click)="detailsSurvey(item);">\n\n                            {{item.createAt| amLocale:\'fr\' | amTimeAgo }}\n\n                            <ng-container>à {{item.city}} - {{item.communityName ? item.communityName : item.community}}</ng-container>\n\n                        </ng-container><!-- <ion-icon class="icon-agenda move" name="md-calendar" float-end *ngIf="item.event" (click)="detailsEvent(item.event, item.title, false, item.moderateEvent)"></ion-icon> -->\n\n                        <ng-container *ngIf="item.type == \'community\' && item.city">à {{item.city}}</ng-container>\n\n                    </p>\n\n                    \n\n                    <p class="pImgContainer">\n\n                        <img float-end *ngIf="item.event" \n\n                             class="icon-agenda move img-calendar" src="assets/imgs/icons/calendar.png" alt="NOUS-Ensemble" />\n\n                        <img float-end *ngIf="item.private" class="move lock-icons" src="assets/imgs/icons/lock.png" alt="NOUS-Ensemble" />\n\n                        <img float-end *ngIf="item.type == \'survey\'" class="move survey-icons" src="assets/imgs/icons/article.png" alt="NOUS-Ensemble" (click)="detailsSurvey(item);" />\n\n\n\n                    </p>\n\n                </div>\n\n                    <div *ngIf="item.imageURL || item.images || item.videoFile" class="card-item-divider">\n\n\n\n                        <div *ngIf="(item.imageURL && !item.images && !item.videoFile) || (!item.imageURL && !item.images && item.videoFile) || (item.images && !item.imageURL && item.images.length == 1); else elseBlock">\n\n                            <div *ngIf="item.imageURL && item.type != \'survey\' " (click)="detailsArticle(item);">\n\n                                <img data-src="{{item.imageURL}}">\n\n                            </div>\n\n                            <div *ngFor="let img of item.images" (click)="detailsArticle(item);">\n\n                                <img data-src="{{img.url}}">\n\n                            </div>\n\n                            <div *ngIf="item.imageURL && item.type == \'survey\' " (click)="detailsSurvey(item);">\n\n                                <img data-src="{{item.imageURL}}">\n\n                            </div>\n\n                            <video style="width: 100%; height: 100%" *ngIf="item.videoFile !== null" controls poster="assets/img/video_default.png">\n\n                                <source [src]="item.videoFile" type="video/mp4">\n\n                            </video>\n\n                        </div>\n\n\n\n                            <ng-template #elseBlock>\n\n                            <ion-slides loop="true" pager>\n\n                                <ion-slide *ngIf="item.videoFile != null">\n\n                                    <video style="width: 100%; height: 100%" controls poster="assets/img/video_default.png">\n\n                                        <source [src]="item.videoFile" type="video/mp4">\n\n                                    </video>\n\n                                </ion-slide>\n\n                                <ion-slide *ngIf="item.imageURL" (click)="detailsArticle(item);">\n\n                                    <img data-src="{{item.imageURL}}">\n\n                                </ion-slide>\n\n                                <ion-slide *ngFor="let img of item.images" (click)="detailsArticle(item);">\n\n                                    <img data-src="{{img.url}}">\n\n                                </ion-slide>\n\n                            </ion-slides>\n\n                        </ng-template>\n\n                    </div>\n\n\n\n                <ion-card-title class="title-article" text-left style="">\n\n                	<div style="position: relative; display: block; width:100%; ">\n\n                    <div class="div-title" *ngIf="item.type != \'survey\'"  (click)="detailsArticle(item);">{{item.title}}</div>\n\n                    <div class="div-title" *ngIf="item.type == \'survey\'"  (click)="detailsSurvey(item);">{{item.title}}</div>\n\n                        \n\n\n\n\n\n\n\n                        <ion-col col-2  style="position: absolute; top: -7px; left: 99%;" *ngIf="idUsers && item.type == \'association\' && (idUsers.associations.indexOf(item.associationId) > -1 ) &&  !item.hasParent && !item.isParent"\n\n                            (click)="moreParent(item, item.type, item.associationId)">\n\n                            <ion-icon name="md-more" ></ion-icon> \n\n                        </ion-col> \n\n                        <ion-col col-2  style="position: absolute; top: -7px; left: 99%;" *ngIf="idUsers && item.type == \'user\' && (idUsers.users.indexOf(item.userId) > -1)  &&  !item.hasParent && !item.isParent "\n\n                            (click)="moreParent(item, item.type, item.userId)">\n\n                            <ion-icon name="md-more" ></ion-icon>\n\n                        </ion-col> \n\n                        <ion-col col-2  style="position: absolute; top: -7px; left: 99%;" *ngIf="idUsers && item.type == \'merchant\' && (idUsers.merchants.indexOf(item.merchantId) > -1) &&  !item.hasParent && !item.isParent"\n\n                            (click)="moreParent(item, item.type, item.merchantId)">\n\n                            <ion-icon name="md-more" ></ion-icon>\n\n                        </ion-col> \n\n                        <ion-col col-2  style="position: absolute; top: -7px; left: 99%;" *ngIf="item.type == \'community\' && (idUsers.communities.indexOf(item.communityId) > -1)  &&  !item.hasParent && !item.isParent"\n\n                            (click)="moreParent(item, item.type, item.userId)">\n\n                            <ion-icon name="md-more" ></ion-icon>\n\n                        </ion-col> \n\n\n\n\n\n\n\n\n\n                        <ion-col col-2  style="margin-top: -38px;margin-left: 90%;" *ngIf="idUsers && item.type == \'association\' && (idUsers.associations.indexOf(item.associationId) > -1 ) &&  item.hasParent"\n\n                            (click)="moreNotParent(item, item.type, item.associationId)">\n\n                            <ion-icon name="md-more" ></ion-icon>\n\n                        </ion-col> \n\n                        <ion-col col-2  style="margin-top: -38px;margin-left: 90%;" *ngIf="idUsers && item.type == \'user\' && (idUsers.users.indexOf(item.userId) > -1) &&  item.hasParent"\n\n                            (click)="moreNotParent(item, item.type, item.userId)">\n\n                            <ion-icon name="md-more" ></ion-icon>\n\n                        </ion-col> \n\n                        <ion-col col-2  style="margin-top: -38px;margin-left: 90%;" *ngIf="idUsers && item.type == \'merchant\' && (idUsers.merchants.indexOf(item.merchantId) > -1) &&  item.hasParent"\n\n                            (click)="moreNotParent(item, item.type, item.merchantId)">\n\n                            <ion-icon name="md-more" ></ion-icon>\n\n                        </ion-col> \n\n                        <ion-col col-2  style="margin-top: -38px;margin-left: 90%;" *ngIf="item.type == \'community\' && (idUsers.communities.indexOf(item.communityId) > -1) && item.hasParent"\n\n                            (click)="moreNotParent(item, item.type, item.userId)">\n\n                            <ion-icon name="md-more" ></ion-icon>\n\n                        </ion-col> \n\n\n\n\n\n                        \n\n                        <ion-col col-2  style="margin-top: -38px;margin-left: 90%;" *ngIf="idUsers && item.type == \'association\' && (idUsers.associations.indexOf(item.associationId) > -1 )&&  item.isParent"\n\n                            (click)="editArticle(item, item.type, item.associationId)">\n\n                            <ion-icon name="create" ></ion-icon>\n\n                        </ion-col> \n\n                        <ion-col col-2  style="margin-top: -38px;margin-left: 90%;" *ngIf="idUsers && item.type == \'user\' && (idUsers.users.indexOf(item.userId) > -1) &&  item.isParent"\n\n                            (click)="editArticle(item, item.type, item.userId)">\n\n                            <ion-icon name="create" ></ion-icon>\n\n                        </ion-col> \n\n                        <ion-col col-2  style="margin-top: -38px;margin-left: 90%;" *ngIf="idUsers && item.type == \'merchant\' && (idUsers.merchants.indexOf(item.merchantId) > -1) &&  item.isParent"\n\n                            (click)="editArticle(item, item.type, item.merchantId)">\n\n                            <ion-icon name="create" ></ion-icon>\n\n                        </ion-col> \n\n                        <ion-col col-2  style="margin-top: -38px;margin-left: 90%;" *ngIf="item.type == \'community\' && (idUsers.communities.indexOf(item.communityId) > -1) && item.isParent"\n\n                            (click)="editArticle(item, item.type, item.userId)">\n\n                            <ion-icon name="create" ></ion-icon>\n\n                        </ion-col> \n\n\n\n                    </div>    \n\n                        \n\n\n\n                </ion-card-title>\n\n\n\n\n\n\n\n                <p text-left [innerHtml]="item.description|truncate|nl2br" *ngIf="item.type != \'survey\'"  (click)="detailsArticle(item);"></p>\n\n                <p text-left [innerHtml]="item.description|truncate|nl2br" *ngIf="item.type == \'survey\'"  (click)="detailsSurvey(item);"></p>\n\n\n\n            </ion-card-content>\n\n            <ion-row  *ngIf="item.document" >\n\n                <ion-col>\n\n                    <ion-icon name="attach" (click)="download(item.document)" style="font-size:40px"></ion-icon>\n\n                </ion-col>\n\n\n\n\n\n\n\n            </ion-row>\n\n\n\n            <ion-row class="comment-text-style" *ngIf="item.type != \'survey\'">\n\n                <ion-col class="text-grey" *ngIf="item.type != \'community\' || (item.addComments && item.type == \'community\' ) ">\n\n                    <span  *ngIf="item.nbreComments <= 1" (click)="detailsArticle(item);">{{item.nbreComments}} Commentaire</span>\n\n                    <span  *ngIf="item.nbreComments > 1" (click)="detailsArticle(item);">{{item.nbreComments}} Commentaires</span>\n\n                </ion-col>\n\n                <ion-col *ngIf="item.type != \'community\' || (item.addComments && item.type == \'community\' )">\n\n                    <img class="comment-img-style" src="assets/imgs/icons/list-divider.png">\n\n                </ion-col>\n\n                <ion-col class="text-grey">\n\n                    <span> {{item.nbLikes}} J\'aime</span>\n\n                </ion-col>\n\n            </ion-row>\n\n\n\n\n\n\n\n            <ion-row padding-bottom *ngIf="item.type != \'survey\'">\n\n                <ion-col class="no-padding " text-right *ngIf="item.type != \'community\' || (item.addComments && item.type == \'community\' ) ">\n\n                    <span class="disociate-actions" (click)="detailsArticle(item);" ><img class="news-comment-action dissociate-comment" src="assets/imgs/icons/comments.png"></span>\n\n                </ion-col>\n\n\n\n                <ion-col class="no-padding text-center" text-left [class.icon-right]="!item.addComments && item.type == \'community\'">\n\n                    <span *ngIf="!item.isLiked" class="disociate-actions text-center" (click)="like(item.id);"><img class="news-comment-action dissociate-like"\n\n                            src="assets/imgs/icons/dislike.png"></span>\n\n\n\n                    <span *ngIf="item.isLiked" class="disociate-actions text-center" (click)="unlike(item.id);"> <img class="news-comment-action dissociate-like"\n\n                            src="assets/imgs/icons/like.png"></span>\n\n                </ion-col>\n\n\n\n                <ion-col class="no-padding " text-right>\n\n                    <span class="disociate-actions" (click)="ShareArticle(item);" ><img class="news-comment-action dissociate-share" src="assets/imgs/icons/share.png"></span>\n\n                </ion-col>\n\n                <ion-col   class="no-padding " style="margin-left: -10%;" (click)="dupliquer(item);" text-left *ngIf="item.type == \'community\' && (idUsers.communities.indexOf(item.communityId) > -1)">\n\n                    <ion-icon name="copy" ></ion-icon>\n\n                </ion-col> \n\n                <ion-col   class="no-padding " style="margin-left: -10%;" (click)="dupliquer(item);" text-left *ngIf="idUsers && item.type == \'merchant\' && (idUsers.merchants.indexOf(item.merchantId) > -1)">\n\n                    <ion-icon name="copy" ></ion-icon>\n\n                </ion-col>\n\n                <ion-col   class="no-padding " style="margin-left: -10%;" (click)="dupliquer(item);" text-left *ngIf="idUsers && item.type == \'user\' && (idUsers.users.indexOf(item.userId) > -1)">\n\n                    <ion-icon name="copy" ></ion-icon>\n\n                </ion-col>\n\n                <ion-col   class="no-padding " style="margin-left: -10%;" (click)="dupliquer(item);" text-left *ngIf="idUsers && item.type == \'association\' && (idUsers.associations.indexOf(item.associationId) > -1 )">\n\n                    <ion-icon name="copy" ></ion-icon>\n\n                </ion-col>\n\n                \n\n                \n\n\n\n            </ion-row>\n\n        </ion-card>\n\n        <ion-infinite-scroll (ionInfinite)="doInfinite($event)" threshold="100px">\n\n            <ion-infinite-scroll-content loadingSpinner="bubbles" loadingText="Charger plus...">\n\n            </ion-infinite-scroll-content>\n\n        </ion-infinite-scroll>\n\n    </div>\n\n    <div class="div-right" text-left>\n\n        <img class="publish" src="assets/imgs/icons/2.png" (click)="publish()">\n\n    </div>\n\n    <div class="overlay" *ngIf="registredUser" (click)="hideConfirmationMessage()"></div>\n\n    <div class="registred-new-user" *ngIf="registredUser">\n\n        <div class="close-btn" (click)="hideConfirmationMessage()">\n\n            <ion-icon name="md-close"></ion-icon>\n\n        </div>\n\n        Votre compte <br>\n\n        <span class="app-title">Nous-Ensemble</span><br> a été bien créé ! <br> Vous avez réçu un email de <br>\n\n        confirmation avec votre <br> identifiant et votre mot de passe.\n\n    </div>\n\n</ion-content> \n\n \n\n'/*ion-inline-end:"D:\celaneo\mobile\new-mobile\test\src\pages\news\news.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["x" /* Platform */],
            __WEBPACK_IMPORTED_MODULE_2__ionic_native_camera__["a" /* Camera */],
            __WEBPACK_IMPORTED_MODULE_5__providers_user_user__["a" /* UserProvider */],
            __WEBPACK_IMPORTED_MODULE_7__providers_eventsrest_eventsrest__["a" /* EventsrestProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["a" /* ActionSheetController */],
            __WEBPACK_IMPORTED_MODULE_4__providers_article_article__["a" /* ArticleProvider */],
            __WEBPACK_IMPORTED_MODULE_11__providers_comment_comment__["a" /* CommentProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_6__providers_globals_globals__["a" /* GlobalsProvider */],
            __WEBPACK_IMPORTED_MODULE_22__ionic_native_social_sharing__["a" /* SocialSharing */],
            __WEBPACK_IMPORTED_MODULE_16__providers_cache_cache__["a" /* CacheProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["z" /* ToastController */],
            __WEBPACK_IMPORTED_MODULE_17__providers_app_app__["a" /* AppProvider */],
            __WEBPACK_IMPORTED_MODULE_18__ionic_native_file__["a" /* File */],
            __WEBPACK_IMPORTED_MODULE_19__ionic_native_in_app_browser__["a" /* InAppBrowser */],
            __WEBPACK_IMPORTED_MODULE_20__providers_community_community__["a" /* CommunityProvider */],
            __WEBPACK_IMPORTED_MODULE_21__ionic_native_downloader__["a" /* Downloader */]])
    ], NewsPage);
    return NewsPage;
}());

//# sourceMappingURL=news.js.map

/***/ }),

/***/ 36:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AssociationProvider; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_http__ = __webpack_require__(25);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_rxjs_add_operator_map__ = __webpack_require__(27);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_rxjs_add_operator_map___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_rxjs_add_operator_map__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__app_config__ = __webpack_require__(28);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




/*
  Generated class for the AssociationProvider provider.

  See https://angular.io/docs/ts/latest/guide/dependency-injection.html
  for more info on providers and Angular 2 DI.
*/
var associationUrl = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'association/';
var AssociationProvider = /** @class */ (function () {
    function AssociationProvider(http) {
        this.http = http;
    }
    AssociationProvider.prototype.post = function (data) {
        var body = JSON.stringify({
            photo: data.photo,
            name: data.name,
            category: data.category,
            address: data.address,
            codePostal: data.codePostal,
            phone: data.phone,
            email: data.email,
            city: data.city,
            community: data.community,
            description: data.description,
            monday: data.monday,
            mondayHour: data.mondayHour,
            mondayHourEnd: data.mondayHourEnd,
            tuesday: data.tuesday,
            tuesdayHour: data.tuesdayHour,
            tuesdayHourEnd: data.tuesdayHourEnd,
            wednesday: data.wednesday,
            wednesdayHour: data.wednesdayHour,
            wednesdayHourEnd: data.wednesdayHourEnd,
            thursday: data.thursday,
            thursdayHour: data.thursdayHour,
            thursdayHourEnd: data.thursdayHourEnd,
            friday: data.friday,
            fridayHour: data.fridayHour,
            fridayHourEnd: data.fridayHourEnd,
            saturday: data.saturday,
            saturdayHour: data.saturdayHour,
            saturdayHourEnd: data.saturdayHourEnd,
            sunday: data.sunday,
            sundayHour: data.sundayHour,
            sundayHourEnd: data.sundayHourEnd,
            timing: data.timing
        });
        var url = associationUrl + '?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    AssociationProvider.prototype.DemandMemberShip = function (id, phone) {
        var body = JSON.stringify({
            phone: phone
        });
        var url = associationUrl + id + '/membership?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    AssociationProvider.prototype.AcceptMemberShip = function (id, idDemander) {
        var url = associationUrl + id + '/demandmembership/' + idDemander + '/accept?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    AssociationProvider.prototype.RefuseMemberShip = function (id, idDemander) {
        var url = associationUrl + id + '/demandmembership/' + idDemander + '/refuse?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    AssociationProvider.prototype.DeleteMemberShip = function (id, idDemander) {
        var url = associationUrl + id + '/demandmembership/' + idDemander + '/delete?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    AssociationProvider.prototype.getMemberShipDemands = function (id) {
        var url = associationUrl + id + '/get_demands_memberships?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    AssociationProvider.prototype.getMemberShips = function (id) {
        var url = associationUrl + id + '/get_memberships?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    AssociationProvider.prototype.getAccueilAssociation = function (id) {
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'association/home/' + id + '?NousEnsembleToken=' + localStorage.getItem("token");
        console.log("URLA 1 : " + url);
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    AssociationProvider.prototype.getEvents = function (id, page) {
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'event/' + id + '/association/' + page + '/' + 4 + '?NousEnsembleToken=' + localStorage.getItem("token");
        console.log("URLA 2 : " + url);
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    AssociationProvider.prototype.getDetails = function (id) {
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + "association/view/" + id + '?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    AssociationProvider.prototype.put = function (data, img, toDelete) {
        var body = JSON.stringify({
            name: data.name,
            category: data.category,
            address: data.address,
            codePostal: data.codePostal,
            phone: data.phone,
            email: data.email,
            city: data.city,
            description: data.description,
            photo: img,
            timing: data.timing,
            todelete: toDelete
        });
        var url = associationUrl + data.id + '/update?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    AssociationProvider.prototype.postAdmin = function (id, email) {
        var body = JSON.stringify({
            email: email,
        });
        var url = associationUrl + id + '/admin?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    AssociationProvider.prototype.postSuperAdmin = function (id, email) {
        var body = JSON.stringify({
            email: email,
        });
        var url = associationUrl + id + '/superadmin?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    AssociationProvider.prototype.getAdmins = function (id, page) {
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + "association/" + id + '/admins/' + page + '/' + 10 + '?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    AssociationProvider.prototype.deleteAdmin = function (association, admins) {
        var body = JSON.stringify({
            admins: admins,
        });
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + "association/" + association + '/admin/remove?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    AssociationProvider.prototype.getEventsFilter = function (id, personalized, page) {
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'event/' + 'association/' + id + '/filter/' + personalized + '/' + page + '/' + 4 + '?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    AssociationProvider.prototype.getAllAssociationsByCities = function (page) {
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'association/cities/' + page + '/' + 10 + '?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    AssociationProvider.prototype.getAllAssociationsByCommunity = function (page, id) {
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'association/community/' + id + '/' + page + '/' + 10 + '?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    AssociationProvider.prototype.putSuAdmin = function (id, email) {
        var body = JSON.stringify({
            id: id,
            email: email
        });
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + "association/" + id + '/change/superadmin?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    AssociationProvider.prototype.deleteAssociation = function (id, reason) {
        var body = JSON.stringify({
            reason: reason
        });
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'association/' + id + '/delete?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    AssociationProvider.prototype.postDemandRequest = function (id, phoneNumber) {
        var body = JSON.stringify({
            phone: phoneNumber
        });
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'association/' + id + '/membership?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    AssociationProvider = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Injectable"])(),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__angular_http__["c" /* Http */]])
    ], AssociationProvider);
    return AssociationProvider;
}());

//# sourceMappingURL=association.js.map

/***/ }),

/***/ 38:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AppProvider; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_http__ = __webpack_require__(25);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_rxjs_add_operator_map__ = __webpack_require__(27);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_rxjs_add_operator_map___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_rxjs_add_operator_map__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__app_config__ = __webpack_require__(28);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




/*
  Generated class for the AppProvider provider.

  See https://angular.io/guide/dependency-injection for more info on providers
  and Angular DI.
*/
var AppProvider = /** @class */ (function () {
    function AppProvider(http) {
        this.http = http;
    }
    AppProvider.prototype.getAllCities = function () {
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'cities';
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    AppProvider.prototype.getReportingCategories = function () {
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'reporting/categories?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    AppProvider.prototype.postReporting = function (reporting) {
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + "reporting?NousEnsembleToken=" + localStorage.getItem("token");
        var body = JSON.stringify({
            title: reporting.title,
            description: reporting.description,
            image: reporting.photo,
            address: reporting.address,
            category: reporting.category
        });
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    AppProvider.prototype.postContact = function (data) {
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + "user/contact?NousEnsembleToken=" + localStorage.getItem("token");
        var body = JSON.stringify({
            object: data.object,
            description: data.description,
            city: data.city,
            location: data.location,
            photo: data.photo,
            document: data.document,
        });
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    AppProvider.prototype.getInterestCategories = function (id) {
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'interest/category/' + id + '?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    AppProvider.prototype.getWorks = function (id) {
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'user/map/work/' + id + '?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    AppProvider.prototype.findCommunityLocationByMapHeading = function (id) {
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'user/map/location/' + id + '?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    AppProvider.prototype.getObjects = function (idHeading) {
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'reportHeading/objects/' + idHeading + '?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    AppProvider = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Injectable"])(),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__angular_http__["c" /* Http */]])
    ], AppProvider);
    return AppProvider;
}());

//# sourceMappingURL=app.js.map

/***/ }),

/***/ 39:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return MerchantProvider; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_http__ = __webpack_require__(25);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_rxjs_add_operator_map__ = __webpack_require__(27);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_rxjs_add_operator_map___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_rxjs_add_operator_map__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__app_config__ = __webpack_require__(28);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




/*
  Generated class for the CreateMerchantProvider provider.

  See https://angular.io/docs/ts/latest/guide/dependency-injection.html
  for more info on providers and Angular 2 DI.
*/
var merchantUrl = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'merchant/';
var MerchantProvider = /** @class */ (function () {
    function MerchantProvider(http) {
        this.http = http;
    }
    MerchantProvider.prototype.post = function (data) {
        var body = JSON.stringify({
            photo: data.photo,
            name: data.name,
            community: data.community,
            category: data.category,
            address: data.address,
            codePostal: data.codePostal,
            phone: data.phone,
            email: data.email,
            city: data.city,
            description: data.description,
            timing: data.timing,
            siret: data.siret
        });
        var url = merchantUrl + '?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    MerchantProvider.prototype.getAccueilMerchant = function (id) {
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'merchant/home/' + id + '?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    MerchantProvider.prototype.getMemberShipDemands = function (id) {
        var url = merchantUrl + id + '/get_demands_memberships?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    MerchantProvider.prototype.getEvents = function (id, page) {
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'event/' + id + '/merchant/' + page + '/' + 4 + '?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    MerchantProvider.prototype.getEventsFilter = function (id, personalized, page) {
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'event/merchant/' + id + '/filter/' + personalized + '/' + page + '/' + 4 + '?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    MerchantProvider.prototype.getDetails = function (id) {
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + "merchant/view/" + id + '?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    MerchantProvider.prototype.put = function (data, img, toDelete) {
        var body = JSON.stringify({
            name: data.name,
            category: data.category,
            address: data.address,
            codePostal: data.codePostal,
            siret: data.siret,
            phone: data.phone,
            email: data.email,
            city: data.city,
            description: data.description,
            photo: img,
            todelete: toDelete,
            timing: data.timing
        });
        var url = merchantUrl + data.id + '/update?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    MerchantProvider.prototype.postAdmin = function (id, email) {
        var body = JSON.stringify({
            email: email,
        });
        var url = merchantUrl + id + '/admin?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    MerchantProvider.prototype.postSuperAdmin = function (id, email) {
        var body = JSON.stringify({
            email: email,
        });
        var url = merchantUrl + id + '/superadmin?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    MerchantProvider.prototype.getMerchantCard = function (id, page, limit) {
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'article/' + id + '/merchant/' + page + '/' + limit + '?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    MerchantProvider.prototype.getAdmins = function (id, page) {
        var url = merchantUrl + id + '/admins/' + page + '/' + 10 + '?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    MerchantProvider.prototype.deleteAdmin = function (merchant, admins) {
        var body = JSON.stringify({
            admins: admins,
        });
        var url = merchantUrl + merchant + '/admin/remove?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    MerchantProvider.prototype.chekedSiret = function (merchant, siret) {
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'merchant/' + merchant + '/siret/' + siret + '?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    MerchantProvider.prototype.getAllMerchantsByCities = function (page) {
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'merchant/cities/' + page + '/' + 10 + '?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    MerchantProvider.prototype.getAllMerchantsByCommunity = function (page, id) {
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'merchant/community/' + id + '/' + page + '/' + 10 + '?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    MerchantProvider.prototype.putSuAdmin = function (id, email) {
        var body = JSON.stringify({
            id: id,
            email: email
        });
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + "merchant/" + id + '/change/superadmin?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    MerchantProvider.prototype.deleteMerchant = function (id, reason) {
        var body = JSON.stringify({
            reason: reason
        });
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'merchant/' + id + '/delete?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    MerchantProvider.prototype.postDemandRequest = function (id, phoneNumber) {
        var body = JSON.stringify({
            phone: phoneNumber
        });
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'merchant/' + id + '/membership?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    MerchantProvider.prototype.AcceptMemberShip = function (id, idDemander) {
        var url = merchantUrl + id + '/demandmembership/' + idDemander + '/accept?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    MerchantProvider.prototype.RefuseMemberShip = function (id, idDemander) {
        var url = merchantUrl + id + '/demandmembership/' + idDemander + '/refuse?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    MerchantProvider.prototype.DeleteMemberShip = function (id, idDemander) {
        var url = merchantUrl + id + '/demandmembership/' + idDemander + '/delete?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    MerchantProvider = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Injectable"])(),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__angular_http__["c" /* Http */]])
    ], MerchantProvider);
    return MerchantProvider;
}());

//# sourceMappingURL=merchant.js.map

/***/ }),

/***/ 40:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CommunityProvider; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_http__ = __webpack_require__(25);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_rxjs_add_operator_map__ = __webpack_require__(27);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_rxjs_add_operator_map___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_rxjs_add_operator_map__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__app_config__ = __webpack_require__(28);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




var communityURL = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'community/';
/*
  Generated class for the CommunityProvider provider.

  See https://angular.io/docs/ts/latest/guide/dependency-injection.html
  for more info on providers and Angular 2 DI.
*/
var CommunityProvider = /** @class */ (function () {
    function CommunityProvider(http) {
        this.http = http;
    }
    CommunityProvider.prototype.postUserPublicCommunities = function (data) {
        var url = communityURL + 'public/add?NousEnsembleToken=' + localStorage.getItem("token");
        var body = JSON.stringify({
            communities: data,
        });
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    CommunityProvider.prototype.getCommunityInformations = function (id) {
        var url = communityURL + 'informations/' + id;
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    CommunityProvider.prototype.communityAddFollow = function (data) {
        var url = communityURL + 'add/follow';
        var body = JSON.stringify({
            communities: data,
        });
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    CommunityProvider.prototype.postUserPrivateCommunities = function (community, password) {
        var url = communityURL + 'private/add?NousEnsembleToken=' + localStorage.getItem("token");
        var body = JSON.stringify({
            community: community,
            password: password,
        });
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    CommunityProvider.prototype.postPasswordRequest = function (community, phone) {
        var url = communityURL + 'password?NousEnsembleToken=' + localStorage.getItem("token");
        var body = JSON.stringify({
            community: community,
            phone: phone,
        });
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    CommunityProvider.prototype.findCurrentUserFollowedCommunities = function () {
        var _this = this;
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'user/communities/followed?NousEnsembleToken=' + localStorage.getItem("token");
        return new Promise(function (resolve) {
            _this.http.get(url)
                .subscribe(function (data) {
                resolve(data.json());
            });
        });
    };
    CommunityProvider.prototype.getAllPublicCommunities = function () {
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'communities/public?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    CommunityProvider.prototype.getAllPrivateCommunities = function () {
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'communities/private?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    CommunityProvider.prototype.findCurrentUserCommunities = function () {
        var _this = this;
        var url = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'user/communities?NousEnsembleToken=' + localStorage.getItem("token");
        return new Promise(function (resolve) {
            _this.http.get(url)
                .subscribe(function (data) {
                resolve(data.json());
            });
        });
    };
    CommunityProvider.prototype.postCommunitiesFollow = function (communities) {
        var url = communityURL + 'follow?NousEnsembleToken=' + localStorage.getItem("token");
        var body = JSON.stringify({
            communities: communities,
        });
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    CommunityProvider.prototype.postCommunitiesUnfollow = function (community) {
        var url = communityURL + 'unfollow?NousEnsembleToken=' + localStorage.getItem("token");
        var body = JSON.stringify({
            community: community,
        });
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    CommunityProvider.prototype.getInfoCommunity = function (id) {
        var _this = this;
        var url = communityURL + id + '/info_dedicated?NousEnsembleToken=' + localStorage.getItem("token");
        return new Promise(function (resolve) {
            _this.http.get(url)
                .subscribe(function (data) {
                resolve(data.json());
            });
        });
    };
    CommunityProvider.prototype.getHeadingCommunity = function (id) {
        var _this = this;
        var url = communityURL + id + '/get_headings?NousEnsembleToken=' + localStorage.getItem("token");
        return new Promise(function (resolve) {
            _this.http.get(url)
                .subscribe(function (data) {
                resolve(data.json());
            });
        });
    };
    CommunityProvider.prototype.put = function (data, img, toDelete) {
        var body = JSON.stringify({
            name: data.name,
            phone: data.phone,
            email: data.email,
            city: data.city,
            photo: img,
            todelete: toDelete
        });
        var url = communityURL + data.id + '/update?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    CommunityProvider.prototype.getAdmins = function (id, page) {
        var url = communityURL + id + '/admins/' + page + '/' + 10 + '?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    CommunityProvider.prototype.deleteAdmin = function (community, admins) {
        var body = JSON.stringify({
            admins: admins,
        });
        var url = communityURL + community + '/admin/remove?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    CommunityProvider = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Injectable"])(),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__angular_http__["c" /* Http */]])
    ], CommunityProvider);
    return CommunityProvider;
}());

//# sourceMappingURL=community.js.map

/***/ }),

/***/ 47:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CacheProvider; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_http__ = __webpack_require__(25);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_rxjs_add_operator_map__ = __webpack_require__(27);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_rxjs_add_operator_map___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_rxjs_add_operator_map__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__article_article__ = __webpack_require__(31);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__pipes_groupitems_groupitems__ = __webpack_require__(197);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__eventsrest_eventsrest__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__goodplanrest_goodplanrest__ = __webpack_require__(72);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};








/*
  Generated class for the CacheProvider provider.

  See https://angular.io/docs/ts/latest/guide/dependency-injection.html
  for more info on providers and Angular 2 DI.
*/
var CacheProvider = /** @class */ (function () {
    function CacheProvider(http, service, event, eventService, goodPlanService) {
        this.http = http;
        this.service = service;
        this.event = event;
        this.eventService = eventService;
        this.goodPlanService = goodPlanService;
    }
    CacheProvider_1 = CacheProvider;
    CacheProvider.prototype.loadArticles = function (page, item, articles, cacheLifeTime, type, parameter, force, infiniteScroll, refresher) {
        var _this = this;
        if (parameter === void 0) { parameter = null; }
        if (force === void 0) { force = false; }
        if (infiniteScroll === void 0) { infiniteScroll = null; }
        if (refresher === void 0) { refresher = null; }
        var parameters = null;
        var cachedKey = null;
        if (type == 'news') {
            parameters = this.getParameters(type);
            cachedKey = 'news.articles.' + page + '.' + JSON.stringify(parameters);
            if (force) {
                CacheProvider_1.forceDeleteCache('news.articles');
            }
        }
        else if (type == 'association') {
            parameters = this.getParameters(type, parameter);
            cachedKey = 'association' + parameter.id + '.articles.' + page + '.' + JSON.stringify(parameters);
            if (force) {
                CacheProvider_1.forceDeleteCache('association' + parameter.id + '.articles');
            }
        }
        else if (type == 'communityArticle') {
            parameters = this.getParameters(type, parameter);
            cachedKey = 'community' + parameter.id + '.articles.' + page + '.' + JSON.stringify(parameters);
            if (force) {
                CacheProvider_1.forceDeleteCache('community' + parameter.id + '.articles');
            }
        }
        else if (type == 'surveyArticle') {
            parameters = this.getParameters(type, parameter);
            cachedKey = 'survey' + parameter.id + '.articles.' + page + '.' + JSON.stringify(parameters);
            if (force) {
                CacheProvider_1.forceDeleteCache('survey' + parameter.id + '.articles');
            }
        }
        else if (type == 'agenda') {
            parameters = this.getParameters(type);
            cachedKey = 'agenda.events.' + page + '.' + JSON.stringify(parameters);
            if (force) {
                CacheProvider_1.forceDeleteCache('agenda.events');
            }
        }
        else if (type == 'agendaAsso') {
            parameters = this.getParameters(type, parameter);
            cachedKey = 'association' + parameter.id + '.agenda.' + page + '.' + JSON.stringify(parameters);
            if (force) {
                CacheProvider_1.forceDeleteCache('association' + parameter.id + '.agenda');
            }
        }
        else if (type == 'agendaCommu') {
            parameters = this.getParameters(type, parameter);
            cachedKey = 'community' + parameter.id + '.agenda.' + page + '.' + JSON.stringify(parameters);
            if (force) {
                CacheProvider_1.forceDeleteCache('community' + parameter.id + '.agenda');
            }
        }
        else if (type == 'goodplan') {
            parameters = this.getParameters(type);
            cachedKey = 'goodplan.events.' + page + '.' + JSON.stringify(parameters);
            if (force) {
                CacheProvider_1.forceDeleteCache('goodplan.events');
            }
        }
        else if (type == 'goodplanMerch') {
            parameters = this.getParameters(type, parameter);
            cachedKey = 'goodplan' + parameter.id + '.merch.' + page + '.' + JSON.stringify(parameters);
            if (force) {
                CacheProvider_1.forceDeleteCache('goodplan' + parameter.id + '.merch');
            }
        }
        var hasData = false;
        var cachedData = localStorage.getItem(cachedKey);
        var currentTime = Math.floor(Date.now() / 1000);
        if (!force && cachedData) {
            cachedData = JSON.parse(cachedData);
            if (cachedData['time'] >= currentTime - cacheLifeTime) {
                item = cachedData['items'];
                hasData = true;
                CacheProvider_1.completeAllThings(infiniteScroll, refresher);
                if (type == 'news') {
                    this.event.publish('news:cache', [page, item, articles, cacheLifeTime]);
                }
                else if (type == 'association' || type == 'communityArticle' || type == 'surveyArticle') {
                    this.event.publish('association:cache', [page, item, articles, cacheLifeTime]);
                }
                else if (type == 'agenda') {
                    this.event.publish('agenda:cache', [page, item, articles, cachedData['itemsDates']]);
                }
                else if (type == 'agendaAsso' || type == 'agendaCommu') {
                    this.event.publish('association:agenda', [page, item, articles, cachedData['itemsDates']]);
                }
                else if (type == 'goodplan') {
                    this.event.publish('goodplan:cache', [page, item, articles, cachedData['itemsDates']]);
                }
                else if (type == 'goodplanMerch') {
                    this.event.publish('merchant:goodplan', [page, item, articles, cachedData['itemsDates']]);
                }
            }
        }
        if (!hasData) {
            var loadingPopup_1 = null;
            if (type == 'news' || type == 'association' || type == 'communityArticle' || type == 'surveyArticle') {
                this.service.getAccueilCitoyenArticles(page, parameters).then(function (data) {
                    articles = data[0];
                    if (!infiniteScroll) {
                        item = [];
                    }
                    for (var _i = 0, articles_1 = articles; _i < articles_1.length; _i++) {
                        var article = articles_1[_i];
                        item.push(article);
                    }
                    var cachedData = { 'items': item, 'time': currentTime };
                    localStorage.setItem(cachedKey, JSON.stringify(cachedData));
                    if (loadingPopup_1) {
                        loadingPopup_1.dismiss();
                    }
                    CacheProvider_1.completeAllThings(infiniteScroll, refresher);
                    if (type == 'news') {
                        _this.event.publish('news:cache', [page, item, articles, cacheLifeTime]);
                    }
                    else if (type == 'association' || type == 'communityArticle' || type == 'surveyArticle') {
                        _this.event.publish('association:cache', [page, item, articles, cacheLifeTime]);
                    }
                }, function (err) {
                    if (loadingPopup_1) {
                        loadingPopup_1.dismiss();
                        _this.event.publish('http:errors', err);
                    }
                    CacheProvider_1.completeAllThings(infiniteScroll, refresher);
                });
            }
            else if (type == 'agenda' || type == 'agendaAsso' || type == 'agendaCommu') {
                this.eventService.getEventsByUser(page, parameters).then(function (data) {
                    articles = data;
                    if (!infiniteScroll) {
                        item = [];
                    }
                    for (var _i = 0, articles_2 = articles; _i < articles_2.length; _i++) {
                        var event_1 = articles_2[_i];
                        var dateString = event_1.day;
                        var arraydateString = dateString.split('T');
                        var arraydate = arraydateString[0].split('-');
                        event_1.day = arraydate[0] + "-" + arraydate[1] + "-" + arraydate[2] + "T00:00:00";
                        item.push(event_1);
                    }
                    var g = new __WEBPACK_IMPORTED_MODULE_5__pipes_groupitems_groupitems__["a" /* GroupitemsPipe */]();
                    var itemsDates = [];
                    var itemsg = g.transform(item, "day");
                    for (var _a = 0, itemsg_1 = itemsg; _a < itemsg_1.length; _a++) {
                        var ir = itemsg_1[_a];
                        itemsDates.push(ir);
                    }
                    if (type == 'agenda') {
                        _this.event.publish('agenda:cache', [page, item, articles, itemsDates]);
                    }
                    else if (type == 'agendaAsso' || type == 'agendaCommu') {
                        _this.event.publish('association:agenda', [page, item, articles, itemsDates]);
                    }
                    var cachedData = { 'items': item, 'itemsDates': itemsDates, 'time': currentTime };
                    localStorage.setItem(cachedKey, JSON.stringify(cachedData));
                    if (loadingPopup_1) {
                        loadingPopup_1.dismiss();
                    }
                    CacheProvider_1.completeAllThings(infiniteScroll, refresher);
                }, function (err) {
                    if (loadingPopup_1) {
                        loadingPopup_1.dismiss();
                        _this.event.publish('http:errors', err);
                    }
                    CacheProvider_1.completeAllThings(infiniteScroll, refresher);
                });
            }
            else if (type == "goodplan" || type == "goodplanMerch") {
                this.goodPlanService.getGoodPlansByUser(page, parameters).then(function (data) {
                    articles = data;
                    if (!infiniteScroll) {
                        item = [];
                    }
                    for (var _i = 0, articles_3 = articles; _i < articles_3.length; _i++) {
                        var event_2 = articles_3[_i];
                        var dateString = event_2.day;
                        var arraydateString = dateString.split('T');
                        var arraydate = arraydateString[0].split('-');
                        event_2.day = arraydate[0] + "-" + arraydate[1] + "-" + arraydate[2] + "T00:00:00";
                        item.push(event_2);
                    }
                    var g = new __WEBPACK_IMPORTED_MODULE_5__pipes_groupitems_groupitems__["a" /* GroupitemsPipe */]();
                    var itemsDates = [];
                    var itemsg = g.transform(item, "day");
                    for (var _a = 0, itemsg_2 = itemsg; _a < itemsg_2.length; _a++) {
                        var ir = itemsg_2[_a];
                        itemsDates.push(ir);
                    }
                    if (type == 'goodplan') {
                        _this.event.publish('goodplan:cache', [page, item, articles, itemsDates]);
                    }
                    if (type == 'goodplanMerch') {
                        _this.event.publish('merchant:goodplan', [page, item, articles, itemsDates]);
                    }
                    var cachedData = { 'items': item, 'itemsDates': itemsDates, 'time': currentTime };
                    localStorage.setItem(cachedKey, JSON.stringify(cachedData));
                    if (loadingPopup_1) {
                        loadingPopup_1.dismiss();
                    }
                    CacheProvider_1.completeAllThings(infiniteScroll, refresher);
                }, function (err) {
                    if (loadingPopup_1) {
                        loadingPopup_1.dismiss();
                        _this.event.publish('http:errors', err);
                    }
                    CacheProvider_1.completeAllThings(infiniteScroll, refresher);
                });
            }
        }
        if (parameter) {
            CacheProvider_1.deleteOldCache(cacheLifeTime, parameter);
        }
        else {
            CacheProvider_1.deleteOldCache(cacheLifeTime, null);
        }
    };
    CacheProvider.prototype.getCachedData = function (serviceMethod, refresh, callback, key, cacheKey, cacheLifeTime, infiniteScroll, refresher) {
        var _this = this;
        var hasData = false;
        var cachedData = localStorage.getItem(key);
        var currentTime = Math.floor(Date.now() / 1000);
        var items = null;
        if (!refresh && cachedData) {
            cachedData = JSON.parse(cachedData);
            if (cachedData['time'] >= currentTime - cacheLifeTime) {
                items = cachedData['data'];
                hasData = true;
                CacheProvider_1.completeAllThings(infiniteScroll, refresher);
                this.event.publish(cacheKey, items);
            }
        }
        if (!hasData) {
            var fn = eval(serviceMethod);
            fn.then(function (data) {
                var cachedData = { 'data': data, 'time': currentTime };
                localStorage.setItem(key, JSON.stringify(cachedData));
                _this.event.publish(callback, data);
                CacheProvider_1.completeAllThings(infiniteScroll, refresher);
            });
        }
    };
    CacheProvider.prototype.refreshItem = function (item, cachedKey) {
        for (var _i = 0, _a = Object.keys(localStorage); _i < _a.length; _i++) {
            var key = _a[_i];
            if (key.indexOf(cachedKey) === 0) {
                var data = JSON.parse(localStorage.getItem(key));
                for (var i in data['items']) {
                    if (data['items'].hasOwnProperty(i)) {
                        if (data['items'][i].id === item.id) {
                            data['items'][i] = item;
                        }
                    }
                }
                localStorage.setItem(key, JSON.stringify(data));
            }
        }
    };
    CacheProvider.prototype.getParameters = function (type, parameter) {
        if (type === void 0) { type = null; }
        if (parameter === void 0) { parameter = null; }
        var parameters = '';
        if (type == 'news') {
            var selectedVille = JSON.parse(localStorage.getItem('selectedVille'));
            var selectedTheme = JSON.parse(localStorage.getItem('selectedTheme'));
            var selectedJ = localStorage.getItem('selectedJ');
            if (selectedVille && selectedVille.length) {
                for (var _i = 0, selectedVille_1 = selectedVille; _i < selectedVille_1.length; _i++) {
                    var ville = selectedVille_1[_i];
                    parameters += "&city[]=" + ville.id;
                }
            }
            if (selectedTheme && selectedTheme.length) {
                for (var _a = 0, selectedTheme_1 = selectedTheme; _a < selectedTheme_1.length; _a++) {
                    var theme = selectedTheme_1[_a];
                    parameters += "&category[]=" + theme.id;
                }
            }
            if (selectedJ) {
                parameters += "&j=" + selectedJ;
            }
        }
        else if (parameter && type == 'association' && !parameter.all) {
            parameters += "&assoId=" + parameter.id;
            if (parameter.role == "member") {
                parameters += "&userType=1";
            }
        }
        else if (parameter && type == 'communityArticle') {
            parameters += "&communityId=" + parameter.id;
            if (!parameter.isAdminPublish) {
                parameters += "&userType=1";
            }
        }
        else if (parameter && type == 'surveyArticle') {
            parameters += "&communityId=" + parameter.id;
            parameters += "&survey=1";
        }
        else if (type == 'agenda' || type == 'goodplan') {
            var selectedVille = JSON.parse(localStorage.getItem('selectedVille'));
            var selectedTheme = JSON.parse(localStorage.getItem('selectedTheme'));
            var selectedDate = localStorage.getItem('selectedDate');
            if (selectedVille && selectedVille.length) {
                for (var _b = 0, selectedVille_2 = selectedVille; _b < selectedVille_2.length; _b++) {
                    var ville = selectedVille_2[_b];
                    parameters += "&city[]=" + ville.id;
                }
            }
            if (selectedDate) {
                selectedDate = JSON.parse(selectedDate);
                parameters += "&date=" + selectedDate;
            }
            if (selectedTheme && selectedTheme.length) {
                for (var _c = 0, selectedTheme_2 = selectedTheme; _c < selectedTheme_2.length; _c++) {
                    var theme = selectedTheme_2[_c];
                    parameters += "&category[]=" + theme.id;
                }
            }
        }
        else if (parameter && type == 'agendaAsso') {
            parameters += "&associationId=" + parameter.id;
        }
        else if (parameter && type == 'agendaCommu') {
            parameters += "&communityId=" + parameter.id;
        }
        else if (parameter && type == 'goodplanMerch') {
            parameters += "&merchantId=" + parameter.id;
        }
        return parameters;
    };
    CacheProvider.completeAllThings = function (infiniteScroll, refresher) {
        if (infiniteScroll === void 0) { infiniteScroll = null; }
        if (refresher === void 0) { refresher = null; }
        if (infiniteScroll) {
            infiniteScroll.complete();
        }
        if (refresher) {
            refresher.complete();
        }
    };
    CacheProvider.deleteOldCache = function (cacheLifeTime, parameter) {
        var currentTime = Math.floor(Date.now() / 1000);
        for (var _i = 0, _a = Object.keys(localStorage); _i < _a.length; _i++) {
            var key = _a[_i];
            if (key.indexOf('news.articles') === 0 || parameter && (key.indexOf('community' + parameter.id + '.articles') === 0 || key.indexOf('community' + parameter.id + '.agenda') === 0 || key.indexOf('association' + parameter.id + '.articles') === 0 || key.indexOf('association' + parameter.id + '.agenda') === 0 || key.indexOf('goodplan' + parameter.id + '.merch') === 0) || key.indexOf('agenda.events') === 0) {
                var item = JSON.parse(localStorage.getItem(key));
                if (!item['time'] || item['time'] < currentTime - cacheLifeTime) {
                    localStorage.removeItem(key);
                }
            }
        }
    };
    CacheProvider.forceDeleteCache = function (index) {
        for (var _i = 0, _a = Object.keys(localStorage); _i < _a.length; _i++) {
            var key = _a[_i];
            if (key.indexOf(index) === 0) {
                localStorage.removeItem(key);
            }
        }
    };
    var CacheProvider_1;
    CacheProvider = CacheProvider_1 = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Injectable"])(),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__angular_http__["c" /* Http */], __WEBPACK_IMPORTED_MODULE_3__article_article__["a" /* ArticleProvider */], __WEBPACK_IMPORTED_MODULE_4_ionic_angular__["j" /* Events */], __WEBPACK_IMPORTED_MODULE_6__eventsrest_eventsrest__["a" /* EventsrestProvider */], __WEBPACK_IMPORTED_MODULE_7__goodplanrest_goodplanrest__["a" /* GoodplanrestProvider */]])
    ], CacheProvider);
    return CacheProvider;
}());

//# sourceMappingURL=cache.js.map

/***/ }),

/***/ 470:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return SpaceAssoMerchPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_globals_globals__ = __webpack_require__(8);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__pages_news_news__ = __webpack_require__(35);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__pages_create_merchant_create_merchant__ = __webpack_require__(77);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__pages_agenda_agenda__ = __webpack_require__(79);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__pages_my_space_my_space__ = __webpack_require__(62);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__pages_public_profile_public_profile__ = __webpack_require__(471);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__pages_parameter_asso_merch_parameter_asso_merch__ = __webpack_require__(474);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__volunteers_volunteers__ = __webpack_require__(480);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__providers_eventsrest_eventsrest__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__adherent_adherent__ = __webpack_require__(481);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};












/**
 * Generated class for the SpaceAssoMerchPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var SpaceAssoMerchPage = /** @class */ (function () {
    function SpaceAssoMerchPage(navCtrl, navParams, serviceEvent, appGlobals, loader, myAlert, appEvents, myModal, alertCtrl) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.serviceEvent = serviceEvent;
        this.appGlobals = appGlobals;
        this.loader = loader;
        this.myAlert = myAlert;
        this.appEvents = appEvents;
        this.myModal = myModal;
        this.alertCtrl = alertCtrl;
        this.appGlobals.currentPageid = "mySpace";
        this.account = navParams.get('account');
        this.appGlobals.showHeader = false;
        this.appGlobals.showFooter = true;
    }
    SpaceAssoMerchPage.prototype.ionViewWillEnter = function () {
        this.appGlobals.currentPageid = "mySpace";
        this.appGlobals.showHeader = false;
        this.appGlobals.showFooter = true;
        this.appGlobals.onNegativeTopSearch = true;
    };
    SpaceAssoMerchPage.prototype.ionViewWillLeave = function () {
        this.appGlobals.showHeader = true;
        this.appGlobals.showFooter = true;
        this.appGlobals.onNegativeTopSearch = false;
    };
    SpaceAssoMerchPage.prototype.goBack = function () {
        this.navCtrl.pop();
    };
    SpaceAssoMerchPage.prototype.createMerchant = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_4__pages_create_merchant_create_merchant__["a" /* CreateMerchantPage */]);
    };
    SpaceAssoMerchPage.prototype.news = function () {
        this.navCtrl.setRoot(__WEBPACK_IMPORTED_MODULE_3__pages_news_news__["a" /* NewsPage */]);
    };
    SpaceAssoMerchPage.prototype.mySpace = function () {
        this.navCtrl.setRoot(__WEBPACK_IMPORTED_MODULE_6__pages_my_space_my_space__["a" /* MySpacePage */]);
    };
    SpaceAssoMerchPage.prototype.agenda = function () {
        this.navCtrl.setRoot(__WEBPACK_IMPORTED_MODULE_5__pages_agenda_agenda__["a" /* AgendaPage */]);
    };
    SpaceAssoMerchPage.prototype.club = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_11__adherent_adherent__["a" /* AdherentPage */], {
            account: this.account
        });
    };
    SpaceAssoMerchPage.prototype.publicProfile = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_7__pages_public_profile_public_profile__["a" /* PublicProfilePage */], {
            account: this.account
        });
    };
    SpaceAssoMerchPage.prototype.parameter = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_8__pages_parameter_asso_merch_parameter_asso_merch__["a" /* ParameterAssoMerchPage */], {
            account: this.account
        });
    };
    SpaceAssoMerchPage.prototype.volunteers = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_9__volunteers_volunteers__["a" /* VolunteersPage */], {
            account: this.account
        });
    };
    SpaceAssoMerchPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-space-asso-merch',template:/*ion-inline-start:"D:\celaneo\mobile\new-mobile\test\src\pages\space-asso-merch\space-asso-merch.html"*/'<!--\n\n  Generated template for the SpaceAssoMerchPage page.\n\n\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n\n  Ionic pages and navigation.\n\n-->\n\n<ion-header class="mobile-header" *ngIf="appGlobals.token">\n\n    <ion-grid>\n\n        <ion-row>\n\n            <ion-col col-2 text-left>\n\n                <div class="item">\n\n                    <ion-icon name="ios-arrow-back" (click)="goBack()"></ion-icon>\n\n                </div>\n\n            </ion-col>\n\n            <ion-col col-8 text-center class="page-title">\n\n\n\n                <ion-title text-capitalize>{{account.name}}</ion-title>\n\n            </ion-col>\n\n            <ion-col col-2>\n\n                <div class="item" text-right>\n\n\n\n                </div>\n\n            </ion-col>\n\n        </ion-row>\n\n    </ion-grid>\n\n</ion-header>\n\n\n\n\n\n<ion-content>\n\n    <div class="div-left">\n\n        <div text-right class="back"><img src="assets/imgs/icons/1.png" (click)="goBack()"></div>\n\n    </div>\n\n    <div class="div-center">\n\n        <ion-grid class="margin-bottom">\n\n\n\n            <ion-row>\n\n                <ion-col col-12 text-center>\n\n                    <div class="div-admin admin-margin-top">\n\n                        <span *ngIf="account.role == \'superadmin\' || account.role == \'admin\' || (account.type ==\'community\' && account.isAdminPublish)" class="admin">Admin</span>\n\n                        <span *ngIf="account.role == \'member\' || (account.type ==\'community\' && !account.isAdminPublish)" class="admin">Adhérent</span>\n\n                        <ion-icon name="md-swap"></ion-icon>\n\n                    </div>\n\n                </ion-col>\n\n                <ion-col col-12 text-center>\n\n                    <button ion-button color="white-color" class="button-white button-admin" text-center icon-start\n\n                        (click)="publicProfile()">\n\n                        <div>\n\n                            <img class="img-bene" src="assets/imgs/icons/publish.png">\n\n                            <div class="text-admin"> Publications</div>\n\n                        </div>\n\n                    </button>\n\n                </ion-col>\n\n                <ion-col col-12 text-center *ngIf="account.role == \'superadmin\' || account.role == \'admin\'">\n\n                    <button ion-button color="white-color" class="button-white button-admin" (click)="club()"\n\n                        text-center icon-start>\n\n                        <div>\n\n                            <img class="img-adherent" src="assets/imgs/icons/adherent.png">\n\n                            <div class="text-admin"> Adhérents</div>\n\n                        </div>\n\n                    </button>\n\n                </ion-col>\n\n                <ion-col col-12 text-center *ngIf="(account.type == \'association\' && (account.role == \'superadmin\' || account.role == \'admin\')) || (account.type ==\'community\' && account.isAdminPublish)">\n\n                    <button ion-button color="white-color" class="button-white button-admin" text-center icon-start\n\n                        (click)="volunteers()">\n\n                        <div>\n\n                            <img class="img-bene" src="assets/imgs/icons/volunteers.png">\n\n                            <div class="text-admin">Bénévoles</div>\n\n                        </div>\n\n                    </button>\n\n                </ion-col>\n\n                <ion-col col-12 text-center *ngIf="(account.role == \'superadmin\' || account.role == \'admin\') && account.type !=\'community\'">\n\n                    <button ion-button color="white-color" round class="button-white button-setting" text-center\n\n                        no-padding (click)="parameter()">\n\n                        <div class="block-image"></div>\n\n                        <div class="block-name">Paramètres</div>\n\n                        <div class="block-icon">\n\n                            <ion-icon name="ios-arrow-forward"></ion-icon>\n\n                        </div>\n\n                    </button>\n\n                </ion-col>\n\n\n\n            </ion-row>\n\n        </ion-grid>\n\n\n\n    </div>\n\n    <div class="div-right"></div>\n\n</ion-content>'/*ion-inline-end:"D:\celaneo\mobile\new-mobile\test\src\pages\space-asso-merch\space-asso-merch.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_10__providers_eventsrest_eventsrest__["a" /* EventsrestProvider */],
            __WEBPACK_IMPORTED_MODULE_2__providers_globals_globals__["a" /* GlobalsProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */]])
    ], SpaceAssoMerchPage);
    return SpaceAssoMerchPage;
}());

//# sourceMappingURL=space-asso-merch.js.map

/***/ }),

/***/ 471:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return PublicProfilePage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_globals_globals__ = __webpack_require__(8);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__pages_news_news__ = __webpack_require__(35);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__pages_create_merchant_create_merchant__ = __webpack_require__(77);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__pages_agenda_agenda__ = __webpack_require__(79);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__pages_my_space_my_space__ = __webpack_require__(62);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__pages_list_article_list_article__ = __webpack_require__(472);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__pages_list_event_list_event__ = __webpack_require__(473);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__providers_eventsrest_eventsrest__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__list_goodplan_list_goodplan__ = __webpack_require__(199);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};











/**
 * Generated class for the PublicProfilePage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var PublicProfilePage = /** @class */ (function () {
    function PublicProfilePage(navCtrl, navParams, loader, myAlert, appEvents, myModal, serviceEvent, appGlobals, modal) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.loader = loader;
        this.myAlert = myAlert;
        this.appEvents = appEvents;
        this.myModal = myModal;
        this.serviceEvent = serviceEvent;
        this.appGlobals = appGlobals;
        this.modal = modal;
        this.account = navParams.get('account');
        this.appGlobals.currentPageid = "mySpace";
        this.appGlobals.showHeader = false;
        this.appGlobals.showFooter = true;
    }
    PublicProfilePage.prototype.ionViewWillEnter = function () {
        this.appGlobals.currentPageid = "mySpace";
        this.appGlobals.showHeader = false;
        this.appGlobals.showFooter = true;
        this.appGlobals.onNegativeTopSearch = true;
    };
    PublicProfilePage.prototype.ionViewDidEnter = function () {
        this.appEvents.publish('updateFooter');
    };
    PublicProfilePage.prototype.ionViewWillLeave = function () {
        this.appGlobals.showHeader = true;
        this.appGlobals.showFooter = true;
        this.appGlobals.onNegativeTopSearch = false;
    };
    PublicProfilePage.prototype.goBack = function () {
        this.navCtrl.pop();
    };
    PublicProfilePage.prototype.createMerchant = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_4__pages_create_merchant_create_merchant__["a" /* CreateMerchantPage */]);
    };
    PublicProfilePage.prototype.news = function () {
        this.navCtrl.setRoot(__WEBPACK_IMPORTED_MODULE_3__pages_news_news__["a" /* NewsPage */]);
    };
    PublicProfilePage.prototype.mySpace = function () {
        this.navCtrl.setRoot(__WEBPACK_IMPORTED_MODULE_6__pages_my_space_my_space__["a" /* MySpacePage */]);
    };
    PublicProfilePage.prototype.agenda = function () {
        this.navCtrl.setRoot(__WEBPACK_IMPORTED_MODULE_5__pages_agenda_agenda__["a" /* AgendaPage */]);
    };
    PublicProfilePage.prototype.listArticles = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_7__pages_list_article_list_article__["a" /* ListArticlePage */], {
            account: this.account,
            survey: false
        });
    };
    PublicProfilePage.prototype.listSurvey = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_7__pages_list_article_list_article__["a" /* ListArticlePage */], {
            account: this.account,
            survey: true
        });
    };
    PublicProfilePage.prototype.listGoodPlan = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_10__list_goodplan_list_goodplan__["a" /* ListGoodplanPage */], {
            account: this.account
        });
    };
    PublicProfilePage.prototype.listEvent = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_8__pages_list_event_list_event__["a" /* ListEventPage */], {
            account: this.account
        });
    };
    PublicProfilePage.prototype.popPublish = function () {
        var _this = this;
        var myModal2 = this.modal.create('PublishPage', { "account": this.account, "accountType": this.account.type }, { cssClass: 'style-modal  publish-modal' });
        myModal2.onDidDismiss(function (data) {
            _this.appGlobals.showHeader = false;
            _this.appGlobals.showFooter = true;
        });
        myModal2.present();
    };
    PublicProfilePage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-public-profile',template:/*ion-inline-start:"D:\celaneo\mobile\new-mobile\test\src\pages\public-profile\public-profile.html"*/'<!--\n\n  Generated template for the PublicProfilePage page.\n\n\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n\n  Ionic pages and navigation.\n\n-->\n\n<ion-header class="mobile-header" *ngIf="appGlobals.token">\n\n    <ion-grid>\n\n        <ion-row>\n\n            <ion-col col-2 text-left>\n\n                <div class="item">\n\n                    <ion-icon name="ios-arrow-back" (click)="goBack()"></ion-icon>\n\n                </div>\n\n            </ion-col>\n\n            <ion-col col-8 text-center class="page-title">\n\n                <ion-title>Publications</ion-title>\n\n            </ion-col>\n\n            <ion-col col-2>\n\n\n\n            </ion-col>\n\n        </ion-row>\n\n    </ion-grid>\n\n</ion-header>\n\n<ion-content>\n\n    <div class="div-left">\n\n        <div text-right class="back"><img src="assets/imgs/icons/1.png" (click)="goBack()"></div>\n\n    </div>\n\n    <div class="div-center">\n\n        <ion-grid>\n\n\n\n            <ion-row>\n\n                <ion-col col-12 text-center>\n\n                    <div class="div-admin admin-margin-top">\n\n                        <span *ngIf="account.role == \'superadmin\' || account.role == \'admin\' || (account.type ==\'community\' && account.isAdminPublish)" class="admin">Admin</span>\n\n                        <span *ngIf="account.role == \'member\' || (account.type ==\'community\' && !account.isAdminPublish)" class="admin">Adhérent</span>\n\n                        <ion-icon name="md-swap"></ion-icon>\n\n                    </div>\n\n                </ion-col>\n\n                <ion-col col-12 text-center  *ngIf="account.type == \'association\' || account.type == \'community\'">\n\n                    <button ion-button color="white-color" class="button-white button-admin" text-center icon-start\n\n                        (click)="listArticles()">\n\n                        <div>\n\n                            <img class="img-bene" src="assets/imgs/icons/articlePublish.png">\n\n                            <div class="text-admin">Articles</div>\n\n                        </div>\n\n                    </button>\n\n                </ion-col>\n\n                <ion-col col-12 text-center  *ngIf="account.type == \'merchant\'">\n\n                    <button ion-button color="white-color" class="button-white button-admin" text-center icon-start\n\n                            (click)="listGoodPlan()">\n\n                        <div>\n\n                            <img class="img-bene" src="assets/imgs/icons/articlePublish.png">\n\n                            <div class="text-admin">Bons Plans</div>\n\n                        </div>\n\n                    </button>\n\n                </ion-col>\n\n                <ion-col col-12 text-center  *ngIf="account.type == \'community\'">\n\n                    <button ion-button color="white-color" class="button-white button-admin" text-center icon-start\n\n                            (click)="listSurvey()">\n\n                        <div>\n\n                            <img class="img-bene" src="assets/imgs/icons/article.png">\n\n                            <div class="text-admin">Sondages</div>\n\n                        </div>\n\n                    </button>\n\n                </ion-col>\n\n                <ion-col col-12 text-center  *ngIf="(account.type == \'association\' &&  account.role && account.role !=\'member\') || account.type == \'community\'">\n\n                    <button ion-button color="white-color" class="button-white button-admin" text-center icon-start\n\n                        (click)="listEvent()">\n\n                        <div>\n\n                            <img class="img-bene" src="assets/imgs/icons/eventPublish.png">\n\n                            <div class="text-admin">Evènements</div>\n\n                        </div>\n\n                    </button>\n\n                </ion-col>\n\n\n\n            </ion-row>\n\n        </ion-grid>\n\n\n\n    </div>\n\n    <div class="div-right"></div>\n\n</ion-content>'/*ion-inline-end:"D:\celaneo\mobile\new-mobile\test\src\pages\public-profile\public-profile.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_9__providers_eventsrest_eventsrest__["a" /* EventsrestProvider */],
            __WEBPACK_IMPORTED_MODULE_2__providers_globals_globals__["a" /* GlobalsProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */]])
    ], PublicProfilePage);
    return PublicProfilePage;
}());

//# sourceMappingURL=public-profile.js.map

/***/ }),

/***/ 472:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ListArticlePage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_article_article__ = __webpack_require__(31);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_comment_comment__ = __webpack_require__(22);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__pages_detail_article_detail_article__ = __webpack_require__(56);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__merchant_sheet_merchant_sheet__ = __webpack_require__(128);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__association_sheet_association_sheet__ = __webpack_require__(78);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__providers_globals_globals__ = __webpack_require__(8);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__event_details_event_details__ = __webpack_require__(55);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__providers_eventsrest_eventsrest__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__providers_cache_cache__ = __webpack_require__(47);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__ionic_native_social_sharing__ = __webpack_require__(46);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__detail_survey_detail_survey__ = __webpack_require__(198);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};













/**
 * Generated class for the ListArticlePage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var ListArticlePage = /** @class */ (function () {
    function ListArticlePage(commentService, toastCtrl, modal, event, appEvents, loader, myAlert, myModal, serviceEvent, navCtrl, navParams, articleService, loadingCtrl, actionSheetController, appGlobals, alertCtrl, cacheService, socialsharing) {
        var _this = this;
        this.commentService = commentService;
        this.toastCtrl = toastCtrl;
        this.modal = modal;
        this.event = event;
        this.appEvents = appEvents;
        this.loader = loader;
        this.myAlert = myAlert;
        this.myModal = myModal;
        this.serviceEvent = serviceEvent;
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.articleService = articleService;
        this.loadingCtrl = loadingCtrl;
        this.actionSheetController = actionSheetController;
        this.appGlobals = appGlobals;
        this.alertCtrl = alertCtrl;
        this.cacheService = cacheService;
        this.socialsharing = socialsharing;
        this.shownGroup = null;
        this.items = [];
        this.page = 0;
        this.init = false;
        this.repSucces = {
            success: false
        };
        this.comment = [];
        this.numberComments = 0;
        this.cacheLifeTime = 3600;
        this.allowInfiniteScroll = true;
        this.survey = false;
        this.appGlobals.showHeader = false;
        this.account = navParams.get('account');
        this.survey = navParams.get('survey');
        if (this.account.type == 'association' || this.account.type == 'community') {
            this.associationId = this.account.id;
            this.accountImg = this.account.image_url;
            this.page = 1;
            this.event.unsubscribe('association:cache');
            this.event.subscribe('association:cache', function (data) {
                _this.page = data[0];
                _this.items = data[1];
                _this.articles = data[2];
                _this.cacheLifeTime = data[3];
                _this.allowInfiniteScroll = !data[2] || data[2] && data[2].length;
            });
            this.event.unsubscribe('association:refresh');
            this.event.subscribe('association:refresh', function () {
                _this.page = 1;
                if (_this.account.type == 'association') {
                    _this.cacheService.loadArticles(_this.page, _this.items, _this.articles, _this.cacheLifeTime, 'association', _this.account, true);
                }
                else if (_this.account.type == 'community') {
                    if (navParams.get('survey')) {
                        _this.cacheService.loadArticles(_this.page, _this.items, _this.articles, _this.cacheLifeTime, 'surveyArticle', _this.account, true);
                    }
                    else {
                        _this.cacheService.loadArticles(_this.page, _this.items, _this.articles, _this.cacheLifeTime, 'communityArticle', _this.account, true);
                    }
                }
            });
        }
    }
    ListArticlePage.prototype.ionViewWillEnter = function () {
        this.appGlobals.showHeader = false;
        this.appGlobals.showFooter = true;
        this.items = [];
        this.page = 1;
        this.init = true;
        this.getArticles();
        this.appEvents.publish('updateFooter');
        this.appGlobals.onNegativeTopSearch = true;
    };
    ListArticlePage.prototype.ionViewWillLeave = function () {
        this.appGlobals.onNegativeTopSearch = false;
    };
    ListArticlePage.prototype.ionViewDidEnter = function () {
        this.appEvents.publish('updateFooter');
    };
    ListArticlePage.prototype.homePage = function () {
    };
    ListArticlePage.prototype.detailsSurvey = function (article) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_12__detail_survey_detail_survey__["a" /* DetailSurveyPage */], {
            article: article
        });
    };
    ListArticlePage.prototype.Open = function (id) {
        localStorage.setItem("currentArticle", id);
        var myModal2 = this.modal.create('DetailsArticlePage');
        myModal2.present();
    };
    ListArticlePage.prototype.toggleGroup = function (group) {
        if (this.isGroupShown(group)) {
            this.shownGroup = null;
        }
        else {
            this.shownGroup = group;
        }
    };
    ;
    ListArticlePage.prototype.isGroupShown = function (group) {
        return this.shownGroup === group;
    };
    ;
    ListArticlePage.prototype.showToastWithCloseButton = function (id) {
        var toast = this.toastCtrl.create({
            message: 'Vous avez modifié l\'état de cet article',
            showCloseButton: true,
            closeButtonText: 'Ok'
        });
        toast.present();
    };
    ListArticlePage.prototype.deleteArticleNotParent = function (item) {
        return __awaiter(this, void 0, void 0, function () {
            var actionSheet;
            var _this = this;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.actionSheetController.create({
                            buttons: [{
                                    text: 'Cet article',
                                    icon: 'ios-backspace',
                                    handler: function () {
                                        _this.deleteArticleAlert(item);
                                    }
                                }, {
                                    text: 'Cet article et les articles à venir',
                                    icon: 'trash',
                                    handler: function () {
                                        _this.deleteArticleAlertCild(item, 'currentAndNext');
                                    }
                                }, {
                                    text: 'Annuler',
                                    icon: 'close',
                                    role: 'cancel',
                                    handler: function () {
                                    }
                                }]
                        })];
                    case 1:
                        actionSheet = _a.sent();
                        return [4 /*yield*/, actionSheet.present()];
                    case 2:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    ListArticlePage.prototype.deleteArticleAlert = function (article) {
        var _this = this;
        var alert = this.alertCtrl.create({
            title: 'Supprimer Article',
            subTitle: 'Voulez-vous vraiment supprimer cet article?',
            buttons: [
                {
                    text: 'Annuler',
                    role: 'cancel',
                    handler: function () {
                    }
                },
                {
                    text: 'OK',
                    handler: function (data) {
                        _this.deleteArticle(article, 'current');
                    }
                }
            ]
        });
        alert.present();
    };
    ListArticlePage.prototype.deleteArticleAlertCild = function (article, model) {
        var _this = this;
        var alert = this.alertCtrl.create({
            title: 'Supprimer Article',
            subTitle: 'Voulez-vous vraiment supprimer cet article et les article à venir?',
            buttons: [
                {
                    text: 'Annuler',
                    role: 'cancel',
                    handler: function () {
                    }
                },
                {
                    text: 'OK',
                    handler: function (data) {
                        _this.deleteArticle(article, model);
                    }
                }
            ]
        });
        alert.present();
    };
    ListArticlePage.prototype.deleteArticle = function (article, mode) {
        var _this = this;
        var loadingPopup = this.loadingCtrl.create({});
        loadingPopup.present();
        this.articleService.deleteArticle(article.id, mode).then(function (data) {
            _this.event.publish('association:refresh');
            _this.event.publish('news:refresh');
            loadingPopup.dismiss();
            var toast = _this.toastCtrl.create({
                message: 'Article supprimé avec succès',
                duration: 3000,
                position: 'top'
            });
            toast.present();
        }, function (err) {
            loadingPopup.dismiss();
            _this.event.publish('http:errors', err);
        });
    };
    ListArticlePage.prototype.addArticle = function (account) {
        var _this = this;
        var myModal2 = this.modal.create('PublishPage', { "account": account, "accountType": account.type }, { cssClass: 'style-modal  publish-modal' });
        myModal2.onDidDismiss(function (data) {
            _this.items = [];
            _this.page = 1;
            _this.getArticles();
            _this.appGlobals.showHeader = false;
        });
        myModal2.present();
    };
    ListArticlePage.prototype.updateStatusArticle = function (article) {
        var _this = this;
        if (article.enabled) {
            var loadingPopup_1 = this.loadingCtrl.create({});
            loadingPopup_1.present();
            article.enabled = true;
            this.articleService.activateArticle(article.id).then(function (data) {
                _this.event.publish('association:refresh');
                _this.event.publish('news:refresh');
                loadingPopup_1.dismiss();
                var toast = _this.toastCtrl.create({
                    message: 'Article activé avec succès',
                    duration: 3000,
                    position: 'top'
                });
                toast.present();
            }, function (err) {
                loadingPopup_1.dismiss();
                _this.event.publish('http:errors', err);
            });
        }
        else {
            var loadingPopup_2 = this.loadingCtrl.create({});
            loadingPopup_2.present();
            article.enabled = false;
            this.articleService.desactivateArticle(article.id).then(function (data) {
                _this.event.publish('association:refresh');
                _this.event.publish('news:refresh');
                loadingPopup_2.dismiss();
                var toast = _this.toastCtrl.create({
                    message: 'Article désactiver avec succès',
                    duration: 3000,
                    position: 'top'
                });
                toast.present();
            }, function (err) {
                loadingPopup_2.dismiss();
                _this.event.publish('http:errors', err);
            });
        }
    };
    ListArticlePage.prototype.getArticles = function () {
        if (this.account.type == 'association') {
            this.cacheService.loadArticles(this.page, this.items, this.articles, this.cacheLifeTime, 'association', this.account);
        }
        else if (this.account.type == 'community') {
            if (this.navParams.get('survey')) {
                this.cacheService.loadArticles(this.page, this.items, this.articles, this.cacheLifeTime, 'surveyArticle', this.account);
            }
            else {
                this.cacheService.loadArticles(this.page, this.items, this.articles, this.cacheLifeTime, 'communityArticle', this.account);
            }
        }
    };
    ListArticlePage.prototype.loadArticles = function () {
        var _this = this;
        var loadingPopup = this.loadingCtrl.create({});
        loadingPopup.present();
        if (this.account.type == 'association') {
            this.articleService.findAssociationArticles(this.associationId, this.page).then(function (data) {
                _this.articles = data;
                for (var _i = 0, _a = _this.articles; _i < _a.length; _i++) {
                    var article = _a[_i];
                    _this.items.push(article);
                }
                loadingPopup.dismiss();
            }, function (err) {
                loadingPopup.dismiss();
                _this.event.publish('http:errors', err);
            });
        }
        else if (this.account.type == 'merchant') {
            this.articleService.findMerchantArticles(this.merchantId, this.page).then(function (data) {
                _this.articles = data;
                for (var _i = 0, _a = _this.articles; _i < _a.length; _i++) {
                    var article = _a[_i];
                    _this.items.push(article);
                }
                loadingPopup.dismiss();
            }, function (err) {
                loadingPopup.dismiss();
                _this.event.publish('http:errors', err);
            });
        }
    };
    ListArticlePage.prototype.doInfinite = function (infiniteScroll) {
        var _this = this;
        if (this.init) {
            this.init = false;
            infiniteScroll.complete();
        }
        else if (this.allowInfiniteScroll) {
            this.page += 1;
            if (this.account.type == 'association') {
                this.cacheService.loadArticles(this.page, this.items, this.articles, this.cacheLifeTime, 'association', this.account, false, infiniteScroll);
            }
            else if (this.account.type == 'community') {
                if (this.navParams.get('survey')) {
                    this.cacheService.loadArticles(this.page, this.items, this.articles, this.cacheLifeTime, 'surveyArticle', this.account, false, infiniteScroll);
                }
                else {
                    this.cacheService.loadArticles(this.page, this.items, this.articles, this.cacheLifeTime, 'communityArticle', this.account, false, infiniteScroll);
                }
            }
            else if (this.account.type == 'merchant') {
                this.articleService.findMerchantArticles(this.merchantId, this.page).then(function (data) {
                    _this.articles = data;
                    for (var _i = 0, _a = _this.articles; _i < _a.length; _i++) {
                        var article = _a[_i];
                        _this.items.push(article);
                    }
                    infiniteScroll.complete();
                }, function (err) {
                    infiniteScroll.complete();
                });
            }
        }
        else {
            infiniteScroll.complete();
        }
    };
    ListArticlePage.prototype.comments = function (article) {
        var _this = this;
        var loadingPopup = this.loadingCtrl.create({});
        loadingPopup.present();
        return new Promise(function (resolve) {
            _this.commentService.markCommentsArticleAsRead(article.id).then(function (data) {
                article.unread_comments = 0;
                loadingPopup.dismiss();
            }, function (err) {
                loadingPopup.dismiss();
                _this.event.publish('http:errors', err);
            });
        });
    };
    ListArticlePage.prototype.detailsArticle = function (article) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_4__pages_detail_article_detail_article__["a" /* DetailArticlePage */], {
            article: article
        });
    };
    ListArticlePage.prototype.detailsArticleComment = function (article) {
        var _this = this;
        var loadingPopup = this.loadingCtrl.create({});
        loadingPopup.present();
        this.commentService.getCommentsArticlePagination(article.id, 0).then(function (data) {
            _this.comment = data;
            _this.numberComments = article.nbreComments;
            loadingPopup.dismiss();
            _this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_4__pages_detail_article_detail_article__["a" /* DetailArticlePage */], {
                article: article,
                comment: _this.comment,
                numberComments: _this.numberComments,
                showComments: true
            });
        }, function (err) {
            loadingPopup.dismiss();
            _this.event.publish('http:errors', err);
        });
    };
    ListArticlePage.prototype.refreshNbreComments = function (currentArticle) {
        var _this = this;
        var loadingPopup = this.loadingCtrl.create({});
        loadingPopup.present();
        this.articleService.getDetailsArticle(currentArticle).then(function (data) {
            var index = _this.items.findIndex(function (i) { return i.id == currentArticle; });
            if (index != -1) {
                _this.items[index].nbreComments = data.nbreComments;
            }
            loadingPopup.dismiss();
        }, function (err) {
            loadingPopup.dismiss();
            _this.event.publish('http:errors', err);
        });
    };
    ListArticlePage.prototype.openAssociation = function (association, name) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_6__association_sheet_association_sheet__["a" /* AssociationSheetPage */], {
            id: association,
            name: name
        });
    };
    ListArticlePage.prototype.openMerchant = function (merchant, name) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_5__merchant_sheet_merchant_sheet__["a" /* MerchantSheetPage */], {
            id: merchant,
            name: name
        });
    };
    ListArticlePage.prototype.like = function (article) {
        var _this = this;
        this.articleService.like(article).then(function (data) {
            var index = _this.items.findIndex(function (i) { return i.id == article; });
            if (index != -1) {
                _this.items[index].isLiked = true;
                _this.items[index].nbLikes++;
            }
            _this.event.publish('association:refresh');
            _this.event.publish('news:refresh');
        }, function (err) {
            _this.event.publish('http:errors', err);
        });
    };
    ListArticlePage.prototype.unlike = function (article) {
        var _this = this;
        this.articleService.unlike(article).then(function (data) {
            var index = _this.items.findIndex(function (i) { return i.id == article; });
            if (index != -1) {
                _this.items[index].isLiked = false;
                _this.items[index].nbLikes--;
            }
            _this.event.publish('association:refresh');
            _this.event.publish('news:refresh');
        }, function (err) {
            _this.event.publish('http:errors', err);
        });
    };
    ListArticlePage.prototype.capitalizeData = function (data) {
        return data.charAt(0).toUpperCase() + data.slice(1);
    };
    ListArticlePage.prototype.publish = function () {
    };
    ListArticlePage.prototype.editArticle = function (article) {
        var _this = this;
        var myModal2 = this.modal.create('EditPublishPage', { "article": article, "accountType": this.account.type, "accountId": this.account.id }, { cssClass: 'style-modal' });
        myModal2.onDidDismiss(function (data) {
            _this.items = [];
            _this.page = 1;
            _this.getArticles();
            _this.appGlobals.showHeader = false;
        });
        myModal2.present();
    };
    ListArticlePage.prototype.editArticleNotParent = function (item) {
        return __awaiter(this, void 0, void 0, function () {
            var actionSheet;
            var _this = this;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.actionSheetController.create({
                            buttons: [{
                                    text: 'Cet article',
                                    icon: 'create',
                                    handler: function () {
                                        _this.editeNoteParentArticle(item, "current");
                                    }
                                }, {
                                    text: 'Cet article et les articles à venir',
                                    icon: 'ios-create',
                                    handler: function () {
                                        _this.editeNoteParentArticle(item, "currentAndNext");
                                    }
                                }, {
                                    text: 'Annuler',
                                    icon: 'close',
                                    role: 'cancel',
                                    handler: function () {
                                    }
                                }]
                        })];
                    case 1:
                        actionSheet = _a.sent();
                        return [4 /*yield*/, actionSheet.present()];
                    case 2:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    ListArticlePage.prototype.editeNoteParentArticle = function (item, mode) {
        var _this = this;
        var myModal2 = this.modal.create('PopupArtDuplicateDetailPage', { "article": item, "accountType": this.account.type, "accountId": this.account.id, "mode": mode }, { cssClass: 'style-modal' });
        myModal2.onDidDismiss(function (data) {
            if (data == true) {
                _this.items = [];
                _this.page = 1;
                _this.getArticles();
            }
        });
        myModal2.present();
    };
    ListArticlePage.prototype.linkTo = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_5__merchant_sheet_merchant_sheet__["a" /* MerchantSheetPage */]);
    };
    ListArticlePage.prototype.goBack = function () {
        this.navCtrl.pop();
    };
    ListArticlePage.prototype.detailsEvent = function (eventId, title, withComments, moderateEvent) {
        if (moderateEvent == 'wait') {
            var errorAlert = this.alertCtrl.create({
                subTitle: 'Cet événement est en attente',
                buttons: [
                    {
                        text: 'Fermer',
                        role: 'cancel',
                        handler: function () {
                        }
                    }
                ]
            });
            errorAlert.present();
        }
        else {
            this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_8__event_details_event_details__["a" /* EventDetailsPage */], {
                id: eventId,
                title: title,
                withComments: withComments
            });
        }
    };
    ListArticlePage.prototype.ShareArticle = function (item) {
        var options = {
            message: item.title + " : " + item.description,
            subject: "NOUS Ensemble",
            image: item.imageURL,
            url: item.imageURL
        };
        this.socialsharing.shareWithOptions(options).then(function (data) {
        }).catch(function (error) {
            console.log("Error from sharing" + error);
        });
    };
    ListArticlePage.prototype.doRefreshNews = function (refresher) {
        this.page = 1;
        if (this.account.type == 'association') {
            this.cacheService.loadArticles(this.page, this.items, this.articles, this.cacheLifeTime, 'association', this.account, true, null, refresher);
        }
        else if (this.account.type == 'community') {
            if (this.navParams.get('survey')) {
                this.cacheService.loadArticles(this.page, this.items, this.articles, this.cacheLifeTime, 'surveyArticle', this.account, true, null, refresher);
            }
            else {
                this.cacheService.loadArticles(this.page, this.items, this.articles, this.cacheLifeTime, 'communityArticle', this.account, true, null, refresher);
            }
        }
    };
    ListArticlePage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-list-article',template:/*ion-inline-start:"D:\celaneo\mobile\new-mobile\test\src\pages\list-article\list-article.html"*/'<!--\n\n  Generated template for the ListArticlePage page.\n\n\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n\n  Ionic pages and navigation.\n\n-->\n\n<ion-header class="mobile-header" *ngIf="appGlobals.token">\n\n    <ion-grid>\n\n        <ion-row>\n\n            <ion-col col-2 text-left>\n\n                <div class="item">\n\n                    <ion-icon name="ios-arrow-back" (click)="goBack()"></ion-icon>\n\n                </div>\n\n            </ion-col>\n\n            <ion-col col-8 text-center class="page-title">\n\n                <ion-title *ngIf="!survey">Les articles</ion-title>\n\n                <ion-title *ngIf="survey">Les sondages</ion-title>\n\n            </ion-col>\n\n            <ion-col col-2>\n\n            </ion-col>\n\n        </ion-row>\n\n    </ion-grid>\n\n</ion-header>\n\n<ion-content text-center>\n\n    <div class="div-left">\n\n        <div text-center class="back"><img src="assets/imgs/icons/1.png" (click)="goBack()"></div>\n\n    </div>\n\n    <div class="div-center">\n\n        <ion-refresher (ionRefresh)="doRefreshNews($event)">\n\n            <ion-refresher-content></ion-refresher-content>\n\n        </ion-refresher>\n\n        <ion-card *ngFor="let item of items">\n\n            <ion-card-content>\n\n                <ion-card-title text-left *ngIf="item.type == \'association\'" (click)="openAssociation(item.associationId, item.associationName)">\n\n                    {{item.associationName | capitalize}}\n\n                </ion-card-title>\n\n                <ion-card-title text-left *ngIf="item.type == \'merchant\'" (click)="openMerchant(item.merchantId, item.merchantName)">\n\n                    {{item.merchantName | capitalize}}\n\n                </ion-card-title>\n\n                <ion-card-title text-left *ngIf="item.type == \'community\'">\n\n                    {{item.associationName | capitalize}}\n\n                </ion-card-title>\n\n                <ion-card-title text-left *ngIf="item.type == \'cityhall\'"> {{item.cityhall}} </ion-card-title>\n\n                <ion-card-title text-left *ngIf="item.type == \'user\'"> {{item.userFirstname | capitalize}}\n\n                    {{item.userLastname | capitalize}}\n\n                </ion-card-title>\n\n                <ion-card-title class="display-block" text-left *ngIf="item.type == \'survey\'" (click)="detailsSurvey(item);"> {{item.community}}\n\n                </ion-card-title>\n\n\n\n                <p text-left>\n\n                    <span *ngIf="item.type != \'survey\'" (click)="detailsArticle(item);">\n\n                        {{item.createAt| amLocale:\'fr\' | amTimeAgo}}\n\n                        <span *ngIf="item.type == \'user\' && item.city">à {{item.city}}</span>\n\n                        <span *ngIf="item.type == \'community\' && item.city">à {{item.city}}</span>\n\n                        <span *ngIf="item.type == \'association\' && item.city">à {{item.city}}</span>\n\n                        <span *ngIf="item.type == \'merchant\' && item.city">à {{item.city}}</span>\n\n                        <span *ngIf="item.type == \'cityhall\' && item.city">à {{item.city}}</span>\n\n                    </span>\n\n                    <span *ngIf="item.type == \'survey\' && item.city" (click)="detailsSurvey(item);">\n\n                        {{item.createAt| amLocale:\'fr\' | amTimeAgo }}\n\n                        <span>à {{item.city}}</span>\n\n                    </span> \n\n                    <img float-end *ngIf="item.event" (click)="detailsEvent(item.event, item.title, false, item.moderateEvent)"\n\n                         class="icon-agenda move img-calendar" src="assets/imgs/icons/calendar.png" alt="NOUS-Ensemble" />\n\n                    <img float-end *ngIf="item.private" class="move lock-icons" src="assets/imgs/icons/lock.png" alt="NOUS-Ensemble" />\n\n                    <img float-end *ngIf="item.type == \'survey\'" class="move survey-icons" src="assets/imgs/icons/article.png" alt="NOUS-Ensemble" (click)="detailsSurvey(item);" />\n\n                </p>\n\n\n\n                <!--<img src="" (click)="publish()">-->\n\n                <div *ngIf="(item.imageURL || item.images || item.videoFile) && item.type != \'survey\'">\n\n                    <div *ngIf="(item.imageURL && !item.images && !item.videoFile) || (!item.imageURL && !item.images && item.videoFile) || (item.images && !item.imageURL && item.images.length == 1); else elseBlock">\n\n                        <div *ngIf="item.imageURL" (click)="detailsArticle(item);">\n\n                            <img data-src="{{item.imageURL}}">\n\n                        </div>\n\n                        <div *ngFor="let img of item.images" (click)="detailsArticle(item);">\n\n                            <img data-src="{{img.url}}">\n\n                        </div>\n\n                        <video style="width: 100%; height: 100%" *ngIf="item.videoFile !== null" controls poster="assets/img/video_default.png">\n\n                            <source [src]="item.videoFile" type="video/mp4">\n\n                        </video>\n\n                    </div>\n\n\n\n                    <ng-template #elseBlock>\n\n                        <ion-slides loop="true" pager>\n\n                            <ion-slide *ngIf="item.videoFile != null">\n\n                                <video style="width: 100%; height: 100%" controls poster="assets/img/video_default.png">\n\n                                    <source [src]="item.videoFile" type="video/mp4">\n\n                                </video>\n\n                            </ion-slide>\n\n                            <ion-slide *ngIf="item.imageURL" (click)="detailsArticle(item);">\n\n                                <img data-src="{{item.imageURL}}">\n\n                            </ion-slide>\n\n                            <ion-slide *ngFor="let img of item.images" (click)="detailsArticle(item);">\n\n                                <img data-src="{{img.url}}">\n\n                            </ion-slide>\n\n                        </ion-slides>\n\n                    </ng-template>\n\n                </div>\n\n\n\n                <div *ngIf="(item.imageURL || item.images) && item.type == \'survey\'">\n\n                    <div *ngIf="(item.imageURL && !item.images) || (item.images && !item.imageURL && item.images.length == 1); else elseBlock">\n\n                        <div *ngIf="item.imageURL" (click)="detailsSurvey(item);">\n\n                            <img data-src="{{item.imageURL}}">\n\n                        </div>\n\n                        <div *ngFor="let img of item.images" (click)="detailsSurvey(item);">\n\n                            <img data-src="{{img.url}}">\n\n                        </div>\n\n                    </div>\n\n\n\n                    <ng-template #elseBlock>\n\n                        <ion-slides loop="true" pager>\n\n                            <ion-slide *ngIf="item.imageURL" (click)="detailsSurvey(item);">\n\n                                <img data-src="{{item.imageURL}}">\n\n                            </ion-slide>\n\n                            <ion-slide *ngFor="let img of item.images" (click)="detailsSurvey(item);">\n\n                                <img data-src="{{img.url}}">\n\n                            </ion-slide>\n\n                        </ion-slides>\n\n                    </ng-template>\n\n                </div>\n\n                <ion-card-title class="title-article" text-left>\n\n                    <div class="div-title" *ngIf="item.type != \'survey\'"  (click)="detailsArticle(item);">{{item.title}}</div>\n\n                    <div class="div-title" *ngIf="item.type == \'survey\'"  (click)="detailsSurvey(item);">{{item.title}}</div>\n\n                    <ion-fab  float-end *ngIf="account.role !=\'member\' && item.type != \'survey\'">\n\n                        <button ion-fab clear>\n\n                            <ion-icon name="md-more" float-end></ion-icon>\n\n                        </button>\n\n                        <ion-fab-list side="left">\n\n                            <button ion-fab (click)="editArticleNotParent(item);" *ngIf="item.hasParent ">\n\n                                <ion-icon name="md-create"></ion-icon>\n\n                            </button>\n\n                            <button ion-fab (click)="editArticle(item);" *ngIf="!item.hasParent ">\n\n                                <ion-icon name="md-create"></ion-icon>\n\n                            </button>\n\n                          \n\n\n\n                            <button ion-fab (click)="deleteArticleNotParent(item);" *ngIf="item.hasParent ">\n\n                                <ion-icon name="md-trash"></ion-icon>\n\n                            </button> \n\n                           \n\n                            <button ion-fab (click)="deleteArticleAlert(item);" *ngIf="!item.isParent && !item.hasParent">\n\n                                <ion-icon name="md-trash"></ion-icon>\n\n                            </button> \n\n\n\n                          \n\n\n\n                            <button ion-fab>\n\n                                <ion-checkbox [(ngModel)]="item.enabled" (ionChange)="updateStatusArticle(item)"></ion-checkbox>\n\n                            </button>\n\n                        </ion-fab-list>\n\n                    </ion-fab>\n\n                </ion-card-title>\n\n\n\n                <p text-left [innerHtml]="item.description|truncate|nl2br" *ngIf="item.type != \'survey\'"  (click)="detailsArticle(item);"></p>\n\n                <p text-left [innerHtml]="item.description|truncate|nl2br" *ngIf="item.type == \'survey\'"  (click)="detailsSurvey(item);"></p>\n\n            </ion-card-content>\n\n\n\n            <ion-row class="comment-text-style news-align-center" *ngIf="item.type != \'survey\'">\n\n                <ion-col class="text-grey" *ngIf="item.type != \'community\' || (item.addComments && item.type == \'community\' ) ">\n\n                    <span  *ngIf="item.nbreComments <= 1">{{item.nbreComments}} Commentaire</span>\n\n                    <span  *ngIf="item.nbreComments > 1">{{item.nbreComments}} Commentaires</span>\n\n                </ion-col>\n\n                <ion-col>\n\n                    <img class="comment-img-style" src="assets/imgs/icons/list-divider.png">\n\n                </ion-col>\n\n                <ion-col class="text-grey">\n\n                    <span> {{item.nbLikes}} J\'aime</span>\n\n                </ion-col> \n\n            </ion-row> \n\n\n\n            <ion-row padding-bottom *ngIf="item.type != \'survey\'">\n\n                <ion-col class="no-padding " text-right *ngIf="item.type != \'community\' || (item.addComments && item.type == \'community\' ) ">\n\n                    <span class="disociate-actions" (click)="detailsArticleComment(item);" ><img class="news-comment-action dissociate-comment" src="assets/imgs/icons/comments.png"></span>\n\n                </ion-col>\n\n\n\n                <ion-col class="no-padding text-center" text-left>\n\n                    <span *ngIf="!item.isLiked" class="disociate-actions text-center" (click)="like(item.id);"><img class="news-comment-action dissociate-like"\n\n                                                                                                                    src="assets/imgs/icons/dislike.png"></span>\n\n\n\n                    <span *ngIf="item.isLiked" class="disociate-actions text-center" (click)="unlike(item.id);"> <img class="news-comment-action dissociate-like"\n\n                                                                                                                      src="assets/imgs/icons/like.png"></span>\n\n                </ion-col>\n\n\n\n                <ion-col class="no-padding " text-right>\n\n                    <span class="disociate-actions" (click)="ShareArticle(item);" ><img class="news-comment-action dissociate-share" src="assets/imgs/icons/share.png"></span>\n\n                </ion-col>\n\n\n\n            </ion-row>\n\n        </ion-card>\n\n        <ion-infinite-scroll (ionInfinite)="doInfinite($event)" threshold="100px">\n\n            <ion-infinite-scroll-content loadingSpinner="bubbles" loadingText="Charger plus...">\n\n            </ion-infinite-scroll-content>\n\n        </ion-infinite-scroll>\n\n    </div>\n\n    <div class="div-right" text-left>\n\n        <!-- <img class="publish" src="assets/imgs/icons/2.png" (click)="publish(account)"> -->\n\n    </div>\n\n</ion-content>'/*ion-inline-end:"D:\celaneo\mobile\new-mobile\test\src\pages\list-article\list-article.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_3__providers_comment_comment__["a" /* CommentProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["z" /* ToastController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_9__providers_eventsrest_eventsrest__["a" /* EventsrestProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_2__providers_article_article__["a" /* ArticleProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["a" /* ActionSheetController */],
            __WEBPACK_IMPORTED_MODULE_7__providers_globals_globals__["a" /* GlobalsProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_10__providers_cache_cache__["a" /* CacheProvider */],
            __WEBPACK_IMPORTED_MODULE_11__ionic_native_social_sharing__["a" /* SocialSharing */]])
    ], ListArticlePage);
    return ListArticlePage;
}());

//# sourceMappingURL=list-article.js.map

/***/ }),

/***/ 473:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ListEventPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_article_article__ = __webpack_require__(31);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_comment_comment__ = __webpack_require__(22);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_globals_globals__ = __webpack_require__(8);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__event_details_event_details__ = __webpack_require__(55);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__providers_eventsrest_eventsrest__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__providers_association_association__ = __webpack_require__(36);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__providers_merchant_merchant__ = __webpack_require__(39);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__ionic_native_google_analytics__ = __webpack_require__(58);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10_moment__ = __webpack_require__(1);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_10_moment__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__ionic_native_calendar__ = __webpack_require__(54);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__providers_cache_cache__ = __webpack_require__(47);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__ionic_native_social_sharing__ = __webpack_require__(46);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};














/**
 * Generated class for the ListEventPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var ListEventPage = /** @class */ (function () {
    function ListEventPage(commentService, toastCtrl, modal, eventService, appEvents, loader, myAlert, myModal, navCtrl, navParams, serviceEvent, articleService, loadingCtrl, appGlobals, alertCtrl, merchantService, associationService, calendarPlugin, actionSheetController, ga, cacheService, event, platform, socialsharing) {
        var _this = this;
        this.commentService = commentService;
        this.toastCtrl = toastCtrl;
        this.modal = modal;
        this.eventService = eventService;
        this.appEvents = appEvents;
        this.loader = loader;
        this.myAlert = myAlert;
        this.myModal = myModal;
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.serviceEvent = serviceEvent;
        this.articleService = articleService;
        this.loadingCtrl = loadingCtrl;
        this.appGlobals = appGlobals;
        this.alertCtrl = alertCtrl;
        this.merchantService = merchantService;
        this.associationService = associationService;
        this.calendarPlugin = calendarPlugin;
        this.actionSheetController = actionSheetController;
        this.ga = ga;
        this.cacheService = cacheService;
        this.event = event;
        this.platform = platform;
        this.socialsharing = socialsharing;
        this.init = false;
        this.items = [];
        this.page = 1;
        this.shownGroup = null;
        this.itemsDates = [];
        this.allowInfiniteScroll = true;
        this.cacheLifeTime = 3600;
        this.loaderShow = true;
        this.appGlobals.showHeader = false;
        this.account = navParams.get('account');
        this.eventType = "all";
        this.page = 1;
        this.items = [];
        if (this.account.type == 'association' || this.account.type == 'community') {
            this.associationId = this.account.id;
            this.accountImg = this.account.image_url;
            this.event.unsubscribe('association:agenda');
            this.event.subscribe('association:agenda', function (data) {
                _this.page = data[0];
                _this.items = data[1];
                _this.event = data[2];
                _this.itemsDates = data[3];
                _this.allowInfiniteScroll = !data[2] || data[2] && data[2].length;
            });
            this.event.unsubscribe('agendaAsso:refresh');
            this.event.subscribe('agendaAsso:refresh', function () {
                _this.page = 1;
                _this.cacheService.loadArticles(_this.page, _this.items, _this.events, _this.cacheLifeTime, 'agendaAsso', _this.account, true);
            });
            this.appEvents.unsubscribe('agenda:refresh');
            this.appEvents.subscribe('agenda:refresh', function () {
                _this.page = 1;
                _this.cacheService.loadArticles(_this.page, _this.items, _this.events, _this.cacheLifeTime, 'agenda', null, true);
            });
        }
        else if (this.account.type == 'merchant') {
            this.merchantId = this.account.id;
            this.accountImg = this.account.image_url;
        }
    }
    ListEventPage.prototype.ionViewWillEnter = function () {
        this.appGlobals.showHeader = false;
        this.items = [];
        this.page = 1;
        this.init = true;
        this.getEvents();
    };
    ListEventPage.prototype.detailsEvent = function (event, withComments) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_5__event_details_event_details__["a" /* EventDetailsPage */], {
            id: event.id,
            title: event.title,
            withComments: withComments
        });
    };
    ListEventPage.prototype.toggleGroup = function (group) {
        if (this.isGroupShown(group)) {
            this.shownGroup = null;
        }
        else {
            this.shownGroup = group;
        }
    };
    ;
    ListEventPage.prototype.isGroupShown = function (group) {
        return this.shownGroup === group;
    };
    ;
    ListEventPage.prototype.updateStatus = function (event) {
        var _this = this;
        if (event.enabled == true) {
            var loadingPopup_1 = this.loadingCtrl.create({});
            loadingPopup_1.present();
            this.eventService.activate(event.id).then(function (data) {
                _this.appEvents.publish('agendaAsso:refresh');
                _this.appEvents.publish('agenda:refresh');
                loadingPopup_1.dismiss();
                var toast = _this.toastCtrl.create({
                    message: 'Evenement activé avec succès',
                    duration: 3000,
                    position: 'top'
                });
                toast.present();
            }, function (err) {
                loadingPopup_1.dismiss();
                _this.appEvents.publish('http:errors', err);
            });
        }
        else {
            var loadingPopup_2 = this.loadingCtrl.create({});
            loadingPopup_2.present();
            this.eventService.desactivate(event.id).then(function (data) {
                _this.appEvents.publish('agendaAsso:refresh');
                _this.appEvents.publish('agenda:refresh');
                loadingPopup_2.dismiss();
                var toast = _this.toastCtrl.create({
                    message: 'evenement désactiver avec succès',
                    duration: 3000,
                    position: 'top'
                });
                toast.present();
            }, function (err) {
                loadingPopup_2.dismiss();
                _this.appEvents.publish('http:errors', err);
            });
        }
    };
    ListEventPage.prototype.deleteEventAlert = function (event) {
        var _this = this;
        var alert = this.alertCtrl.create({
            title: 'Supprimer événement',
            subTitle: 'Voulez-vous vraiment supprimer cet événement ?',
            buttons: [
                {
                    text: 'Annuler',
                    role: 'cancel',
                    handler: function () {
                    }
                },
                {
                    text: 'OK',
                    handler: function (data) {
                        _this.deleteEvent(event, "current");
                    }
                }
            ]
        });
        alert.present();
    };
    ListEventPage.prototype.deleteEventAlertNotParent = function (event, model) {
        var _this = this;
        var alert = this.alertCtrl.create({
            title: 'Supprimer événement',
            subTitle: 'Voulez-vous vraiment supprimer cet événement et les evenements à venir ?',
            buttons: [
                {
                    text: 'Annuler',
                    role: 'cancel',
                    handler: function () {
                    }
                },
                {
                    text: 'OK',
                    handler: function (data) {
                        _this.deleteEvent(event, model);
                    }
                }
            ]
        });
        alert.present();
    };
    ListEventPage.prototype.supprimerNotParent = function (item) {
        return __awaiter(this, void 0, void 0, function () {
            var actionSheet;
            var _this = this;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.actionSheetController.create({
                            buttons: [{
                                    text: 'Cet événement',
                                    icon: 'ios-backspace',
                                    handler: function () {
                                        _this.deleteEventAlert(item);
                                    }
                                }, {
                                    text: 'Cet événement et les événements à venir',
                                    icon: 'trash',
                                    handler: function () {
                                        _this.deleteEventAlertNotParent(item, "currentAndNext");
                                    }
                                }, {
                                    text: 'Annuler',
                                    icon: 'close',
                                    role: 'cancel',
                                    handler: function () {
                                    }
                                }]
                        })];
                    case 1:
                        actionSheet = _a.sent();
                        return [4 /*yield*/, actionSheet.present()];
                    case 2:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    ListEventPage.prototype.deleteEvent = function (event, model) {
        var _this = this;
        var loadingPopup = this.loadingCtrl.create({});
        loadingPopup.present();
        this.eventService.delete(event.id, model).then(function (data) {
            _this.appEvents.publish('agendaAsso:refresh');
            _this.appEvents.publish('agenda:refresh');
            loadingPopup.dismiss();
            var index = _this.items.indexOf(event);
            if (index > -1) {
                _this.items.splice(index, 1);
            }
            var toast = _this.toastCtrl.create({
                message: 'Evénement supprimé avec succès.',
                duration: 3000,
                position: 'top'
            });
            toast.present();
        }, function (err) {
            loadingPopup.dismiss();
            _this.appEvents.publish('http:errors', err);
        });
    };
    ListEventPage.prototype.editeNotParent = function (item) {
        return __awaiter(this, void 0, void 0, function () {
            var actionSheet;
            var _this = this;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.actionSheetController.create({
                            buttons: [{
                                    text: 'Cet événement',
                                    icon: 'create',
                                    handler: function () {
                                        _this.editeEventDup(item, "current");
                                    }
                                }, {
                                    text: 'Cet événement et les événements à venir',
                                    icon: 'ios-create',
                                    handler: function () {
                                        _this.editeEventDup(item, "currentAndNext");
                                    }
                                }, {
                                    text: 'Annuler',
                                    icon: 'close',
                                    role: 'cancel',
                                    handler: function () {
                                    }
                                }]
                        })];
                    case 1:
                        actionSheet = _a.sent();
                        return [4 /*yield*/, actionSheet.present()];
                    case 2:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    ListEventPage.prototype.editeEventDup = function (item, mode) {
        var _this = this;
        var myModal2 = this.myModal.create('PopupEvenDuplicateDetailPage', { "event": item, "accountType": localStorage.getItem("account_type"), mode: mode }, { cssClass: 'style-modal' });
        myModal2.onDidDismiss(function (data) {
            _this.items = [];
            _this.page = 1;
            _this.appEvents.publish('agendaAsso:refresh');
            _this.appEvents.publish('agenda:refresh');
            _this.appGlobals.showHeader = false;
        });
        myModal2.present();
    };
    ListEventPage.prototype.getEvents = function () {
        if (this.account.type == 'association') {
            this.cacheService.loadArticles(this.page, this.items, this.events, this.cacheLifeTime, 'agendaAsso', this.account);
        }
        else if (this.account.type == 'community') {
            this.cacheService.loadArticles(this.page, this.items, this.events, this.cacheLifeTime, 'agendaCommu', this.account);
        }
    };
    ListEventPage.prototype.loadEvents = function () {
        var _this = this;
        var loadingPopup = this.loadingCtrl.create({});
        loadingPopup.present();
        if (this.account.type == 'association') {
            this.associationService.getEvents(this.associationId, this.page).then(function (data) {
                _this.events = data;
                for (var _i = 0, _a = _this.events; _i < _a.length; _i++) {
                    var event_1 = _a[_i];
                    _this.items.push(event_1);
                }
                loadingPopup.dismiss();
            });
        }
        else {
            this.merchantService.getEvents(this.merchantId, this.page).then(function (data) {
                _this.events = data;
                for (var _i = 0, _a = _this.events; _i < _a.length; _i++) {
                    var event_2 = _a[_i];
                    _this.items.push(event_2);
                }
                loadingPopup.dismiss();
            });
        }
    };
    ListEventPage.prototype.doInfinite = function (infiniteScroll) {
        var _this = this;
        if (this.init) {
            this.init = false;
            infiniteScroll.complete();
        }
        else if (this.allowInfiniteScroll) {
            this.page += 1;
            if (this.account.type == 'association') {
                this.cacheService.loadArticles(this.page, this.items, this.events, this.cacheLifeTime, 'agendaAsso', this.account, false, infiniteScroll);
            }
            else if (this.account.type == 'community') {
                this.cacheService.loadArticles(this.page, this.items, this.events, this.cacheLifeTime, 'agendaCommu', this.account, false, infiniteScroll);
            }
            else if (this.account.type == 'merchant') {
                this.associationService.getEventsFilter(this.associationId, this.eventType, this.page).then(function (data) {
                    _this.events = data;
                    for (var _i = 0, _a = _this.events; _i < _a.length; _i++) {
                        var event_3 = _a[_i];
                        _this.items.push(event_3);
                    }
                    infiniteScroll.complete();
                }, function (err) {
                    infiniteScroll.complete();
                });
            }
        }
        else {
            infiniteScroll.complete();
        }
    };
    ListEventPage.prototype.comments = function (event, withComments) {
        var _this = this;
        var loadingPopup = this.loadingCtrl.create({});
        loadingPopup.present();
        return new Promise(function (resolve) {
            _this.commentService.markCommentsEventAsRead(event.id).then(function (data) {
                loadingPopup.dismiss();
                _this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_5__event_details_event_details__["a" /* EventDetailsPage */], {
                    id: event.id,
                    title: event.title,
                    withComments: withComments
                });
            }, function (err) {
                loadingPopup.dismiss();
                _this.appEvents.publish('http:errors', err);
            });
        });
    };
    ListEventPage.prototype.HandlerTypeEvent = function ($event) {
        this.items = [];
        this.page = 1;
        this.eventType = $event;
        if ($event == "all")
            this.getEvents();
        else
            this.getEventsPersonalized($event);
    };
    ListEventPage.prototype.getEventsPersonalized = function (eventType) {
        var _this = this;
        var loadingPopup = this.loadingCtrl.create({});
        loadingPopup.present();
        if (eventType == "personalized")
            eventType = 1;
        else
            eventType = 0;
        if (this.account.type == 'association') {
            this.associationService.getEventsFilter(this.associationId, eventType, this.page).then(function (data) {
                _this.events = data;
                for (var _i = 0, _a = _this.events; _i < _a.length; _i++) {
                    var event_4 = _a[_i];
                    _this.items.push(event_4);
                }
                loadingPopup.dismiss();
            }, function (err) {
                _this.appEvents.publish('http:errors', err);
            });
        }
        else {
            this.merchantService.getEventsFilter(this.merchantId, eventType, this.page).then(function (data) {
                _this.events = data;
                for (var _i = 0, _a = _this.events; _i < _a.length; _i++) {
                    var event_5 = _a[_i];
                    _this.items.push(event_5);
                }
                loadingPopup.dismiss();
            }, function (err) {
                _this.appEvents.publish('http:errors', err);
            });
        }
    };
    ListEventPage.prototype.like = function (event) {
        var _this = this;
        var label = 'participation-' + event.id;
        this.appEvents.publish("googleAnalytics", label);
        var loadingPopup = this.loadingCtrl.create({});
        loadingPopup.present();
        var result;
        this.eventService.takePart(event.id).then(function (data) {
            loadingPopup.dismiss();
            result = data;
            if (result.success) {
                event.isLiked = true;
                event.nbParticipants++;
                var addToCalendarAlert = _this.alertCtrl.create({
                    title: '',
                    subTitle: 'Voulez-vous ajouter cet évènement à votre agenda?',
                    buttons: [
                        {
                            text: 'Non',
                            role: 'cancel',
                            handler: function () {
                                _this.showNeedVolunteerPopup(event);
                            }
                        },
                        {
                            text: 'Oui',
                            handler: function () {
                                var start = __WEBPACK_IMPORTED_MODULE_10_moment__(event.startAt).toDate();
                                var end = __WEBPACK_IMPORTED_MODULE_10_moment__(event.endAt).toDate();
                                _this.calendarPlugin.createEvent(event.title, event.place, event.description, start, end).then(function (msg) { }, function (err) { });
                                _this.showNeedVolunteerPopup(event);
                            }
                        }
                    ]
                });
                addToCalendarAlert.present();
            }
        }, function (err) {
            loadingPopup.dismiss();
            _this.appEvents.publish('http:errors', err);
        });
    };
    ListEventPage.prototype.unlike = function (event) {
        var _this = this;
        var label = 'cancelParticipation-' + event.id;
        this.appEvents.publish("googleAnalytics", label);
        var loadingPopup = this.loadingCtrl.create({});
        var result;
        loadingPopup.present();
        this.eventService.cancelTakePart(event.id).then(function (data) {
            loadingPopup.dismiss();
            result = data;
            var start = __WEBPACK_IMPORTED_MODULE_10_moment__(event.startAt).toDate();
            var end = __WEBPACK_IMPORTED_MODULE_10_moment__(event.endAt).toDate();
            _this.calendarPlugin.deleteEvent(event.title, event.place, '', start, end).then(function (msg) { }, function (err) { });
            if (result.success) {
                var successAlert = _this.alertCtrl.create({
                    title: 'Succès,',
                    subTitle: 'Votre annulation a été bien enregistrée.',
                    buttons: [
                        {
                            text: 'OK',
                            handler: function () {
                                event.isLiked = false;
                                event.nbParticipants--;
                            }
                        }
                    ]
                });
                successAlert.present();
            }
        }, function (err) {
            loadingPopup.dismiss();
            _this.appEvents.publish('http:errors', err);
        });
    };
    ListEventPage.prototype.showNeedVolunteerPopup = function (event) {
        var _this = this;
        if (event.needVolunteer) {
            var benevoleAlert = this.myAlert.create({
                title: '',
                subTitle: 'Voulez-vous être bénévole à cet évènement ?',
                buttons: [
                    {
                        text: 'Non',
                        role: 'cancel',
                        handler: function () {
                        }
                    },
                    {
                        text: 'Oui',
                        handler: function () {
                            var label = 'volunteer-' + event.id;
                            _this.appEvents.publish("googleAnalytics", label);
                            var modalVolunteers = _this.myModal.create('ParticpatelaststepPage', { "id": event.id }, { cssClass: 'style-modal' });
                            modalVolunteers.present();
                        }
                    }
                ]
            });
            benevoleAlert.present();
        }
    };
    ListEventPage.prototype.cancelParticipation = function (event) {
        var _this = this;
        var result;
        this.eventService.cancelTakePart(event.id).then(function (data) {
            result = data;
            var start = __WEBPACK_IMPORTED_MODULE_10_moment__(event.startAt).toDate();
            var end = __WEBPACK_IMPORTED_MODULE_10_moment__(event.endAt).toDate();
            _this.calendarPlugin.deleteEvent(event.title, event.place, '', start, end).then(function (msg) {
            }, function (err) {
            });
            if (result.success) {
                for (var _i = 0, _a = _this.items; _i < _a.length; _i++) {
                    var ev = _a[_i];
                    if (ev.id == event.id) {
                        ev.isParticipated = false;
                        ev.nbParticipants--;
                    }
                }
                var myModal2 = _this.myModal.create('PopupPage', { "message": "<p>Votre annulation a été bien enregistrée.</p>" }, { cssClass: 'message-modal' });
                myModal2.onDidDismiss(function () {
                });
                myModal2.present();
            }
        }, function (err) {
            _this.appEvents.publish('http:errors', err);
        });
    };
    ListEventPage.prototype.showHideNeedCarpooling = function (event) {
        if (event['alreadyPool'] == 0) {
            this.appGlobals.currentEvent = event;
            this.appGlobals.checkedCarpool = null;
            this.appGlobals.showNeedCarpooling = !this.appGlobals.showNeedCarpooling;
        }
        else {
            var alert_1 = this.myAlert.create({
                title: 'Demande existante',
                subTitle: 'Vous avez déjà fait une demande de covoiturage pour cet évènement.',
                buttons: ['fermer']
            });
            alert_1.present();
        }
    };
    ListEventPage.prototype.showHidePutAgenda = function (event) {
        var _this = this;
        if (!this.appGlobals.showPutAgenda) {
            this.appGlobals.showPutAgenda = true;
        }
        else {
            this.appGlobals.showPutAgenda = false;
        }
        this.appGlobals.currentEvent = event;
        var result;
        this.eventService.takePart(event.id).then(function (data) {
            result = data;
            if (result.success) {
                for (var _i = 0, _a = _this.items; _i < _a.length; _i++) {
                    var ev = _a[_i];
                    if (ev.id == event.id) {
                        ev.isParticipated = true;
                        ev.nbParticipants++;
                    }
                }
            }
        }, function (err) {
            _this.appEvents.publish('http:errors', err);
        });
    };
    ListEventPage.prototype.showAgendaBenevole = function (event) {
        this.appGlobals.currentEventId = event.id;
        if (event.isVolunteer) {
            var myModal2 = this.myModal.create('PopupPage', { "message": "<p>Vous êtes déjà  bénévole  à cet événement.</p>" }, { cssClass: 'message-modal' });
            myModal2.onDidDismiss(function () {
            });
            myModal2.present();
        }
        else {
            if (!this.appGlobals.showBenevoleAgenda) {
                this.appGlobals.showBenevoleAgenda = true;
            }
            else {
                this.appGlobals.showBenevoleAgenda = false;
            }
            for (var _i = 0, _a = this.items; _i < _a.length; _i++) {
                var ev = _a[_i];
                if (ev.id == event.id) {
                    ev.isVolunteer = true;
                    ev.nbVolunteers++;
                }
            }
        }
    };
    ListEventPage.prototype.showHideProposeCarpooling = function (event) {
        if (event['alreadyAddPool'] == 0) {
            if (!this.appGlobals.showproposeCarpooling) {
                this.appGlobals.showproposeCarpooling = true;
                this.appGlobals.currentEvent = event;
            }
            else {
                this.appGlobals.showproposeCarpooling = false;
            }
        }
        else {
            var alert_2 = this.myAlert.create({
                title: 'Demande existante',
                subTitle: 'Vous avez déjà proposé du covoiturage pour cet évènement.',
                buttons: ['fermer']
            });
            alert_2.present();
        }
    };
    ListEventPage.prototype.goBack = function () {
        this.navCtrl.pop();
    };
    ListEventPage.prototype.editEvent = function (event) {
        var _this = this;
        var myModal2 = this.modal.create('EditEventPage', { "event": event, "accountType": this.account.type }, { cssClass: 'style-modal' });
        myModal2.onDidDismiss(function (data) {
            _this.items = [];
            _this.page = 1;
            _this.appEvents.publish('agendaAsso:refresh');
            _this.appEvents.publish('agenda:refresh');
            _this.appGlobals.showHeader = false;
        });
        myModal2.present();
    };
    ListEventPage.prototype.doRefreshAgenda = function (refresher) {
        this.items = [];
        this.page = 1;
        this.loaderShow = true;
        if (this.account.type == 'association') {
            this.cacheService.loadArticles(this.page, this.items, this.events, this.cacheLifeTime, 'agendaAsso', this.account, true, null, refresher);
        }
        else if (this.account.type == 'community') {
            this.cacheService.loadArticles(this.page, this.items, this.events, this.cacheLifeTime, 'agendaCommu', this.account, true, null, refresher);
        }
    };
    ListEventPage.prototype.ShareArticle = function (item) {
        var options = {
            message: item.title + " : " + item.description,
            subject: "NOUS Ensemble",
            image: item.imageURL,
            url: item.imageURL
        };
        if (this.platform.is('cordova') || this.platform.is('core')) {
            this.socialsharing.shareWithOptions(options).then(function (data) {
            }).catch(function (error) {
                console.log("Error from sharing" + error);
            });
        }
    };
    ListEventPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-list-event',template:/*ion-inline-start:"D:\celaneo\mobile\new-mobile\test\src\pages\list-event\list-event.html"*/'<!--\n\n  Generated template for the ListEventPage page.\n\n\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n\n  Ionic pages and navigation.\n\n-->\n\n<ion-header class="mobile-header" *ngIf="appGlobals.token">\n\n    <ion-grid>\n\n        <ion-row>\n\n            <ion-col col-2 text-left>\n\n                <div class="item">\n\n                    <ion-icon name="ios-arrow-back" (click)="goBack()"></ion-icon>\n\n                </div>\n\n            </ion-col>\n\n            <ion-col col-8 text-center class="page-title">\n\n                <ion-icon name="md-calendar"></ion-icon>\n\n                <ion-title>Les événements</ion-title>\n\n            </ion-col>\n\n            <ion-col col-2>\n\n                <div class="item" text-right>\n\n\n\n                </div>\n\n            </ion-col>\n\n        </ion-row>\n\n    </ion-grid>\n\n</ion-header>\n\n<ion-content>\n\n    <div class="div-left">\n\n        <div text-right class="back"><img src="assets/imgs/icons/1.png" (click)="goBack()"></div>\n\n    </div>\n\n    <div class="div-center">\n\n        <ion-refresher (ionRefresh)="doRefreshAgenda($event)">\n\n            <ion-refresher-content></ion-refresher-content>\n\n        </ion-refresher>\n\n        <ion-grid class="grid-bottom">\n\n            <ion-row>\n\n                <div class="agenda-container" *ngFor="let itemDate of itemsDates; let idx = index">\n\n                    <ion-card>\n\n                        <ion-card-header>\n\n                            <strong class="title-date">{{itemDate.key| amLocale:\'fr\' | amDateFormat:\' Do MMMM\'}}</strong>\n\n                            <p class="title-day" text-capitalize> {{itemDate.key| amLocale:\'fr\' | amDateFormat:\'dddd\'}}\n\n                            </p>\n\n                        </ion-card-header>\n\n                        <ion-card-content *ngFor="let item of itemDate.value">\n\n                            <!--<button (click)="editEvent(item);">\n\n                                <ion-icon name="md-create"></ion-icon>\n\n                            </button>-->\n\n\n\n                            <ion-row class="event-item" >\n\n                                <ion-col col-3 (click)="detailsEvent(item, false)">\n\n                                    <span class="start-hour">{{item.startAt| amLocale:\'fr\' |\n\n                                        amDateFormat:\'HH\'}}h{{item.startAt| amLocale:\'fr\' | amDateFormat:\'mm\'}}</span><br>\n\n                                    <img *ngIf="item.private" float-end class="move lock-icons" src="assets/imgs/icons/lock.png" alt="NOUS-Ensemble" />\n\n\n\n                                </ion-col>\n\n                                <ion-col col-6 (click)="detailsEvent(item, false)">\n\n                                    <div class="bottom-margin-8"><strong class="event-title">{{item.title}}</strong></div>\n\n                                    <p text-capitalize class=\'AssoTitle\'>\n\n                                        {{item.creatorName}}\n\n                                    </p>\n\n                                    <strong>à {{item.cityName}}</strong>\n\n                                </ion-col>\n\n                                <ion-col col-3 >\n\n                                    <div *ngIf="(item.imageURL && !item.images) || (item.images && !item.imageURL && item.images.length == 1); else elseBlock"\n\n                                         class="home-card-slides img-div" (click)="detailsEvent(item, false)">\n\n                                        <div class="img-div" *ngIf="item.imageURL">\n\n                                            <img class="img-div" data-src="{{item.imageURL}}" imageViewer>\n\n                                        </div>\n\n                                        <div class="img-div" *ngFor="let img of item.images">\n\n                                            <img class="img-div" data-src="{{img.url}}" imageViewer>\n\n                                        </div>\n\n                                    </div>\n\n                                    <ng-template #elseBlock>\n\n                                        <ion-slides class="home-card-slides" autoplay="5000" loop="true" pager>\n\n                                            <ion-slide class="img-div" *ngIf="item.imageURL">\n\n                                                <img class="img-div" data-src="{{item.imageURL}}" imageViewer>\n\n                                            </ion-slide>\n\n                                            <ion-slide class="img-div" *ngFor="let img of item.images">\n\n                                                <img class="img-div" data-src="{{img.url}}" imageViewer>\n\n                                            </ion-slide>\n\n                                        </ion-slides>\n\n                                    </ng-template>\n\n                                    <ion-fab  float-end *ngIf="account.role !=\'member\' && item.type != \'survey\'">\n\n                                        <button ion-fab clear>\n\n                                            <ion-icon name="md-more" float-end></ion-icon>\n\n                                        </button>\n\n                                        <ion-fab-list side="left">\n\n                                            \n\n                                            <button ion-fab (click)="editEvent(item);" *ngIf="!item.hasParent">\n\n                                                <ion-icon name="md-create"></ion-icon>\n\n                                            </button>\n\n                                            <button ion-fab (click)="editeNotParent(item);" *ngIf="item.hasParent">\n\n                                                <ion-icon name="md-create"></ion-icon>\n\n                                            </button>\n\n\n\n\n\n                                            \n\n                                            <button ion-fab (click)="deleteEventAlert(item);" *ngIf="!item.isParent && !item.hasParent">\n\n                                                <ion-icon name="md-trash"></ion-icon>\n\n                                            </button>\n\n\n\n                                            <button ion-fab (click)="supprimerNotParent(item);" *ngIf="item.hasParent">\n\n                                                <ion-icon name="md-trash"></ion-icon>\n\n                                            </button>\n\n                                            <button ion-fab>\n\n                                                <ion-checkbox [(ngModel)]="item.enabled" (ionChange)="updateStatus(item)"></ion-checkbox>\n\n                                            </button>\n\n                                        \n\n                                        </ion-fab-list>\n\n                                    </ion-fab>\n\n                                </ion-col>\n\n                            </ion-row>\n\n                            <ion-col col-12 text-center>\n\n                                <p text-center>\n\n                                <span style="display: -webkit-inline-box;" text-center="">\n\n                                <p class="numberParagraph">{{item.needCarpool.length}} covoiturages </p><img alt="NOUS-Ensemble" class="dot-icon" src="assets/imgs/icons/dot.png">\n\n                                <p class="numberParagraph">{{item.nbParticipants}} participants</p> <img alt="NOUS-Ensemble" class="dot-icon" src="assets/imgs/icons/dot.png">\n\n                                <p class="numberParagraph">{{item.nbCarpoolUsers}} transportés</p>\n\n                                    </span>\n\n                                </p>\n\n\n\n                            </ion-col>\n\n                            <ion-row text-center style="margin-left: 9%;">\n\n                                <ion-col col-2 (click)=\'showHideProposeCarpooling(item)\'  style="margin-top: 2%;">\n\n                                    <img alt="NOUS-Ensemble" class="agenda-icons icons-car" src="assets/imgs/icons/car.png">\n\n                                </ion-col>\n\n                                <ion-col col-2 (click)=\'showHideNeedCarpooling(item)\'>\n\n                                    <img alt="NOUS-Ensemble" class="agenda-icons" src="assets/imgs/icons/covoit.png">\n\n                                </ion-col>\n\n\n\n                                <ion-col col-3 (click)=\'showAgendaBenevole(item)\'>\n\n                                    <img alt="NOUS-Ensemble" class="agenda-icons" src="assets/imgs/icons/benevole.png">\n\n                                </ion-col>\n\n                                <ion-col col-2>\n\n                                    <img alt="NOUS-Ensemble" class="agenda-icons icons-stars" *ngIf="item.isParticipated" (click)="cancelParticipation(item)"\n\n                                         src="assets/imgs/icons/star-full.png">\n\n                                    <img alt="NOUS-Ensemble" class="agenda-icons icons-stars" *ngIf="!item.isParticipated" (click)="showHidePutAgenda(item)"\n\n                                         src="assets/imgs/icons/star-empty.png">\n\n                                </ion-col>\n\n                                <ion-col col-2 (click)="ShareArticle(item);" style="margin-top: 2%;">\n\n                                    <img alt="NOUS-Ensemble" class="agenda-icons" src="assets/imgs/icons/share.png">\n\n                                </ion-col>\n\n                            </ion-row>\n\n\n\n  \n\n\n\n                        </ion-card-content>\n\n                    </ion-card>\n\n\n\n\n\n                </div>\n\n                <ion-col col-12 text-center *ngIf="itemsDates.length == 0">\n\n                    <p text-center class="no-result"> Pas de résultat correspondant à votre filtre.</p>\n\n                </ion-col>\n\n\n\n                <ion-infinite-scroll (ionInfinite)="doInfinite($event)">\n\n                    <ion-infinite-scroll-content></ion-infinite-scroll-content>\n\n                </ion-infinite-scroll>\n\n            </ion-row>\n\n        </ion-grid>\n\n\n\n    </div>\n\n    <div class="div-right" text-center>\n\n\n\n    </div>\n\n</ion-content>'/*ion-inline-end:"D:\celaneo\mobile\new-mobile\test\src\pages\list-event\list-event.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_3__providers_comment_comment__["a" /* CommentProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["z" /* ToastController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_6__providers_eventsrest_eventsrest__["a" /* EventsrestProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_6__providers_eventsrest_eventsrest__["a" /* EventsrestProvider */],
            __WEBPACK_IMPORTED_MODULE_2__providers_article_article__["a" /* ArticleProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_4__providers_globals_globals__["a" /* GlobalsProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_8__providers_merchant_merchant__["a" /* MerchantProvider */],
            __WEBPACK_IMPORTED_MODULE_7__providers_association_association__["a" /* AssociationProvider */],
            __WEBPACK_IMPORTED_MODULE_11__ionic_native_calendar__["a" /* Calendar */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["a" /* ActionSheetController */],
            __WEBPACK_IMPORTED_MODULE_9__ionic_native_google_analytics__["a" /* GoogleAnalytics */],
            __WEBPACK_IMPORTED_MODULE_12__providers_cache_cache__["a" /* CacheProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["x" /* Platform */],
            __WEBPACK_IMPORTED_MODULE_13__ionic_native_social_sharing__["a" /* SocialSharing */]])
    ], ListEventPage);
    return ListEventPage;
}());

//# sourceMappingURL=list-event.js.map

/***/ }),

/***/ 474:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ParameterAssoMerchPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_globals_globals__ = __webpack_require__(8);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__pages_edit_association_edit_association__ = __webpack_require__(475);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__pages_edit_merchant_edit_merchant__ = __webpack_require__(476);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__pages_admin_list_admin_list__ = __webpack_require__(477);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__providers_eventsrest_eventsrest__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__edit_community_edit_community__ = __webpack_require__(479);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};








/**
 * Generated class for the ParameterAssoMerchPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var ParameterAssoMerchPage = /** @class */ (function () {
    function ParameterAssoMerchPage(navCtrl, navParams, serviceEvent, loader, myAlert, appEvents, myModal, appGlobals) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.serviceEvent = serviceEvent;
        this.loader = loader;
        this.myAlert = myAlert;
        this.appEvents = appEvents;
        this.myModal = myModal;
        this.appGlobals = appGlobals;
        this.account = navParams.get('account');
        this.appGlobals.currentPageid = "mySpace";
        this.appGlobals.showHeader = false;
        this.appGlobals.showFooter = true;
    }
    ParameterAssoMerchPage.prototype.ionViewWillEnter = function () {
        this.appGlobals.currentPageid = "mySpace";
        this.appGlobals.showHeader = false;
        this.appGlobals.showFooter = true;
        this.appEvents.publish('updateFooter');
    };
    ParameterAssoMerchPage.prototype.ionViewWillLeave = function () {
        this.appGlobals.showHeader = true;
        this.appGlobals.showFooter = true;
    };
    ParameterAssoMerchPage.prototype.goBack = function () {
        this.navCtrl.pop();
    };
    ParameterAssoMerchPage.prototype.information = function () {
        if (this.account.type == "association") {
            this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_3__pages_edit_association_edit_association__["a" /* EditAssociationPage */], {
                accountId: this.account.id,
                account: this.account
            });
        }
        else if (this.account.type == "community") {
            this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_7__edit_community_edit_community__["a" /* EditCommunityPage */], {
                accountId: this.account.id,
                account: this.account
            });
        }
        else {
            this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_4__pages_edit_merchant_edit_merchant__["a" /* EditMerchantPage */], {
                accountId: this.account.id,
                account: this.account
            });
        }
    };
    ParameterAssoMerchPage.prototype.adminList = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_5__pages_admin_list_admin_list__["a" /* AdminListPage */], {
            account: this.account
        });
    };
    ParameterAssoMerchPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-parameter-asso-merch',template:/*ion-inline-start:"D:\celaneo\mobile\new-mobile\test\src\pages\parameter-asso-merch\parameter-asso-merch.html"*/'<!--\n\n  Generated template for the ParameterAssoMerchPage page.\n\n\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n\n  Ionic pages and navigation.\n\n-->\n\n<ion-header class="mobile-header" *ngIf="appGlobals.token">\n\n    <ion-grid>\n\n        <ion-row>\n\n            <ion-col col-2 text-left>\n\n                <div class="item">\n\n                    <ion-icon name="ios-arrow-back" (click)="goBack()"></ion-icon>\n\n                </div>\n\n            </ion-col>\n\n            <ion-col col-8 text-center class="page-title">\n\n                <ion-title>Paramètres</ion-title>\n\n            </ion-col>\n\n            <ion-col col-2>\n\n                <div class="item" text-right>\n\n\n\n                </div>\n\n            </ion-col>\n\n        </ion-row>\n\n    </ion-grid>\n\n</ion-header>\n\n\n\n\n\n<ion-content>\n\n    <div class="div-left">\n\n        <div text-right class="back"><img src="assets/imgs/icons/1.png" (click)="goBack()"></div>\n\n    </div>\n\n    <div class="div-center">\n\n        <ion-grid>\n\n\n\n            <ion-row>\n\n                <ion-col col-12 text-center>\n\n                    <div class="div-admin admin-margin-top">\n\n                        <span class="admin">Admin</span>\n\n                        <ion-icon name="md-swap"></ion-icon>\n\n                    </div>\n\n                </ion-col>\n\n                <ion-col col-12 text-center>\n\n                    <button ion-button color="white-color" class="button-white button-admin" text-center icon-start\n\n                        (click)="information()">\n\n                        <div>\n\n                            <img class="img-modify" src="assets/imgs/icons/modify.png">\n\n                            <div class="text-admin">Modifier le<br/>profil</div>\n\n                        </div>\n\n                    </button>\n\n                </ion-col>\n\n                <ion-col col-12 text-center>\n\n                    <button (click)="adminList()" ion-button color="white-color" class="button-white button-admin"\n\n                        text-center icon-start>\n\n                        <div><img class="img-bene" src="assets/imgs/icons/adminShow.png">\n\n                            <div class="text-admin">Admin</div>\n\n                        </div>\n\n                    </button>\n\n                </ion-col>\n\n\n\n            </ion-row>\n\n        </ion-grid>\n\n\n\n    </div>\n\n    <div class="div-right"></div>\n\n</ion-content>'/*ion-inline-end:"D:\celaneo\mobile\new-mobile\test\src\pages\parameter-asso-merch\parameter-asso-merch.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_6__providers_eventsrest_eventsrest__["a" /* EventsrestProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_2__providers_globals_globals__["a" /* GlobalsProvider */]])
    ], ParameterAssoMerchPage);
    return ParameterAssoMerchPage;
}());

//# sourceMappingURL=parameter-asso-merch.js.map

/***/ }),

/***/ 475:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return EditAssociationPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_association_association__ = __webpack_require__(36);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_user_user__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__ionic_native_camera__ = __webpack_require__(29);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__providers_globals_globals__ = __webpack_require__(8);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__providers_app_app__ = __webpack_require__(38);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__pages_change_su_admin_change_su_admin__ = __webpack_require__(200);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__pages_delete_account_delete_account__ = __webpack_require__(201);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__providers_eventsrest_eventsrest__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__providers_comment_comment__ = __webpack_require__(22);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};











/**
 * Generated class for the EditAssociationPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var EditAssociationPage = /** @class */ (function () {
    function EditAssociationPage(event, navCtrl, navParams, userService, service, loader, myAlert, myModal, camera, serviceEvent, commentService, actionSheetCtrl, platform, alertCtrl, loadingCtrl, appGlobals, appService) {
        this.event = event;
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.userService = userService;
        this.service = service;
        this.loader = loader;
        this.myAlert = myAlert;
        this.myModal = myModal;
        this.camera = camera;
        this.serviceEvent = serviceEvent;
        this.commentService = commentService;
        this.actionSheetCtrl = actionSheetCtrl;
        this.platform = platform;
        this.alertCtrl = alertCtrl;
        this.loadingCtrl = loadingCtrl;
        this.appGlobals = appGlobals;
        this.appService = appService;
        this.lastImage = null;
        this.categories = [];
        this.check = false;
        this.check2 = false;
        this.associationPhoto = null;
        this.toDelete = false;
        this.submited = false;
        this.validateEmail = false;
        this.phoneRegexp = /^(33|0)\d{9}$/;
        this.myDate = new Date().toISOString();
        this.today = new Date().toISOString();
        this.userImg = localStorage.getItem("user_image");
        this.association = navParams.get('account');
        for (var _i = 0, _a = this.association['community']['categories']; _i < _a.length; _i++) {
            var category = _a[_i];
            if (category.type == "Activité groupe / association") {
                this.categories.push(category);
            }
        }
        this.associationId = navParams.get('accountId');
        this.selectedCategory = this.association.category.id ? this.association.category.id : this.association.category;
        this.selectedCity = this.association.city.id ? this.association.city.id : this.association.city;
        this.association_photo = this.association.image_url;
        this.cities = this.appGlobals.allCities;
    }
    EditAssociationPage.prototype.ionViewWillEnter = function () {
        this.appGlobals.showHeader = false;
        this.event.publish('updateFooter');
    };
    EditAssociationPage.prototype.ionViewWillLeave = function () {
        this.appGlobals.showHeader = true;
    };
    EditAssociationPage.prototype.editAssociationForm = function (errorValidation) {
        var _this = this;
        var loadingPopup = this.loadingCtrl.create({});
        // Show the popup
        loadingPopup.present();
        this.association.category = this.selectedCategory;
        this.association.city = this.selectedCity;
        this.submited = true;
        if (!errorValidation) {
            if (this.association_photo) {
                if (this.association.image_url == this.association_photo.image_url) {
                    this.association.image_url = null;
                }
            }
            this.service.put(this.association, this.associationPhoto, this.toDelete).then(function (data) {
                for (var key in _this.appGlobals.adminAssociations) {
                    var value = _this.appGlobals.adminAssociations[key];
                    if (value.id == data['association'].id) {
                        _this.appGlobals.adminAssociations[key] = data['association'];
                    }
                }
                _this.association = data['association'];
                _this.selectedCategory = _this.association.category.id;
                _this.selectedCity = _this.association.city.id;
                _this.association_photo = _this.association.image_url;
                loadingPopup.dismiss();
                var successAlert = _this.alertCtrl.create({
                    title: 'Succès',
                    subTitle: 'Votre compte association a été mis à jour avec succès.',
                    buttons: [
                        {
                            text: 'OK',
                            handler: function () {
                                _this.goBack();
                            }
                        }
                    ]
                });
                successAlert.present();
            }, function (err) {
                loadingPopup.dismiss();
                _this.event.publish('http:errors', err);
            });
        }
        else {
            var elements = document.getElementsByClassName('ng-invalid');
            var requiredElement = elements[1].parentElement;
            var yOffset = requiredElement.offsetTop;
            this.content.scrollTo(0, yOffset, 2000);
            loadingPopup.dismiss();
        }
    };
    EditAssociationPage.prototype.presentActionSheet = function () {
        var _this = this;
        var actionSheet = this.actionSheetCtrl.create({
            title: 'Sélectionner la source d image',
            buttons: [
                {
                    text: 'Choisir une photo de la bibliothèque',
                    handler: function () {
                        _this.loadImageFromLibrary();
                    }
                },
                {
                    text: 'Prendre une photo',
                    handler: function () {
                        _this.takePicture();
                    }
                },
                {
                    text: 'Annuler',
                    role: 'cancel'
                }
            ]
        });
        actionSheet.present();
    };
    EditAssociationPage.prototype.onChangeCategory = function (category) {
        this.selectedCategory = category;
    };
    EditAssociationPage.prototype.onBlurEmail = function () {
        this.validateEmail = true;
    };
    EditAssociationPage.prototype.onChangeCity = function (selected) {
        var index = this.cities.findIndex(function (i) { return i.id == selected; });
        this.association.codePostal = this.cities[index].code;
    };
    EditAssociationPage.prototype.onChangeCode = function (selected) {
        var index = this.cities.findIndex(function (i) { return i.code == selected; });
        if (index != -1) {
            this.selectedCity = this.cities[index].id;
        }
    };
    EditAssociationPage.prototype.takePicture = function () {
        var _this = this;
        this.camera.getPicture({
            destinationType: this.camera.DestinationType.DATA_URL,
            quality: 100,
            targetWidth: 600,
            targetHeight: 600,
            allowEdit: true,
            correctOrientation: true,
            encodingType: this.camera.EncodingType.JPEG
        }).then(function (imageData) {
            // imageData is a base64 encoded string
            _this.toDelete = false;
            _this.associationPhoto = "data:image/jpeg;base64," + imageData;
        });
    };
    EditAssociationPage.prototype.loadImageFromLibrary = function () {
        var _this = this;
        this.camera.getPicture({
            destinationType: this.camera.DestinationType.DATA_URL,
            sourceType: this.camera.PictureSourceType.PHOTOLIBRARY,
            quality: 100,
            targetWidth: 600,
            targetHeight: 600,
            allowEdit: true,
            correctOrientation: true,
            encodingType: this.camera.EncodingType.JPEG
        }).then(function (imageData) {
            // imageData is a base64 encoded string
            _this.toDelete = false;
            _this.associationPhoto = "data:image/jpeg;base64," + imageData;
        });
    };
    EditAssociationPage.prototype.deletePhoto = function () {
        this.association.image_url = null;
        this.associationPhoto = null;
        this.toDelete = true;
    };
    EditAssociationPage.prototype.capitalize = function (event, type) {
        if (event) {
            if (type == 'title') {
                this.association.name = event.charAt(0).toUpperCase() + event.slice(1);
            }
            if (type == 'address') {
                this.association.address = event.charAt(0).toUpperCase() + event.slice(1);
            }
            if (type == 'timing') {
                this.association.timing = event.charAt(0).toUpperCase() + event.slice(1);
            }
            if (type == 'description') {
                this.association.description = event.charAt(0).toUpperCase() + event.slice(1);
            }
        }
    };
    EditAssociationPage.prototype.goBack = function () {
        this.navCtrl.pop();
    };
    EditAssociationPage.prototype.deleteAccount = function () {
        var _this = this;
        var errorAlert = this.alertCtrl.create({
            title: "Supprimer compte",
            subTitle: "Vous êtes sur le point de supprimer votre compte association " + this.association.name + ". Vous pouvez changer le super administrateur de l'association",
            buttons: [
                {
                    text: 'Changer super administrateur',
                    handler: function () {
                        _this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_7__pages_change_su_admin_change_su_admin__["a" /* ChangeSuAdminPage */], {
                            account: _this.association,
                            type: 'association'
                        });
                    }
                },
                {
                    text: 'Supprimer compte',
                    handler: function () {
                        _this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_8__pages_delete_account_delete_account__["a" /* DeleteAccountPage */], {
                            account: _this.association,
                            type: 'association'
                        });
                    }
                },
                {
                    text: 'Fermer',
                    role: 'cancel'
                }
            ]
        });
        errorAlert.present();
    };
    EditAssociationPage.prototype.checkFocus = function (element) {
        if (this.platform.is('android')) {
            var requiredElement = element.target.offsetParent.parentElement;
            var yOffset = requiredElement.offsetTop;
            this.content.scrollTo(0, yOffset, 2000);
        }
    };
    EditAssociationPage.prototype.SelectCity = function () {
        var _this = this;
        var myModal2 = this.myModal.create('SelectCityPage', {}, { cssClass: 'cities-modal' });
        myModal2.onDidDismiss(function (data) {
            if (data) {
                _this.selectedCity = data.id;
            }
        });
        myModal2.present();
    };
    EditAssociationPage.prototype.getCityIdFromName = function (id) {
        var result = -1;
        for (var _i = 0, _a = this.cities; _i < _a.length; _i++) {
            var element = _a[_i];
            if (element.id === id || element.name === id) {
                return element;
            }
        }
        return result;
    };
    EditAssociationPage.prototype.getCategoriesFromNameOrIdentifier = function (selectedCategories) {
        var result = -1;
        for (var _i = 0, _a = this.categories; _i < _a.length; _i++) {
            var element = _a[_i];
            if (element.id === selectedCategories || element.name === selectedCategories) {
                return element;
            }
        }
        return result;
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["ViewChild"])(__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* Content */]),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* Content */])
    ], EditAssociationPage.prototype, "content", void 0);
    EditAssociationPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-edit-association',template:/*ion-inline-start:"D:\celaneo\mobile\new-mobile\test\src\pages\edit-association\edit-association.html"*/'<!--\n\n  Generated template for the EditAssociationPage page.\n\n\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n\n  Ionic pages and navigation.\n\n-->\n\n<ion-header class="mobile-header" *ngIf="appGlobals.token">\n\n    <ion-grid>\n\n        <ion-row>\n\n            <ion-col col-2 text-left>\n\n                <div class="item">\n\n                    <ion-icon name="ios-arrow-back" (click)="goBack()"></ion-icon>\n\n                </div>\n\n            </ion-col>\n\n            <ion-col col-8 text-center class="page-title">\n\n\n\n                <ion-title text-capitalize>Profil</ion-title>\n\n            </ion-col>\n\n            <ion-col col-2>\n\n                <div class="item" text-right>\n\n\n\n                </div>\n\n            </ion-col>\n\n        </ion-row>\n\n    </ion-grid>\n\n</ion-header>\n\n\n\n\n\n<ion-content padding>\n\n    <div class="div-left">\n\n        <div text-right class="back"><img src="assets/imgs/icons/1.png" (click)="goBack()"></div>\n\n    </div>\n\n    <div class="div-center div-margin-top" *ngIf="association">\n\n        <form (ngSubmit)="editAssociationForm(associationForm.invalid)" #associationForm="ngForm">\n\n            <ion-grid>\n\n                <ion-row>\n\n                    <div *ngIf="association.image_url || associationPhoto; else elseBlock" text-center>\n\n                        <img src="{{association.image_url}}" *ngIf="association.image_url && !associationPhoto" (click)="presentActionSheet()">\n\n                        <img src="{{associationPhoto}}" *ngIf="associationPhoto" (click)="presentActionSheet()">\n\n                        <ion-icon name="trash" class="icon-delete" (click)="deletePhoto();" *ngIf="association.image_url"></ion-icon>\n\n                    </div>\n\n                </ion-row>\n\n                <ng-template #elseBlock>\n\n\n\n                    <ion-col col-12 text-center> <img class="button-img" src="assets/imgs/icons/boutton-white.png"\n\n                            (click)="presentActionSheet()"></ion-col>\n\n\n\n                </ng-template>\n\n            </ion-grid>\n\n\n\n            <ion-grid class="padding-horizontal">\n\n\n\n                <ion-row>\n\n                    <ion-col col-12 text-center class="margin-top">\n\n                        <ion-label text-left color="light-black" stacked>Nom du groupe / association</ion-label>\n\n                        <ion-item class="item-input-white" [class.formError]="name.invalid && (name.dirty || submited || name.touched)">\n\n                            <ion-input name="name" type="text" id="name" [(ngModel)]="association.name" #name="ngModel"\n\n                                (focus)="checkFocus($event)" (change)="capitalize($event.target.value, \'title\')"\n\n                                required text-capitalize></ion-input>\n\n                        </ion-item>\n\n                        <div class="error-msg" *ngIf="name.invalid && (name.dirty || submited || name.touched)">\n\n                            <span class="error">Champs nom obligatoire</span>\n\n                        </div>\n\n                    </ion-col>\n\n                    <ion-col col-12 text-center>\n\n                        <ion-label text-left color="light-black" stacked>Adresse</ion-label>\n\n                        <ion-item class="item-input-white">\n\n                            <ion-textarea name="address" [(ngModel)]="association.address" #address="ngModel" (focus)="checkFocus($event)"\n\n                                (change)="capitalize($event.target.value, \'address\')"></ion-textarea>\n\n                        </ion-item>\n\n                    </ion-col>\n\n                    <ion-col col-12 text-center>\n\n                        <ion-label text-left class="margin-bottom-ie" color="light-black" stacked>Ville</ion-label>\n\n                        <ion-item class="item-grey no-padding-left" [class.formError]="city.invalid && (city.dirty || submited || city.touched)">\n\n                            <ion-input (click)="SelectCity()"   readonly autocomplete="off" autocorrect="on" name="city" type="text" id="city" placeholder="Ville" [(ngModel)]="this.getCityIdFromName(selectedCity).name"\n\n                                       #city="ngModel" required></ion-input>\n\n                        </ion-item>\n\n                        <div class="error-msg" *ngIf="city.invalid && (city.dirty || submited || city.touched)">\n\n                            <span class="error">Champs ville obligatoire</span>\n\n                        </div>\n\n                    </ion-col>\n\n                    <ion-col col-12 text-center>\n\n                        <ion-label text-left class="margin-bottom-ie" color="light-black" stacked>Thèmes</ion-label>\n\n                        <ion-item class="item-input-white no-padding select-not-ie" [class.formError]="category.invalid && (category.dirty || submited || category.touched)">\n\n                            <ion-select class="select-white" name="category" submitText="Ok" cancelText="Annuler"\n\n                                [(ngModel)]="selectedCategory" #category="ngModel" (ionChange)="onChangeCategory($event)"\n\n                                required>\n\n                                <ion-option *ngFor="let category of categories" value={{category.id}}>{{category.name}}</ion-option>\n\n                            </ion-select>\n\n                        </ion-item>\n\n                        <ion-col class="item-input-white no-padding select-ie" [class.formError]="category.invalid && (category.dirty || submited || category.touched)">\n\n                            <select class="select-white input-select-ie" name="category" [(ngModel)]="selectedCategory"\n\n                                #category="ngModel" required>\n\n                                <option *ngFor="let category of categories" value={{category.id}} (Click)="onChangeCategory($event.srcElement.value)">{{category.name}}</option>\n\n                            </select>\n\n                        </ion-col>\n\n                        <div class="error-msg" *ngIf="category.invalid && (category.dirty || submited || category.touched)">\n\n                            <span class="error">Champs catégorie obligatoire</span>\n\n                        </div>\n\n                    </ion-col>\n\n                    <ion-col col-12 text-center>\n\n                        <ion-label text-left color="light-black" stacked>Horaires d\'ouverture</ion-label>\n\n                        <ion-item class="item-input-white">\n\n                            <ion-textarea class="textarea-timing" type="text" lang="fr" name="timing" [(ngModel)]="association.timing"\n\n                                (focus)="checkFocus($event)" #timing="ngModel" (change)="capitalize($event.target.value, \'timing\')"></ion-textarea>\n\n                        </ion-item>\n\n                    </ion-col>\n\n                    <ion-col col-12 text-center>\n\n                        <ion-label text-left color="light-black" stacked>Téléphone</ion-label>\n\n                        <ion-item class="item-input-white" [class.formError]="phone.invalid && (phone.dirty || submited || phone.touched)">\n\n                            <ion-input [pattern]="phoneRegexp" name="phone" type="tel" [(ngModel)]="association.phone" #phone="ngModel" (focus)="checkFocus($event)"\n\n                                required></ion-input>\n\n                        </ion-item>\n\n                        <div class="error-msg" *ngIf="phone.invalid && (phone.dirty || submited || phone.touched)">\n\n                            <span class="error">Champs téléphone obligatoire. Exemple : 0999999999 ou 33999999999</span>\n\n                        </div>\n\n                    </ion-col>\n\n                    <ion-col col-12 text-center>\n\n                        <ion-label text-left color="light-black" stacked>Adresse mail</ion-label>\n\n                        <ion-item class="item-input-white" [class.formError]="email.invalid && (email.dirty || submited || email.touched)">\n\n                            <ion-input name="email" type="email" autocapitalize="none" [(ngModel)]="association.email"\n\n                                #email="ngModel" (focus)="checkFocus($event)" (mouseout)="onBlurEmail()" pattern="[a-z0-9!#$%&\'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&\'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?"\n\n                                required></ion-input>\n\n                        </ion-item>\n\n                        <div class="error-msg" *ngIf="email.invalid && (email.dirty || submited || email.touched)">\n\n                            <span class="error">Champs adresse mail obligatoire</span>\n\n                        </div>\n\n                    </ion-col>\n\n                    <ion-col col-12 text-center>\n\n                        <ion-label text-left color="light-black" stacked>Description</ion-label>\n\n                        <ion-item class="item-input-white">\n\n                            <ion-textarea class="height-textarea" name="description" [(ngModel)]="association.description"\n\n                                #description="ngModel" (focus)="checkFocus($event)" (change)="capitalize($event.target.value, \'description\')"></ion-textarea>\n\n                        </ion-item>\n\n                    </ion-col>\n\n                    <ion-col col-12 text-center>\n\n                        <button ion-button full color="primary" type="submit" class="button-publish custom-button" round>Modifier l\'association</button>\n\n                    </ion-col>\n\n                </ion-row>\n\n\n\n            </ion-grid>\n\n        </form>\n\n        <ion-grid class="padding-horizontal" *ngIf="association && association.role == \'superadmin\'">\n\n            <ion-row>\n\n                <ion-col col-12 text-center>\n\n                    <button ion-button full color="primary" (click)="deleteAccount()" class="button-publish custom-button"\n\n                        round>Supprimer mon compte</button>\n\n                </ion-col>\n\n            </ion-row>\n\n\n\n        </ion-grid>\n\n    </div>\n\n    <div class="div-right"></div>\n\n</ion-content>'/*ion-inline-end:"D:\celaneo\mobile\new-mobile\test\src\pages\edit-association\edit-association.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_3__providers_user_user__["a" /* UserProvider */],
            __WEBPACK_IMPORTED_MODULE_2__providers_association_association__["a" /* AssociationProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_4__ionic_native_camera__["a" /* Camera */],
            __WEBPACK_IMPORTED_MODULE_9__providers_eventsrest_eventsrest__["a" /* EventsrestProvider */],
            __WEBPACK_IMPORTED_MODULE_10__providers_comment_comment__["a" /* CommentProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["a" /* ActionSheetController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["x" /* Platform */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_5__providers_globals_globals__["a" /* GlobalsProvider */],
            __WEBPACK_IMPORTED_MODULE_6__providers_app_app__["a" /* AppProvider */]])
    ], EditAssociationPage);
    return EditAssociationPage;
}());

//# sourceMappingURL=edit-association.js.map

/***/ }),

/***/ 476:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return EditMerchantPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_merchant_merchant__ = __webpack_require__(39);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_user_user__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__ionic_native_camera__ = __webpack_require__(29);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__providers_globals_globals__ = __webpack_require__(8);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__pages_change_su_admin_change_su_admin__ = __webpack_require__(200);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__pages_delete_account_delete_account__ = __webpack_require__(201);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__providers_eventsrest_eventsrest__ = __webpack_require__(9);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};









/**
 * Generated class for the EditMerchantPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var EditMerchantPage = /** @class */ (function () {
    function EditMerchantPage(event, navCtrl, navParams, userService, service, loader, myAlert, myModal, camera, serviceEvent, actionSheetCtrl, toastCtrl, platform, alertCtrl, loadingCtrl, appGlobals) {
        this.event = event;
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.userService = userService;
        this.service = service;
        this.loader = loader;
        this.myAlert = myAlert;
        this.myModal = myModal;
        this.camera = camera;
        this.serviceEvent = serviceEvent;
        this.actionSheetCtrl = actionSheetCtrl;
        this.toastCtrl = toastCtrl;
        this.platform = platform;
        this.alertCtrl = alertCtrl;
        this.loadingCtrl = loadingCtrl;
        this.appGlobals = appGlobals;
        this.lastImage = null;
        this.categories = [];
        this.erreurSiret = false;
        this.merchantPhoto = null;
        this.toDelete = false;
        this.submited = false;
        this.validateEmail = false;
        this.phoneRegexp = /^(33|0)\d{9}$/;
        this.myDate = new Date().toISOString();
        this.today = new Date().toISOString();
        this.userImg = localStorage.getItem("user_image");
        this.merchantId = navParams.get('accountId');
        this.cities = this.appGlobals.allCities;
        this.merchant = navParams.get('account');
        this.merchant_photo = this.merchant.image_url;
        for (var _i = 0, _a = this.merchant['community']['categories']; _i < _a.length; _i++) {
            var category = _a[_i];
            if (category.type == "Thème commerce / partenaire") {
                this.categories.push(category);
            }
        }
        this.selectedCategory = this.merchant.category.id ? this.merchant.category.id : this.merchant.category;
        this.selectedCity = this.merchant.city.id ? this.merchant.city.id : this.merchant.city;
    }
    EditMerchantPage.prototype.ionViewWillEnter = function () {
        this.appGlobals.showHeader = false;
        this.event.publish('updateFooter');
    };
    EditMerchantPage.prototype.ionViewWillLeave = function () {
        this.appGlobals.showHeader = true;
    };
    EditMerchantPage.prototype.editMerchantForm = function (errorValidation) {
        var _this = this;
        var loadingPopup = this.loadingCtrl.create({});
        loadingPopup.present();
        this.service.chekedSiret(this.merchantId, this.merchant.siret).then(function (data) {
            _this.checkSiret = data;
            _this.merchant.category = _this.selectedCategory;
            _this.merchant.city = _this.selectedCity;
            _this.submited = true;
            if (!errorValidation && !_this.checkSiret) {
                if (_this.merchant_photo) {
                    if (_this.merchant.image_url == _this.merchant_photo.image_url) {
                        _this.merchant.image_url = null;
                    }
                }
                new Promise(function (resolve) {
                    _this.service.put(_this.merchant, _this.merchantPhoto, _this.toDelete).then(function (data) {
                        for (var key in _this.appGlobals.adminMerchants) {
                            var value = _this.appGlobals.adminMerchants[key];
                            if (value.id == data['merchant'].id) {
                                _this.appGlobals.adminMerchants[key] = data['merchant'];
                            }
                        }
                        _this.merchant = data['merchant'];
                        _this.selectedCategory = _this.merchant.category.id;
                        _this.selectedCity = _this.merchant.city.id;
                        _this.merchant_photo = _this.merchant.image_url;
                        loadingPopup.dismiss();
                        var successAlert = _this.alertCtrl.create({
                            title: 'Succès',
                            subTitle: 'Votre compte commerçant a été mis à jour avec succès.',
                            buttons: [
                                {
                                    text: 'OK',
                                    handler: function () {
                                        _this.goBack();
                                    }
                                }
                            ]
                        });
                        successAlert.present();
                    }, function (err) {
                        loadingPopup.dismiss();
                        _this.event.publish('http:errors', err);
                    });
                });
            }
            else {
                if (_this.checkSiret == true) {
                    _this.erreurSiret = true;
                }
                else {
                    _this.erreurSiret = false;
                }
                var elements = document.getElementsByClassName('ng-invalid');
                var requiredElement = elements[1].parentElement;
                var yOffset = requiredElement.offsetTop;
                _this.content.scrollTo(0, yOffset, 2000);
                loadingPopup.dismiss();
            }
        });
    };
    EditMerchantPage.prototype.presentActionSheet = function () {
        var _this = this;
        var actionSheet = this.actionSheetCtrl.create({
            title: 'Sélectionner la source d image',
            buttons: [
                {
                    text: 'Choisir une photo de la bibliothèque',
                    handler: function () {
                        _this.loadImageFromLibrary();
                    }
                },
                {
                    text: 'Prendre une photo',
                    handler: function () {
                        _this.takePicture();
                    }
                },
                {
                    text: 'Annuler',
                    role: 'cancel'
                }
            ]
        });
        actionSheet.present();
    };
    EditMerchantPage.prototype.takePicture = function () {
        var _this = this;
        this.camera.getPicture({
            destinationType: this.camera.DestinationType.DATA_URL,
            quality: 100,
            targetWidth: 600,
            targetHeight: 600,
            allowEdit: true,
            correctOrientation: true,
            encodingType: this.camera.EncodingType.JPEG
        }).then(function (imageData) {
            _this.toDelete = false;
            _this.merchantPhoto = "data:image/jpeg;base64," + imageData;
        });
    };
    EditMerchantPage.prototype.loadImageFromLibrary = function () {
        var _this = this;
        this.camera.getPicture({
            destinationType: this.camera.DestinationType.DATA_URL,
            sourceType: this.camera.PictureSourceType.PHOTOLIBRARY,
            quality: 100,
            targetWidth: 600,
            targetHeight: 600,
            allowEdit: true,
            correctOrientation: true,
            encodingType: this.camera.EncodingType.JPEG
        }).then(function (imageData) {
            _this.toDelete = false;
            _this.merchantPhoto = "data:image/jpeg;base64," + imageData;
        });
    };
    EditMerchantPage.prototype.deletePhoto = function () {
        this.merchant.image_url = null;
        this.merchantPhoto = null;
        this.toDelete = true;
    };
    EditMerchantPage.prototype.capitalize = function (event, type) {
        if (event) {
            if (type == 'title') {
                this.merchant.name = event.charAt(0).toUpperCase() + event.slice(1);
            }
            if (type == 'address') {
                this.merchant.address = event.charAt(0).toUpperCase() + event.slice(1);
            }
            if (type == 'timing') {
                this.merchant.timing = event.charAt(0).toUpperCase() + event.slice(1);
            }
            if (type == 'description') {
                this.merchant.description = event.charAt(0).toUpperCase() + event.slice(1);
            }
        }
    };
    EditMerchantPage.prototype.onChangeCategory = function (category) {
        this.selectedCategory = category;
    };
    EditMerchantPage.prototype.onBlurEmail = function () {
        this.validateEmail = true;
    };
    EditMerchantPage.prototype.onChangeCity = function (selected) {
        var index = this.cities.findIndex(function (i) { return i.id == selected; });
        this.merchant.codePostal = this.cities[index].code;
    };
    EditMerchantPage.prototype.onChangeCode = function (selected) {
        var index = this.cities.findIndex(function (i) { return i.code == selected; });
        if (index != -1) {
            this.selectedCity = this.cities[index].id;
        }
    };
    EditMerchantPage.prototype.goBack = function () {
        this.navCtrl.pop();
    };
    EditMerchantPage.prototype.deleteAccount = function () {
        var _this = this;
        var errorAlert = this.alertCtrl.create({
            title: "Supprimer compte",
            subTitle: "Vous êtes sur le point de supprimer votre compte commerçant " + this.merchant.name + ". Vous pouvez changer le super administrateur de l'association",
            buttons: [
                {
                    text: 'Changer super administrateur',
                    handler: function () {
                        _this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_6__pages_change_su_admin_change_su_admin__["a" /* ChangeSuAdminPage */], {
                            account: _this.merchant,
                            type: 'merchant'
                        });
                    }
                },
                {
                    text: 'Supprimer compte',
                    handler: function () {
                        _this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_7__pages_delete_account_delete_account__["a" /* DeleteAccountPage */], {
                            account: _this.merchant,
                            type: 'merchant'
                        });
                    }
                },
                {
                    text: 'Fermer',
                    role: 'cancel'
                }
            ]
        });
        errorAlert.present();
    };
    EditMerchantPage.prototype.checkFocus = function (element) {
        if (this.platform.is('android')) {
            var requiredElement = element.target.offsetParent.parentElement;
            var yOffset = requiredElement.offsetTop;
            this.content.scrollTo(0, yOffset, 2000);
        }
    };
    EditMerchantPage.prototype.SelectCity = function () {
        var _this = this;
        var myModal2 = this.myModal.create('SelectCityPage', {}, { cssClass: 'cities-modal' });
        myModal2.onDidDismiss(function (data) {
            if (data) {
                _this.selectedCity = data.id;
            }
        });
        myModal2.present();
    };
    EditMerchantPage.prototype.getCityIdFromName = function (id) {
        var result = -1;
        for (var _i = 0, _a = this.cities; _i < _a.length; _i++) {
            var element = _a[_i];
            if (element.id === id || element.name === id) {
                return element;
            }
        }
        return result;
    };
    EditMerchantPage.prototype.getCategoriesFromNameOrIdentifier = function (selectedCategories) {
        var result = -1;
        for (var _i = 0, _a = this.categories; _i < _a.length; _i++) {
            var element = _a[_i];
            if (element.id === selectedCategories || element.name === selectedCategories) {
                return element;
            }
        }
        return result;
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["ViewChild"])(__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* Content */]),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* Content */])
    ], EditMerchantPage.prototype, "content", void 0);
    EditMerchantPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-edit-merchant',template:/*ion-inline-start:"D:\celaneo\mobile\new-mobile\test\src\pages\edit-merchant\edit-merchant.html"*/'<!--\n\n  Generated template for the EditAssociationPage page.\n\n\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n\n  Ionic pages and navigation.\n\n-->\n\n<ion-header class="mobile-header" *ngIf="appGlobals.token">\n\n    <ion-grid>\n\n        <ion-row>\n\n            <ion-col col-2 text-left>\n\n                <div class="item">\n\n                    <ion-icon name="ios-arrow-back" (click)="goBack()"></ion-icon>\n\n                </div>\n\n            </ion-col>\n\n            <ion-col col-8 text-center class="page-title">\n\n\n\n                <ion-title text-capitalize>Profil</ion-title>\n\n            </ion-col>\n\n            <ion-col col-2>\n\n                <div class="item" text-right>\n\n\n\n                </div>\n\n            </ion-col>\n\n        </ion-row>\n\n    </ion-grid>\n\n</ion-header>\n\n\n\n\n\n<ion-content padding>\n\n    <div class="div-left">\n\n        <div text-right class="back"><img src="assets/imgs/icons/1.png" (click)="goBack()"></div>\n\n    </div>\n\n    <div class="div-center div-margin-top" *ngIf="merchant">\n\n\n\n        <form (ngSubmit)="editMerchantForm(merchantForm.invalid)" #merchantForm="ngForm">\n\n            <ion-grid>\n\n                <ion-row>\n\n                    <div *ngIf="merchant.image_url || merchantPhoto; else elseBlock" text-center>\n\n                        <img src="{{merchant.image_url}}" *ngIf="merchant.image_url && !merchantPhoto" (click)="presentActionSheet()">\n\n                        <img src="{{merchantPhoto}}" *ngIf="merchantPhoto" (click)="presentActionSheet()">\n\n                        <ion-icon name="trash" class="icon-delete" (click)="deletePhoto();" *ngIf="merchant.image_url"></ion-icon>\n\n                    </div>\n\n                </ion-row>\n\n                <ng-template #elseBlock>\n\n\n\n                    <ion-col col-12 text-center> <img class="button-img" src="assets/imgs/icons/boutton-white.png"\n\n                            (click)="presentActionSheet()"></ion-col>\n\n\n\n                </ng-template>\n\n            </ion-grid>\n\n\n\n            <ion-grid class="padding-horizontal">\n\n\n\n                <ion-row>\n\n                    <ion-col col-12 text-center class="margin-top">\n\n                        <ion-label text-left color="light-black" stacked>Nom du commerce / partenaire</ion-label>\n\n                        <ion-item class="item-input-white" [class.formError]="name.invalid && (name.dirty || submited || name.touched)">\n\n                            <ion-input name="name" type="text" id="name" [(ngModel)]="merchant.name" #name="ngModel"\n\n                                (focus)="checkFocus($event)" (change)="capitalize($event.target.value, \'title\')"\n\n                                required text-capitalize></ion-input>\n\n                        </ion-item>\n\n                        <div class="error-msg" *ngIf="name.invalid && (name.dirty || submited || name.touched)">\n\n                            <span class="error">Champs nom obligatoire</span>\n\n                        </div>\n\n                    </ion-col>\n\n                    <ion-col col-12 text-center>\n\n                        <ion-label text-left color="light-black" stacked>Adresse</ion-label>\n\n                        <ion-item class="item-input-white">\n\n                            <ion-textarea name="address" (focus)="checkFocus($event)" [(ngModel)]="merchant.address"\n\n                                #address="ngModel" (change)="capitalize($event.target.value, \'address\')"></ion-textarea>\n\n                        </ion-item>\n\n                    </ion-col>\n\n                    <ion-col col-12 text-center>\n\n                        <ion-label text-left class="margin-bottom-ie" color="light-black" stacked>Ville</ion-label>\n\n                        <ion-item class="item-grey no-padding-left" [class.formError]="city.invalid && (city.dirty || submited || city.touched)">\n\n                            <ion-input (click)="SelectCity()"   readonly autocomplete="off" autocorrect="on" name="city" type="text" id="city" placeholder="Ville" [(ngModel)]="this.getCityIdFromName(selectedCity).name"\n\n                                       #city="ngModel" required></ion-input>\n\n                        </ion-item>\n\n                        <div class="error-msg" *ngIf="city.invalid && (city.dirty || submited || city.touched)">\n\n                            <span class="error">Champs ville obligatoire</span>\n\n                        </div>\n\n                    </ion-col>\n\n                    <ion-col col-12 text-center>\n\n                        <ion-label text-left color="light-black" stacked>Siret</ion-label>\n\n                        <ion-item class="item-input-white " [class.formError]="siret.invalid && (siret.dirty || submited || siret.touched)">\n\n                            <ion-input name="siret" type="tel" [(ngModel)]="merchant.siret" (focus)="checkFocus($event)"\n\n                                #siret="ngModel" required></ion-input>\n\n                        </ion-item>\n\n                        <div class="error-msg" *ngIf="siret.invalid && (siret.dirty || submited || siret.touched)">\n\n                            <span class="error">Champs siret obligatoire</span>\n\n                        </div>\n\n                        <div class="error-msg" *ngIf="erreurSiret">\n\n                            <span class="error">N° Siret existant</span>\n\n                        </div>\n\n                    </ion-col>\n\n                    <ion-col col-12 text-center>\n\n                        <ion-label text-left class="margin-bottom-ie" color="light-black" stacked>Thèmes</ion-label>\n\n                        <ion-item class="item-input-white no-padding select-not-ie" [class.formError]="category.invalid && (category.dirty || submited || category.touched)">\n\n                            <ion-select class="select-white" name="category" submitText="Ok" cancelText="Annuler"\n\n                                [(ngModel)]="selectedCategory" #category="ngModel" (ionChange)="onChangeCategory($event)"\n\n                                required>\n\n                                <ion-option *ngFor="let category of categories" value={{category.id}}>{{category.name}}</ion-option>\n\n                            </ion-select>\n\n                        </ion-item>\n\n                        <ion-col class="item-input-white no-padding select-ie" [class.formError]="category.invalid && (category.dirty || submited || category.touched)">\n\n                            <select class="select-white input-select-ie" name="category" [(ngModel)]="selectedCategory"\n\n                                #category="ngModel" required>\n\n                                <option *ngFor="let category of categories" value={{category.id}} (ionChange)="onChangeCategory($event.srcElement.value)">{{category.name}}</option>\n\n                            </select>\n\n                        </ion-col>\n\n                        <div class="error-msg" *ngIf="category.invalid && (category.dirty || submited || category.touched)">\n\n                            <span class="error">Champs catégorie obligatoire</span>\n\n                        </div>\n\n                    </ion-col>\n\n                    <ion-col col-12 text-center>\n\n                        <ion-label text-left color="light-black" stacked>Horaires d\'ouverture</ion-label>\n\n                        <ion-item class="item-input-white">\n\n                            <ion-textarea class="textarea-timing" type="text" lang="fr" (focus)="checkFocus($event)"\n\n                                name="timing" [(ngModel)]="merchant.timing" #timing="ngModel" (change)="capitalize($event.target.value, \'timing\')"></ion-textarea>\n\n                        </ion-item>\n\n                    </ion-col>\n\n                    <ion-col col-12 text-center>\n\n                        <ion-label text-left color="light-black" stacked>Téléphone</ion-label>\n\n                        <ion-item class="item-input-white" [class.formError]="phone.invalid && (phone.dirty || submited || phone.touched)">\n\n                            <ion-input [pattern]="phoneRegexp" name="phone" type="tel" [(ngModel)]="merchant.phone" (focus)="checkFocus($event)"\n\n                                #phone="ngModel" required></ion-input>\n\n                        </ion-item>\n\n                        <div class="error-msg" *ngIf="phone.invalid && (phone.dirty || submited || phone.touched)">\n\n                            <span class="error">Champs téléphone obligatoire. Exemple : 0999999999 ou 33999999999</span>\n\n                        </div>\n\n                    </ion-col>\n\n                    <ion-col col-12 text-center>\n\n                        <ion-label text-left color="light-black" stacked>Adresse mail</ion-label>\n\n                        <ion-item class="item-input-white" [class.formError]="email.invalid && (email.dirty || submited || email.touched)">\n\n                            <ion-input name="email" type="email" autocapitalize="none" (focus)="checkFocus($event)"\n\n                                [(ngModel)]="merchant.email" #email="ngModel" (mouseout)="onBlurEmail()" pattern="[a-z0-9!#$%&\'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&\'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?"\n\n                                required></ion-input>\n\n                        </ion-item>\n\n                        <div class="error-msg" *ngIf="email.invalid && (email.dirty || submited || email.touched)">\n\n                            <span class="error">Champs adresse mail obligatoire</span>\n\n                        </div>\n\n                    </ion-col>\n\n                    <ion-col col-12 text-center>\n\n                        <ion-label text-left color="light-black" stacked>Description</ion-label>\n\n                        <ion-item class="item-input-white">\n\n                            <ion-textarea class="height-textarea" (focus)="checkFocus($event)" name="description"\n\n                                [(ngModel)]="merchant.description" #description="ngModel" (change)="capitalize($event.target.value, \'description\')"></ion-textarea>\n\n                        </ion-item>\n\n                    </ion-col>\n\n                    <ion-col col-12 text-center>\n\n                        <button ion-button full color="primary" type="submit" class="button-publish" round>Modifier le commerçant</button>\n\n                    </ion-col>\n\n                </ion-row>\n\n\n\n            </ion-grid>\n\n        </form>\n\n        <ion-grid class="padding-horizontal" *ngIf="merchant && merchant.role == \'superadmin\'">\n\n            <ion-row>\n\n                <ion-col col-12 text-center>\n\n                    <button ion-button full color="primary" (click)="deleteAccount()" class="button-publish" round>Supprimer\n\n                        mon compte</button>\n\n                </ion-col>\n\n            </ion-row>\n\n\n\n        </ion-grid>\n\n    </div>\n\n    <div class="div-right"></div>\n\n</ion-content>'/*ion-inline-end:"D:\celaneo\mobile\new-mobile\test\src\pages\edit-merchant\edit-merchant.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_3__providers_user_user__["a" /* UserProvider */],
            __WEBPACK_IMPORTED_MODULE_2__providers_merchant_merchant__["a" /* MerchantProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_4__ionic_native_camera__["a" /* Camera */],
            __WEBPACK_IMPORTED_MODULE_8__providers_eventsrest_eventsrest__["a" /* EventsrestProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["a" /* ActionSheetController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["z" /* ToastController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["x" /* Platform */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_5__providers_globals_globals__["a" /* GlobalsProvider */]])
    ], EditMerchantPage);
    return EditMerchantPage;
}());

//# sourceMappingURL=edit-merchant.js.map

/***/ }),

/***/ 477:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AdminListPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_association_association__ = __webpack_require__(36);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_merchant_merchant__ = __webpack_require__(39);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_globals_globals__ = __webpack_require__(8);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__add_admin_add_admin__ = __webpack_require__(478);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__providers_eventsrest_eventsrest__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__providers_community_community__ = __webpack_require__(40);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};








/**
 * Generated class for the AdminListPage page.
 *
 * See http://ionicframework.com/docs/components/#navigation for more info
 * on Ionic pages and navigation.
 */
var AdminListPage = /** @class */ (function () {
    function AdminListPage(event, alertCtrl, serviceEvent, modal, navCtrl, navParams, view, serviceAssociation, serviceCommunity, serviceMerchant, loadingCtrl, appGlobals) {
        this.event = event;
        this.alertCtrl = alertCtrl;
        this.serviceEvent = serviceEvent;
        this.modal = modal;
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.view = view;
        this.serviceAssociation = serviceAssociation;
        this.serviceCommunity = serviceCommunity;
        this.serviceMerchant = serviceMerchant;
        this.loadingCtrl = loadingCtrl;
        this.appGlobals = appGlobals;
        this.selected = [];
        this.selectAll = false;
        this.items = [];
        this.page = 1;
        this.adminDelete = [];
        this.account = this.navParams.get('account');
        this.selected = [];
        if (this.account.type == 'association') {
            this.service = serviceAssociation;
        }
        else if (this.account.type == 'community') {
            this.service = serviceCommunity;
        }
        else {
            this.service = serviceMerchant;
        }
    }
    AdminListPage.prototype.getAdmins = function () {
        this.loadAdmins();
    };
    AdminListPage.prototype.loadAdmins = function () {
        var _this = this;
        var loadingPopup = this.loadingCtrl.create({});
        // Show the popup
        loadingPopup.present();
        this.service.getAdmins(this.account.id, this.page).then(function (data) {
            _this.admins = data;
            for (var _i = 0, _a = _this.admins; _i < _a.length; _i++) {
                var admin = _a[_i];
                _this.items.push(admin);
            }
            loadingPopup.dismiss();
        }, function (err) {
            loadingPopup.dismiss();
            _this.event.publish('http:errors', err);
        });
    };
    AdminListPage.prototype.doInfinite = function (infiniteScroll) {
        var _this = this;
        this.page += 1;
        this.service.getAdmins(this.account.id, this.page).then(function (data) {
            _this.admins = data;
            for (var _i = 0, _a = _this.admins; _i < _a.length; _i++) {
                var admin = _a[_i];
                _this.items.push(admin);
            }
            infiniteScroll.complete();
        }, function (err) {
            infiniteScroll.complete();
        });
    };
    AdminListPage.prototype.ionViewWillEnter = function () {
        this.appGlobals.showHeader = false;
        this.items = [];
        this.page = 1;
        this.getAdmins();
        this.event.publish('updateFooter');
    };
    AdminListPage.prototype.goBack = function () {
        this.navCtrl.pop();
    };
    AdminListPage.prototype.open = function () {
        var addModal = this.modal.create('AddSelectedAdminPage');
        addModal.present();
    };
    AdminListPage.prototype.clickAdmin = function (admin) {
        var foundAt = this.selected.indexOf(admin);
        if (foundAt >= 0) {
            this.selected.splice(foundAt, 1);
        }
        else {
            this.selected.push(admin);
        }
        localStorage.setItem('admins', this.selected.join());
    };
    AdminListPage.prototype.checkAll = function () {
        if (this.selectAll == false) {
            this.selectAll = true;
            this.selected = [];
            for (var _i = 0, _a = this.admins; _i < _a.length; _i++) {
                var admin = _a[_i];
                this.selected.push(admin.id);
            }
            localStorage.setItem('admins', this.selected.join());
        }
        else {
            this.selectAll = false;
            this.selected = [];
        }
    };
    AdminListPage.prototype.addAdmin = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_5__add_admin_add_admin__["a" /* AddAdminPage */], {
            account: this.account
        });
    };
    AdminListPage.prototype.deleteAccountConfirmation = function (admin) {
        var _this = this;
        this.adminDelete.push(admin.id);
        var confirmationAlert = this.alertCtrl.create({
            title: "Confirmation",
            subTitle: "Êtes-vous sûr de vouloir supprimer ce compte.",
            buttons: [
                {
                    text: 'OK',
                    handler: function () {
                        _this.delete(admin.id);
                    }
                },
                {
                    text: 'Annuler',
                    role: 'cancel',
                    handler: function () {
                    }
                }
            ]
        });
        confirmationAlert.present();
    };
    AdminListPage.prototype.delete = function (idDelete) {
        var _this = this;
        var loadingPopup = this.loadingCtrl.create({});
        loadingPopup.present();
        this.service.deleteAdmin(this.account.id, idDelete).then(function (data) {
            loadingPopup.dismiss();
            var successAlert = _this.alertCtrl.create({
                subTitle: "L'administrateur est supprimé avec succès.",
                buttons: [
                    {
                        text: 'Fermer',
                        role: 'cancel',
                        handler: function () {
                            _this.view.dismiss();
                        }
                    }
                ]
            });
            successAlert.present();
        }, function (err) {
            loadingPopup.dismiss();
            _this.event.publish('http:errors', err);
        });
    };
    AdminListPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-admin-list',template:/*ion-inline-start:"D:\celaneo\mobile\new-mobile\test\src\pages\admin-list\admin-list.html"*/'<ion-header class="mobile-header" *ngIf="appGlobals.token">\n\n    <ion-grid>\n\n        <ion-row>\n\n            <ion-col col-2 text-left>\n\n                <div class="item">\n\n                    <ion-icon name="ios-arrow-back" (click)="goBack()"></ion-icon>\n\n                </div>\n\n            </ion-col>\n\n            <ion-col col-8 text-center class="page-title">\n\n                <ion-title>Liste des administrateurs</ion-title>\n\n            </ion-col>\n\n            <ion-col col-2>\n\n                <div class="item" text-right>\n\n                </div>\n\n            </ion-col>\n\n        </ion-row>\n\n    </ion-grid>\n\n</ion-header>\n\n\n\n<ion-content padding class="inside-content no-padding">\n\n    <div class="div-left">\n\n        <div text-right class="back"><img src="assets/imgs/icons/1.png" (click)="goBack()"></div>\n\n    </div>\n\n    <div class="div-center">\n\n        <ion-grid margin-top class="no-padding">\n\n            <ion-row responsive-sm text-center class="no-padding">\n\n                <ion-col col-md-12 col-12 class="no-padding">\n\n                    <div class="list-admin-items" *ngFor="let item of items">\n\n                        <span class="current-admin-name"> {{ item.lastname | capitalize }} {{ item.firstname |\n\n                            capitalize }} </span>\n\n                        <ion-icon name="md-more" float-end (click)="deleteAccountConfirmation(item)"></ion-icon>\n\n                        <div class="clear"></div>\n\n                    </div>\n\n                </ion-col>\n\n\n\n                <ion-col col-12 text-center>\n\n                    <img (click)="addAdmin()" class="img-add" src="assets/imgs/icons/add.png">\n\n                </ion-col>\n\n\n\n                <ion-infinite-scroll (ionInfinite)="doInfinite($event)" threshold="100px">\n\n                    <ion-infinite-scroll-content loadingSpinner="bubbles" loadingText="Charger plus...">\n\n                    </ion-infinite-scroll-content>\n\n                </ion-infinite-scroll>\n\n            </ion-row>\n\n        </ion-grid>\n\n    </div>\n\n    <!-- fin bloc central -->\n\n    <div class="div-right" text-center>\n\n        <!-- <img class="publish" src="assets/imgs/icons/add-admin.png" (click)="addAdmin()"> -->\n\n    </div>\n\n</ion-content>'/*ion-inline-end:"D:\celaneo\mobile\new-mobile\test\src\pages\admin-list\admin-list.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_6__providers_eventsrest_eventsrest__["a" /* EventsrestProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["B" /* ViewController */],
            __WEBPACK_IMPORTED_MODULE_2__providers_association_association__["a" /* AssociationProvider */],
            __WEBPACK_IMPORTED_MODULE_7__providers_community_community__["a" /* CommunityProvider */],
            __WEBPACK_IMPORTED_MODULE_3__providers_merchant_merchant__["a" /* MerchantProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_4__providers_globals_globals__["a" /* GlobalsProvider */]])
    ], AdminListPage);
    return AdminListPage;
}());

//# sourceMappingURL=admin-list.js.map

/***/ }),

/***/ 478:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AddAdminPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_association_association__ = __webpack_require__(36);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_merchant_merchant__ = __webpack_require__(39);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_user_user__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__providers_globals_globals__ = __webpack_require__(8);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__providers_eventsrest_eventsrest__ = __webpack_require__(9);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







/**
 * Generated class for the AddAdminPage page.
 *
 * See http://ionicframework.com/docs/components/#navigation for more info
 * on Ionic pages and navigation.
 */
var AddAdminPage = /** @class */ (function () {
    function AddAdminPage(event, navCtrl, navParams, serviceEvent, serviceAssociation, serviceMerchant, serviceUser, alertCtrl, loadingCtrl, appGlobals) {
        this.event = event;
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.serviceEvent = serviceEvent;
        this.serviceAssociation = serviceAssociation;
        this.serviceMerchant = serviceMerchant;
        this.serviceUser = serviceUser;
        this.alertCtrl = alertCtrl;
        this.loadingCtrl = loadingCtrl;
        this.appGlobals = appGlobals;
        this.invitation = false;
        this.warning = false;
        this.account = this.navParams.get('account');
        this.role = localStorage.getItem('account_role');
    }
    AddAdminPage.prototype.ionViewWillEnter = function () {
        this.appGlobals.showHeader = false;
        this.event.publish('updateFooter');
    };
    AddAdminPage.prototype.goBack = function () {
        this.navCtrl.pop();
    };
    AddAdminPage.prototype.addAdmin = function () {
        this.warning = false;
    };
    AddAdminPage.prototype.addSuperAdmin = function () {
        this.warning = true;
    };
    AddAdminPage.prototype.validateEmail = function (email) {
        var re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
        return re.test(email);
    };
    AddAdminPage.prototype.add = function () {
        var _this = this;
        this.invitation = false;
        if (!this.validateEmail(this.email)) {
            var errorAlert = this.alertCtrl.create({
                title: "Erreur",
                subTitle: " Veuillez entrer un email valide.",
                buttons: [
                    {
                        text: 'Fermer',
                        role: 'cancel',
                        handler: function () {
                        }
                    }
                ]
            });
            errorAlert.present();
        }
        else {
            var loadingPopup_1 = this.loadingCtrl.create({});
            loadingPopup_1.present();
            if (this.account.type == "association") {
                this.service = this.serviceAssociation;
            }
            else {
                this.service = this.serviceMerchant;
            }
            if (this.warning) {
                this.service.postSuperAdmin(this.account.id, this.email).then(function (data) {
                    loadingPopup_1.dismiss();
                    if (data.error == 'email not exists') {
                        _this.invitation = true;
                    }
                    else if (data.error == 'admin exists') {
                        var errorAlert = _this.alertCtrl.create({
                            title: "Erreur",
                            subTitle: _this.email + ' est déjà un administrateur.',
                            buttons: [
                                {
                                    text: 'Fermer',
                                    role: 'cancel',
                                    handler: function () {
                                    }
                                }
                            ]
                        });
                        errorAlert.present();
                    }
                    else {
                        localStorage.setItem('account_role', 'admin');
                        _this.role = 'admin';
                        var successAlert = _this.alertCtrl.create({
                            title: 'succès!',
                            subTitle: 'La modification demandée a été bien prise en compte.',
                            buttons: [
                                {
                                    text: 'Fermer',
                                    role: 'cancel',
                                    handler: function () {
                                        _this.email = null;
                                        _this.navCtrl.pop();
                                    }
                                }
                            ]
                        });
                        successAlert.present();
                    }
                }, function (err) {
                    loadingPopup_1.dismiss();
                    _this.event.publish('http:errors', err);
                });
            }
            else {
                this.service.postAdmin(this.account.id, this.email).then(function (data) {
                    loadingPopup_1.dismiss();
                    if (data.error == 'email not exists') {
                        _this.invitation = true;
                    }
                    else if (data.error == 'admin exists') {
                        var errorAlert = _this.alertCtrl.create({
                            title: "Erreur",
                            subTitle: _this.email + ' est déjà un administrateur.',
                            buttons: [
                                {
                                    text: 'Fermer',
                                    role: 'cancel',
                                    handler: function () {
                                        _this.navCtrl.pop();
                                    }
                                }
                            ]
                        });
                        errorAlert.present();
                    }
                    else {
                        var successAlert = _this.alertCtrl.create({
                            title: 'succès!',
                            subTitle: 'La modification demandée a été bien prise en compte.',
                            buttons: [
                                {
                                    text: 'Fermer',
                                    role: 'cancel',
                                    handler: function () {
                                        _this.email = null;
                                        _this.navCtrl.pop();
                                    }
                                }
                            ]
                        });
                        successAlert.present();
                    }
                }, function (err) {
                    loadingPopup_1.dismiss();
                    _this.event.publish('http:errors', err);
                });
            }
        }
    };
    AddAdminPage.prototype.invit = function () {
        var _this = this;
        var loadingPopup = this.loadingCtrl.create({});
        loadingPopup.present();
        this.serviceUser.postInvitation(this.email).then(function (data) {
            loadingPopup.dismiss();
            _this.invitation = false;
            var successAlert = _this.alertCtrl.create({
                title: 'succès!',
                subTitle: "L'invitation est bien envoyée.",
                buttons: [
                    {
                        text: 'Fermer',
                        role: 'cancel',
                        handler: function () {
                            _this.email = null;
                        }
                    }
                ]
            });
            successAlert.present();
        }, function (err) {
            loadingPopup.dismiss();
            _this.event.publish('http:errors', err);
        });
    };
    AddAdminPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-add-admin',template:/*ion-inline-start:"D:\celaneo\mobile\new-mobile\test\src\pages\add-admin\add-admin.html"*/'<ion-header class="mobile-header" *ngIf="appGlobals.token">\n\n    <ion-grid>\n\n        <ion-row>\n\n            <ion-col col-2 text-left>\n\n                <div class="item">\n\n                    <ion-icon name="ios-arrow-back" (click)="goBack()"></ion-icon>\n\n                </div>\n\n            </ion-col>\n\n            <ion-col col-10 class="page-title">\n\n                <ion-title text-left>Ajouter un Administrateur</ion-title>\n\n            </ion-col>\n\n        </ion-row>\n\n    </ion-grid>\n\n</ion-header>\n\n\n\n<ion-content padding>\n\n    <div class="div-left">\n\n        <div text-right class="back"><img src="assets/imgs/icons/1.png" (click)="goBack()"></div>\n\n    </div>\n\n    <div class="div-center">\n\n        <div class="addAdmin">\n\n            <ion-grid>\n\n                <ion-row justify-content-center>\n\n                    <ion-col col-12 justify-content-center *ngIf="invitation">\n\n                        <form (ngSubmit)="invit()" novalidate>\n\n                            <div>\n\n                                <p>\n\n                                    Cette personne ne fait pas partie de NOUS-ensemble.<br> Envoyez-lui un e-mail pour\n\n                                    lui conseiller de nous rejoindre.\n\n                                </p>\n\n                                <button ion-button full class="button-email">Envoyer un e-mail</button>\n\n                                <hr>\n\n                            </div>\n\n                        </form>\n\n                    </ion-col>\n\n                    <ion-col col-12 justify-content-center>\n\n                        <form class="formvalidate" (ngSubmit)="add()" novalidate>\n\n                            <p> Veuillez saisir l\'adresse email de la personne que vous souhaitez ajouter comme\n\n                                administrateur </p>\n\n                            <ion-item class="middle80">\n\n                                <ion-input type="email" name="email" [(ngModel)]="email" placeholder="Adresse email*"></ion-input>\n\n                            </ion-item>\n\n                            <ion-list radio-group no-padding>\n\n                                <ion-item class="backgrond" no-padding>\n\n                                    <ion-label>Donner un droit d\'administrateur</ion-label>\n\n                                    <ion-radio (click)="addAdmin();" checked="true"></ion-radio>\n\n                                </ion-item>\n\n                                <ion-item class="backgrond" *ngIf="account && role == \'superadmin\'" no-padding>\n\n                                    <ion-label>Lui attribuer mes droits actuels de super administrateur</ion-label>\n\n                                    <ion-radio (click)="addSuperAdmin();"></ion-radio>\n\n                                </ion-item>\n\n                            </ion-list>\n\n\n\n\n\n                            <div *ngIf="warning">\n\n                                <p>\n\n                                    ATTENTION : vous êtes sur le point de vous défaire de votre droit de super\n\n                                    administrateur pour donner de droit à une autre personne. Ce changement est\n\n                                    irréversible ; vous ne pourrez plus vous réattribuer ces droits. Vous serez alors\n\n                                    simple administrateur.\n\n                                </p>\n\n                            </div>\n\n                            <button class="addButton button-big" ion-button color="primary" round>Valider</button>\n\n                            <!-- <button ion-button round>Valider</button> -->\n\n                        </form>\n\n                    </ion-col>\n\n                </ion-row>\n\n            </ion-grid>\n\n\n\n\n\n        </div>\n\n        <ion-grid class="page-grid" text-center>\n\n\n\n\n\n        </ion-grid>\n\n    </div>\n\n    <div class="div-right" text-left>\n\n    </div>\n\n</ion-content>'/*ion-inline-end:"D:\celaneo\mobile\new-mobile\test\src\pages\add-admin\add-admin.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_6__providers_eventsrest_eventsrest__["a" /* EventsrestProvider */],
            __WEBPACK_IMPORTED_MODULE_2__providers_association_association__["a" /* AssociationProvider */],
            __WEBPACK_IMPORTED_MODULE_3__providers_merchant_merchant__["a" /* MerchantProvider */],
            __WEBPACK_IMPORTED_MODULE_4__providers_user_user__["a" /* UserProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_5__providers_globals_globals__["a" /* GlobalsProvider */]])
    ], AddAdminPage);
    return AddAdminPage;
}());

//# sourceMappingURL=add-admin.js.map

/***/ }),

/***/ 479:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return EditCommunityPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_association_association__ = __webpack_require__(36);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_user_user__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__ionic_native_camera__ = __webpack_require__(29);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__providers_globals_globals__ = __webpack_require__(8);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__providers_app_app__ = __webpack_require__(38);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__providers_eventsrest_eventsrest__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__providers_comment_comment__ = __webpack_require__(22);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__providers_community_community__ = __webpack_require__(40);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};










/**
 * Generated class for the EditAssociationPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var EditCommunityPage = /** @class */ (function () {
    function EditCommunityPage(event, navCtrl, appEvents, navParams, userService, service, commuService, loader, myAlert, myModal, camera, serviceEvent, commentService, actionSheetCtrl, platform, alertCtrl, loadingCtrl, appGlobals, appService) {
        this.event = event;
        this.navCtrl = navCtrl;
        this.appEvents = appEvents;
        this.navParams = navParams;
        this.userService = userService;
        this.service = service;
        this.commuService = commuService;
        this.loader = loader;
        this.myAlert = myAlert;
        this.myModal = myModal;
        this.camera = camera;
        this.serviceEvent = serviceEvent;
        this.commentService = commentService;
        this.actionSheetCtrl = actionSheetCtrl;
        this.platform = platform;
        this.alertCtrl = alertCtrl;
        this.loadingCtrl = loadingCtrl;
        this.appGlobals = appGlobals;
        this.appService = appService;
        this.lastImage = null;
        this.categories = [];
        this.check = false;
        this.check2 = false;
        this.associationPhoto = null;
        this.toDelete = false;
        this.submited = false;
        this.zipCodes = [];
        this.validateEmail = false;
        this.categoryNames = [];
        this.phoneRegexp = /^(33|0)\d{9}$/;
        this.myDate = new Date().toISOString();
        this.today = new Date().toISOString();
        this.userImg = localStorage.getItem("user_image");
        this.cities = this.appGlobals.allCities;
        for (var _i = 0, _a = this.cities; _i < _a.length; _i++) {
            var city = _a[_i];
            this.zipCodes.push(city.code);
        }
        this.community = navParams.get('account');
        /*for (let category of this.appGlobals.allCategories){
            if (category.type =="Activité groupe / association"){
                this.allCategories.push(category);
            }
        }*/
        this.commuId = navParams.get('accountId');
        //this.selectedCategory = this.community.category.id;
        this.selectedCity = this.community.city;
        this.community_photo = this.community.image_url;
    }
    EditCommunityPage.prototype.ionViewWillEnter = function () {
        this.appGlobals.showHeader = false;
        this.event.publish('updateFooter');
    };
    EditCommunityPage.prototype.ionViewWillLeave = function () {
        this.appGlobals.showHeader = true;
    };
    EditCommunityPage.prototype.editCommuForm = function (errorValidation) {
        var _this = this;
        var loadingPopup = this.loadingCtrl.create({});
        // Show the popup
        loadingPopup.present();
        this.community.category = this.selectedCategory;
        this.community.city = this.selectedCity;
        this.submited = true;
        if (!errorValidation) {
            if (this.community_photo) {
                if (this.community.image_url == this.community_photo) {
                    this.community.image_url = null;
                }
            }
            this.commuService.put(this.community, this.associationPhoto, this.toDelete).then(function (data) {
                var linkedCommunities = JSON.parse(localStorage.getItem("allCommunities"));
                for (var key in linkedCommunities) {
                    var value = linkedCommunities[key];
                    if (value.id == _this.community.id) {
                        linkedCommunities[key] = _this.community;
                        localStorage.setItem("allCommunities", linkedCommunities);
                    }
                }
                /*this.selectedCategory = this.community.category.id;*/
                loadingPopup.dismiss();
                var successAlert = _this.alertCtrl.create({
                    title: 'Succès',
                    subTitle: 'Votre compte communauté a été mis à jour avec succès.',
                    buttons: [
                        {
                            text: 'OK',
                            handler: function () {
                                _this.goBack();
                            }
                        }
                    ]
                });
                successAlert.present();
            }, function (err) {
                loadingPopup.dismiss();
                _this.event.publish('http:errors', err);
            });
        }
        else {
            var elements = document.getElementsByClassName('ng-invalid');
            var requiredElement = elements[1].parentElement;
            var yOffset = requiredElement.offsetTop;
            this.content.scrollTo(0, yOffset, 2000);
            loadingPopup.dismiss();
        }
    };
    EditCommunityPage.prototype.presentActionSheet = function () {
        var _this = this;
        var actionSheet = this.actionSheetCtrl.create({
            title: 'Sélectionner la source d image',
            buttons: [
                {
                    text: 'Choisir une photo de la bibliothèque',
                    handler: function () {
                        _this.loadImageFromLibrary();
                    }
                },
                {
                    text: 'Prendre une photo',
                    handler: function () {
                        _this.takePicture();
                    }
                },
                {
                    text: 'Annuler',
                    role: 'cancel'
                }
            ]
        });
        actionSheet.present();
    };
    EditCommunityPage.prototype.onBlurEmail = function () {
        this.validateEmail = true;
    };
    EditCommunityPage.prototype.onChangeCity = function (selected) {
        var index = this.cities.findIndex(function (i) { return i.id == selected; });
        this.community.codePostal = this.cities[index].code;
    };
    EditCommunityPage.prototype.onChangeCategory = function (selected) {
        this.categoryNames = [];
        var _loop_1 = function (c) {
            var index = this_1.allCategories.findIndex(function (i) { return i.id == c; });
            if (index != -1) {
                this_1.categoryNames.push(this_1.allCategories[index]);
            }
        };
        var this_1 = this;
        for (var _i = 0, selected_1 = selected; _i < selected_1.length; _i++) {
            var c = selected_1[_i];
            _loop_1(c);
        }
    };
    EditCommunityPage.prototype.takePicture = function () {
        var _this = this;
        this.camera.getPicture({
            destinationType: this.camera.DestinationType.DATA_URL,
            quality: 100,
            targetWidth: 600,
            targetHeight: 600,
            allowEdit: true,
            correctOrientation: true,
            encodingType: this.camera.EncodingType.JPEG
        }).then(function (imageData) {
            // imageData is a base64 encoded string
            _this.toDelete = false;
            _this.associationPhoto = "data:image/jpeg;base64," + imageData;
        });
    };
    EditCommunityPage.prototype.loadImageFromLibrary = function () {
        var _this = this;
        this.camera.getPicture({
            destinationType: this.camera.DestinationType.DATA_URL,
            sourceType: this.camera.PictureSourceType.PHOTOLIBRARY,
            quality: 100,
            targetWidth: 600,
            targetHeight: 600,
            allowEdit: true,
            correctOrientation: true,
            encodingType: this.camera.EncodingType.JPEG
        }).then(function (imageData) {
            // imageData is a base64 encoded string
            _this.toDelete = false;
            _this.associationPhoto = "data:image/jpeg;base64," + imageData;
        });
    };
    EditCommunityPage.prototype.deletePhoto = function () {
        this.community.image_url = null;
        this.associationPhoto = null;
        this.toDelete = true;
    };
    EditCommunityPage.prototype.capitalize = function (event, type) {
        if (event) {
            if (type == 'title') {
                this.community.name = event.charAt(0).toUpperCase() + event.slice(1);
            }
        }
    };
    EditCommunityPage.prototype.goBack = function () {
        this.navCtrl.pop();
    };
    EditCommunityPage.prototype.checkFocus = function (element) {
        if (this.platform.is('android')) {
            var requiredElement = element.target.offsetParent.parentElement;
            var yOffset = requiredElement.offsetTop;
            this.content.scrollTo(0, yOffset, 2000);
        }
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["ViewChild"])(__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* Content */]),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* Content */])
    ], EditCommunityPage.prototype, "content", void 0);
    EditCommunityPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-edit-community',template:/*ion-inline-start:"D:\celaneo\mobile\new-mobile\test\src\pages\edit-community\edit-community.html"*/'<!--\n\n  Generated template for the EditAssociationPage page.\n\n\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n\n  Ionic pages and navigation.\n\n-->\n\n<ion-header class="mobile-header" *ngIf="appGlobals.token">\n\n    <ion-grid>\n\n        <ion-row>\n\n            <ion-col col-2 text-left>\n\n                <div class="item">\n\n                    <ion-icon name="ios-arrow-back" (click)="goBack()"></ion-icon>\n\n                </div>\n\n            </ion-col>\n\n            <ion-col col-8 text-center class="page-title">\n\n\n\n                <ion-title text-capitalize>Profil</ion-title>\n\n            </ion-col>\n\n            <ion-col col-2>\n\n                <div class="item" text-right>\n\n\n\n                </div>\n\n            </ion-col>\n\n        </ion-row>\n\n    </ion-grid>\n\n</ion-header>\n\n\n\n\n\n<ion-content padding>\n\n    <div class="div-left">\n\n        <div text-right class="back"><img src="assets/imgs/icons/1.png" (click)="goBack()"></div>\n\n    </div>\n\n    <div class="div-center div-margin-top" *ngIf="community">\n\n        <form (ngSubmit)="editCommuForm(commuForm.invalid)" #commuForm="ngForm">\n\n            <ion-grid>\n\n                <ion-row>\n\n                    <div *ngIf="community.image_url || associationPhoto; else elseBlock" text-center>\n\n                        <img src="{{community.image_url}}" *ngIf="community.image_url && !associationPhoto" (click)="presentActionSheet()">\n\n                        <img src="{{associationPhoto}}" *ngIf="associationPhoto" (click)="presentActionSheet()">\n\n                        <ion-icon name="trash" class="icon-delete" (click)="deletePhoto();" *ngIf="association.image_url"></ion-icon>\n\n                    </div>\n\n                </ion-row>\n\n                <ng-template #elseBlock>\n\n\n\n                    <ion-col col-12 text-center> <img class="button-img" src="assets/imgs/icons/boutton-white.png"\n\n                            (click)="presentActionSheet()"></ion-col>\n\n\n\n                </ng-template>\n\n            </ion-grid>\n\n\n\n            <ion-grid class="padding-horizontal">\n\n\n\n                <ion-row>\n\n                    <ion-col col-12 text-center class="margin-top">\n\n                        <ion-label text-left color="light-black" stacked>Nom de l\'association</ion-label>\n\n                        <ion-item class="item-input-white" [class.formError]="name.invalid && (name.dirty || submited || name.touched)">\n\n                            <ion-input name="name" type="text" id="name" [(ngModel)]="community.name" #name="ngModel"\n\n                                (focus)="checkFocus($event)" (change)="capitalize($event.target.value, \'title\')"\n\n                                required text-capitalize></ion-input>\n\n                        </ion-item>\n\n                        <div class="error-msg" *ngIf="name.invalid && (name.dirty || submited || name.touched)">\n\n                            <span class="error">Champs nom obligatoire</span>\n\n                        </div>\n\n                    </ion-col>\n\n                    <ion-col col-12 text-center>\n\n                        <ion-label text-left class="margin-bottom-ie" color="light-black" stacked>Ville</ion-label>\n\n                        <ion-item class="item-input-white no-padding select-not-ie" [class.formError]="city.invalid && (city.dirty || submited || city.touched)">\n\n                            <ion-select class="select-white" name="city" submitText="Ok" cancelText="Annuler"\n\n                                [(ngModel)]="selectedCity" #city="ngModel" (ionChange)="onChangeCity($event)" required>\n\n                                <ion-option *ngFor="let city of cities" value={{city.id}}>{{city.name}}</ion-option>\n\n                            </ion-select>\n\n                        </ion-item>\n\n                        <ion-col class="item-input-white no-padding select-ie" [class.formError]="city.invalid && (city.dirty || submited || city.touched)">\n\n                            <select class="select-white input-select-ie" name="city" [(ngModel)]="selectedCity" #city="ngModel"\n\n                                required>\n\n                                <option *ngFor="let city of cities" value={{city.id}} (ionChange)="onChangeCity($event.srcElement.value)">{{city.name}}</option>\n\n                            </select>\n\n                        </ion-col>\n\n                        <div class="error-msg" *ngIf="city.invalid && (city.dirty || submited || city.touched)">\n\n                            <span class="error">Champs ville obligatoire</span>\n\n                        </div>\n\n                    </ion-col>\n\n                   <!-- <ion-col col-12 text-center>\n\n                        <ion-label text-left class="margin-bottom-ie" color="light-black" stacked>Catégorie</ion-label>\n\n                        <ion-item class="item-input-white no-padding select-not-ie" [class.formError]="category.invalid && (category.dirty || submited || category.touched)">\n\n                            <ion-select class="select-white" name="category" submitText="Ok" cancelText="Annuler"\n\n                                [(ngModel)]="selectedCategory" #category="ngModel" (ionChange)="onChangeCategory($event)"\n\n                                required>\n\n                                <ion-option *ngFor="let category of categories" value={{category.id}}>{{category.name}}</ion-option>\n\n                            </ion-select>\n\n                        </ion-item>\n\n                        <ion-col class="item-input-white no-padding select-ie" [class.formError]="category.invalid && (category.dirty || submited || category.touched)">\n\n                            <select class="select-white input-select-ie" name="category" [(ngModel)]="selectedCategory"\n\n                                #category="ngModel" required>\n\n                                <option *ngFor="let category of categories" value={{category.id}} (Click)="onChangeCategory($event.srcElement.value)">{{category.name}}</option>\n\n                            </select>\n\n                        </ion-col>\n\n                        <div class="error-msg" *ngIf="category.invalid && (category.dirty || submited || category.touched)">\n\n                            <span class="error">Champs catégorie obligatoire</span>\n\n                        </div>\n\n                    </ion-col>-->\n\n                    <ion-col col-12 text-center>\n\n                        <ion-label text-left color="light-black" stacked>Téléphone</ion-label>\n\n                        <ion-item class="item-input-white" [class.formError]="phone.invalid && (phone.dirty || submited || phone.touched)">\n\n                            <ion-input [pattern]="phoneRegexp" name="phone" type="tel" [(ngModel)]="community.phone" #phone="ngModel" (focus)="checkFocus($event)"\n\n                                required></ion-input>\n\n                        </ion-item>\n\n                        <div class="error-msg" *ngIf="phone.invalid && (phone.dirty || submited || phone.touched)">\n\n                            <span class="error">Champs téléphone obligatoire. Exemple : 0999999999 ou 33999999999</span>\n\n                        </div>\n\n                    </ion-col>\n\n                    <ion-col col-12 text-center>\n\n                        <ion-label text-left color="light-black" stacked>Adresse mail</ion-label>\n\n                        <ion-item class="item-input-white" [class.formError]="email.invalid && (email.dirty || submited || email.touched)">\n\n                            <ion-input name="email" type="email" autocapitalize="none" [(ngModel)]="community.email"\n\n                                #email="ngModel" (focus)="checkFocus($event)" (mouseout)="onBlurEmail()" pattern="[a-z0-9!#$%&\'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&\'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?"\n\n                                required></ion-input>\n\n                        </ion-item>\n\n                        <div class="error-msg" *ngIf="email.invalid && (email.dirty || submited || email.touched)">\n\n                            <span class="error">Champs adresse mail obligatoire</span>\n\n                        </div>\n\n                    </ion-col>\n\n                    <ion-col col-12 text-center>\n\n                        <button ion-button color="primary" type="submit" round>Modifier la communauté</button>\n\n                    </ion-col>\n\n                </ion-row>\n\n\n\n            </ion-grid>\n\n        </form>\n\n    </div>\n\n    <div class="div-right"></div>\n\n</ion-content>'/*ion-inline-end:"D:\celaneo\mobile\new-mobile\test\src\pages\edit-community\edit-community.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_3__providers_user_user__["a" /* UserProvider */],
            __WEBPACK_IMPORTED_MODULE_2__providers_association_association__["a" /* AssociationProvider */],
            __WEBPACK_IMPORTED_MODULE_9__providers_community_community__["a" /* CommunityProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_4__ionic_native_camera__["a" /* Camera */],
            __WEBPACK_IMPORTED_MODULE_7__providers_eventsrest_eventsrest__["a" /* EventsrestProvider */],
            __WEBPACK_IMPORTED_MODULE_8__providers_comment_comment__["a" /* CommentProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["a" /* ActionSheetController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["x" /* Platform */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_5__providers_globals_globals__["a" /* GlobalsProvider */],
            __WEBPACK_IMPORTED_MODULE_6__providers_app_app__["a" /* AppProvider */]])
    ], EditCommunityPage);
    return EditCommunityPage;
}());

//# sourceMappingURL=edit-community.js.map

/***/ }),

/***/ 480:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return VolunteersPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_globals_globals__ = __webpack_require__(8);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_volunteers_volunteers__ = __webpack_require__(238);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_eventsrest_eventsrest__ = __webpack_require__(9);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





/**
 * Generated class for the VolunteersPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var VolunteersPage = /** @class */ (function () {
    function VolunteersPage(navCtrl, navParams, serviceEvent, appGlobals, volunteersService, loader, myAlert, appEvents, myModal) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.serviceEvent = serviceEvent;
        this.appGlobals = appGlobals;
        this.volunteersService = volunteersService;
        this.loader = loader;
        this.myAlert = myAlert;
        this.appEvents = appEvents;
        this.myModal = myModal;
        this.selected = [];
        this.selectAll = false;
        this.account = this.navParams.get('account');
    }
    VolunteersPage.prototype.ionViewWillEnter = function () {
        this.appGlobals.showHeader = false;
        this.getVolunteers();
    };
    VolunteersPage.prototype.getVolunteers = function () {
        this.volunteers = this.account.volunteers;
    };
    VolunteersPage.prototype.deleteVolunteers = function (id) {
        var _this = this;
        var loadingPopup = this.loader.create({});
        loadingPopup.present();
        this.volunteersService.deleteVolunteer(id).then(function (data) {
            for (var key in _this.appGlobals.adminAssociations) {
                var value = _this.appGlobals.adminAssociations[key];
                if (value.id == data['association'].id) {
                    _this.appGlobals.adminAssociations[key]['volunteers'] = data['association']['volunteers'];
                }
            }
            _this.account = data['association'];
            _this.volunteers = _this.account.volunteers;
            loadingPopup.dismiss();
        }, function (err) {
            loadingPopup.dismiss(_this.account);
            _this.appEvents.publish('http:errors', err);
        });
    };
    VolunteersPage.prototype.checkUncheckAll = function () {
        if (this.selectAll == true) {
            this.selected = [];
            for (var _i = 0, _a = this.volunteers; _i < _a.length; _i++) {
                var volunteer = _a[_i];
                this.selected.push(volunteer.id);
            }
        }
        else {
            this.selectAll = false;
            this.selected = [];
        }
    };
    VolunteersPage.prototype.checkUncheckItem = function (id) {
        var foundAt = this.selected.indexOf(id);
        if (foundAt >= 0) {
            this.selected.splice(foundAt, 1);
            this.selectAll = false;
        }
        else {
            this.selected.push(id);
        }
    };
    VolunteersPage.prototype.sendEmail = function () {
        var volunteersMailModal = this.myModal.create('VolunteersMailPage', { "selectedVolunteers": this.selected, "account": this.account }, { cssClass: 'style-modal' });
        volunteersMailModal.present();
    };
    VolunteersPage.prototype.goBack = function () {
        this.navCtrl.pop();
    };
    VolunteersPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-volunteers',template:/*ion-inline-start:"D:\celaneo\mobile\new-mobile\test\src\pages\volunteers\volunteers.html"*/'<!--\n\n  Generated template for the VolunteersPage page.\n\n\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n\n  Ionic pages and navigation.\n\n-->\n\n<ion-header class="mobile-header" *ngIf="appGlobals.token">\n\n    <ion-grid>\n\n        <ion-row>\n\n            <ion-col col-2 text-left>\n\n                <div class="item">\n\n                    <ion-icon name="ios-arrow-back" (click)="goBack()"></ion-icon>\n\n                </div>\n\n            </ion-col>\n\n            <ion-col col-8 text-center class="page-title">\n\n                <ion-title>Bénévoles</ion-title>\n\n            </ion-col>\n\n            <ion-col col-2>\n\n\n\n            </ion-col>\n\n        </ion-row>\n\n    </ion-grid>\n\n</ion-header>\n\n<ion-content>\n\n    <div class="div-left">\n\n        <div text-right class="back"><img src="assets/imgs/icons/1.png" (click)="goBack()"></div>\n\n    </div>\n\n    <!--bloc central -->\n\n    <div class="div-center">\n\n        <button class="volunteers-mail" ion-button full (click)="sendEmail()">Envoyer un mail aux bénévoles\n\n            sélectionnés</button>\n\n        <ion-list class="volunteers-list">\n\n            <ion-item>\n\n                <ion-label>Tout cocher</ion-label>\n\n                <ion-checkbox [(ngModel)]="selectAll" (click)="checkUncheckAll()"></ion-checkbox>\n\n            </ion-item>\n\n            <div class="listScrolled">\n\n                <ng-container *ngFor="let volunteer of volunteers">\n\n                    <ion-item class="volunteer-item" >\n\n                        <ion-label>\n\n                            {{volunteer.lastname |\n\n                            capitalize}} {{volunteer.firstname | capitalize}}\n\n                            <p class="volunteer-email">\n\n                                <!--<ion-icon ios="ios-call" md="md-call" *ngIf="volunteer.type == \'phone\'"></ion-icon>\n\n                                <ion-icon ios="ios-mail" md="md-mail" *ngIf="volunteer.type == \'mail\'"></ion-icon>-->\n\n                                {{volunteer.email}}<br/>\n\n                                {{volunteer.value}}\n\n                            </p>\n\n                        </ion-label>\n\n                        <ion-checkbox checked="true" *ngIf="selectAll" (click)="checkUncheckItem(volunteer.id)"></ion-checkbox>\n\n                        <ion-checkbox checked="false" *ngIf="!selectAll" (click)="checkUncheckItem(volunteer.id)"></ion-checkbox>\n\n                    </ion-item>\n\n                    <div class="rightItem" (click)="deleteVolunteers(volunteer.id)">\n\n                        <img src="assets/imgs/icons/trashVolunteers.png" class="trashVolunteers">\n\n                    </div>\n\n                </ng-container>\n\n            </div>\n\n        </ion-list>\n\n\n\n    </div>\n\n    <!-- fin bloc central -->\n\n    <div class="div-right" text-center>\n\n    </div>\n\n</ion-content>'/*ion-inline-end:"D:\celaneo\mobile\new-mobile\test\src\pages\volunteers\volunteers.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_4__providers_eventsrest_eventsrest__["a" /* EventsrestProvider */],
            __WEBPACK_IMPORTED_MODULE_2__providers_globals_globals__["a" /* GlobalsProvider */],
            __WEBPACK_IMPORTED_MODULE_3__providers_volunteers_volunteers__["a" /* VolunteersProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */]])
    ], VolunteersPage);
    return VolunteersPage;
}());

//# sourceMappingURL=volunteers.js.map

/***/ }),

/***/ 481:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AdherentPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_globals_globals__ = __webpack_require__(8);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_association_association__ = __webpack_require__(36);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_merchant_merchant__ = __webpack_require__(39);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





/**
 * Generated class for the AdherentPage page.
 *
 * See http://ionicframework.com/docs/components/#navigation for more info
 * on Ionic pages and navigation.
 */
var AdherentPage = /** @class */ (function () {
    function AdherentPage(navCtrl, navParams, appGlobals, associaltionProvider, merchantProvider, loadingCtrl, alertCtrl, event) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.appGlobals = appGlobals;
        this.associaltionProvider = associaltionProvider;
        this.merchantProvider = merchantProvider;
        this.loadingCtrl = loadingCtrl;
        this.alertCtrl = alertCtrl;
        this.event = event;
        this.adherentList = [];
    }
    AdherentPage.prototype.ionViewDidLoad = function () {
    };
    AdherentPage.prototype.ionViewWillLoad = function () {
        this.account = this.navParams.get('account');
        this.getAdherentsList();
    };
    AdherentPage.prototype.acceptMemberShip = function (adherent, type) {
        var _this = this;
        var loadingPopup = this.loadingCtrl.create({});
        loadingPopup.present();
        if (type == 'association') {
            this.associaltionProvider.AcceptMemberShip(this.account.id, adherent.user_id).then(function (data) {
                _this.getAdherentsList();
                loadingPopup.dismiss();
            }, function (error) {
                console.log(error);
            });
        }
        else {
            this.merchantProvider.AcceptMemberShip(this.account.id, adherent.user_id).then(function (data) {
                _this.getAdherentsList();
                loadingPopup.dismiss();
            }, function (error) {
                console.log(error);
            });
        }
    };
    AdherentPage.prototype.deleteMemberShip = function (adherent, type) {
        var _this = this;
        var alert = this.alertCtrl.create({
            title: 'Supprimer cet adhérent',
            subTitle: 'Voulez-vous vraiment supprimer cet adhérent ?',
            buttons: [
                {
                    text: 'Annuler',
                    role: 'cancel',
                    handler: function () {
                    }
                },
                {
                    text: 'OK',
                    handler: function (data) {
                        var loadingPopup = _this.loadingCtrl.create({});
                        loadingPopup.present();
                        if (type == 'association') {
                            _this.associaltionProvider.DeleteMemberShip(_this.account.id, adherent.user_id).then(function (data) {
                                _this.getAdherentsList();
                                loadingPopup.dismiss();
                            }, function (error) {
                                console.log(error);
                            });
                        }
                        else {
                            _this.merchantProvider.DeleteMemberShip(_this.account.id, adherent.user_id).then(function (data) {
                                _this.getAdherentsList();
                                loadingPopup.dismiss();
                            }, function (error) {
                                console.log(error);
                            });
                        }
                    }
                }
            ]
        });
        alert.present();
    };
    AdherentPage.prototype.refuseMemberShip = function (adherent, type) {
        var _this = this;
        var loadingPopup = this.loadingCtrl.create({});
        loadingPopup.present();
        if (type == 'association') {
            this.associaltionProvider.RefuseMemberShip(this.account.id, adherent.user_id).then(function (data) {
                loadingPopup.dismiss();
                _this.getAdherentsList();
            }, function (error) {
                console.log(error);
            });
        }
        else {
            this.merchantProvider.RefuseMemberShip(this.account.id, adherent.user_id).then(function (data) {
                loadingPopup.dismiss();
                _this.getAdherentsList();
            }, function (error) {
                console.log(error);
            });
        }
    };
    AdherentPage.prototype.goBack = function () {
        this.navCtrl.pop();
    };
    AdherentPage.prototype.ionViewWillEnter = function () {
        this.appGlobals.showHeader = false;
    };
    AdherentPage.prototype.getAdherentsList = function () {
        var _this = this;
        var loadingPopup = this.loadingCtrl.create({});
        loadingPopup.present();
        if (this.account.type == 'association') {
            this.associaltionProvider.getMemberShipDemands(this.account.id).then(function (data) {
                _this.adherentList = data;
                loadingPopup.dismiss();
            }, function (error) {
            });
        }
        else {
            this.merchantProvider.getMemberShipDemands(this.account.id).then(function (data) {
                _this.adherentList = data;
                loadingPopup.dismiss();
            }, function (error) {
            });
        }
    };
    AdherentPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-adherent',template:/*ion-inline-start:"D:\celaneo\mobile\new-mobile\test\src\pages\adherent\adherent.html"*/'<!--\n\n  Generated template for the AdherentPage page.\n\n\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n\n  Ionic pages and navigation.\n\n-->\n\n<ion-header class="mobile-header" *ngIf="appGlobals.token">\n\n  <ion-grid>\n\n    <ion-row>\n\n      <ion-col col-2 text-left>\n\n        <div class="item">\n\n          <ion-icon name="ios-arrow-back" (click)="goBack()"></ion-icon>\n\n        </div>\n\n      </ion-col>\n\n      <ion-col col-8 text-center class="page-title">\n\n        <ion-title>Gérer les Adhésions</ion-title>\n\n      </ion-col>\n\n      <ion-col col-2>\n\n        <div class="item" text-right>\n\n\n\n        </div>\n\n      </ion-col>\n\n    </ion-row>\n\n  </ion-grid>\n\n</ion-header>\n\n\n\n\n\n<ion-content padding>\n\n    <div class="div-left">\n\n        <div text-right class="back"><img src="assets/imgs/icons/1.png" (click)="goBack()"></div>\n\n    </div>\n\n      <div class="list-header oval header-top">\n\n        <div text-center>\n\n          <p class="header-title">Adhésions en attente de validation</p>\n\n        </div>\n\n      </div>\n\n      <ion-list class="listScrolled" no-lines>\n\n          <ion-item *ngFor="let adherent of adherentList.demands" class="item-list">\n\n            <div class="row">\n\n              <div col-3>\n\n                <ion-avatar float-left>\n\n                 <img src="{{adherent.imageURL}}">\n\n                </ion-avatar>\n\n              </div>\n\n              <div col-6 class="div-middle-allign">\n\n                <div>\n\n                  <p class="item-text text-black">{{adherent.firstname}} {{adherent.lastname}}<br>\n\n                      <a href="mailto:{{adherent.email}}">{{adherent.email}}</a></p>\n\n                </div>\n\n              </div>\n\n                <div col-3 float-right style="display: -webkit-box;">\n\n                    <ion-avatar (click)="acceptMemberShip(adherent,account.type)">\n\n                        <img class="accept_refuse_button" src="assets/imgs/icons/accept_membership.png">\n\n                    </ion-avatar>\n\n                    <ion-avatar (click)="refuseMemberShip(adherent,account.type)" class="margin-icons">\n\n                        <img class="accept_refuse_button" src="assets/imgs/icons/refuse_membership.png">\n\n                    </ion-avatar>\n\n                </div>\n\n            </div>\n\n          </ion-item>\n\n      </ion-list>\n\n    <div class="list-header oval header-top" style="margin-top: -8%">\n\n        <div text-center>\n\n            <p class="header-title">Liste des Adhérents</p>\n\n        </div>\n\n    </div>\n\n    <ion-list class="listScrolled" no-lines>\n\n        <ion-item *ngFor="let adherent of adherentList.members" class="item-list">\n\n            <div class="row">\n\n                <div col-3>\n\n                    <ion-avatar float-left>\n\n                        <img src="{{adherent.imageURL}}">\n\n                    </ion-avatar>\n\n                </div>\n\n                <div col-6="" class="div-middle-allign">\n\n                    <div>\n\n                        <p class="item-text text-black">{{adherent.firstname}} {{adherent.lastname}}\n\n                        <br><a href="mailto:{{adherent.email}}">{{adherent.email}}</a></p>\n\n                    </div>\n\n                </div>\n\n                <div col-3 float-right style="display: -webkit-box;">\n\n                    <ion-avatar class="align-trash" (click)="deleteMemberShip(adherent,account.type)">\n\n                        <img class="accept_refuse_button" src="assets/imgs/icons/trashVolunteers.png">\n\n                    </ion-avatar>\n\n                </div>\n\n            </div>\n\n        </ion-item>\n\n    </ion-list>\n\n</ion-content>'/*ion-inline-end:"D:\celaneo\mobile\new-mobile\test\src\pages\adherent\adherent.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_2__providers_globals_globals__["a" /* GlobalsProvider */],
            __WEBPACK_IMPORTED_MODULE_3__providers_association_association__["a" /* AssociationProvider */],
            __WEBPACK_IMPORTED_MODULE_4__providers_merchant_merchant__["a" /* MerchantProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */]])
    ], AdherentPage);
    return AdherentPage;
}());

//# sourceMappingURL=adherent.js.map

/***/ }),

/***/ 482:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CreateAssociationPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__providers_association_association__ = __webpack_require__(36);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_user_user__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__ionic_native_camera__ = __webpack_require__(29);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__providers_globals_globals__ = __webpack_require__(8);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__providers_app_app__ = __webpack_require__(38);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__my_space_my_space__ = __webpack_require__(62);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__Models_association__ = __webpack_require__(975);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__providers_eventsrest_eventsrest__ = __webpack_require__(9);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};










/**
/**
 * Generated class for the CreateAssociationPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var CreateAssociationPage = /** @class */ (function () {
    function CreateAssociationPage(event, navCtrl, navParams, userService, service, camera, serviceEvent, actionSheetCtrl, toastCtrl, platform, loadingCtrl, modal, alertCtrl, appGlobals, appService) {
        var _this = this;
        this.event = event;
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.userService = userService;
        this.service = service;
        this.camera = camera;
        this.serviceEvent = serviceEvent;
        this.actionSheetCtrl = actionSheetCtrl;
        this.toastCtrl = toastCtrl;
        this.platform = platform;
        this.loadingCtrl = loadingCtrl;
        this.modal = modal;
        this.alertCtrl = alertCtrl;
        this.appGlobals = appGlobals;
        this.appService = appService;
        this.lastImage = null;
        this.check = false;
        this.check2 = false;
        this.validateEmail = false;
        this.submited = false;
        this.showCondition = false;
        this.association = new __WEBPACK_IMPORTED_MODULE_8__Models_association__["a" /* Association */]();
        this.eventParticipted = [];
        this.allCategories = [];
        this.disabledTheme = true;
        this.phoneRegexp = /^(33|0)\d{9}$/;
        this.linkedCommunities = JSON.parse(localStorage.getItem("allCommunities"));
        this.myDate = new Date().toISOString();
        this.today = new Date().toISOString();
        this.userImg = localStorage.getItem("account_photo");
        this.userImg = localStorage.getItem("account_photo");
        this.userService.findCategories().then(function (data) {
            _this.categories = data;
        });
        this.cities = this.appGlobals.allCities;
        this.event.publish('updateFooter');
    }
    CreateAssociationPage.prototype.ionViewDidLoad = function () {
        this.appGlobals.currentPageTitle = "Créer mon groupe/ association";
    };
    CreateAssociationPage.prototype.ionViewWillEnter = function () {
        this.appGlobals.showHeader = false;
        this.appGlobals.currentPageid = "mySpace";
    };
    CreateAssociationPage.prototype.ionViewWillLeave = function () {
        this.appGlobals.showHeader = true;
    };
    CreateAssociationPage.prototype.logEvent = function (e) {
        this.check = e._value;
    };
    CreateAssociationPage.prototype.addAssociationForm = function (errorValidation) {
        var _this = this;
        this.submited = true;
        if (!errorValidation && this.check) {
            var loadingPopup_1 = this.loadingCtrl.create({});
            loadingPopup_1.present();
            this.service.post(this.association).then(function (data) {
                loadingPopup_1.dismiss();
                var successAlert = _this.alertCtrl.create({
                    title: 'Succès',
                    subTitle: 'Le compte de votre groupe/association a été créé avec succès',
                    buttons: [
                        {
                            text: 'OK',
                            handler: function (data) {
                                _this.event.publish('user:table');
                                _this.navCtrl.setRoot(__WEBPACK_IMPORTED_MODULE_7__my_space_my_space__["a" /* MySpacePage */]);
                            }
                        }
                    ]
                });
                successAlert.present();
            }, function (err) {
                loadingPopup_1.dismiss();
                _this.event.publish('http:errors', err);
            });
        }
        else {
            if (this.check == false) {
                this.showCondition = true;
            }
            else {
                this.showCondition = false;
            }
            var elements = document.getElementsByClassName('ng-invalid');
            var requiredElement = elements[1].parentElement;
            var yOffset = requiredElement.offsetTop;
            this.content.scrollTo(0, yOffset, 2000);
        }
    };
    CreateAssociationPage.prototype.presentActionSheet = function () {
        var _this = this;
        var actionSheet = this.actionSheetCtrl.create({
            title: 'Sélectionner la source d image',
            buttons: [
                {
                    text: 'Choisir une photo de la bibliothèque',
                    handler: function () {
                        _this.loadImageFromLibrary();
                    }
                },
                {
                    text: 'Prendre une photo',
                    handler: function () {
                        _this.takePicture();
                    }
                },
                {
                    text: 'Annuler',
                    role: 'cancel'
                }
            ]
        });
        actionSheet.present();
    };
    CreateAssociationPage.prototype.takePicture = function () {
        var _this = this;
        this.camera.getPicture({
            destinationType: this.camera.DestinationType.DATA_URL,
            quality: 100,
            targetWidth: 600,
            targetHeight: 600,
            allowEdit: true,
            correctOrientation: true,
            encodingType: this.camera.EncodingType.JPEG
        }).then(function (imageData) {
            _this.association.setPhoto("data:image/jpeg;base64," + imageData);
        });
    };
    CreateAssociationPage.prototype.loadImageFromLibrary = function () {
        var _this = this;
        this.camera.getPicture({
            destinationType: this.camera.DestinationType.DATA_URL,
            sourceType: this.camera.PictureSourceType.PHOTOLIBRARY,
            quality: 100,
            targetWidth: 600,
            targetHeight: 600,
            allowEdit: true,
            correctOrientation: true,
            encodingType: this.camera.EncodingType.JPEG
        }).then(function (imageData) {
            _this.association.setPhoto("data:image/jpeg;base64," + imageData);
        });
    };
    CreateAssociationPage.prototype.deletePhoto = function () {
        this.association.setPhoto(null);
    };
    CreateAssociationPage.prototype.capitalize = function (event, type) {
        if (event) {
            if (type == 'title') {
                this.association.setName(event.charAt(0).toUpperCase() + event.slice(1));
            }
            if (type == 'address') {
                this.association.setAddress(event.charAt(0).toUpperCase() + event.slice(1));
            }
            if (type == 'timing') {
                this.association.setTiming(event.charAt(0).toUpperCase() + event.slice(1));
            }
            if (type == 'description') {
                this.association.setDescription(event.charAt(0).toUpperCase() + event.slice(1));
            }
        }
    };
    CreateAssociationPage.prototype.onBlurEmail = function () {
        this.validateEmail = true;
    };
    CreateAssociationPage.prototype.onChangeCity = function (selected) {
        var index = this.cities.findIndex(function (i) { return i.name === selected; });
        this.association.setCodePostal(this.cities[index].code);
    };
    CreateAssociationPage.prototype.onChangeCode = function (selected) {
        var index = this.cities.findIndex(function (i) { return i.code == selected; });
        if (index != -1) {
            this.association.setCity(this.cities[index].name);
        }
    };
    CreateAssociationPage.prototype.capitalizeData = function (data) {
        return data.charAt(0).toUpperCase() + data.slice(1);
    };
    CreateAssociationPage.prototype.goBack = function () {
        this.navCtrl.pop();
    };
    CreateAssociationPage.prototype.checkFocus = function (element) {
        if (this.platform.is('android')) {
            var requiredElement = element.target.offsetParent.parentElement;
            var yOffset = requiredElement.offsetTop;
            this.content.scrollTo(0, yOffset, 2000);
        }
    };
    CreateAssociationPage.prototype.onChangeCommunity = function () {
        var categories = [];
        this.allCategories = [];
        this.association.setCategory(null);
        for (var _i = 0, _a = this.linkedCommunities; _i < _a.length; _i++) {
            var linkedcommu = _a[_i];
            if (this.association.getCommunity() == linkedcommu["id"]) {
                categories = linkedcommu["categories"];
            }
        }
        for (var _b = 0, categories_1 = categories; _b < categories_1.length; _b++) {
            var category = categories_1[_b];
            if (category.type == "Activité groupe / association") {
                this.allCategories.push(category);
            }
        }
        this.disabledTheme = this.allCategories.length == 0;
    };
    CreateAssociationPage.prototype.SelectCity = function () {
        var _this = this;
        var myModal2 = this.modal.create('SelectCityPage', {}, { cssClass: 'cities-modal' });
        myModal2.onDidDismiss(function (data) {
            if (data) {
                _this.association.setCity(data.name);
            }
        });
        myModal2.present();
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["ViewChild"])(__WEBPACK_IMPORTED_MODULE_2_ionic_angular__["f" /* Content */]),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["f" /* Content */])
    ], CreateAssociationPage.prototype, "content", void 0);
    CreateAssociationPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["Component"])({
            selector: 'page-create-association',template:/*ion-inline-start:"D:\celaneo\mobile\new-mobile\test\src\pages\create-association\create-association.html"*/'<!--\n\n  Generated template for the CreateAssociationPage page.\n\n\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n\n  Ionic pages and navigation.\n\n-->\n\n<ion-header class="mobile-header" *ngIf="appGlobals.token">\n\n    <ion-grid>\n\n        <ion-row>\n\n            <ion-col col-2 text-left>\n\n                <div class="item">\n\n                    <ion-icon name="ios-arrow-back" (click)="goBack()"></ion-icon>\n\n                </div>\n\n            </ion-col>\n\n            <ion-col col-8 text-center class="page-title">\n\n\n\n                <ion-title>{{appGlobals.currentPageTitle}}</ion-title>\n\n            </ion-col>\n\n            <ion-col col-2>\n\n                <div class="item" text-right>\n\n\n\n                </div>\n\n            </ion-col>\n\n        </ion-row>\n\n    </ion-grid>\n\n</ion-header>\n\n<ion-content padding scroll="true" overflow-scroll="true">\n\n    <div class="div-left">\n\n        <div text-right class="back"><img src="assets/imgs/icons/1.png" (click)="goBack()"></div>\n\n    </div>\n\n    <div class="div-center div-margin-top">\n\n        <form (ngSubmit)="addAssociationForm(associationForm.invalid)" #associationForm="ngForm">\n\n            <ion-grid>\n\n                <ion-row>\n\n                    <div *ngIf="association.photo; else elseBlock" text-center>\n\n                        <img src="{{association.photo}}" (click)="presentActionSheet()" *ngIf="association.photo">\n\n                        <ion-icon name="trash" class="icon-delete" (click)="deletePhoto();"\n\n                                  *ngIf="association.photo"></ion-icon>\n\n                    </div>\n\n                </ion-row>\n\n                <ng-template #elseBlock>\n\n\n\n                    <ion-col col-12 text-center><img class="button-img" src="assets/imgs/icons/boutton-white.png"\n\n                                                     (click)="presentActionSheet()"></ion-col>\n\n\n\n                </ng-template>\n\n            </ion-grid>\n\n\n\n            <ion-grid class="padding-horizontal">\n\n\n\n                <ion-row>\n\n                    <ion-col col-12 text-center class="margin-top">\n\n                        <ion-label text-left color="light-black" stacked>Nom du groupe/ association</ion-label>\n\n                        <ion-item class="item-input-white"\n\n                                  [class.formError]="name.invalid && (name.dirty || submited || name.touched)">\n\n                            <ion-input autocomplete="on" autocorrect="on" name="name" type="text" id="name" [(ngModel)]="association.name" #name="ngModel"\n\n                                       (focus)="checkFocus($event)" (change)="capitalize($event.target.value, \'title\')"\n\n                                       required text-capitalize></ion-input>\n\n                        </ion-item>\n\n                        <div class="error-msg" *ngIf="name.invalid && (name.dirty || submited || name.touched)">\n\n                            <span class="error">Champs nom obligatoire</span>\n\n                        </div>\n\n                    </ion-col>\n\n                    <ion-col col-12 text-center>\n\n                        <ion-label text-left class="margin-bottom-ie" color="light-black" stacked>Adresse</ion-label>\n\n                        <ion-item class="item-input-white">\n\n                            <ion-textarea name="address" [(ngModel)]="association.address" #address="ngModel"\n\n                                          (focus)="checkFocus($event)"\n\n                                          (change)="capitalize($event.target.value, \'address\')"></ion-textarea>\n\n                        </ion-item>\n\n                    </ion-col>\n\n                    <ion-col col-12 text-center>\n\n                        <ion-label text-left calss="margin-bottom-ie" color="light-black" stacked>Ville</ion-label>\n\n                        <ion-item class="item-grey no-padding-left" [class.formError]="city.invalid && (city.dirty || submited || city.touched)">\n\n                            <ion-input (click)="SelectCity()"   readonly autocomplete="off" autocorrect="on" name="city" type="text" id="city" placeholder="Ville" [(ngModel)]="association.city"\n\n                                #city="ngModel" required></ion-input>\n\n                        </ion-item>\n\n\n\n                        <div class="error-msg" *ngIf="city.invalid && (city.dirty || submited || city.touched)">\n\n                            <span class="error">Champs ville obligatoire</span>\n\n                        </div>\n\n                    </ion-col>\n\n                    <ion-col col-12 text-center>\n\n                        <ion-item class="item-input-white no-padding select-not-ie"\n\n                                  [class.formError]="community.invalid && (community.dirty || submited || community.touched)">\n\n                            <ion-select (ionChange)="onChangeCommunity($event)" class="select-white"\n\n                                        required [(ngModel)]="association.community"\n\n                                        #community="ngModel" class="select-white no-padding-left"\n\n                                        placeholder="Communauté" name="communaute" submitText="Ok" cancelText="Annuler"\n\n                                        required>\n\n                                <ion-option *ngFor="let community of linkedCommunities" value={{community.id}}>\n\n                                    {{community.name}}\n\n                                </ion-option>\n\n                            </ion-select>\n\n                        </ion-item>\n\n                        <ion-col class="item-input-white no-padding select-ie"\n\n                                 [class.formError]="community.invalid && (community.dirty || submited || community.touched)">\n\n                            <select (ionChange)="onChangeCommunity($event)"\n\n                                    required [(ngModel)]="association.community" #community="ngModel"\n\n                                    class="select-white input-select-ie"\n\n                                    placeholder="Communauté" name="community" required>\n\n                                <option *ngFor="let community of linkedCommunities" value={{community.id}}>\n\n                                    {{community.name}}\n\n                                </option>\n\n                            </select>\n\n                        </ion-col>\n\n                        <div class="error-msg"\n\n                             *ngIf="community.invalid && (community.dirty || submited || community.touched)">\n\n                            <span class="error">Champs Communauté obligatoire</span>\n\n                        </div>\n\n                    </ion-col>\n\n                    <ion-col col-12 text-center>\n\n                        <ion-item class="item-input-white no-padding select-not-ie"\n\n                                  [class.formError]="category.invalid && (category.dirty || submited || category.touched)">\n\n                            <ion-select [disabled]="disabledTheme" [required]="!disabledTheme"\n\n                                        class="select-white" placeholder="Thème" name="category"\n\n                                        submitText="Ok"\n\n                                        cancelText="Annuler" [(ngModel)]="association.category" #category="ngModel"\n\n                                        required>\n\n                                <ion-option *ngFor="let category of allCategories" value={{category.id}}>\n\n                                    {{category.name}}\n\n                                </ion-option>\n\n                            </ion-select>\n\n                        </ion-item>\n\n                        <ion-col class="item-grey select-ie"\n\n                                 [class.formError]="category.invalid && (category.dirty || submited || category.touched)">\n\n                            <select [disabled]="disabledTheme" [required]="!disabledTheme"\n\n                                    class="select-white input-select-ie"\n\n                                    placeholder="Thème" name="category" [(ngModel)]="association.category"\n\n                                    #category="ngModel"\n\n                                    required>\n\n                                <option></option>\n\n                                <option value={{category.id}} *ngFor="let category of allCategories">{{category.name}}\n\n                                </option>\n\n                            </select>\n\n                        </ion-col>\n\n                        <div class="error-msg"\n\n                             *ngIf="category.invalid && (category.dirty || submited || category.touched)">\n\n                            <span class="error">Champs Thèmes obligatoire</span>\n\n                        </div>\n\n                    </ion-col>\n\n                    <ion-col col-12 text-center>\n\n                        <ion-label text-left color="light-black" stacked>Horaires d\'ouverture</ion-label>\n\n                        <ion-item class="item-input-white">\n\n                            <ion-textarea class="textarea-timing" type="text" lang="fr" name="timing"\n\n                                          (focus)="checkFocus($event)"\n\n                                          [(ngModel)]="association.timing" #timing="ngModel"\n\n                                          (change)="capitalize($event.target.value, \'timing\')"></ion-textarea>\n\n                        </ion-item>\n\n                    </ion-col>\n\n                    <ion-col col-12 text-center>\n\n                        <ion-label text-left color="light-black" stacked>Téléphone</ion-label>\n\n                        <ion-item class="item-input-white"\n\n                                  [class.formError]="phone.invalid && (phone.dirty || submited || phone.touched)">\n\n                            <ion-input name="phone" type="tel" [(ngModel)]="association.phone" [pattern]="phoneRegexp"\n\n                                       (focus)="checkFocus($event)"\n\n                                       #phone="ngModel" required></ion-input>\n\n                        </ion-item>\n\n                        <div class="error-msg" *ngIf="phone.invalid && (phone.dirty || submited || phone.touched)">\n\n                            <span class="error">Champs téléphone obligatoire. Exemple : 0999999999 ou 33999999999</span>\n\n                        </div>\n\n                    </ion-col>\n\n                    <ion-col col-12 text-center>\n\n                        <ion-label text-left color="light-black" stacked>Adresse mail</ion-label>\n\n                        <ion-item class="item-input-white"\n\n                                  [class.formError]="email.invalid && (email.dirty || submited || email.touched)">\n\n                            <ion-input name="email" type="email" autocapitalize="none" [(ngModel)]="association.email"\n\n                                       #email="ngModel" (focus)="checkFocus($event)" (mouseout)="onBlurEmail()"\n\n                                       pattern="[a-z0-9!#$%&\'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&\'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?"\n\n                                       required></ion-input>\n\n                        </ion-item>\n\n                        <div class="error-msg" *ngIf="email.invalid && (email.dirty || submited || email.touched)">\n\n                            <span class="error">Champs adresse mail obligatoire</span>\n\n                        </div>\n\n                    </ion-col>\n\n                    <ion-col col-12 text-center>\n\n                        <ion-label text-left color="light-black" stacked>Description</ion-label>\n\n                        <ion-item class="item-input-white">\n\n                            <ion-textarea class="height-textarea" name="description"\n\n                                          [(ngModel)]="association.description"\n\n                                          #description="ngModel" (focus)="checkFocus($event)"\n\n                                          (change)="capitalize($event.target.value, \'description\')"></ion-textarea>\n\n                        </ion-item>\n\n                    </ion-col>\n\n                    <ion-col col-12 text-center>\n\n                        <ion-item>\n\n                            <ion-label text-left color="black">Je déclare avoir l\'autorisation du représentant de ce\n\n                                groupe\n\n                                ou cette association pour être administrateur de cette page\n\n                            </ion-label>\n\n                            <ion-checkbox color="primary" (ionChange)="logEvent($event)" required></ion-checkbox>\n\n                        </ion-item>\n\n                        <div class="error-msg" *ngIf="show_condition">\n\n                            <span class="error" *ngIf="show_condition">Veuillez valider la condition</span>\n\n                        </div>\n\n                    </ion-col>\n\n                    <ion-col col-12 text-center>\n\n                        <button class="rounded-button" ion-button color="primary" type="submit" round>Valider la\n\n                            création\n\n                        </button>\n\n                    </ion-col>\n\n                    <ion-col col-12 text-center>\n\n                        <ion-item class="info-confirmation-title">\n\n                            <ion-label text-center color="light-black">Vous recevrez une notification lorsque\n\n                                l\'administrateur de la\n\n                                communauté aura validé votre création de groupe/association\n\n                            </ion-label>\n\n                        </ion-item>\n\n                    </ion-col>\n\n                </ion-row>\n\n\n\n            </ion-grid>\n\n        </form>\n\n    </div>\n\n    <div class="div-right"></div>\n\n</ion-content>'/*ion-inline-end:"D:\celaneo\mobile\new-mobile\test\src\pages\create-association\create-association.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_2_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["u" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["v" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_3__providers_user_user__["a" /* UserProvider */],
            __WEBPACK_IMPORTED_MODULE_0__providers_association_association__["a" /* AssociationProvider */],
            __WEBPACK_IMPORTED_MODULE_4__ionic_native_camera__["a" /* Camera */],
            __WEBPACK_IMPORTED_MODULE_9__providers_eventsrest_eventsrest__["a" /* EventsrestProvider */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["a" /* ActionSheetController */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["z" /* ToastController */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["x" /* Platform */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["s" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_5__providers_globals_globals__["a" /* GlobalsProvider */],
            __WEBPACK_IMPORTED_MODULE_6__providers_app_app__["a" /* AppProvider */]])
    ], CreateAssociationPage);
    return CreateAssociationPage;
}());

//# sourceMappingURL=create-association.js.map

/***/ }),

/***/ 483:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return NotificationPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_globals_globals__ = __webpack_require__(8);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_user_user__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__detail_article_detail_article__ = __webpack_require__(56);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__event_details_event_details__ = __webpack_require__(55);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__association_sheet_association_sheet__ = __webpack_require__(78);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__providers_eventsrest_eventsrest__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__providers_article_article__ = __webpack_require__(31);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__merchant_card_merchant_card__ = __webpack_require__(130);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};










/**
 * Generated class for the NotificationPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var NotificationPage = /** @class */ (function () {
    function NotificationPage(navCtrl, articleService, navParams, appGlobals, service, serviceEvent, loader, myAlert, myModal, loadingCtrl, event) {
        this.navCtrl = navCtrl;
        this.articleService = articleService;
        this.navParams = navParams;
        this.appGlobals = appGlobals;
        this.service = service;
        this.serviceEvent = serviceEvent;
        this.loader = loader;
        this.myAlert = myAlert;
        this.myModal = myModal;
        this.loadingCtrl = loadingCtrl;
        this.event = event;
        this.userEvents = [];
        this.items = [];
        this.importants = [];
        this.page = 1;
        localStorage.setItem("count_notifications", '0');
    }
    NotificationPage.prototype.ionViewWillEnter = function () {
        this.items = [];
        this.importants = [];
        this.appGlobals.currentPageid = "mySpace";
        this.appGlobals.showHeader = false;
        this.appGlobals.showFooter = true;
        this.event.publish('updateFooter');
        this.getNotifications();
        this.getParticipationNotif();
    };
    NotificationPage.prototype.ionViewWillLeave = function () {
        this.appGlobals.showHeader = true;
        this.appGlobals.showFooter = true;
    };
    NotificationPage.prototype.ionViewDidEnter = function () {
        this.event.publish('updateFooter');
    };
    NotificationPage.prototype.goBack = function () {
        this.navCtrl.pop();
    };
    NotificationPage.prototype.getNotifications = function () {
        this.loadNotifications();
    };
    NotificationPage.prototype.getParticipationNotif = function () {
        var _this = this;
        return new Promise(function () {
            _this.service.getParticipationNotif().then(function (data) {
                _this.participationNotifs = data;
                var i = 1;
                for (var _i = 0, _a = _this.participationNotifs; _i < _a.length; _i++) {
                    var notification = _a[_i];
                    _this.importants.push(notification);
                    if (_this.participationNotifs.length == i) {
                        _this.event.publish('clean_notifications', _this.importants.length);
                    }
                    i++;
                }
            }, function (err) {
                _this.event.publish('http:errors', err);
            });
        });
    };
    NotificationPage.prototype.loadNotifications = function () {
        var _this = this;
        var loadingPopup = this.loadingCtrl.create({});
        loadingPopup.present();
        return new Promise(function () {
            _this.page = 1;
            _this.service.getNotifications(_this.page).then(function (data) {
                _this.notifications = data;
                for (var _i = 0, _a = _this.notifications; _i < _a.length; _i++) {
                    var notification = _a[_i];
                    _this.items.push(notification);
                }
                loadingPopup.dismiss();
            }, function (err) {
                loadingPopup.dismiss();
                _this.event.publish('http:errors', err);
            });
        });
    };
    NotificationPage.prototype.doInfinite = function (infiniteScroll) {
        var _this = this;
        this.page += 1;
        this.service.getNotifications(this.page).then(function (data) {
            _this.notifications = data;
            for (var _i = 0, _a = _this.notifications; _i < _a.length; _i++) {
                var notification = _a[_i];
                _this.items.push(notification);
                infiniteScroll.complete();
            }
        });
    };
    NotificationPage.prototype.openArticleCommentPage = function (article) {
        // this.openArticleDetails(article);
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_4__detail_article_detail_article__["a" /* DetailArticlePage */], {
            articleId: article
        });
    };
    NotificationPage.prototype.openEventDetails = function (event) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_5__event_details_event_details__["a" /* EventDetailsPage */], {
            id: event
        });
    };
    NotificationPage.prototype.openArticleDetails = function (item) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_4__detail_article_detail_article__["a" /* DetailArticlePage */], {
            articleId: item.article
        });
    };
    NotificationPage.prototype.openAssociation = function (association) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_6__association_sheet_association_sheet__["a" /* AssociationSheetPage */], {
            id: association
        });
    };
    NotificationPage.prototype.openMerchant = function (merchant) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_9__merchant_card_merchant_card__["a" /* MerchantCardPage */], {
            currentMerchant: { creatorId: merchant }
        });
    };
    NotificationPage.prototype.openParticipation = function (event) {
        var _this = this;
        this.userEvents = [];
        var loadingPopup = this.loader.create({});
        // Show the popup
        loadingPopup.present();
        this.serviceEvent.getDetailsEvent(event).then(function (data) {
            _this.userEvents.push(data);
            var myModal = _this.myModal.create('AddParticipantsNbrePage', { 'events': JSON.stringify(_this.userEvents) }, { cssClass: 'style-modal' });
            loadingPopup.dismiss();
            myModal.onDidDismiss(function (data) {
                _this.importants = [];
                _this.getParticipationNotif();
            });
            myModal.present();
        }, function (err) {
            loadingPopup.dismiss();
            _this.event.publish('http:errors', err);
        });
    };
    NotificationPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-notification',template:/*ion-inline-start:"D:\celaneo\mobile\new-mobile\test\src\pages\notification\notification.html"*/'<!--\n\n  Generated template for the NotificationPage page.\n\n\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n\n  Ionic pages and navigation.\n\n-->\n\n<ion-header class="mobile-header" *ngIf="appGlobals.token">\n\n    <ion-grid>\n\n        <ion-row>\n\n            <ion-col col-2 text-left>\n\n                <div class="item">\n\n                    <ion-icon name="ios-arrow-back" (click)="goBack()"></ion-icon>\n\n                </div>\n\n            </ion-col>\n\n            <ion-col col-8 text-center class="page-title">\n\n                <ion-title text-capitalize>Notifications</ion-title>\n\n            </ion-col>\n\n            <ion-col col-2>\n\n                <div class="item" text-right></div>\n\n            </ion-col>\n\n        </ion-row>\n\n    </ion-grid>\n\n</ion-header>\n\n<ion-content>\n\n    <div class="div-left">\n\n        <div text-right class="back"><img src="assets/imgs/icons/1.png" (click)="goBack()"></div>\n\n    </div>\n\n    <div class="div-center margin-top">\n\n        <ion-grid class="grid-desktop">\n\n            <ion-row justify-content-center>\n\n                <ion-col col-12 text-center>\n\n                    <h5 class="title-not">Notifications</h5>\n\n                </ion-col>\n\n            </ion-row>\n\n        </ion-grid>\n\n        <ion-grid class="grid-notification">\n\n            <ion-list>\n\n                <ion-row justify-content-center *ngIf="importants">\n\n                    <ion-col col-12 justify-content-center class="col-notification important border-notification"\n\n                        *ngFor="let item of importants">\n\n                        <div class="div-border ">\n\n                            <ion-icon class="icon-notification" *ngIf="item.type == \'event\'" name="calendar"></ion-icon>\n\n                            <p class="msg-notification" no-margin>{{item.message}}\n\n                                <a class="msg-notification" (click)="openParticipation(item.event);">Ajouter</a>\n\n                            </p>\n\n                        </div>\n\n                    </ion-col>\n\n                </ion-row>\n\n                <ion-row justify-content-center class="row-mobile" *ngIf="items">\n\n                    <ion-col col-12 justify-content-center class="col-notification border-notification" *ngFor="let item of items">\n\n                        <div class="div-border">\n\n                            <ion-icon class="icon-notification" *ngIf="item.type == \'event\'" name="walk"></ion-icon>\n\n                            <ion-icon class="icon-notification" *ngIf="item.type == \'article\'" name="people"></ion-icon>\n\n                            <ion-icon class="icon-notification" *ngIf="item.type == \'newComment\' || item.type == \'replyComment\'"\n\n                                name="people"></ion-icon>\n\n                            <ion-icon class="icon-notification" *ngIf="item.type == \'admin\'" name="people"></ion-icon>\n\n                            <ion-icon class="icon-notification" *ngIf="item.type == \'volunteer\'" name="calendar"></ion-icon>\n\n                            <ion-icon class="icon-notification" *ngIf="item.type == \'eventParticipateRemove\'" name="calendar"></ion-icon>\n\n                            <ion-icon class="icon-notification" *ngIf="item.type == \'eventDisabled\'" name="calendar"></ion-icon>\n\n                            <ion-icon class="icon-notification" *ngIf="item.type == \'eventParticipateAdd\'" name="calendar"></ion-icon>\n\n                            <ion-icon class="icon-notification" *ngIf="item.type == \'merchant\' || item.type == \'associationRefused\'"\n\n                                name="md-cart"></ion-icon>\n\n                            <ion-icon class="icon-notification" *ngIf="item.type == \'association\' || item.type == \'merchantRefused\'"\n\n                                name="ios-globe-outline"></ion-icon>\n\n\n\n                            <p class="msg-notification" no-margin>{{item.message}}\n\n                                <a class="msg-notification" *ngIf="item.type == \'article\'" (click)="openArticleDetails(item);">Accéder\n\n                                    à l’article</a>\n\n                                <a class="msg-notification" *ngIf="item.type == \'event\' || item.type == \'eventParticipateRemove\'  || item.type == \'volunteer\'  || item.type == \'eventParticipateAdd\'  || item.type == \'eventDisabled\' "\n\n                                    (click)="openEventDetails(item.event);">Voir l\'événement</a>\n\n                                <a class="msg-notification" *ngIf="item.type == \'newComment\' || item.type == \'replyComment\'"\n\n                                    (click)="openArticleCommentPage(item.article_comment);">Accéder </a>\n\n                                <!--<a class="msg-notification" *ngIf="item.type == \'merchant\'" (click)="openMerchant(item.merchant);">Voir\n\n                                    le partenaire</a>\n\n                                <a class="msg-notification" *ngIf="item.type == \'association\'" (click)="openAssociation(item.association);">Voir\n\n                                    le groupe</a>-->\n\n                            </p>\n\n                        </div>\n\n                    </ion-col>\n\n\n\n                    <ion-infinite-scroll (ionInfinite)="doInfinite($event)">\n\n                        <ion-infinite-scroll-content></ion-infinite-scroll-content>\n\n                    </ion-infinite-scroll>\n\n                </ion-row>\n\n                <ion-row class="row-desktop" *ngIf="items">\n\n                    <ion-row class="width-100" *ngFor="let item of items">\n\n\n\n                        <ion-col col-12 class="col-notification border-notification" *ngIf="item.tag == \'new\'">\n\n                            <div class="div-border new">\n\n                                <ion-icon class="icon-notification" *ngIf="item.type == \'event\'" name="walk"></ion-icon>\n\n                                <ion-icon class="icon-notification" *ngIf="item.type == \'article\'" name="people"></ion-icon>\n\n                                <ion-icon class="icon-notification" *ngIf="item.type == \'newComment\' || item.type == \'replyComment\'"\n\n                                    name="people"></ion-icon>\n\n                                <ion-icon class="icon-notification" *ngIf="item.type == \'admin\'" name="people"></ion-icon>\n\n                                <ion-icon class="icon-notification" *ngIf="item.type == \'volunteer\'" name="calendar"></ion-icon>\n\n                                <ion-icon class="icon-notification" *ngIf="item.type == \'eventParticipateRemove\'" name="calendar"></ion-icon>\n\n                                <ion-icon class="icon-notification" *ngIf="item.type == \'eventDisabled\'" name="calendar"></ion-icon>\n\n                                <ion-icon class="icon-notification" *ngIf="item.type == \'eventParticipateAdd\'" name="calendar"></ion-icon>\n\n                                <ion-icon class="icon-notification" *ngIf="item.type == \'merchant\' || item.type == \'merchantRefused\'"\n\n                                    name="md-cart"></ion-icon>\n\n                                <ion-icon class="icon-notification" *ngIf="item.type == \'association\' || item.type == \'associationRefused\'"\n\n                                    name="ios-globe-outline"></ion-icon>\n\n\n\n                                <p class="msg-notification" no-margin>{{item.message}}\n\n                                    <a class="msg-notification" *ngIf="item.type == \'article\'" (click)="openArticleDetails(item);">Accéder\n\n                                        article</a>\n\n                                    <a class="msg-notification" *ngIf="item.type == \'event\' || item.type == \'eventParticipateRemove\'  || item.type == \'volunteer\'  || item.type == \'eventParticipateAdd\'  || item.type == \'eventDisabled\' "\n\n                                        (click)="openEventDetails(item.event);">Voir l\'événement</a>\n\n                                    <a class="msg-notification" *ngIf="item.type == \'newComment\' || item.type == \'replyComment\'"\n\n                                        (click)="openArticleCommentPage(item.article_comment);">Accéder</a>\n\n                                    <!--<a class="msg-notification" *ngIf="item.type == \'merchant\'" (click)="openMerchant(item.merchant);">Voir\n\n                                        Commerçant</a>\n\n                                    <a class="msg-notification" *ngIf="item.type == \'association\'" (click)="openAssociation(item.association);">Voir\n\n                                        Association</a>-->\n\n                                </p>\n\n\n\n                            </div>\n\n                        </ion-col>\n\n                        <ion-col col-12 justify-content-center class="col-notification border-notification" *ngIf="item.tag != \'new\'">\n\n                            <div class="div-border">\n\n                                <ion-icon class="icon-notification" *ngIf="item.type == \'event\'" name="walk"></ion-icon>\n\n                                <ion-icon class="icon-notification" *ngIf="item.type == \'article\'" name="people"></ion-icon>\n\n                                <ion-icon class="icon-notification" *ngIf="item.type == \'newComment\' || item.type == \'replyComment\'"\n\n                                    name="people"></ion-icon>\n\n                                <ion-icon class="icon-notification" *ngIf="item.type == \'admin\'" name="people"></ion-icon>\n\n                                <ion-icon class="icon-notification" *ngIf="item.type == \'volunteer\'" name="calendar"></ion-icon>\n\n                                <ion-icon class="icon-notification" *ngIf="item.type == \'eventParticipateRemove\'" name="calendar"></ion-icon>\n\n                                <ion-icon class="icon-notification" *ngIf="item.type == \'eventDisabled\'" name="calendar"></ion-icon>\n\n                                <ion-icon class="icon-notification" *ngIf="item.type == \'eventParticipateAdd\'" name="calendar"></ion-icon>\n\n                                <ion-icon class="icon-notification" *ngIf="item.type == \'merchant\'" name="md-cart"></ion-icon>\n\n                                <ion-icon class="icon-notification" *ngIf="item.type == \'association\'" name="ios-globe-outline"></ion-icon>\n\n\n\n                                <p class="msg-notification" no-margin>{{item.message}}\n\n                                    <a class="msg-notification" *ngIf="item.type == \'article\'" (click)="openArticleDetails(item);">Voir\n\n                                        l\'article</a>\n\n                                    <a class="msg-notification" *ngIf="item.type == \'event\' || item.type == \'eventParticipateRemove\'  || item.type == \'volunteer\'  || item.type == \'eventParticipateAdd\'  || item.type == \'eventDisabled\' "\n\n                                        (click)="openEventDetails(item.event);">Voir l\'événement</a>\n\n                                    <a class="msg-notification" *ngIf="item.type == \'newComment\' || item.type == \'replyComment\'"\n\n                                        (click)="openArticleCommentPage(item.article_comment);">Accéder</a>\n\n                                    <!--<a class="msg-notification" *ngIf="item.type == \'merchant\'" (click)="openMerchant(item.merchant);">Voir\n\n                                        Commerçant</a>\n\n                                    <a class="msg-notification" *ngIf="item.type == \'association\'" (click)="openAssociation(item.association);">Voir\n\n                                        Association</a>-->\n\n                                </p>\n\n                            </div>\n\n                        </ion-col>\n\n                    </ion-row>\n\n\n\n                    <ion-infinite-scroll (ionInfinite)="doInfinite($event)">\n\n                        <ion-infinite-scroll-content></ion-infinite-scroll-content>\n\n                    </ion-infinite-scroll>\n\n                </ion-row>\n\n                <ion-row justify-content-center *ngIf="items.length == 0">\n\n                    <ion-col col-12 justify-content-center class="">\n\n                        <p class="">&nbsp; Vous n\'avez pas encore de notifications. Toute votre activité vous sera\n\n                            résumée sur cette page.\n\n                    </ion-col>\n\n                </ion-row>\n\n\n\n            </ion-list>\n\n\n\n        </ion-grid>\n\n    </div>\n\n    <div class="div-right" text-left>\n\n\n\n    </div>\n\n</ion-content>'/*ion-inline-end:"D:\celaneo\mobile\new-mobile\test\src\pages\notification\notification.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_8__providers_article_article__["a" /* ArticleProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_2__providers_globals_globals__["a" /* GlobalsProvider */],
            __WEBPACK_IMPORTED_MODULE_3__providers_user_user__["a" /* UserProvider */],
            __WEBPACK_IMPORTED_MODULE_7__providers_eventsrest_eventsrest__["a" /* EventsrestProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */]])
    ], NotificationPage);
    return NotificationPage;
}());

//# sourceMappingURL=notification.js.map

/***/ }),

/***/ 484:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return OrderBy; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};

/**
 * Generated class for the OrderBy pipe.
 *
 * See https://angular.io/docs/ts/latest/guide/pipes.html for more info on
 * Angular Pipes.
 */
var OrderBy = /** @class */ (function () {
    function OrderBy() {
    }
    OrderBy_1 = OrderBy;
    OrderBy._orderByComparator = function (a, b) {
        if ((isNaN(parseFloat(a)) || !isFinite(a)) || (isNaN(parseFloat(b)) || !isFinite(b))) {
            //Isn't a number so lowercase the string to properly compare
            if (a.toLowerCase() < b.toLowerCase())
                return -1;
            if (a.toLowerCase() > b.toLowerCase())
                return 1;
        }
        else {
            //Parse strings as numbers to compare properly
            if (parseFloat(a) < parseFloat(b))
                return -1;
            if (parseFloat(a) > parseFloat(b))
                return 1;
        }
        return 0; //equal each other
    };
    OrderBy.prototype.transform = function (input, _a) {
        var _b = _a[0], config = _b === void 0 ? '+' : _b;
        if (!Array.isArray(input))
            return input;
        if (!Array.isArray(config) || (Array.isArray(config) && config.length == 1)) {
            var propertyToCheck = !Array.isArray(config) ? config : config[0];
            var desc = propertyToCheck.substr(0, 1) == '-';
            //Basic array
            if (!propertyToCheck || propertyToCheck == '-' || propertyToCheck == '+') {
                return !desc ? input.sort() : input.sort().reverse();
            }
            else {
                var property = propertyToCheck.substr(0, 1) == '+' || propertyToCheck.substr(0, 1) == '-'
                    ? propertyToCheck.substr(1)
                    : propertyToCheck;
                return input.sort(function (a, b) {
                    return !desc
                        ? OrderBy_1._orderByComparator(a[property], b[property])
                        : -OrderBy_1._orderByComparator(a[property], b[property]);
                });
            }
        }
        else {
            //Loop over property of the array in order and sort
            return input.sort(function (a, b) {
                for (var i = 0; i < config.length; i++) {
                    var desc = config[i].substr(0, 1) == '-';
                    var property = config[i].substr(0, 1) == '+' || config[i].substr(0, 1) == '-'
                        ? config[i].substr(1)
                        : config[i];
                    var comparison = !desc
                        ? OrderBy_1._orderByComparator(a[property], b[property])
                        : -OrderBy_1._orderByComparator(a[property], b[property]);
                    //Don't return 0 yet in case of needing to sort by next property
                    if (comparison != 0)
                        return comparison;
                }
                return 0; //equal each other
            });
        }
    };
    var OrderBy_1;
    OrderBy = OrderBy_1 = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Pipe"])({
            name: 'orderby',
        })
    ], OrderBy);
    return OrderBy;
}());

//# sourceMappingURL=orderby.js.map

/***/ }),

/***/ 485:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ParameterPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_forms__ = __webpack_require__(21);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_app_app__ = __webpack_require__(38);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_user_user__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__providers_globals_globals__ = __webpack_require__(8);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__pages_delete_citzen_account_first_delete_citzen_account_first__ = __webpack_require__(486);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__pages_delete_citzen_account_last_delete_citzen_account_last__ = __webpack_require__(202);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__Models_user__ = __webpack_require__(203);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__providers_eventsrest_eventsrest__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__ionic_native_camera__ = __webpack_require__(29);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};











/**
 * Generated class for the ParameterPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var ParameterPage = /** @class */ (function () {
    function ParameterPage(navCtrl, formBuilder, loadingCtrl, alertCtrl, appService, appGlobals, serviceEvent, myUser, loader, myAlert, myModal, appEvents, navParams, actionSheetCtrl, platform, camera) {
        this.navCtrl = navCtrl;
        this.formBuilder = formBuilder;
        this.loadingCtrl = loadingCtrl;
        this.alertCtrl = alertCtrl;
        this.appService = appService;
        this.appGlobals = appGlobals;
        this.serviceEvent = serviceEvent;
        this.myUser = myUser;
        this.loader = loader;
        this.myAlert = myAlert;
        this.myModal = myModal;
        this.appEvents = appEvents;
        this.navParams = navParams;
        this.actionSheetCtrl = actionSheetCtrl;
        this.platform = platform;
        this.camera = camera;
        this.changePassword = false;
        this.show_password = false;
        this.show_password_verification = false;
        this.show2_password_verification = false;
        this.show_password_actual = false;
        this.show_erreur_password = false;
        this.show_erreur_password_verification = false;
        this.userAssociationsMerchants = [];
        this.phoneRegexp = /^(33|0)\d{9}$/;
        this.cities = [];
        this.interests = [];
        this.secondaryCities = [];
        this.validateEmail = false;
        this.submited = false;
        this.currentUser = JSON.parse(localStorage.getItem("currentUser"));
        this.user = new __WEBPACK_IMPORTED_MODULE_8__Models_user__["a" /* User */]();
        this.yearsArray = [];
        this.dataPassword = {
            actual_password: '',
            password: '',
            password_verification: ''
        };
        this.user.getCurrent(this.currentUser);
        var i = 1930;
        while (i <= 2010) {
            this.yearsArray.push(i++);
        }
        this.cities = this.appGlobals.allCities;
        this.noChildren = true;
        this.slideOneForm = formBuilder.group({
            'password_actual': ['', __WEBPACK_IMPORTED_MODULE_2__angular_forms__["h" /* Validators */].required],
            'password': ['', __WEBPACK_IMPORTED_MODULE_2__angular_forms__["h" /* Validators */].required],
            'password_verification': ['', __WEBPACK_IMPORTED_MODULE_2__angular_forms__["h" /* Validators */].required]
        });
    }
    ParameterPage.prototype.editForm = function (errorValidation) {
        var _this = this;
        this.submited = true;
        if (!errorValidation) {
            var loadingPopup_1 = this.loadingCtrl.create({});
            loadingPopup_1.present();
            this.myUser.put(this.user).then(function (data) {
                if (data.error) {
                    loadingPopup_1.dismiss();
                    var errorMsg = data.error;
                    var errorAlert = _this.alertCtrl.create({
                        title: 'Oups ! ',
                        subTitle: errorMsg,
                        buttons: [
                            {
                                text: 'Fermer',
                                role: 'cancel',
                                handler: function () {
                                }
                            }
                        ]
                    });
                    errorAlert.present();
                }
                else if (data.success) {
                    if (data.user.city != _this.currentUser.city) {
                        var label = 'cityChanged-' + _this.currentUser.id;
                        _this.appEvents.publish("googleAnalytics", label);
                    }
                    localStorage.setItem("currentUser", JSON.stringify(data.user));
                    loadingPopup_1.dismiss();
                    var successAlert = _this.alertCtrl.create({
                        title: 'Succès',
                        subTitle: 'Votre compte a été modifié avec succès.',
                        buttons: [
                            {
                                text: 'OK',
                                handler: function () {
                                }
                            }
                        ]
                    });
                    successAlert.present();
                }
            }, function (err) {
                loadingPopup_1.dismiss();
                _this.appEvents.publish('http:errors', err);
            });
        }
        else {
            var elements = document.getElementsByClassName('ng-invalid');
            var requiredElement = elements[1].parentElement;
            var yOffset = requiredElement.offsetTop;
            this.content.scrollTo(0, yOffset, 2000);
        }
    };
    ParameterPage.prototype.capitalize = function (event, type) {
        if (event) {
            if (type == 'firstname') {
                this.user.setFirstName(event.charAt(0).toUpperCase() + event.slice(1));
            }
            if (type == 'lastname') {
                this.user.setLastname(event.charAt(0).toUpperCase() + event.slice(1));
            }
        }
    };
    ParameterPage.prototype.onChangeCity = function (selected) {
    };
    ParameterPage.prototype.onBlurEmail = function () {
        this.validateEmail = true;
    };
    ParameterPage.prototype.capitalizeData = function (data) {
        return data.charAt(0).toUpperCase() + data.slice(1);
    };
    ParameterPage.prototype.hideEditPassword = function () {
        this.changePassword = false;
    };
    ParameterPage.prototype.showEditPassword = function () {
        this.changePassword = true;
    };
    ParameterPage.prototype.numbrePassword = function (event, type) {
        if (event) {
            if (type == 'password') {
                if (event.length < 6) {
                    this.show_erreur_password = true;
                }
                else {
                    this.show_erreur_password = false;
                }
            }
            if (type == 'password_verification') {
                if (event.length < 6) {
                    this.show_erreur_password_verification = true;
                }
                else {
                    this.show_erreur_password_verification = false;
                }
            }
        }
    };
    ParameterPage.prototype.passwordForm = function () {
        var _this = this;
        if ((!this.slideOneForm.valid) || ((this.dataPassword.password && this.dataPassword.password_verification) && (this.dataPassword.password != this.dataPassword.password_verification))) {
            if ((this.dataPassword.actual_password == null) || (this.dataPassword.actual_password == '')) {
                this.show_password_actual = true;
            }
            else {
                this.show_password_actual = false;
            }
            if ((this.dataPassword.password == null) || (this.dataPassword.password == '')) {
                this.show_password = true;
            }
            else {
                this.show_password = false;
            }
            if ((this.dataPassword.password_verification == null) || (this.dataPassword.password_verification == '')) {
                this.show_password_verification = true;
            }
            else {
                this.show_password_verification = false;
            }
            if (this.dataPassword.password != this.dataPassword.password_verification) {
                this.show2_password_verification = true;
            }
            else {
                this.show2_password_verification = false;
            }
        }
        else if (this.dataPassword.password.length < 6 || this.dataPassword.password_verification.length < 6) {
        }
        else {
            var loadingPopup_2 = this.loadingCtrl.create({});
            // Show the popup
            loadingPopup_2.present();
            this.myUser.putPassword(this.dataPassword).then(function (data) {
                loadingPopup_2.dismiss();
                if (data.success) {
                    var successAlert = _this.alertCtrl.create({
                        title: 'Succès',
                        subTitle: 'Votre mot de passe a été modifié.',
                        buttons: [
                            {
                                text: 'OK',
                                handler: function () {
                                    _this.slideOneForm.reset();
                                    _this.show2_password_verification = false;
                                    _this.show_password_verification = false;
                                    _this.show_password = false;
                                    _this.show_password_actual = false;
                                }
                            }
                        ]
                    });
                    successAlert.present();
                }
                else {
                    var errorAlert = _this.alertCtrl.create({
                        title: "Erreur",
                        subTitle: 'Votre mot de passe est incorrecte.',
                        buttons: [
                            {
                                text: 'OK',
                                handler: function (data) {
                                    _this.slideOneForm.reset();
                                }
                            }
                        ]
                    });
                    errorAlert.present();
                }
            }, function (err) {
                loadingPopup_2.dismiss();
                _this.appEvents.publish('http:errors', err);
            });
        }
    };
    ParameterPage.prototype.ionViewWillEnter = function () {
        this.appGlobals.showHeader = false;
        this.appGlobals.showFooter = true;
    };
    ParameterPage.prototype.goBack = function () {
        this.navCtrl.pop();
    };
    ParameterPage.prototype.deleteCitzenAccount = function () {
        this.getAssociationsMerchants();
    };
    ParameterPage.prototype.getAssociationsMerchants = function () {
        var _this = this;
        var loadingPopup = this.loadingCtrl.create({});
        loadingPopup.present();
        this.myUser.getAssociationsMerchants().then(function (data) {
            if (data.length == 0) {
                _this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_7__pages_delete_citzen_account_last_delete_citzen_account_last__["a" /* DeleteCitzenAccountLastPage */]);
            }
            else {
                //associations
                if (data.associations) {
                    for (var _i = 0, _a = data.associations; _i < _a.length; _i++) {
                        var association = _a[_i];
                        var item = {
                            id: association.id,
                            name: association.name,
                            type: 'association',
                            suAdmin: ''
                        };
                        _this.userAssociationsMerchants.push(item);
                    }
                }
                // commerçants
                if (data.merchants) {
                    for (var _b = 0, _c = data.merchants; _b < _c.length; _b++) {
                        var merchant = _c[_b];
                        var item = {
                            id: merchant.id,
                            name: merchant.name,
                            type: 'merchant',
                            suAdmin: ''
                        };
                        _this.userAssociationsMerchants.push(item);
                    }
                }
                _this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_6__pages_delete_citzen_account_first_delete_citzen_account_first__["a" /* DeleteCitzenAccountFirstPage */], {
                    items: _this.userAssociationsMerchants
                });
            }
            loadingPopup.dismiss();
        }, function (err) {
            loadingPopup.dismiss();
            _this.appEvents.publish('http:errors', err);
        });
    };
    ParameterPage.prototype.deletePhoto = function () {
        this.user.setImageUrl(null);
    };
    ParameterPage.prototype.presentActionSheet = function () {
        var _this = this;
        var actionSheet = this.actionSheetCtrl.create({
            title: 'Sélectionner la source d image',
            buttons: [
                {
                    text: 'Choisir une photo de la bibliothèque',
                    handler: function () {
                        _this.loadImageFromLibrary();
                    }
                },
                {
                    text: 'Prendre une photo',
                    handler: function () {
                        _this.takePicture();
                    }
                },
                {
                    text: 'Annuler',
                    role: 'cancel'
                }
            ]
        });
        actionSheet.present();
    };
    ParameterPage.prototype.takePicture = function () {
        var _this = this;
        this.camera.getPicture({
            destinationType: this.camera.DestinationType.DATA_URL,
            quality: 100,
            targetWidth: 600,
            targetHeight: 600,
            allowEdit: true,
            correctOrientation: true,
            encodingType: this.camera.EncodingType.JPEG
        }).then(function (imageData) {
            _this.user.setImageUrl("data:image/jpeg;base64," + imageData);
            _this.performChangePicture();
        });
    };
    ParameterPage.prototype.loadImageFromLibrary = function () {
        var _this = this;
        this.camera.getPicture({
            destinationType: this.camera.DestinationType.DATA_URL,
            sourceType: this.camera.PictureSourceType.PHOTOLIBRARY,
            quality: 100,
            targetWidth: 600,
            targetHeight: 600,
            allowEdit: true,
            correctOrientation: true,
            encodingType: this.camera.EncodingType.JPEG
        }).then(function (imageData) {
            // imageData is a base64 encoded string
            _this.user.setImageUrl("data:image/jpeg;base64," + imageData);
            _this.performChangePicture();
        });
    };
    ParameterPage.prototype.performChangePicture = function () {
        var _this = this;
        var loadingPopup = this.loadingCtrl.create({});
        // Show the popup
        loadingPopup.present();
        this.myUser.putProfilePicture(this.user.getImageUrl()).then(function (data) {
            loadingPopup.dismiss();
            if (data.success) {
                var successAlert = _this.alertCtrl.create({
                    title: 'Succès',
                    subTitle: 'Votre photo de profile a été mis à jour avec succès.',
                    buttons: [
                        {
                            text: 'OK',
                            role: 'cancel',
                            handler: function () {
                            }
                        }
                    ]
                });
                successAlert.present();
            }
        }, function (err) {
            loadingPopup.dismiss();
            _this.appEvents.publish('http:errors', err);
        });
    };
    ParameterPage.prototype.checkFocus = function (element) {
        if (this.platform.is('android')) {
            var requiredElement = element.target.offsetParent.parentElement;
            var yOffset = requiredElement.offsetTop;
            this.content.scrollTo(0, yOffset, 2000);
        }
    };
    ParameterPage.prototype.SelectCity = function () {
        var _this = this;
        var myModal2 = this.myModal.create('SelectCityPage', {}, { cssClass: 'cities-modal' });
        myModal2.onDidDismiss(function (data) {
            if (data) {
                _this.user.setCity(data.name);
            }
        });
        myModal2.present();
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["ViewChild"])(__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* Content */]),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* Content */])
    ], ParameterPage.prototype, "content", void 0);
    ParameterPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-parameter',template:/*ion-inline-start:"D:\celaneo\mobile\new-mobile\test\src\pages\parameter\parameter.html"*/'<!--\n\n  Generated template for the ParameterPage page.\n\n\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n\n  Ionic pages and navigation.\n\n-->\n\n<ion-header class="mobile-header" *ngIf="appGlobals.token">\n\n    <ion-grid>\n\n        <ion-row>\n\n            <ion-col col-2 text-left>\n\n                <div class="item">\n\n                    <ion-icon name="ios-arrow-back" (click)="goBack()"></ion-icon>\n\n                </div>\n\n            </ion-col>\n\n            <ion-col col-8 text-center class="page-title">\n\n\n\n                <ion-title> Réglages </ion-title>\n\n            </ion-col>\n\n            <ion-col col-2>\n\n                <div class="item" text-right>\n\n\n\n                </div>\n\n            </ion-col>\n\n        </ion-row>\n\n    </ion-grid>\n\n</ion-header>\n\n\n\n<ion-content>\n\n    <div class="div-left"> </div>\n\n    <div class="div-center div-margin-top">\n\n        <ion-grid class="grid-white no-padding">\n\n            <div class="centre-desktop">\n\n                <ion-row class="grid-white" margin-top>\n\n                    <ion-col col-12 text-center class="padding-bottom" padding>\n\n                        <h5 class="title-content" text-capitalize>{{currentUser.firstname}}</h5>\n\n                    </ion-col>\n\n\n\n                    <ion-col col-12 text-center>\n\n                        <div *ngIf="user.image_url; else elseBlock" text-center>\n\n                            <img class="user-profil-center" src="{{user.image_url}}" (click)="presentActionSheet()"\n\n                                *ngIf="user.image_url">\n\n                            <ion-icon name="trash" class="icon-delete" (click)="deletePhoto();" *ngIf="user.image_url"></ion-icon>\n\n                        </div>\n\n                    </ion-col>\n\n                    <ng-template #elseBlock>\n\n\n\n                        <ion-col col-12 text-center> <img class="button-img" src="assets/imgs/icons/profil_background_empty.png" (click)="presentActionSheet()"></ion-col>\n\n\n\n                    </ng-template>\n\n                    <ion-col col-12 text-center>\n\n                        <button ion-button color="light" (click)=showEditPassword()>Changer mon mot de passe</button>\n\n                    </ion-col>\n\n                </ion-row>\n\n            </div>\n\n        </ion-grid>\n\n        <div padding>\n\n            <form (ngSubmit)="editForm(profileForm.invalid)" #profileForm="ngForm" class="editform">\n\n                <ion-grid class="padding-horizontal">\n\n                    <ion-row>\n\n                        <ion-col col-12 text-center class="margin-top">\n\n                            <ion-label text-left class="margin-bottom-ie" color="light-black" stacked>Ville</ion-label>\n\n                            <ion-item class="item-grey no-padding-left" [class.formError]="city.invalid && (city.dirty || submited || city.touched)">\n\n                                <ion-input (click)="SelectCity()"   readonly autocomplete="off" autocorrect="on" name="city" type="text" id="city" placeholder="Ville" [(ngModel)]="user.city.name"\n\n                                    #city="ngModel" required></ion-input>\n\n                            </ion-item>\n\n                        </ion-col>\n\n                        <ion-col class="item-input-white no-padding select-ie">\n\n                            <select class="select-white input-select-ie" id="city" name="city" [(ngModel)]="user.city"\n\n                                *ngIf="cities">\n\n                                <option *ngFor="let city of cities" value={{city.id}}>{{city.name}}</option>\n\n                            </select>\n\n                        </ion-col>\n\n                        <ion-col col-12 text-center>\n\n                            <ion-label text-left color="light-black" stacked>Nom</ion-label>\n\n                            <ion-item class="item-input-white" [class.formError]="lastname.invalid && (lastname.dirty || submited || lastname.touched)">\n\n                                <ion-input name="lastname" type="text" id="lastname" [(ngModel)]="user.lastname"\n\n                                    #lastname="ngModel" (change)="capitalize($event.target.value, \'lastname\')" (focus)="checkFocus($event)"\n\n                                    required text-capitalize></ion-input>\n\n                            </ion-item>\n\n                            <div class="error-msg" *ngIf="lastname.invalid && (lastname.dirty || submited || lastname.touched)">\n\n                                <span class="error">Champs nom obligatoire</span>\n\n                            </div>\n\n                        </ion-col>\n\n                        <ion-col col-12 text-center>\n\n                            <ion-label text-left color="light-black" stacked>Prénom</ion-label>\n\n                            <ion-item class="item-input-white" [class.formError]="firstname.invalid && (firstname.dirty || submited || firstname.touched)">\n\n                                <ion-input name="firstname" type="text" id="firstname" [(ngModel)]="user.firstname"\n\n                                    #firstname="ngModel" (change)="capitalize($event.target.value, \'firstname\')"\n\n                                    (focus)="checkFocus($event)" required text-capitalize></ion-input>\n\n                            </ion-item>\n\n                        </ion-col>\n\n                        <ion-col col-12 text-center>\n\n                            <ion-label text-left class="margin-bottom-ie" color="light-black" stacked>Année de\n\n                                naissance</ion-label>\n\n                            <ion-item class="item-input-white no-padding select-not-ie">\n\n                                <ion-select class="select-white" id="birth" name="birth" submitText="Ok" cancelText="Non"\n\n                                    [(ngModel)]="user.birth" #birth="ngModel">\n\n                                    <ion-option *ngFor="let n of yearsArray">{{n}}</ion-option>\n\n\n\n                                </ion-select>\n\n                            </ion-item>\n\n                        </ion-col>\n\n                        <ion-col class="item-input-white no-padding select-ie">\n\n                            <select class="select-white input-select-ie" id="birth" name="birth" [(ngModel)]="user.birth"\n\n                                    #birth="ngModel">\n\n                                <option *ngFor="let n of yearsArray">{{n}}</option>\n\n\n\n                            </select>\n\n                        </ion-col>\n\n                        <ion-col col-12 text-center>\n\n                            <ion-label text-left color="light-black" stacked>Adresse e-mail</ion-label>\n\n                            <ion-item class="item-input-white" [class.formError]="email.invalid && (email.dirty || submited || email.touched)">\n\n                                <ion-input name="email" type="email" autocapitalize="none" [(ngModel)]="user.email"\n\n                                    #email="ngModel" (mouseout)="onBlurEmail()" (focus)="checkFocus($event)" pattern="[a-z0-9!#$%&\'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&\'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?"\n\n                                    required></ion-input>\n\n                            </ion-item>\n\n                            <div class="error-msg" *ngIf="email.invalid && (email.dirty || submited || email.touched)">\n\n                                <span class="error">Champs adresse e-mail obligatoire</span>\n\n                            </div>\n\n                        </ion-col>\n\n                        <ion-col col-12 text-center>\n\n                            <ion-label text-left color="light-black" stacked>Téléphone</ion-label>\n\n                            <ion-item class="item-input-white" [class.formError]="phone.invalid && (phone.dirty || submited || phone.touched)">\n\n                                <ion-input [pattern]="phoneRegexp" name="phone" type="tel" autocapitalize="none" [(ngModel)]="user.phone"\n\n                                           #phone="ngModel" (focus)="checkFocus($event)" required></ion-input>\n\n                            </ion-item>\n\n                            <div class="error-msg" *ngIf="phone.invalid && (phone.dirty || submited || phone.touched)">\n\n                                <span class="error">Champs téléphone obligatoire. Exemple : 0999999999 ou 33999999999</span>\n\n                            </div>\n\n                        </ion-col>\n\n                        <ion-col col-12 text-center>\n\n                            <button full ion-button color="primary" class="button-publish" type="submit" round>Modifier mes informations</button>\n\n                        </ion-col>\n\n                    </ion-row>\n\n\n\n                </ion-grid>\n\n            </form>\n\n\n\n            <ion-grid class="padding-horizontal">\n\n                <ion-row>\n\n                    <ion-col col-12 text-center>\n\n                        <button ion-button full color="primary" type="submit" (click)="deleteCitzenAccount()" class="button-publish"\n\n                            round>Supprimer mon compte</button>\n\n                    </ion-col>\n\n                </ion-row>\n\n\n\n            </ion-grid>\n\n        </div>\n\n    </div>\n\n    <div class="div-right"></div>\n\n</ion-content>\n\n\n\n<div class="overlay" *ngIf="changePassword" (click)="hideEditPassword()"></div>\n\n<div class="registred-new-user" *ngIf="changePassword">\n\n    <div class="close-btn" (click)="hideEditPassword()">\n\n        <ion-icon name="md-close"></ion-icon>\n\n    </div>\n\n    <ion-grid>\n\n\n\n        <form class="full-width" name="passwordForm" (ngSubmit)="passwordForm()" novalidate>\n\n\n\n            <ion-row justify-content-center class="frame-events passwordProfilePage">\n\n                <ion-col col-12 text-center>\n\n                    <div [formGroup]="slideOneForm">\n\n                        <ion-list no-margin>\n\n                            <ion-row>\n\n                                <ion-col col-12 text-center>\n\n                                    <ion-item class="item-input-white">\n\n                                        <ion-input formControlName="password_actual" type="password" id="fname"\n\n                                            [(ngModel)]="dataPassword.actual_password" name="actual_password"\n\n                                            placeholder="Mot de passe actuel *" (focus)="checkFocus($event)"></ion-input>\n\n                                    </ion-item>\n\n                                    <div class="error-msg" *ngIf="!slideOneForm.controls.password_actual.valid  && (slideOneForm.controls.password_actual.dirty)">\n\n                                        <span class="error">Veuillez entrer mot de passe valide.</span>\n\n                                    </div>\n\n                                </ion-col>\n\n                            </ion-row>\n\n                            <ion-row>\n\n                                <ion-col col-12 text-center>\n\n                                    <ion-item class="item-input-white">\n\n                                        <ion-input (change)="numbrePassword($event.target.value, \'password\')"\n\n                                            formControlName="password" type="password" id="fname" [(ngModel)]="dataPassword.password"\n\n                                            name="password" placeholder="Mot de passe*" (focus)="checkFocus($event)"></ion-input>\n\n                                    </ion-item>\n\n                                    <div class="error-msg" *ngIf="show_password">\n\n                                        <span class="error">Champs mot de passe obligatoire</span>\n\n                                    </div>\n\n                                    <div class="error-msg" *ngIf="show_erreur_password">\n\n                                        <span class="error">Utilisez au moins 6 caractères</span>\n\n                                    </div>\n\n                                    <div class="error-msg" *ngIf="!slideOneForm.controls.password.valid  && (slideOneForm.controls.password.dirty)">\n\n                                        <span class="error">Veuillez entrer mot de passe valide.</span>\n\n                                    </div>\n\n                                </ion-col>\n\n\n\n                            </ion-row>\n\n                            <ion-row>\n\n                                <ion-col col-12 text-center>\n\n                                    <ion-item class="item-input-white">\n\n                                        <ion-input (change)="numbrePassword($event.target.value, \'password_verification\')"\n\n                                            formControlName="password_verification" type="password" id="fname"\n\n                                            [(ngModel)]="dataPassword.password_verification" name="password_verification"\n\n                                            placeholder="Mot de passe (vérification)*" (focus)="checkFocus($event)"></ion-input>\n\n                                    </ion-item>\n\n                                    <div class="error-msg" *ngIf="show_password_verification">\n\n                                        <span class="error">Champs obligatoire</span>\n\n                                    </div>\n\n                                    <div class="error-msg" *ngIf="show_erreur_password_verification">\n\n                                        <span class="error">Utilisez au moins 6 caractères</span>\n\n                                    </div>\n\n                                    <div class="error-msg" *ngIf="show2_password_verification">\n\n                                        <span class="error">Veuillez vérifier la confirmation de votre mot de passe</span>\n\n                                    </div>\n\n                                    <div class="error-msg" *ngIf="!slideOneForm.controls.password_verification.valid  && (slideOneForm.controls.password_verification.dirty)">\n\n                                        <span class="error">Champs obligatoire</span>\n\n                                    </div>\n\n                                </ion-col>\n\n\n\n                            </ion-row>\n\n                        </ion-list>\n\n                    </div>\n\n                </ion-col>\n\n                <ion-col col-12 text-center>\n\n                    <button ion-button color="light" (click)=showEditPassword() class="passwordbutton">Valider</button>\n\n                </ion-col>\n\n            </ion-row>\n\n        </form>\n\n\n\n    </ion-grid>\n\n</div>'/*ion-inline-end:"D:\celaneo\mobile\new-mobile\test\src\pages\parameter\parameter.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_2__angular_forms__["a" /* FormBuilder */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_3__providers_app_app__["a" /* AppProvider */],
            __WEBPACK_IMPORTED_MODULE_5__providers_globals_globals__["a" /* GlobalsProvider */],
            __WEBPACK_IMPORTED_MODULE_9__providers_eventsrest_eventsrest__["a" /* EventsrestProvider */],
            __WEBPACK_IMPORTED_MODULE_4__providers_user_user__["a" /* UserProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["a" /* ActionSheetController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["x" /* Platform */],
            __WEBPACK_IMPORTED_MODULE_10__ionic_native_camera__["a" /* Camera */]])
    ], ParameterPage);
    return ParameterPage;
}());

//# sourceMappingURL=parameter.js.map

/***/ }),

/***/ 486:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return DeleteCitzenAccountFirstPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_globals_globals__ = __webpack_require__(8);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_user_user__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__pages_delete_citzen_account_last_delete_citzen_account_last__ = __webpack_require__(202);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__providers_eventsrest_eventsrest__ = __webpack_require__(9);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};






/**
 * Generated class for the DeleteCitzenAccountFirstPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var DeleteCitzenAccountFirstPage = /** @class */ (function () {
    function DeleteCitzenAccountFirstPage(navCtrl, appGlobals, serviceEvent, myUser, loadingCtrl, alertCtrl, event, navParams) {
        this.navCtrl = navCtrl;
        this.appGlobals = appGlobals;
        this.serviceEvent = serviceEvent;
        this.myUser = myUser;
        this.loadingCtrl = loadingCtrl;
        this.alertCtrl = alertCtrl;
        this.event = event;
        this.navParams = navParams;
        this.items = [];
        this.errors = [];
        this.submited = false;
        this.items = this.navParams.get("items");
    }
    DeleteCitzenAccountFirstPage.prototype.goBack = function () {
        this.navCtrl.pop();
    };
    DeleteCitzenAccountFirstPage.prototype.ionViewWillEnter = function () {
        this.appGlobals.showHeader = false;
        this.appGlobals.showFooter = true;
    };
    DeleteCitzenAccountFirstPage.prototype.performFirstStepRemove = function (errorValidation) {
        var _this = this;
        this.submited = true;
        if (!errorValidation) {
            var loadingPopup_1 = this.loadingCtrl.create({});
            loadingPopup_1.present();
            this.myUser.postSuperAdminAssociationsMerchants(this.items).then(function (data) {
                loadingPopup_1.dismiss();
                if (data.sucess) {
                    _this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_4__pages_delete_citzen_account_last_delete_citzen_account_last__["a" /* DeleteCitzenAccountLastPage */]);
                }
                else {
                    _this.errors = data.errors;
                    var _loop_1 = function (savedId) {
                        var index = _this.items.findIndex(function (item) { return item.id === savedId; });
                        if (index !== -1) {
                            _this.items.splice(index, 1);
                        }
                    };
                    for (var _i = 0, _a = data.saved; _i < _a.length; _i++) {
                        var savedId = _a[_i];
                        _loop_1(savedId);
                    }
                }
            }, function (err) {
                loadingPopup_1.dismiss();
                _this.event.publish('http:errors', err);
            });
        }
    };
    DeleteCitzenAccountFirstPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-delete-citzen-account-first',template:/*ion-inline-start:"D:\celaneo\mobile\new-mobile\test\src\pages\delete-citzen-account-first\delete-citzen-account-first.html"*/'<ion-header class="mobile-header" *ngIf="appGlobals.token">\n\n    <ion-grid>\n\n        <ion-row>\n\n            <ion-col col-2 text-left>\n\n                <div class="item">\n\n                    <ion-icon name="ios-arrow-back" (click)="goBack()"></ion-icon>\n\n                </div>\n\n            </ion-col>\n\n            <ion-col col-8 text-center class="page-title">\n\n\n\n                <ion-title> Supprimer compte </ion-title>\n\n            </ion-col>\n\n            <ion-col col-2>\n\n                <div class="item" text-right>\n\n\n\n                </div>\n\n            </ion-col>\n\n        </ion-row>\n\n    </ion-grid>\n\n</ion-header>\n\n\n\n<ion-content>\n\n    <div class="div-left"> </div>\n\n    <div class="div-center div-margin-top">\n\n        <div padding>\n\n            <ion-grid class="padding-horizontal">\n\n                <ion-row>\n\n                    <div text-center>\n\n                        Pour supprimer votre compte, veuillez associer le rôle super administrateur de vos associations\n\n                        et commerçants à un autre utilisateur de nous ensemble.\n\n                    </div>\n\n                </ion-row>\n\n                <ion-row>\n\n                    <div class="form-item">\n\n                        <p class="error" *ngFor="let error of errors">{{error}}</p>\n\n                    </div>\n\n                </ion-row>\n\n                <form class="form" #associationsMerchantsForm="ngForm" text-center>\n\n                    <ion-row *ngIf="items">\n\n                        <div class="content-div" *ngFor="let item of items" text-center>\n\n                            <div text-center>\n\n                                <button ion-button color="white-color" round class="button-white" text-center\n\n                                    no-padding>\n\n                                    <div class="block-image" text-center>\n\n                                        <img *ngIf="item.imageURL" class="block-button-img" src="{{item.imageURL}}" />\n\n                                        <img *ngIf="!item.imageURL" class="block-button-img" src="assets/imgs/icons/user_default.png" />\n\n                                    </div>\n\n                                    <div class="block-name">{{item.name}}</div>\n\n                                    <div class="block-icon"></div>\n\n                                </button>\n\n\n\n                                <ion-item class="item-input-white item-input-white-custom">\n\n                                    <ion-input pattern="[a-z0-9!#$%&\'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&\'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?"\n\n                                        class="form-input-text" [class.formError]="email.invalid && (email.dirty || submited || email.touched)"\n\n                                        type="email" id="suAdmin-{{item.type}}-{{item.id}}" [(ngModel)]="item.suAdmin"\n\n                                        #email="ngModel" name="suAdmin-{{item.type}}-{{item.id}}" placeholder="Email du nouveau super administrateur"\n\n                                        required></ion-input>\n\n                                </ion-item>\n\n                                <div class="error-msg">\n\n                                    <span class="error" *ngIf="email.invalid && (email.dirty || submited || email.touched)">Email\n\n                                        invalide</span>\n\n                                </div>\n\n\n\n\n\n                            </div>\n\n\n\n\n\n\n\n\n\n                        </div>\n\n\n\n                    </ion-row>\n\n\n\n                    <div class="form-item">\n\n                        <button (click)="performFirstStepRemove(associationsMerchantsForm.invalid)" ion-button full\n\n                            class="button-valid res">Suivant</button>\n\n                    </div>\n\n\n\n                </form>\n\n            </ion-grid>\n\n\n\n        </div>\n\n    </div>\n\n    <div class="div-right"></div>\n\n</ion-content>'/*ion-inline-end:"D:\celaneo\mobile\new-mobile\test\src\pages\delete-citzen-account-first\delete-citzen-account-first.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_2__providers_globals_globals__["a" /* GlobalsProvider */],
            __WEBPACK_IMPORTED_MODULE_5__providers_eventsrest_eventsrest__["a" /* EventsrestProvider */],
            __WEBPACK_IMPORTED_MODULE_3__providers_user_user__["a" /* UserProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */]])
    ], DeleteCitzenAccountFirstPage);
    return DeleteCitzenAccountFirstPage;
}());

//# sourceMappingURL=delete-citzen-account-first.js.map

/***/ }),

/***/ 487:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return PracticalInformationPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_globals_globals__ = __webpack_require__(8);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__pages_city_projects_city_projects__ = __webpack_require__(204);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__pages_contact_contact__ = __webpack_require__(488);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__pages_help_help__ = __webpack_require__(206);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__number_category_number_category__ = __webpack_require__(131);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__map_map__ = __webpack_require__(132);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__providers_user_user__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__ionic_native_geolocation__ = __webpack_require__(492);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__providers_eventsrest_eventsrest__ = __webpack_require__(9);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};











var PracticalInformationPage = /** @class */ (function () {
    function PracticalInformationPage(navCtrl, navParams, appGlobals, serviceEvent, userService, loader, myAlert, myModal, appEvents, geolocation) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.appGlobals = appGlobals;
        this.serviceEvent = serviceEvent;
        this.userService = userService;
        this.loader = loader;
        this.myAlert = myAlert;
        this.myModal = myModal;
        this.appEvents = appEvents;
        this.geolocation = geolocation;
        this.rootPage = __WEBPACK_IMPORTED_MODULE_3__pages_city_projects_city_projects__["a" /* CityProjectsPage */];
        this.appGlobals.showHeader = false;
    }
    PracticalInformationPage.prototype.ionViewDidLoad = function () {
        this.loadMap();
    };
    PracticalInformationPage.prototype.ionViewWillEnter = function () {
        this.appGlobals.showHeader = false;
        this.appGlobals.showFooter = true;
        this.appEvents.publish('updateFooter');
    };
    PracticalInformationPage.prototype.ionViewWillLeave = function () {
        this.appGlobals.showHeader = true;
        this.appGlobals.showFooter = true;
    };
    PracticalInformationPage.prototype.contact = function () {
        this.navCtrl.setRoot(__WEBPACK_IMPORTED_MODULE_4__pages_contact_contact__["a" /* ContactPage */]);
    };
    PracticalInformationPage.prototype.help = function () {
        this.navCtrl.setRoot(__WEBPACK_IMPORTED_MODULE_5__pages_help_help__["a" /* HelpPage */]);
    };
    PracticalInformationPage.prototype.goBack = function () {
        this.navCtrl.pop();
    };
    PracticalInformationPage.prototype.numbers = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_6__number_category_number_category__["a" /* NumberCategoryPage */]);
    };
    PracticalInformationPage.prototype.linkTo = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_4__pages_contact_contact__["a" /* ContactPage */]);
    };
    PracticalInformationPage.prototype.linksTo = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_5__pages_help_help__["a" /* HelpPage */]);
    };
    PracticalInformationPage.prototype.aLinkTo = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_3__pages_city_projects_city_projects__["a" /* CityProjectsPage */]);
    };
    PracticalInformationPage.prototype.mapAction = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_7__map_map__["a" /* MapPage */]);
    };
    PracticalInformationPage.prototype.loadMap = function () {
        var _this = this;
        this.userService.findCurrentUser().then(function (data) {
            var content = "<h4>Ma Ville</h4>";
            _this.centerPosition(parseFloat(data.cityhall.city.latitude), parseFloat(data.cityhall.city.longitude), content);
        }, function (err) {
            _this.appEvents.publish('http:errors', err);
        });
    };
    PracticalInformationPage.prototype.centerPosition = function (latitude, longitude, content) {
        var latLng = new google.maps.LatLng(latitude, longitude);
        var mapOptions = {
            center: latLng,
            zoom: 15,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        this.map = new google.maps.Map(this.mapElement.nativeElement, mapOptions);
        // add markers
        var markerGreen = {
            url: "assets/imgs/icons/marker-green.png",
            scaledSize: new google.maps.Size(39, 51),
            origin: new google.maps.Point(0, 0),
            anchor: new google.maps.Point(0, 0) // anchor
        };
        var marker = new google.maps.Marker({
            map: this.map,
            animation: google.maps.Animation.DROP,
            position: this.map.getCenter(),
            icon: markerGreen,
        });
        this.addInfoWindow(marker, content);
    };
    PracticalInformationPage.prototype.addInfoWindow = function (marker, content) {
        var _this = this;
        var infoWindow = new google.maps.InfoWindow({
            content: content
        });
        google.maps.event.addListener(marker, 'click', function () {
            infoWindow.open(_this.map, marker);
        });
        return infoWindow;
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["ViewChild"])('map'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_0__angular_core__["ElementRef"])
    ], PracticalInformationPage.prototype, "mapElement", void 0);
    PracticalInformationPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-practical-information',template:/*ion-inline-start:"D:\celaneo\mobile\new-mobile\test\src\pages\practical-information\practical-information.html"*/'<!--\n\n  Generated template for the PracticalInformationPage page.\n\n\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n\n  Ionic pages and navigation.\n\n-->\n\n<ion-header class="mobile-header" *ngIf="appGlobals.token">\n\n    <ion-grid>\n\n        <ion-row>\n\n            <ion-col col-2 text-left>\n\n                <div class="item">\n\n                    <ion-icon name="ios-arrow-back" (click)="goBack()"></ion-icon>\n\n                </div>\n\n            </ion-col>\n\n            <ion-col col-8 text-center class="page-title">\n\n                <ion-title>Informations pratiques</ion-title>\n\n            </ion-col>\n\n            <ion-col col-2>\n\n\n\n            </ion-col>\n\n        </ion-row>\n\n    </ion-grid>\n\n</ion-header>\n\n\n\n\n\n<ion-content>\n\n    <div class="div-left">\n\n        <div text-right class="back"><img src="assets/imgs/icons/1.png" (click)="goBack()"></div>\n\n    </div>\n\n    <!--bloc central -->\n\n    <div class="div-center">\n\n\n\n        <ion-grid padding-bottom class="no-padding grid bar-custom margin-bottom-grid">\n\n\n\n            <ion-row>\n\n\n\n                <ion-col text-center>\n\n                    <button class="custom-button-links" (click)="mapAction()" color="light" text-start>\n\n                        <span class="button-sign-affirmation"> Carte pratique </span>\n\n                        <ion-icon name="ios-arrow-forward" role="img" class="icon icon-md ion-ios-arrow-forward colorized"\n\n                            aria-label="arrow forward" ng-reflect-name="ios-arrow-forward"></ion-icon>\n\n                    </button>\n\n\n\n                    <!-- Maps //  Image non fonctionnelle -->\n\n                    <div class="map-idicator" #map id="map"></div>\n\n\n\n                    <button (click)="aLinkTo()" class="custom-button-links" color="light" text-start>\n\n                        <span class="button-sign-affirmation"> Informations de la ville </span>\n\n                        <ion-icon name="ios-arrow-forward" role="img" class="icon icon-md ion-ios-arrow-forward colorized"\n\n                            aria-label="arrow forward" ng-reflect-name="ios-arrow-forward"></ion-icon>\n\n                    </button>\n\n\n\n                    <button class="custom-button-links" (click)="numbers()" color="light" text-start>\n\n                        <span class="button-sign-affirmation"> Acteurs locaux </span>\n\n                        <ion-icon name="ios-arrow-forward" role="img" class="icon icon-md ion-ios-arrow-forward colorized"\n\n                            aria-label="arrow forward" ng-reflect-name="ios-arrow-forward"></ion-icon>\n\n                    </button>\n\n\n\n                    <button (click)="linkTo()" class="custom-button-links" color="light" text-start>\n\n                        <span class="button-sign-affirmation"> Contact </span>\n\n                        <ion-icon name="ios-arrow-forward" role="img" class="icon icon-md ion-ios-arrow-forward colorized"\n\n                            aria-label="arrow forward" ng-reflect-name="ios-arrow-forward"></ion-icon>\n\n                    </button>\n\n\n\n                    <button (click)="linksTo()" class="custom-button-links" color="light" text-start>\n\n                        <span class="button-sign-affirmation"> Aide </span>\n\n                        <ion-icon name="ios-arrow-forward" role="img" class="icon icon-md ion-ios-arrow-forward colorized"\n\n                            aria-label="arrow forward" ng-reflect-name="ios-arrow-forward"></ion-icon>\n\n                    </button>\n\n                </ion-col>\n\n\n\n            </ion-row>\n\n\n\n\n\n\n\n        </ion-grid>\n\n\n\n    </div>\n\n    <!-- fin bloc central -->\n\n    <div class="div-right" text-center>\n\n    </div>\n\n</ion-content>'/*ion-inline-end:"D:\celaneo\mobile\new-mobile\test\src\pages\practical-information\practical-information.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_2__providers_globals_globals__["a" /* GlobalsProvider */],
            __WEBPACK_IMPORTED_MODULE_10__providers_eventsrest_eventsrest__["a" /* EventsrestProvider */],
            __WEBPACK_IMPORTED_MODULE_8__providers_user_user__["a" /* UserProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_9__ionic_native_geolocation__["a" /* Geolocation */]])
    ], PracticalInformationPage);
    return PracticalInformationPage;
}());

//# sourceMappingURL=practical-information.js.map

/***/ }),

/***/ 488:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ContactPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_globals_globals__ = __webpack_require__(8);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__angular_forms__ = __webpack_require__(21);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_app_app__ = __webpack_require__(38);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__Models_contact__ = __webpack_require__(205);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__providers_eventsrest_eventsrest__ = __webpack_require__(9);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







/**
 * Generated class for the ContactPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var ContactPage = /** @class */ (function () {
    function ContactPage(navCtrl, navParams, serviceEvent, appGlobals, appService, appEvents, formBuilder, myAlert, loader, platform) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.serviceEvent = serviceEvent;
        this.appGlobals = appGlobals;
        this.appService = appService;
        this.appEvents = appEvents;
        this.formBuilder = formBuilder;
        this.myAlert = myAlert;
        this.loader = loader;
        this.platform = platform;
        this.submited = false;
        this.contactObj = new __WEBPACK_IMPORTED_MODULE_5__Models_contact__["a" /* Contact */]();
        this.eventParticipted = [];
        this.appGlobals.showHeader = false;
        this.currentUser = JSON.parse(localStorage.getItem("currentUser"));
        this.slideOneForm = formBuilder.group({
            'object': ['', __WEBPACK_IMPORTED_MODULE_3__angular_forms__["h" /* Validators */].required],
            'description': ['', __WEBPACK_IMPORTED_MODULE_3__angular_forms__["h" /* Validators */].required]
        });
    }
    ContactPage.prototype.ionViewWillEnter = function () {
        this.appGlobals.showHeader = false;
        this.appGlobals.showFooter = true;
    };
    ContactPage.prototype.ionViewWillLeave = function () {
        this.appGlobals.showHeader = true;
        this.appGlobals.showFooter = true;
    };
    ContactPage.prototype.goBack = function () {
        this.navCtrl.pop();
    };
    ContactPage.prototype.contact = function (errorValidation) {
        var _this = this;
        this.submited = true;
        if (!errorValidation) {
            var loadingPopup_1 = this.loader.create({});
            // Show the popup
            loadingPopup_1.present();
            this.appService.postContact(this.contactObj).then(function () {
                loadingPopup_1.dismiss();
                var successAlert = _this.myAlert.create({
                    title: 'Succès',
                    subTitle: 'Votre message a été envoyée avec succès.',
                    buttons: [
                        {
                            text: 'OK',
                            handler: function () {
                                _this.goBack();
                            }
                        }
                    ]
                });
                successAlert.present();
            }, function (err) {
                loadingPopup_1.dismiss();
                _this.appEvents.publish('http:errors', err);
            });
        }
    };
    ContactPage.prototype.checkFocus = function (element) {
        if (this.platform.is('android')) {
            var requiredElement = element.target.offsetParent.parentElement;
            var yOffset = requiredElement.offsetTop;
            this.content.scrollTo(0, yOffset, 2000);
        }
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["ViewChild"])(__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* Content */]),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* Content */])
    ], ContactPage.prototype, "content", void 0);
    ContactPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-contact',template:/*ion-inline-start:"D:\celaneo\mobile\new-mobile\test\src\pages\contact\contact.html"*/'<!--\n\n  Generated template for the ContactPage page.\n\n\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n\n  Ionic pages and navigation.\n\n-->\n\n<ion-header class="mobile-header" *ngIf="appGlobals.token">\n\n    <ion-grid>\n\n        <ion-row>\n\n            <ion-col col-2 text-left>\n\n                <div class="item">\n\n                    <ion-icon name="ios-arrow-back" (click)="goBack()"></ion-icon>\n\n                </div>\n\n            </ion-col>\n\n            <ion-col col-8 text-center class="page-title">\n\n                <ion-title> Signaler un problème </ion-title>\n\n            </ion-col>\n\n            <ion-col col-2>\n\n\n\n            </ion-col>\n\n        </ion-row>\n\n    </ion-grid>\n\n</ion-header>\n\n\n\n\n\n<ion-content>\n\n    <div class="div-left">\n\n        <div text-right class="back"><img src="assets/imgs/icons/1.png" (click)="goBack()"></div>\n\n    </div>\n\n    <!--bloc central -->\n\n    <div class="div-center">\n\n        <ion-grid>\n\n\n\n            <ion-row>\n\n\n\n                <ion-col text-center>\n\n\n\n                    <form (ngSubmit)="contact(contactForm.invalid)" #contactForm="ngForm">\n\n                        <ion-row>\n\n\n\n                            <ion-col col-12 text-left class="bordered">\n\n                                <div text-center>\n\n                                    Vous pouvez envoyer un email à votre mairie. Celui-ci sera traité au même titre\n\n                                    qu\'un email classique\n\n                                </div>\n\n                            </ion-col>\n\n\n\n                            <ion-col col-12 text-center>\n\n                                <ion-label text-left class="margin-bottom-ie" color="light-black" stacked>Ville</ion-label>\n\n                                <ion-item class="item-input-white no-padding select-not-ie" [class.formError]="city.invalid && (city.dirty || submited || city.touched)">\n\n                                    <ion-select class="select-white" name="city" [(ngModel)]="contactObj.city" #city="ngModel"\n\n                                        placeholder="Ville" required>\n\n                                        <ion-option value="{{currentUser.primary_city.id}}">{{currentUser.primary_city.name}}</ion-option>\n\n                                        <ion-option value="{{city.id}}" *ngFor="let city of currentUser.other_cities">{{city.name}}</ion-option>\n\n                                    </ion-select>\n\n                                </ion-item>\n\n                                <ion-col class="item-input-white no-padding select-ie" [class.formError]="city.invalid && (city.dirty || submited || city.touched)">\n\n                                    <select class="select-white input-select-ie" name="city" [(ngModel)]="contactObj.city"\n\n                                        #city="ngModel" placeholder="Ville" required>\n\n                                        <option value="{{currentUser.primary_city.id}}">{{currentUser.primary_city.name}}</option>\n\n                                        <option value="{{city.id}}" *ngFor="let city of currentUser.other_cities">{{city.name}}</option>\n\n                                    </select>\n\n                                </ion-col>\n\n                                <div class="error-msg" *ngIf="city.invalid && (city.dirty || submited || city.touched)">\n\n                                    <span class="error">Champs ville obligatoire</span>\n\n                                </div>\n\n                            </ion-col>\n\n                            <ion-col col-12 text-center>\n\n                                <ion-label text-left color="light-black" stacked>Objet*</ion-label>\n\n                                <ion-item class="item-input-white" [class.formError]="object.invalid && (object.dirty || submited || object.touched)">\n\n                                    <ion-input (focus)="checkFocus($event)" (change)="appGlobals.capitalizeData($event.target.value, \'object\')"\n\n                                        #object="ngModel" type="text" name="object" [(ngModel)]="contactObj.object"\n\n                                        placeholder="Objet" required></ion-input>\n\n                                </ion-item>\n\n                                <div class="error-msg" *ngIf="object.invalid && (object.dirty || submited || object.touched)">\n\n                                    <span class="error">Champs objet obligatoire.</span>\n\n                                </div>\n\n                            </ion-col>\n\n                            <ion-col col-12 text-center>\n\n                                <ion-label text-left color="light-black" stacked>Votre message</ion-label>\n\n                                <ion-item class="item-input-white" [class.formError]="description.invalid && (description.dirty || submited || description.touched)">\n\n                                    <ion-textarea (focus)="checkFocus($event)" (change)="appGlobals.capitalizeData($event.target.value, \'description\')"\n\n                                        #description="ngModel" name="description" [(ngModel)]="contactObj.description"\n\n                                        placeholder="Votre message" required></ion-textarea>\n\n                                </ion-item>\n\n                                <div class="error-msg" *ngIf="description.invalid && (description.dirty || submited || description.touched)">\n\n                                    <span class="error">Champs message obligatoire.</span>\n\n                                </div>\n\n                            </ion-col>\n\n                            <ion-col col-12 text-center>\n\n                                <button ion-button color="primary" type="submit" round>Envoyer</button>\n\n                            </ion-col>\n\n                        </ion-row>\n\n                    </form>\n\n\n\n                </ion-col>\n\n\n\n            </ion-row>\n\n\n\n        </ion-grid>\n\n\n\n    </div>\n\n    <!-- fin bloc central -->\n\n    <div class="div-right" text-center>\n\n    </div>\n\n</ion-content>'/*ion-inline-end:"D:\celaneo\mobile\new-mobile\test\src\pages\contact\contact.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_6__providers_eventsrest_eventsrest__["a" /* EventsrestProvider */],
            __WEBPACK_IMPORTED_MODULE_2__providers_globals_globals__["a" /* GlobalsProvider */],
            __WEBPACK_IMPORTED_MODULE_4__providers_app_app__["a" /* AppProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_3__angular_forms__["a" /* FormBuilder */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["x" /* Platform */]])
    ], ContactPage);
    return ContactPage;
}());

//# sourceMappingURL=contact.js.map

/***/ }),

/***/ 489:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AssociationListPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_globals_globals__ = __webpack_require__(8);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_association_association__ = __webpack_require__(36);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__association_sheet_association_sheet__ = __webpack_require__(78);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__providers_eventsrest_eventsrest__ = __webpack_require__(9);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};






/**
 * Generated class for the AssociationListPage page.
 *
 * See http://ionicframework.com/docs/components/#navigation for more info
 * on Ionic pages and navigation.
 */
var AssociationListPage = /** @class */ (function () {
    function AssociationListPage(event, serviceEvent, globals, navCtrl, navParams, assoiationService, loadingCtrl, alertCtrl) {
        var _this = this;
        this.event = event;
        this.serviceEvent = serviceEvent;
        this.globals = globals;
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.assoiationService = assoiationService;
        this.loadingCtrl = loadingCtrl;
        this.alertCtrl = alertCtrl;
        this.associations = [];
        this.page = 1;
        this.globals.currentPageTitle = "Associations";
        this.community = JSON.parse(localStorage.getItem('currentCommunity'));
        var loadingPopup = this.loadingCtrl.create({});
        loadingPopup.present();
        this.assoiationService.getAllAssociationsByCommunity(this.page, this.community.id).then(function (data) {
            for (var _i = 0, data_1 = data; _i < data_1.length; _i++) {
                var assoc = data_1[_i];
                _this.associations.push(assoc);
            }
            loadingPopup.dismiss();
        }, function (err) {
            loadingPopup.dismiss();
            _this.event.publish('http:errors', err);
        });
    }
    AssociationListPage.prototype.doInfinite = function (infiniteScroll) {
        var _this = this;
        this.page += 1;
        this.assoiationService.getAllAssociationsByCities(this.page).then(function (data) {
            for (var _i = 0, data_2 = data; _i < data_2.length; _i++) {
                var assoc = data_2[_i];
                _this.associations.push(assoc);
            }
            infiniteScroll.complete();
        }, function (err) {
            infiniteScroll.complete();
        });
    };
    AssociationListPage.prototype.openAssociation = function (association, name) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_4__association_sheet_association_sheet__["a" /* AssociationSheetPage */], {
            id: association,
            name: name
        });
    };
    AssociationListPage.prototype.capitalizeData = function (data) {
        return data.charAt(0).toUpperCase() + data.slice(1);
    };
    AssociationListPage.prototype.ionViewWillEnter = function () {
        this.globals.currentPageTitle = "Acteurs locaux";
        this.globals.showHeader = false;
        this.globals.showFooter = true;
        this.event.publish('updateFooter');
    };
    AssociationListPage.prototype.goBack = function () {
        this.navCtrl.pop();
    };
    AssociationListPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-association-list',template:/*ion-inline-start:"D:\celaneo\mobile\new-mobile\test\src\pages\association-list\association-list.html"*/'<!--\n\n  Generated template for the AssociationListPage page.\n\n\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n\n  Ionic pages and navigation.\n\n-->\n\n<ion-header class="mobile-header" *ngIf="globals.token">\n\n    <ion-grid>\n\n        <ion-row>\n\n            <ion-col col-2 text-left>\n\n                <div class="item">\n\n                    <ion-icon name="ios-arrow-back" (click)="goBack()"></ion-icon>\n\n                </div>\n\n            </ion-col>\n\n            <ion-col col-8 text-center class="page-title">\n\n                <ion-title>Associations</ion-title>\n\n            </ion-col>\n\n            <ion-col col-2>\n\n\n\n            </ion-col>\n\n        </ion-row>\n\n    </ion-grid>\n\n</ion-header>\n\n<ion-content>\n\n    <div class="div-left">\n\n        <div text-right class="back"><img src="assets/imgs/icons/1.png" (click)="goBack()"></div>\n\n    </div>\n\n    <!--bloc central -->\n\n    <div class="div-center">\n\n        <ion-grid grid-bottom padding-top padding-bottom class="no-padding grid grid-bottom">\n\n\n\n            <ion-row responsive-sm text-center>\n\n                <ion-col col-md-12 col-12 class="underlined" *ngFor="let association of associations" (click)="openAssociation(association.id, association.name)">\n\n                    <button class="assoc-show-button" ion-button icon-end color="light">\n\n                        <img src="{{association.image_url}}" class="logo_assoc" *ngIf="association.image_url">\n\n                        <img src="assets/imgs/icons/user_default.png" class="logo_assoc" *ngIf="!association.image_url">\n\n                        <div class="names"> {{association.name | capitalize}}</div>\n\n                        <div class="name">{{association.category.name}} </div>\n\n                        <ion-icon name="ios-arrow-forward" float-end></ion-icon>\n\n                    </button>\n\n                </ion-col>\n\n            </ion-row>\n\n            <ion-infinite-scroll (ionInfinite)="doInfinite($event)" threshold="100px">\n\n                <ion-infinite-scroll-content loadingSpinner="bubbles" loadingText="Charger plus...">\n\n                </ion-infinite-scroll-content>\n\n            </ion-infinite-scroll>\n\n        </ion-grid>\n\n\n\n    </div>\n\n    <!-- fin bloc central -->\n\n    <div class="div-right" text-left>\n\n    </div>\n\n</ion-content>'/*ion-inline-end:"D:\celaneo\mobile\new-mobile\test\src\pages\association-list\association-list.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_5__providers_eventsrest_eventsrest__["a" /* EventsrestProvider */],
            __WEBPACK_IMPORTED_MODULE_2__providers_globals_globals__["a" /* GlobalsProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_3__providers_association_association__["a" /* AssociationProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */]])
    ], AssociationListPage);
    return AssociationListPage;
}());

//# sourceMappingURL=association-list.js.map

/***/ }),

/***/ 490:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return MerchantListPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_globals_globals__ = __webpack_require__(8);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_merchant_merchant__ = __webpack_require__(39);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_eventsrest_eventsrest__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__list_goodplan_list_goodplan__ = __webpack_require__(199);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};






/**
 * Generated class for the MerchantListPage page.
 *
 * See http://ionicframework.com/docs/components/#navigation for more info
 * on Ionic pages and navigation.
 */
var MerchantListPage = /** @class */ (function () {
    function MerchantListPage(event, modal, globals, serviceEvent, navCtrl, navParams, loader, myAlert, appEvents, myModal, merchantService, loadingCtrl, alertCtrl) {
        var _this = this;
        this.event = event;
        this.modal = modal;
        this.globals = globals;
        this.serviceEvent = serviceEvent;
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.loader = loader;
        this.myAlert = myAlert;
        this.appEvents = appEvents;
        this.myModal = myModal;
        this.merchantService = merchantService;
        this.loadingCtrl = loadingCtrl;
        this.alertCtrl = alertCtrl;
        this.merchants = [];
        this.page = 1;
        this.globals.currentPageTitle = "Commerces";
        var loadingPopup = this.loadingCtrl.create({});
        loadingPopup.present();
        this.community = JSON.parse(localStorage.getItem('currentCommunity'));
        this.merchantService.getAllMerchantsByCommunity(this.page, this.community.id).then(function (data) {
            for (var _i = 0, data_1 = data; _i < data_1.length; _i++) {
                var assoc = data_1[_i];
                _this.merchants.push(assoc);
            }
            loadingPopup.dismiss();
        }, function (err) {
            loadingPopup.dismiss();
            _this.event.publish('http:errors', err);
        });
    }
    MerchantListPage.prototype.doInfinite = function (infiniteScroll) {
        var _this = this;
        this.page += 1;
        this.merchantService.getAllMerchantsByCities(this.page).then(function (data) {
            for (var _i = 0, data_2 = data; _i < data_2.length; _i++) {
                var assoc = data_2[_i];
                _this.merchants.push(assoc);
            }
            infiniteScroll.complete();
        }, function (err) {
            infiniteScroll.complete();
        });
    };
    MerchantListPage.prototype.openMerchant = function (merchant) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_5__list_goodplan_list_goodplan__["a" /* ListGoodplanPage */], {
            account: merchant
        });
    };
    MerchantListPage.prototype.capitalizeData = function (data) {
        return data.charAt(0).toUpperCase() + data.slice(1);
    };
    MerchantListPage.prototype.ionViewWillEnter = function () {
        this.globals.currentPageTitle = "Acteurs locaux";
        this.globals.showHeader = false;
        this.event.publish('updateFooter');
    };
    MerchantListPage.prototype.goBack = function () {
        this.navCtrl.pop();
    };
    MerchantListPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-merchant-list',template:/*ion-inline-start:"D:\celaneo\mobile\new-mobile\test\src\pages\merchant-list\merchant-list.html"*/'<!--\n\n  Generated template for the MerchantListPage page.\n\n\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n\n  Ionic pages and navigation.\n\n-->\n\n<ion-header class="mobile-header" *ngIf="globals.token">\n\n    <ion-grid>\n\n        <ion-row>\n\n            <ion-col col-2 text-left>\n\n                <div class="item">\n\n                    <ion-icon name="ios-arrow-back" (click)="goBack()"></ion-icon>\n\n                </div>\n\n            </ion-col>\n\n            <ion-col col-8 text-center class="page-title">\n\n                <ion-title>Commerces</ion-title>\n\n            </ion-col>\n\n            <ion-col col-2>\n\n\n\n            </ion-col>\n\n        </ion-row>\n\n    </ion-grid>\n\n</ion-header>\n\n<ion-content padding>\n\n    <div class="div-left">\n\n        <div text-right class="back"><img src="assets/imgs/icons/1.png" (click)="goBack()"></div>\n\n    </div>\n\n    <!--bloc central -->\n\n    <div class="div-center mar">\n\n        <ion-grid grid-bottom padding-top padding-bottom class="no-padding grid grid-bottom">\n\n            <ion-row responsive-sm text-center>\n\n                <ion-col col-md-12 col-12 class="underlined" *ngFor="let merchant of merchants" (click)="openMerchant(merchant)">\n\n                    <button class="assoc-show-button" ion-button icon-end color="light">\n\n                        <img src="{{merchant.image_url}}" class="logo_assoc" *ngIf="merchant.image_url">\n\n                        <img src="assets/imgs/icons/user_default.png" class="logo_assoc" *ngIf="!merchant.image_url">\n\n                        <div class="names"> {{merchant.name | capitalize}}</div>\n\n                        <div class="name">{{merchant.category.name}} </div>\n\n                        <ion-icon name="ios-arrow-forward" float-end></ion-icon>\n\n                    </button>\n\n                </ion-col>\n\n            </ion-row>\n\n            <ion-infinite-scroll (ionInfinite)="doInfinite($event)" threshold="100px">\n\n                <ion-infinite-scroll-content loadingSpinner="bubbles" loadingText="Charger plus...">\n\n                </ion-infinite-scroll-content>\n\n            </ion-infinite-scroll>\n\n        </ion-grid>\n\n\n\n    </div>\n\n    <!-- fin bloc central -->\n\n    <div class="div-right" text-center>\n\n    </div>\n\n</ion-content>'/*ion-inline-end:"D:\celaneo\mobile\new-mobile\test\src\pages\merchant-list\merchant-list.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_2__providers_globals_globals__["a" /* GlobalsProvider */],
            __WEBPACK_IMPORTED_MODULE_4__providers_eventsrest_eventsrest__["a" /* EventsrestProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_3__providers_merchant_merchant__["a" /* MerchantProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */]])
    ], MerchantListPage);
    return MerchantListPage;
}());

//# sourceMappingURL=merchant-list.js.map

/***/ }),

/***/ 491:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return truncate; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};

/**
 * Generated class for the TruncatePipe pipe.
 *
 * See https://angular.io/docs/ts/latest/guide/pipes.html for more info on
 * Angular Pipes.
 */
var truncate = /** @class */ (function () {
    function truncate() {
    }
    truncate.prototype.transform = function (value) {
        var newStr = "";
        if (value) {
            if (value.length > 125) {
                newStr = value.substring(0, 125) + '...';
            }
            else {
                newStr = value;
            }
        }
        return newStr;
    };
    truncate = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Pipe"])({
            name: 'truncate',
        })
    ], truncate);
    return truncate;
}());

//# sourceMappingURL=truncate.js.map

/***/ }),

/***/ 493:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return DedicatedPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_globals_globals__ = __webpack_require__(8);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_community_community__ = __webpack_require__(40);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__map_map__ = __webpack_require__(132);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__number_category_number_category__ = __webpack_require__(131);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__canteen_menu_canteen_menu__ = __webpack_require__(209);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__ionic_native_in_app_browser__ = __webpack_require__(70);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__reprot_problem_reprot_problem__ = __webpack_require__(210);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};









var DedicatedPage = /** @class */ (function () {
    function DedicatedPage(event, navCtrl, navParams, appEvents, loader, myAlert, myModal, platform, loadingCtrl, alertCtrl, toastCtrl, service, actionSheetCtrl, appGlobals, inAppBrowser) {
        this.event = event;
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.appEvents = appEvents;
        this.loader = loader;
        this.myAlert = myAlert;
        this.myModal = myModal;
        this.platform = platform;
        this.loadingCtrl = loadingCtrl;
        this.alertCtrl = alertCtrl;
        this.toastCtrl = toastCtrl;
        this.service = service;
        this.actionSheetCtrl = actionSheetCtrl;
        this.appGlobals = appGlobals;
        this.inAppBrowser = inAppBrowser;
        this.page = 0;
        this.headings = {};
        this.id = this.navParams.get('id');
        this.name = this.navParams.get('name');
        this.img_url = this.navParams.get('img_url');
        this.description = "";
        this.appEvents.publish('closeFilters');
        this.infos = { blason: "", title: "", description: "" };
        localStorage.setItem("currentCommunity", JSON.stringify({ id: this.id, name: this.name, img_url: this.img_url }));
        var loadingPopup = this.loadingCtrl.create({});
        loadingPopup.present();
        this.getHeadings(loadingPopup);
    }
    DedicatedPage.prototype.ionViewWillEnter = function () {
        this.appGlobals.showFooter = true;
        this.appGlobals.showHeader = false;
        this.appGlobals.currentPageTitle = this.name;
        this.appGlobals.currentPageLogo = null;
        this.event.publish('updateFooter');
        this.appGlobals.onNegativeTopSearch = true;
        this.page = 0;
    };
    DedicatedPage.prototype.ionViewWillLeave = function () {
        this.appGlobals.showHeader = true;
        this.appGlobals.showFooter = true;
        this.appGlobals.onNegativeTopSearch = false;
    };
    DedicatedPage.prototype.ionViewDidLoad = function () {
    };
    DedicatedPage.prototype.getHeadings = function (loadingPopup) {
        this.getDedicatedPageInfos();
        this.loadHeadings(loadingPopup);
    };
    DedicatedPage.prototype.getDedicatedPageInfos = function () {
        var _this = this;
        this.service.getInfoCommunity(this.id).then(function (data) {
            _this.infos = data;
        }, function (err) {
            _this.event.publish('http:errors', err);
        });
    };
    DedicatedPage.prototype.loadHeadings = function (loadingPopup) {
        var _this = this;
        this.service.getHeadingCommunity(this.id).then(function (data) {
            _this.headings = data;
            loadingPopup.dismiss();
        }, function (err) {
            loadingPopup.dismiss();
            _this.event.publish('http:errors', err);
        });
    };
    DedicatedPage.prototype.openMapHeading = function (id) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_4__map_map__["a" /* MapPage */], {
            data: id
        });
    };
    DedicatedPage.prototype.openArticleHeading = function (id) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_6__canteen_menu_canteen_menu__["a" /* CanteenMenuPage */], {
            data: id,
            allowComment: this.infos.comment_allowed
        });
    };
    DedicatedPage.prototype.openPhoneBookHeading = function (id, name) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_5__number_category_number_category__["a" /* NumberCategoryPage */], {
            data: id,
            name: name
        });
    };
    DedicatedPage.prototype.openReportHeading = function (id) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_8__reprot_problem_reprot_problem__["a" /* ReprotProblemPage */], {
            data: id
        });
    };
    DedicatedPage.prototype.openUsefullLinkHeading = function (url) {
        var _this = this;
        this.platform.ready().then(function () {
            _this.inAppBrowser.create(url);
        });
    };
    DedicatedPage.prototype.goBack = function () {
        this.navCtrl.pop();
    };
    DedicatedPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-dedicated',template:/*ion-inline-start:"D:\celaneo\mobile\new-mobile\test\src\pages\dedicated\dedicated.html"*/'<ion-header class="mobile-header MMS" *ngIf="appGlobals.token">\n\n    <ion-grid>\n\n        <ion-row>\n\n            <ion-col col-2 text-left>\n\n                <div class="item">\n\n                    <ion-icon name="ios-arrow-back" (click)="goBack()"></ion-icon>\n\n                </div>\n\n            </ion-col>\n\n            <ion-col col-8 text-center class="page-title">\n\n\n\n                <ion-title></ion-title>\n\n            </ion-col>\n\n            <ion-col col-2>\n\n\n\n            </ion-col>\n\n        </ion-row>\n\n    </ion-grid>\n\n</ion-header>\n\n\n\n<ion-header class="mobile-header MMS" *ngIf="appGlobals.token">\n\n    <ion-grid>\n\n        <ion-row>\n\n            <ion-col col-2 text-left>\n\n                <div class="item">\n\n                    <ion-icon name="ios-arrow-back" (click)="goBack()"></ion-icon>\n\n                </div>\n\n            </ion-col>\n\n            <ion-col col-8 text-center class="page-title">\n\n\n\n\n\n                    <div class="page-title">{{ name }}</div>\n\n\n\n            </ion-col>\n\n            <ion-col col-2>\n\n                <ion-avatar class="blason">\n\n                    <img src="{{img_url}}">\n\n                </ion-avatar>\n\n            </ion-col>\n\n        </ion-row>\n\n    </ion-grid>\n\n</ion-header>\n\n\n\n<ion-content no-padding>\n\n    <div class="div-left">\n\n        <div text-center class="back"><img src="assets/imgs/icons/1.png" (click)="goBack()"></div>\n\n    </div>\n\n    <!--bloc central -->\n\n    <div class="div-center">\n\n        <ion-grid padding-bottom class="no-padding grid bar-custom margin-bottom-grid">\n\n           <!-- <ion-row>\n\n                <ion-col text-center class="text-center" col-12>\n\n                    <img src="{{infos.blason}}">\n\n\n\n                </ion-col>\n\n\n\n            </ion-row>-->\n\n            <div *ngIf="infos.images || infos.videoFile" class="card-item-divider">\n\n\n\n                <div *ngIf="(!infos.images && infos.videoFile) || (infos.images && infos.images.length == 1); else elseBlock">\n\n                    <div *ngFor="let img of infos.images">\n\n                        <img data-src="{{img.url}}">\n\n                    </div>\n\n                    <video style="width: 100%; height: 100%" *ngIf="infos.videoFile !== null" controls poster="assets/img/video_default.png">\n\n                        <source [src]="infos.videoFile" type="video/mp4">\n\n                    </video>\n\n                </div>\n\n\n\n                <ng-template #elseBlock>\n\n                    <ion-slides loop="true" pager>\n\n                        <ion-slide *ngIf="infos.videoFile != null">\n\n                            <video style="width: 100%; height: 100%" controls poster="assets/img/video_default.png">\n\n                                <source [src]="infos.videoFile" type="video/mp4">\n\n                            </video>\n\n                        </ion-slide>\n\n                        <ion-slide *ngFor="let img of infos.images">\n\n                            <img data-src="{{img.url}}">\n\n                        </ion-slide>\n\n                    </ion-slides>\n\n                </ng-template>\n\n            </div>\n\n\n\n            <ion-row>\n\n                <ion-col class="col-dedicated">\n\n                    <div class="presentation-title">{{infos.title}}</div>\n\n\n\n                    <p *ngIf="infos.description" [innerHTML]="infos.description | nl2br"></p>\n\n\n\n                </ion-col>\n\n\n\n            </ion-row>\n\n\n\n            <ion-row class="scrollRow">\n\n                <ion-col col-12>\n\n                    <ion-list class="listScrolled" no-lines>\n\n\n\n                        <ion-item *ngFor="let h of headings.mapHeadings" >\n\n\n\n                                <button class="custom-button-links" color="light"  text-start (click)="openMapHeading(h.id)">\n\n                                    <span class="button-sign-affirmation"> {{h.title}} </span>\n\n                                    <ion-icon name="ios-arrow-forward" role="img" class="icon icon-md ion-ios-arrow-forward colorized"\n\n                                              aria-label="arrow forward" ng-reflect-name="ios-arrow-forward"></ion-icon>\n\n                                </button>\n\n\n\n\n\n                        </ion-item>\n\n                        <ion-item *ngFor="let h of headings.articleHeadings" >\n\n\n\n                            <button class="custom-button-links" color="light"  text-start (click)="openArticleHeading(h.id)">\n\n                                <span class="button-sign-affirmation"> {{h.title}} </span>\n\n                                <ion-icon name="ios-arrow-forward" role="img" class="icon icon-md ion-ios-arrow-forward colorized"\n\n                                          aria-label="arrow forward" ng-reflect-name="ios-arrow-forward"></ion-icon>\n\n                            </button>\n\n\n\n\n\n                        </ion-item>\n\n                        <ion-item *ngFor="let h of headings.phoneBookHeadings" >\n\n\n\n                            <button class="custom-button-links" color="light"  text-start (click)="openPhoneBookHeading(h.id, h.title)">\n\n                                <span class="button-sign-affirmation"> {{h.title}} </span>\n\n                                <ion-icon name="ios-arrow-forward" role="img" class="icon icon-md ion-ios-arrow-forward colorized"\n\n                                          aria-label="arrow forward" ng-reflect-name="ios-arrow-forward"></ion-icon>\n\n                            </button>\n\n\n\n\n\n                        </ion-item>\n\n                        <ion-item *ngFor="let h of headings.reportingHeadings" >\n\n\n\n                            <button class="custom-button-links" color="light"  text-start (click)="openReportHeading(h.id)">\n\n                                <span class="button-sign-affirmation"> {{h.title}} </span>\n\n                                <ion-icon name="ios-arrow-forward" role="img" class="icon icon-md ion-ios-arrow-forward colorized"\n\n                                          aria-label="arrow forward" ng-reflect-name="ios-arrow-forward"></ion-icon>\n\n                            </button>\n\n\n\n\n\n                        </ion-item>\n\n                        <ion-item *ngFor="let h of headings.usefullLinkHeadings" text-start (click)="openUsefullLinkHeading(h.url)">\n\n\n\n                            <button class="custom-button-links" color="light"  text-start>\n\n                                <span class="button-sign-affirmation"> {{h.title}} </span>\n\n                                <ion-icon name="ios-arrow-forward" role="img" class="icon icon-md ion-ios-arrow-forward colorized"\n\n                                          aria-label="arrow forward" ng-reflect-name="ios-arrow-forward"></ion-icon>\n\n                            </button>\n\n\n\n\n\n                        </ion-item>\n\n\n\n\n\n\n\n                    </ion-list>\n\n                </ion-col>\n\n            </ion-row>\n\n\n\n        </ion-grid>\n\n        <!--<ion-grid padding-bottom class="no-padding grid bar-custom margin-bottom-grid">\n\n\n\n            <ion-row>\n\n\n\n                <ion-col text-center>\n\n                    <button class="custom-button-links" color="light" (click)="mapAction()" text-start>\n\n                        <span class="button-sign-affirmation"> Carte pratique </span>\n\n                        <ion-icon name="ios-arrow-forward" role="img" class="icon icon-md ion-ios-arrow-forward colorized"\n\n                            aria-label="arrow forward" ng-reflect-name="ios-arrow-forward"></ion-icon>\n\n                    </button>\n\n\n\n\n\n                    <button class="custom-button-links" color="light" (click)="numbers()" text-start>\n\n                        <span class="button-sign-affirmation"> Annuaire </span>\n\n                        <ion-icon name="ios-arrow-forward" role="img" class="icon icon-md ion-ios-arrow-forward colorized"\n\n                            aria-label="arrow forward" ng-reflect-name="ios-arrow-forward"></ion-icon>\n\n                    </button>\n\n\n\n                    <button class="custom-button-links" color="light" (click)="emergency()" text-start>\n\n                        <span class="button-sign-affirmation"> Téléphones d\'urgence </span>\n\n                        <ion-icon name="ios-arrow-forward" role="img" class="icon icon-md ion-ios-arrow-forward colorized"\n\n                            aria-label="arrow forward" ng-reflect-name="ios-arrow-forward"></ion-icon>\n\n                    </button>\n\n\n\n                    <button class="custom-button-links" color="light" (click)="aLinkTo()" text-start>\n\n                        <span class="button-sign-affirmation"> Grands projets dans ma ville </span>\n\n                        <ion-icon name="ios-arrow-forward" role="img" class="icon icon-md ion-ios-arrow-forward colorized"\n\n                            aria-label="arrow forward" ng-reflect-name="ios-arrow-forward"></ion-icon>\n\n                    </button>\n\n\n\n                    <button class="custom-button-links" color="light" text-start>\n\n                        <span class="button-sign-affirmation" (click)="openUrl()"> Démarches administratives </span>\n\n                        <ion-icon name="ios-arrow-forward" role="img" class="icon icon-md ion-ios-arrow-forward colorized"\n\n                            aria-label="arrow forward" ng-reflect-name="ios-arrow-forward"></ion-icon>\n\n                    </button>\n\n\n\n                    <button class="custom-button-links" color="light" (click)="canteen()" text-start>\n\n                        <span class="button-sign-affirmation"> Menus des cantines </span>\n\n                        <ion-icon name="ios-arrow-forward" role="img" class="icon icon-md ion-ios-arrow-forward colorized"\n\n                            aria-label="arrow forward" ng-reflect-name="ios-arrow-forward"></ion-icon>\n\n                    </button>\n\n\n\n                    <button class="custom-button-links" color="light" (click)="report()" text-start>\n\n                        <span class="button-sign-affirmation"> Signaler un problème </span>\n\n                        <ion-icon name="ios-arrow-forward" role="img" class="icon icon-md ion-ios-arrow-forward colorized"\n\n                            aria-label="arrow forward" ng-reflect-name="ios-arrow-forward"></ion-icon>\n\n                    </button>\n\n                    <button class="custom-button-links" color="light" (click)="propose()" text-start>\n\n                        <span class="button-sign-affirmation"> Proposer une Initiative </span>\n\n                        <ion-icon name="ios-arrow-forward" role="img" class="icon icon-md ion-ios-arrow-forward colorized"\n\n                            aria-label="arrow forward" ng-reflect-name="ios-arrow-forward"></ion-icon>\n\n                    </button>\n\n                </ion-col>\n\n\n\n            </ion-row>\n\n\n\n\n\n\n\n        </ion-grid>-->\n\n\n\n    </div>\n\n\n\n\n\n    <div class="div-right" text-center>\n\n    </div>\n\n</ion-content>\n\n'/*ion-inline-end:"D:\celaneo\mobile\new-mobile\test\src\pages\dedicated\dedicated.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["x" /* Platform */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["z" /* ToastController */],
            __WEBPACK_IMPORTED_MODULE_3__providers_community_community__["a" /* CommunityProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["a" /* ActionSheetController */],
            __WEBPACK_IMPORTED_MODULE_2__providers_globals_globals__["a" /* GlobalsProvider */],
            __WEBPACK_IMPORTED_MODULE_7__ionic_native_in_app_browser__["a" /* InAppBrowser */]])
    ], DedicatedPage);
    return DedicatedPage;
}());

//# sourceMappingURL=dedicated.js.map

/***/ }),

/***/ 494:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return EmergencyPhonesPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_globals_globals__ = __webpack_require__(8);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_user_user__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__pages_number_number__ = __webpack_require__(207);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__providers_eventsrest_eventsrest__ = __webpack_require__(9);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};






/**
 * Generated class for the EmergencyPhonesPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var EmergencyPhonesPage = /** @class */ (function () {
    function EmergencyPhonesPage(event, globals, navCtrl, navParams, loader, myAlert, myModal, appEvents, serviceEvent, userService, alertCtrl) {
        this.event = event;
        this.globals = globals;
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.loader = loader;
        this.myAlert = myAlert;
        this.myModal = myModal;
        this.appEvents = appEvents;
        this.serviceEvent = serviceEvent;
        this.userService = userService;
        this.alertCtrl = alertCtrl;
        this.currentUser = JSON.parse(localStorage.getItem("currentUser"));
        this.emergency = navParams.get('numbers');
    }
    EmergencyPhonesPage.prototype.ionViewWillEnter = function () {
        this.globals.currentPageTitle = "Acteurs locaux";
        this.globals.showHeader = false;
        this.event.publish('updateFooter');
    };
    EmergencyPhonesPage.prototype.goBack = function () {
        this.navCtrl.pop();
    };
    EmergencyPhonesPage.prototype.showNumbers = function (item) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_4__pages_number_number__["a" /* NumberPage */], {
            emergencyPhones: item
        });
    };
    EmergencyPhonesPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-emergency-phones',template:/*ion-inline-start:"D:\celaneo\mobile\new-mobile\test\src\pages\emergency-phones\emergency-phones.html"*/'<!--\n\n  Generated template for the NumberCategoryPage page.\n\n\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n\n  Ionic pages and navigation.\n\n-->\n\n<ion-header class="mobile-header" *ngIf="globals.token">\n\n    <ion-grid>\n\n        <ion-row>\n\n            <ion-col col-2 text-left>\n\n                <div class="item">\n\n                    <ion-icon name="ios-arrow-back" (click)="goBack()"></ion-icon>\n\n                </div>\n\n            </ion-col>\n\n            <ion-col col-8 text-center class="page-title">\n\n                <ion-title> Téléphones d\'urgence </ion-title>\n\n            </ion-col>\n\n            <ion-col col-2 text-right>\n\n                <div class="block-image">\n\n                    <img *ngIf="currentUser.cityhall.image_url" src="{{currentUser.cityhall.image_url}}" class="user-img">\n\n                    <img *ngIf="!currentUser.cityhall.image_url" src="assets/imgs/icons/user_default.png" class="user-img">\n\n                </div>\n\n\n\n            </ion-col>\n\n        </ion-row>\n\n    </ion-grid>\n\n</ion-header>\n\n\n\n<ion-content padding>\n\n    <div class="div-left div-left-top">\n\n        <div text-right class="back"><img src="assets/imgs/icons/1.png" (click)="goBack()"></div>\n\n    </div>\n\n    <!--bloc central -->\n\n    <div class="div-center">\n\n\n\n        <ion-grid padding-top padding-bottom class="no-padding grid M bar-custom grid-bottom">\n\n\n\n            <ion-row>\n\n\n\n                <ion-col padding margin-bottom>\n\n                    <ion-list class="category-number">\n\n\n\n                        <button class="full-width" *ngFor="let item of emergency" (click)="showNumbers(item)">\n\n                            <span class="number-cat-item" text-left>{{ item.title }}</span>\n\n                            <ion-icon class="number-cat-icon" name="ios-arrow-forward"></ion-icon>\n\n                        </button>\n\n\n\n                    </ion-list>\n\n                </ion-col>\n\n\n\n            </ion-row>\n\n\n\n        </ion-grid>\n\n\n\n    </div>\n\n    <!-- fin bloc central -->\n\n    <div class="div-right" text-center>\n\n    </div>\n\n</ion-content>'/*ion-inline-end:"D:\celaneo\mobile\new-mobile\test\src\pages\emergency-phones\emergency-phones.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_2__providers_globals_globals__["a" /* GlobalsProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_5__providers_eventsrest_eventsrest__["a" /* EventsrestProvider */],
            __WEBPACK_IMPORTED_MODULE_3__providers_user_user__["a" /* UserProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */]])
    ], EmergencyPhonesPage);
    return EmergencyPhonesPage;
}());

//# sourceMappingURL=emergency-phones.js.map

/***/ }),

/***/ 495:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ProposePage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_globals_globals__ = __webpack_require__(8);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__angular_forms__ = __webpack_require__(21);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_app_app__ = __webpack_require__(38);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__providers_user_user__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__Models_contact__ = __webpack_require__(205);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__providers_eventsrest_eventsrest__ = __webpack_require__(9);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};








/**
* Generated class for the ProposePage page.
*
* See https://ionicframework.com/docs/components/#navigation for more info on
* Ionic pages and navigation.
*/
var ProposePage = /** @class */ (function () {
    function ProposePage(navCtrl, navParams, appGlobals, userService, serviceEvent, appService, appEvents, myModal, formBuilder, myAlert, loader, platform) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.appGlobals = appGlobals;
        this.userService = userService;
        this.serviceEvent = serviceEvent;
        this.appService = appService;
        this.appEvents = appEvents;
        this.myModal = myModal;
        this.formBuilder = formBuilder;
        this.myAlert = myAlert;
        this.loader = loader;
        this.platform = platform;
        this.submited = false;
        this.contactObj = new __WEBPACK_IMPORTED_MODULE_6__Models_contact__["a" /* Contact */]();
        this.categories = ['Catégorie 1', 'Catégorie 2', 'Catégorie 3', 'Catégorie 4'];
        this.allSubCategories = [
            ['sous catégorie 1.1', 'sous catégorie 1.2', 'sous catégorie 1.3'],
            ['sous catégorie 2.1', 'sous catégorie 2.2', 'sous catégorie 2.3', 'sous catégorie 2.4'],
            ['sous catégorie 3.1', 'sous catégorie 3.2', 'sous catégorie 3.3'],
            [],
        ];
        this.subCategories = [];
        this.parentSelected = false;
        this.appGlobals.showHeader = false;
        this.currentUser = JSON.parse(localStorage.getItem("currentUser"));
    }
    ProposePage.prototype.ionViewWillEnter = function () {
        this.appGlobals.showHeader = false;
        this.appGlobals.showFooter = true;
        this.appEvents.publish('updateFooter');
    };
    ProposePage.prototype.ionViewWillLeave = function () {
        this.appGlobals.showHeader = true;
        this.appGlobals.showFooter = true;
    };
    ProposePage.prototype.goBack = function () {
        this.navCtrl.pop();
    };
    ProposePage.prototype.contact = function (errorValidation) {
        var _this = this;
        this.submited = true;
        if (!errorValidation) {
            var loadingPopup_1 = this.loader.create({});
            // Show the popup
            loadingPopup_1.present();
            this.appService.postContact(this.contactObj).then(function () {
                loadingPopup_1.dismiss();
                var successAlert = _this.myAlert.create({
                    title: 'Succès',
                    subTitle: 'Votre message a été envoyée avec succès.',
                    buttons: [
                        {
                            text: 'OK',
                            handler: function () {
                                _this.goBack();
                            }
                        }
                    ]
                });
                successAlert.present();
            }, function (err) {
                loadingPopup_1.dismiss();
                _this.appEvents.publish('http:errors', err);
            });
        }
    };
    ProposePage.prototype.checkFocus = function (element) {
        if (this.platform.is('android')) {
            var requiredElement = element.target.offsetParent.parentElement;
            var yOffset = requiredElement.offsetTop;
            this.content.scrollTo(0, yOffset, 2000);
        }
    };
    ProposePage.prototype.selectCategory = function (selected) {
        if (this.allSubCategories[selected].length > 0) {
            this.parentSelected = true;
            this.subCategories = this.allSubCategories[selected];
        }
        else {
            this.parentSelected = false;
        }
        this.contactObj.setObject(this.categories[selected]);
    };
    ProposePage.prototype.selectSubCategory = function (selected) {
        this.contactObj.setObject(this.contactObj.getObject() + ' - ' + selected);
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["ViewChild"])(__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* Content */]),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* Content */])
    ], ProposePage.prototype, "content", void 0);
    ProposePage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-propose',template:/*ion-inline-start:"D:\celaneo\mobile\new-mobile\test\src\pages\propose\propose.html"*/'<!--\n\n  Generated template for the ContactPage page.\n\n\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n\n  Ionic pages and navigation.\n\n-->\n\n<ion-header class="mobile-header" *ngIf="appGlobals.token">\n\n    <ion-grid>\n\n        <ion-row>\n\n            <ion-col col-2 text-left>\n\n                <div class="item">\n\n                    <ion-icon name="ios-arrow-back" (click)="goBack()"></ion-icon>\n\n                </div>\n\n            </ion-col>\n\n            <ion-col col-8 text-center class="page-title">\n\n                <ion-title> Proposer une initiative </ion-title>\n\n            </ion-col>\n\n            <ion-col col-2 text-right>\n\n                <div class="block-image">\n\n                    <img *ngIf="currentUser.cityhall.image_url" src="{{currentUser.cityhall.image_url}}" class="user-img">\n\n                    <img *ngIf="!currentUser.cityhall.image_url" src="assets/imgs/icons/user_default.png" class="user-img">\n\n                </div>\n\n\n\n            </ion-col>\n\n        </ion-row>\n\n    </ion-grid>\n\n</ion-header>\n\n\n\n\n\n<ion-content>\n\n    <div class="div-left">\n\n        <div text-right class="back"><img src="assets/imgs/icons/1.png" (click)="goBack()"></div>\n\n    </div>\n\n    <!--bloc central -->\n\n    <div class="div-center">\n\n        <ion-grid>\n\n\n\n            <ion-row>\n\n\n\n                <ion-col text-center>\n\n\n\n                    <form (ngSubmit)="contact(contactForm.invalid)" #contactForm="ngForm">\n\n                        <ion-row>\n\n\n\n                            <ion-col col-12 text-left class="bordered">\n\n                                <div text-center>\n\n                                    Vous pouvez envoyer un email à votre mairie. Celui-ci sera traité au même titre\n\n                                    qu\'un email classique\n\n                                </div>\n\n                            </ion-col>\n\n\n\n                            <ion-col col-12 text-center>\n\n                                <ion-label text-left class="margin-bottom-ie" color="light-black" stacked>Ville</ion-label>\n\n                                <ion-item class="item-input-white no-padding select-not-ie" [class.formError]="city.invalid && (city.dirty || submited || city.touched)">\n\n                                    <ion-select class="select-white" name="city" [(ngModel)]="contactObj.city" #city="ngModel"\n\n                                        placeholder="Ville" required>\n\n                                        <ion-option value="{{currentUser.primary_city.id}}">{{currentUser.primary_city.name}}</ion-option>\n\n                                        <ion-option value="{{city.id}}" *ngFor="let city of currentUser.other_cities">{{city.name}}</ion-option>\n\n                                    </ion-select>\n\n                                </ion-item>\n\n                                <ion-col class="item-input-white no-padding select-ie" [class.formError]="city.invalid && (city.dirty || submited || city.touched)">\n\n                                    <select class="select-white input-select-ie" name="city" [(ngModel)]="contactObj.city"\n\n                                        #city="ngModel" placeholder="Ville" required>\n\n                                        <option value="{{currentUser.primary_city.id}}">{{currentUser.primary_city.name}}</option>\n\n                                        <option value="{{city.id}}" *ngFor="let city of currentUser.other_cities">{{city.name}}</option>\n\n                                    </select>\n\n                                </ion-col>\n\n                                <div class="error-msg" *ngIf="city.invalid && (city.dirty || submited || city.touched)">\n\n                                    <span class="error">Champs ville obligatoire</span>\n\n                                </div>\n\n                            </ion-col>\n\n                            <ion-col col-12 text-left class="bordered category-text">\n\n                                <div>\n\n                                    Veuillez choisir la catégorie de votre objet.\n\n                                </div>\n\n                            </ion-col>\n\n\n\n                            <ion-col col-12 text-center>\n\n                                <ion-item class="item-input-white no-padding select-not-ie " [class.formError]="category.invalid && (category.dirty || submited || category.touched)">\n\n                                    <ion-select class="select-white" name="category" [(ngModel)]="contactObj.category"\n\n                                        #category="ngModel" (ionChange)="selectCategory($event)" placeholder="Catégorie"\n\n                                        required>\n\n                                        <ion-option value="0">Catégorie 1</ion-option>\n\n                                        <ion-option value="1">Catégorie 2</ion-option>\n\n                                        <ion-option value="2">Catégorie 3</ion-option>\n\n                                        <ion-option value="3">Catégorie 4</ion-option>\n\n                                    </ion-select>\n\n                                </ion-item>\n\n                                <ion-col class="item-input-white no-padding select-ie ">\n\n                                    <select class="select-white input-select-ie" name="category" [(ngModel)]="contactObj.category"\n\n                                        #category="ngModel" (ionChange)="selectCategory($event)" placeholder="Catégorie"\n\n                                        required>\n\n                                        <option value="0">Catégorie 1</option>\n\n                                        <option value="1">Catégorie 2</option>\n\n                                        <option value="2">Catégorie 3</option>\n\n                                        <option value="3">Catégorie 4</option>\n\n                                    </select>\n\n                                </ion-col>\n\n                                <div class="error-msg" *ngIf="category.invalid && (category.dirty || submited || category.touched)">\n\n                                    <span class="error">Champs catégorie obligatoire</span>\n\n                                </div>\n\n                                <ion-item class="item-input-white no-padding select-not-ie margin-top" *ngIf="parentSelected">\n\n                                    <ion-select class="select-white" name="subCategory" (ionChange)="selectSubCategory($event)"\n\n                                        placeholder="Sous-catégorie">\n\n                                        <ion-option value="{{category}}" *ngFor="let category of subCategories ">{{category}}</ion-option>\n\n                                    </ion-select>\n\n                                </ion-item>\n\n                                <ion-col class="item-input-white no-padding select-ie margin-top" *ngIf="parentSelected">\n\n                                    <select class="select-white input-select-ie" name="subCategory" (ionChange)="selectSubCategory($event)"\n\n                                        placeholder="Sous-catégorie">\n\n                                        <option value="{{category}}" *ngFor="let category of subCategories ">{{category}}</option>\n\n                                    </select>\n\n                                </ion-col>\n\n                                <ion-label text-left color="light-black" stacked>Objet*</ion-label>\n\n                                <ion-item class="item-input-white" [class.formError]="object.invalid && (object.dirty || submited || object.touched)">\n\n                                    <ion-input (focus)="checkFocus($event)" (change)="appGlobals.capitalizeData($event.target.value, \'object\')"\n\n                                        #object="ngModel" type="text" name="object" [(ngModel)]="contactObj.object"\n\n                                        placeholder="Objet" required></ion-input>\n\n                                </ion-item>\n\n                                <div class="error-msg" *ngIf="object.invalid && (object.dirty || submited || object.touched)">\n\n                                    <span class="error">Champs objet obligatoire.</span>\n\n                                </div>\n\n                            </ion-col>\n\n\n\n                            <ion-col col-12 text-center>\n\n                                <ion-label text-left color="light-black" stacked>Votre message</ion-label>\n\n                                <ion-item class="item-input-white" [class.formError]="description.invalid && (description.dirty || submited || description.touched)">\n\n                                    <ion-textarea (focus)="checkFocus($event)" (change)="appGlobals.capitalizeData($event.target.value, \'description\')"\n\n                                        #description="ngModel" name="description" [(ngModel)]="contactObj.description"\n\n                                        placeholder="Votre message" required></ion-textarea>\n\n                                </ion-item>\n\n                                <div class="error-msg" *ngIf="description.invalid && (description.dirty || submited || description.touched)">\n\n                                    <span class="error">Champs message obligatoire.</span>\n\n                                </div>\n\n                            </ion-col>\n\n                            <ion-col col-12 text-center>\n\n                                <button ion-button color="primary" type="submit" round>Envoyer</button>\n\n                            </ion-col>\n\n                        </ion-row>\n\n                    </form>\n\n\n\n                </ion-col>\n\n\n\n            </ion-row>\n\n\n\n        </ion-grid>\n\n\n\n    </div>\n\n    <!-- fin bloc central -->\n\n    <div class="div-right" text-center>\n\n    </div>\n\n</ion-content>'/*ion-inline-end:"D:\celaneo\mobile\new-mobile\test\src\pages\propose\propose.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_2__providers_globals_globals__["a" /* GlobalsProvider */],
            __WEBPACK_IMPORTED_MODULE_5__providers_user_user__["a" /* UserProvider */],
            __WEBPACK_IMPORTED_MODULE_7__providers_eventsrest_eventsrest__["a" /* EventsrestProvider */],
            __WEBPACK_IMPORTED_MODULE_4__providers_app_app__["a" /* AppProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_3__angular_forms__["a" /* FormBuilder */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["x" /* Platform */]])
    ], ProposePage);
    return ProposePage;
}());

//# sourceMappingURL=propose.js.map

/***/ }),

/***/ 497:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ForgetPasswordPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_forms__ = __webpack_require__(21);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_user_user__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__home_home__ = __webpack_require__(90);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__login_login__ = __webpack_require__(133);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};






/**
 * Generated class for the ForgetPasswordPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var ForgetPasswordPage = /** @class */ (function () {
    function ForgetPasswordPage(navCtrl, navParams, loader, appEvents, alert, eventListner, myUser) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.loader = loader;
        this.appEvents = appEvents;
        this.alert = alert;
        this.eventListner = eventListner;
        this.myUser = myUser;
        this.user = {
            email: null,
        };
        this.submited = false;
    }
    ForgetPasswordPage.prototype.ngOnInit = function () {
        this.forgetPasswordForm = new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["c" /* FormGroup */]({
            email: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */]('', [__WEBPACK_IMPORTED_MODULE_2__angular_forms__["h" /* Validators */].required, __WEBPACK_IMPORTED_MODULE_2__angular_forms__["h" /* Validators */].email])
        });
    };
    ForgetPasswordPage.prototype.resetForgetedPassword = function (errorValidation) {
        var _this = this;
        this.submited = true;
        if (!errorValidation) {
            var loadingPopup_1 = this.loader.create({});
            loadingPopup_1.present();
            this.myUser.forgetPassword(this.user.email).then(function (data) {
                loadingPopup_1.dismiss();
                if (data.success) {
                    var successAlert = _this.alert.create({
                        title: 'Succès',
                        subTitle: 'Votre nouveau mot de passe est envoyé à votre adresse mail.',
                        buttons: [
                            {
                                text: 'OK',
                                handler: function () {
                                    _this.user.email = null;
                                    _this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_4__home_home__["a" /* HomePage */]);
                                }
                            }
                        ]
                    });
                    successAlert.present();
                }
                else {
                    var errorAlert = _this.alert.create({
                        title: "Erreur",
                        subTitle: "Il n'existe pas de compte pour cet e-mail.",
                        buttons: [
                            {
                                text: 'OK',
                                handler: function () {
                                    _this.user.email = null;
                                }
                            }
                        ]
                    });
                    errorAlert.present();
                }
            }, function (err) {
                _this.eventListner.publish("http:errors", err);
            });
        }
    };
    ForgetPasswordPage.prototype.loginPage = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_5__login_login__["a" /* LoginPage */]);
    };
    ForgetPasswordPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-forget-password',template:/*ion-inline-start:"D:\celaneo\mobile\new-mobile\test\src\pages\forget-password\forget-password.html"*/'<!--\n\n  Generated template for the ForgetPasswordPage page.\n\n\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n\n  Ionic pages and navigation.\n\n-->\n\n<ion-content padding>\n\n    <div class="div-left">\n\n    </div>\n\n    <div class="div-center">\n\n        <div class="back-page" (click)="loginPage()">\n\n            <ion-icon name="ios-arrow-back-outline"></ion-icon>\n\n        </div>\n\n        <ion-grid class="no-padding">\n\n            <ion-row>\n\n                <ion-col text-center>\n\n                    <img class="img-logo" src="assets/imgs/icons/logo-simple.png" alt="NOUS-Ensemble">\n\n                </ion-col>\n\n            </ion-row>\n\n            <ion-row>\n\n                <ion-col class="no-padding  col" col-12="" text-center="">\n\n                    <h4 class="log-heading"> Mot de passe oublié </h4>\n\n                </ion-col>\n\n            </ion-row>\n\n            <ion-row text-center>\n\n                <form [formGroup]="forgetPasswordForm" novalidate>\n\n                    <ion-row>\n\n                        <ion-col>\n\n                            <ion-label class="forgot-label" color="light-black" stacked>Adresse e-mail</ion-label>\n\n                            <ion-item text-center [class.formError]="( forgetPasswordForm.get(\'email\').hasError(\'required\') || forgetPasswordForm.get(\'email\').hasError(\'email\') ) && submited">\n\n                                <ion-input type="email" id="email" name="email" required [(ngModel)]="user.email"\n\n                                    formControlName="email"></ion-input>\n\n                            </ion-item>\n\n                            <div class="error-msg" *ngIf="forgetPasswordForm.get(\'email\').hasError(\'required\') && submited">\n\n                                <span class="error">Veuillez indiquer votre email</span>\n\n                            </div>\n\n                            <div class="error-msg" *ngIf="forgetPasswordForm.get(\'email\').hasError(\'email\') && !forgetPasswordForm.get(\'email\').hasError(\'required\') && submited">\n\n                                <span class="error">Veuillez indiquer un email valide</span>\n\n                            </div>\n\n                        </ion-col>\n\n                    </ion-row>\n\n                    <ion-row class="padding-horizontal">\n\n                        <ion-col class="col-submit" col-12 text-center>\n\n                            <button ion-button color="primary" round class="button-big" (click)="resetForgetedPassword(forgetPasswordForm.invalid)">Valider</button>\n\n                        </ion-col>\n\n                    </ion-row>\n\n                    <ion-row class="padding-horizontal">\n\n                        <ion-col class="col-img" text-center>\n\n\n\n                        </ion-col>\n\n                    </ion-row>\n\n                </form>\n\n            </ion-row>\n\n            <img class="img-bottom" src="assets/imgs/forget-password.png" alt="NOUS-Ensemble" class="img-bottom"/>\n\n        </ion-grid>\n\n    </div>\n\n    <div class="div-right">\n\n    </div>\n\n\n\n</ion-content>'/*ion-inline-end:"D:\celaneo\mobile\new-mobile\test\src\pages\forget-password\forget-password.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_3__providers_user_user__["a" /* UserProvider */]])
    ], ForgetPasswordPage);
    return ForgetPasswordPage;
}());

//# sourceMappingURL=forget-password.js.map

/***/ }),

/***/ 498:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CguPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_globals_globals__ = __webpack_require__(8);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_eventsrest_eventsrest__ = __webpack_require__(9);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




/**
 * Generated class for the HelpPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var CguPage = /** @class */ (function () {
    function CguPage(navCtrl, navParams, loader, myAlert, myModal, appEvents, serviceEvent, appGlobals) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.loader = loader;
        this.myAlert = myAlert;
        this.myModal = myModal;
        this.appEvents = appEvents;
        this.serviceEvent = serviceEvent;
        this.appGlobals = appGlobals;
        this.appGlobals.showHeader = true;
    }
    CguPage.prototype.ionViewWillEnter = function () {
        this.appGlobals.showHeader = true;
        this.appGlobals.showFooter = true;
    };
    CguPage.prototype.ionViewWillLeave = function () {
        this.appGlobals.showHeader = true;
        this.appGlobals.showFooter = true;
    };
    CguPage.prototype.goBack = function () {
        this.navCtrl.pop();
    };
    CguPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-cgu',template:/*ion-inline-start:"D:\celaneo\mobile\new-mobile\test\src\pages\cgu\cgu.html"*/'<!--\n\n  Generated template for the HelpPage page.\n\n\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n\n  Ionic pages and navigation.\n\n-->\n\n<ion-header class="mobile-header">\n\n    <ion-grid>\n\n        <ion-row>\n\n            <ion-col col-2 text-left>\n\n                <div class="item">\n\n                    <ion-icon name="ios-arrow-back" (click)="goBack()"></ion-icon>\n\n                </div>\n\n            </ion-col>\n\n            <ion-col col-8 text-center class="page-title">\n\n            </ion-col>\n\n            <ion-col col-2>\n\n\n\n            </ion-col>\n\n        </ion-row>\n\n    </ion-grid>\n\n</ion-header>\n\n\n\n\n\n<ion-content padding>\n\n    <div class="div-left">\n\n        <div text-right class="back"><img src="assets/imgs/icons/1.png" (click)="goBack()"></div>\n\n    </div>\n\n    <!--bloc central -->\n\n    <div class="div-center">\n\n        <ion-grid class="bar-custom">\n\n            <h4 class="onlyDesktop">Conditions générales d\'utilisation</h4>\n\n            <p>Les présentes Conditions Générales d’Utilisation (les « CGU ») ont pour objet de déterminer les règles\n\n                d’utilisation de l’application mobile NOUS ENSEMBLE (l’« Application mobile ») éditée par la société\n\n                NOUS ENSEMBLE (l’« Editeur ») au bénéfice des administrateurs des communautés créées sur\n\n                l’Application mobile (le ou les « Clients »).</p>\n\n            <p>En installant l’Application mobile sur votre terminal et/ou en accédant à l’Application mobile, en tant\n\n                que visiteur et/ou utilisateur, vous reconnaissez avoir lu et accepté l’intégralité des termes des\n\n                présentes\n\n                CGU et de ses annexes. Si vous ne souhaitez pas accepter les présentes CGU, nous vous demandons\n\n                de ne pas accéder à l’Application mobile.</p>\n\n            <p>Toute visite et/ou utilisation de l’Application mobile doit se faire dans le respect des présentes\n\n                CGU.</p>\n\n\n\n            <h4>1 - DEFINITIONS</h4>\n\n\n\n            <p>Les termes et expressions commençant par une majuscule non définie dans les présentes CGU ont le\n\n                sens qui leur est ci-après attribué :</p>\n\n\n\n            <ul>\n\n                <li>« Application mobile » désigne l’application logicielle « NOUS ENSEMBLE » éditée et fournie\n\n                    par l’Editeur, donnant accès aux Services, qui est disponible gratuitement dans l’ « Apple Store »\n\n                    d’Apple et le « Google Play Store » de Google pour être téléchargée par l’Utilisateur sur son\n\n                    terminal mobile ou sa tablette. L’Application mobile comprend également les contenus, les outils,\n\n                    les bases de données, les systèmes d’exploitation, la documentation et tous autres éléments et\n\n                    services qui la compose, les mises à jour et les nouvelles versions qui peuvent être apportées à\n\n                    l’Application mobile par l’Editeur ; L’ensemble de la plateforme NOUS Ensemble est également\n\n                    accessible sur internet à l’url : www.nous-ensemble.com sans téléchargement.\n\n                </li>\n\n                <li>« Groupes » désigne tout groupe d’Utilisateurs adhérents à la communauté administrée par un\n\n                    Client et titulaire d’un Compte ;\n\n                </li>\n\n                <li>« Utilisateur » désigne toute personne physique et ayant téléchargé l’Application mobile pour\n\n                    ses besoins propres, dans le cadre d’un usage strictement personnel, et titulaire d’un Compte\n\n                    Utilisateur ;\n\n                </li>\n\n                <li>« Partenaire » désigne toute personne physique ou morale immatriculée au Registre du\n\n                    Commerce et des Sociétés ayant conclu une convention de partenariat avec le Client, ayant une\n\n                    activité licite et conforme aux bonnes moeurs, et titulaire d’un Compte ;\n\n                </li>\n\n                <li>« Compte » désigne le profil spécifique du Groupe, du Partenaire ou du Client ;</li>\n\n                <li>« Conditions Générales d’Utilisation » ou « CGU » désigne les présentes conditions\n\n                    générales ainsi que leurs annexes ;\n\n                </li>\n\n                <li>« Contenu » désigne, sans que cette liste soit limitative, la structure de l’Application mobile, le\n\n                    contenu éditorial, les dessins, les illustrations, les images, les photographies, les chartes\n\n                    graphiques, les marques, les logos, les sigles, les dénominations sociales, les contenus visuels\n\n                    et sonores ainsi que tout autre contenu présent au sein de l’Application mobile et/ou tout autre\n\n                    élément composant l’Application mobile ;\n\n                </li>\n\n                <li>« Editeur » désigne la société NOUS ENSEMBLE, société par actions simplifiée au capital de\n\n                    20.000 euros, dont le siège social sis au 60, rue de Reuilly – PARIS (75012), immatriculée au\n\n                    Registre des Commerces et des Sociétés de Paris sous le numéro 830 537 106 ;\n\n                </li>\n\n                <li>« Compte Utilisateur » désigne l’espace personnel de l’Utilisateur sur l’Application mobile\n\n                    NOUS ENSEMBLE accessible par la saisie des identifiants de connexion (adresse mail et mot\n\n                    de passe) et permettant l’accès aux Services de l’Editeur.\n\n                </li>\n\n                <li>« Publications » désigne l’ensemble des actualités, articles, informations, commentaires et\n\n                    évènements accessibles par le biais de l’Application mobile ;\n\n                </li>\n\n                <li>« Services » désigne les fonctionnalités et services proposés par l’Application mobile, l’agenda,\n\n                    etc. ;\n\n                </li>\n\n                <li>« Utilisateur » ou « Vous » désigne les Utilisateurs, les Partenaires et les Groupes titulaires\n\n                    d’un Compte. \n\n                </li>\n\n            </ul>\n\n\n\n            <h4>2 - OBJET DE L’APPLICATION MOBILE</h4>\n\n            <p>L’Editeur a développé l’Application mobile à destination du Client, afin de permettre à ses Groupes, à\n\n                ses Partenaires et aux Utilisateurs du ressort de celle-ci de communiquer, d’échanger des informations,\n\n                d’organiser des évènements sans que cette liste soit exhaustive.</p>\n\n\n\n            <h4>3 - ACCES A L’APPLICATION MOBILE</h4>\n\n            <p>Pour utiliser l’Application mobile, vous devez posséder un téléphone compatible ou un terminal mobile\n\n                ou un ordinateur avec l’accès au réseau internet.</p>\n\n            <p>L’Application mobile est téléchargeable gratuitement depuis les plateformes « Apple Store » et « Google\n\n                Play Store » sur les terminaux mobiles ou tablette disposant du système d’exploitation iOS ou Android.\n\n                Elle est également accessible sur ordinateur via l’url <a href="https://www.nous-ensemble.com">www.nous-ensemble.com</a>.</p>\n\n            <p>La version du logiciel de l’Application mobile peut être mise à jour de temps à autre pour ajouter de\n\n                nouvelles fonctions et de nouveaux services.</p>\n\n\n\n            <h4>4 - COMPTE UTILISATEUR</h4>\n\n            <p>Pour utiliser les Services, l’Utilisateur doit s’inscrire sur l’Application mobile.</p>\n\n            <p>L’Utilisateur ne peut créer qu’un seul Compte Utilisateur, lequel est personnel et incessible.\n\n                L’inscription\n\n                donne lieu à l’attribution d’un mot de passe confidentiel, permettant à l’Utilisateur d’accéder à son\n\n                accès\n\n                membre. Ces éléments d’identification (email et mot de passe) sont modifiables en ligne par\n\n                l’Utilisateur\n\n                depuis son Compte Utilisateur.</p>\n\n            <p>Pour s’inscrire, l’Utilisateur doit fournir certaines informations à caractère personnel à l’Editeur\n\n                telles que\n\n                ses nom, prénom, son adresse électronique, ainsi que ses centres d’intérêts et ses disponibilités de\n\n                façon optionnelle.</p>\n\n            <p> L’Utilisateur peut également télécharger une photographie de profil.</p>\n\n            <p>L’Utilisateur reconnaît qu’il est responsable de toute l’activité sur son Compte Utilisateur ; tout accès\n\n                et/ou utilisation de l’application mobile effectué à partir d’un Compte Utilisateur seront réputés avoir\n\n                été\n\n                effectués par l’Utilisateur concerné.</p>\n\n            <p>L’Utilisateur est seul responsable de la sécurité et la confidentialité de son identifiant et son mot de\n\n                passe. Par conséquent, il est seul responsable de tout dommage direct ou indirect subi du fait de\n\n                l’accès\n\n                par un tiers non autorisé à son Compte Utilisateur dès lors que cet accès aura été effectué sur la base\n\n                de la saisie des éléments personnels d’identification de l’Utilisateur.</p>\n\n            <p>Dans le cas où il soupçonne une utilisation non autorisée de son Compte Utilisateur, l’Utilisateur\n\n                s’engage à avertir immédiatement l’Editeur, par courrier électronique à l’adresse suivante :\n\n                <a href="mailto:tvalence@nous-ensemble.com">tvalence@nous-ensemble.com</a> en précisant ses nom et prénom et adresse mail.</p>\n\n            <p>En acceptant les présentes CGU, l’Utilisateur accepte que l’Editeur utilise les informations recueillies\n\n                afin d’optimiser son expérience en affinant les contenus susceptibles de l’intéresser.</p>\n\n            <p>L’Editeur se réserve le droit de transmettre toute information susceptible d’avoir un caractère illégal\n\n                ou\n\n                frauduleux, aux autorités compétentes, sans en aviser l’Utilisateur.</p>\n\n            <p>L’Utilisateur renonce à tout droit ou recours, de quelle que nature que ce soit, qui pourrait lui être\n\n                reconnu\n\n                ou ouvert, en quelque lieu que ce soit, à raison de la communication par l’Editeur de ces informations\n\n                aux autorités compétentes.</p>\n\n\n\n            <h4>5 - SERVICES FOURNIS AUX UTILISATEURS</h4>\n\n            <p>En créant un Compte Utilisateur, l’Utilisateur peut :</p>\n\n            <ul>\n\n                <li>bénéficier des Publications du Client, des Groupes et des Partenaires ;</li>\n\n                <li>s’inscrire aux activités et évènements proposés par le Client et par les Groupes ;</li>\n\n                <li>commenter les Publications en veillant à respecter les règles de courtoisie et de bienveillance;\n\n                </li>\n\n                <li>participer à la rubrique d’échanges entre Utilisateurs dénommée A LA UNE ;</li>\n\n                <li>signaler des incidents au Client via un formulaire dédié, sans que les informations fournies par\n\n                    l’Utilisateur n’engagent le Client à prendre quelque mesure que ce soit dans un délai donné.\n\n                </li>\n\n            </ul>\n\n            <p>L’Utilisateur consent à ce que les données qu’il communiquera ainsi que son nom puissent être publiés\n\n                sur l’Application mobile sans que les responsables du traitement ne lui soient redevables d’aucune\n\n                indemnité. Ces données ne pourront être utilisées que dans le cadre du traitement de l’Application\n\n                mobile et de son site internet.</p>\n\n            <p>L’Utilisateur qui communique des images sur l’Application mobile déclare qu’elles sont libres de droit et\n\n                garantit le Client et l’Editeur contre tous recours portant sur les droits attachés aux images\n\n                communiquées.</p>\n\n            <p>Le Client et l’Editeur ne pourront en aucun cas être tenus responsables du contenu des images et des\n\n                commentaires de l’Utilisateur.</p>\n\n            <p>Les images et commentaires doivent respecter le droit des marques ainsi que la vie privée et le droit à\n\n                l’image des personnes (ce qui exclut toute plaque minéralogique lisible, tout visage reconnaissable\n\n                d’une personne n’ayant pas donné son accord pour la publication de son image).</p>\n\n            <p>Le Client et l’Editeur se réservent le droit de ne pas publier ou de supprimer des images en raison de\n\n                leur qualité technique insuffisante et ne publieront pas les images ou commentaires qui présentent un\n\n                caractère raciste, pornographique, violent, extrémiste ou licencieux ou portant atteinte à la vie privée\n\n                et/ou au droit à l’image de tiers.</p>\n\n            <p>Le Client et l’Editeur se réservent la faculté discrétionnaire de supprimer le Compte Utilisateur qui ne\n\n                respecterait pas les prescriptions ci-dessus mentionnées.</p>\n\n\n\n            <h4>6 - COMPTE D’UN GROUPE OU D’UN PARTENAIRE</h4>\n\n            <p>Pour bénéficier des Services qui lui sont proposés, chaque Groupe et chaque Partenaire doivent créer\n\n                un Compte puis compléter le formulaire qui leur est réservé.</p>\n\n            <p> Chaque Groupe ou chaque Partenaire s’engage à ce que ces informations demeurent exactes,\n\n                complètes et à jour.</p>\n\n            <p> La création d’un Compte pour chaque Groupe ou chaque Partenaire est ensuite soumise à l’acceptation\n\n                discrétionnaire et préalable du Client, sans que celui-ci-ci ne soit tenu de justifier sa décision.</p>\n\n            <p>Chaque Groupe ou chaque Partenaire reconnaît qu’il est seul responsable de toute l’activité sur son\n\n                Compte ; en conséquence, tout accès et/ou utilisation de l’Application mobile effectué à partir d’un\n\n                Compte rattaché à chaque Groupe ou à chaque Partenaire sera réputé avoir été effectué par le Groupe\n\n                ou le Partenaire concerné.</p>\n\n            <p>Chaque Groupe ou chaque Partenaire est également seul responsable de la sécurité et la confidentialité\n\n                de ses identifiant et mot de passe. Il s’engage à avertir immédiatement l’Editeur dans le cas où il\n\n                soupçonnerait une utilisation non autorisée de son Compte, et ce, par courrier électronique à l’adresse\n\n                suivante : <a href="mailto:tvalence@nous-ensemble.com">tvalence@nous-ensemble.com</a> en précisant ses informations d’identification.</p>\n\n            <p>L’Editeur se réserve le droit de transmettre toute information susceptible d’avoir un caractère illégal\n\n                ou\n\n                frauduleux, aux autorités compétentes, sans en aviser le Groupe ou le Partenaire concerné.</p>\n\n            <p>Chaque Groupe ou chaque Partenaire renonce à tout droit ou recours, de quelque nature que ce soit,\n\n                qui pourrait lui être reconnu ou ouvert, en quelque lieu que ce soit, à raison de la communication par\n\n                l’Editeur de ces informations aux autorités compétentes.</p>\n\n\n\n            <h4>7 - SERVICES FOURNIS A CHAQUE GROUPE OU CHAQUE PARTENAIRE</h4>\n\n            <p>Les Services proposés à chaque Groupe ou Partenaire, selon les paramétrages choisis par le Client,\n\n                sont les suivants :</p>\n\n\n\n            <ul>\n\n                <li>publication d’articles, d’évènements ou d’informations relatives au Groupe ou au Partenaire\n\n                    exclusivement et son actualité à destination des Utilisateurs ;\n\n                </li>\n\n                <li>communication avec les Utilisateurs par le biais de commentaires publics</li>\n\n                <li>proposer des activités et des événements ;</li>\n\n            </ul>\n\n\n\n            <p>Chaque Groupe et chaque Partenaire est seul responsable de ses Publications et de la modération des\n\n                commentaires associés. Le Client ainsi que l’Editeur pourront contrôler les Publications, et, le cas\n\n                échéant, les modifier, les désactiver ou les supprimer.</p>\n\n            <p>Chaque Groupe et chaque Partenaire qui communique des images, déclare qu’elles sont libres de droit\n\n                et garantit le Client et l’Editeur contre tous recours portant sur les droits attachés aux images\n\n                communiquées.</p>\n\n            <p>Le Client et l’Editeur ne pourront être tenus responsables du contenu des images de Chaque Groupe\n\n                ou de chaque Partenaire.</p>\n\n\n\n            <h4>8 - MODALITES FINANCIERES</h4>\n\n            <p>L’Application mobile est proposée gratuitement aux Utilisateurs hors coûts d’abonnement auprès de\n\n                l’opérateur de téléphonie mobile, hors coûts de connexion et d’accès au réseau Internet et hors\n\n                surcoût éventuel facturé pour le chargement de données.</p>\n\n            <p>L’Editeur se réserve le droit, dans tous les cas et à tout moment, de subordonner l’accès à un service\n\n                additionnel à un paiement par l’Utilisateur, lors de la mise en place d’une fonctionnalité\n\n                supplémentaire.</p>\n\n\n\n            <h4>9 - DISPONIBILITE DE L’APPLICATION</h4>\n\n            <p> L\'Editeur s\'engage à faire ses meilleurs efforts pour sécuriser l\'accès, la consultation et\n\n                l\'utilisation des Services de l\'Application mobile.</p>\n\n            <p>L’Application mobile est toujours accessible, sauf en cas de force majeure ou de survenance d\'un\n\n                évènement hors du contrôle de l\'Editeur, et sous réserve des éventuelles pannes et interventions de\n\n                maintenances nécessaires au bon fonctionnement de l\'Application mobile. Les interventions de maintenance\n\n                pourront être effectuées sans que les Utilisateurs, les Groupes ni les Partenaires aient été\n\n                préalablement avertis et sans engager la responsabilité de l’Editeur ou du Client.</p>\n\n\n\n            <h4>10 - INFORMATIQUES ET LIBERTES</h4>\n\n            <p> Les données personnelles collectées et ultérieurement traitées par l’Editeur sont celles que\n\n                l’Utilisateur communique volontairement, notamment via les formulaires d\'inscription.\n\n            </p>\n\n            <p>L’Utilisateur s\'engage à fournir des informations exactes, à jour et complètes, ainsi qu’à informer sans\n\n                délai l’Editeur de toute modification de ses données personnelles en effectuant les modifications\n\n                correspondantes sur son Compte.\n\n            </p>\n\n            <p>L’Application mobile et les fichiers nominatifs ont fait l\'objet d\'une déclaration à la CNIL le 8\n\n                septembre 2017 sous le numéro 209 7385, conformément à la loi numéro 78-17 du 6 janvier 1978 relative à\n\n                l\'informatique, aux fichiers et aux libertés.\n\n            </p>\n\n            <p>L’Editeur pourra utiliser les informations collectées pour assurer le bon fonctionnement des\n\n                fonctionnalités et des Services de l’Application, réaliser des études statistiques et des analyses,\n\n                développer de nouveaux services ainsi que pour proposer un contenu adapté aux besoins de l’Utilisateur.\n\n            </p>\n\n            <p>En adhérant aux présentes CGU, l’Utilisateur permet à l’Editeur d’exploiter ces informations. La\n\n                communication de ces données est strictement encadrée conformément aux exigences et sous le contrôle de\n\n                la CNIL.\n\n            </p>\n\n            <p>Dans le cadre des traitements précités, l’Editeur pourra recourir à des prestataires agissant pour son\n\n                compte et sous sa responsabilité.\n\n            </p>\n\n            <p>Si ces prestataires sont situés en dehors de l’Union européenne, ils auront alors, dans les cas prévus\n\n                par la Décision de la Commission européenne 2002/16/CE du 27 décembre 2001, préalablement signé les\n\n                «clauses contractuelles types». Le recours à ces prestataires peut être nécessaire à la bonne exécution\n\n                du contrat passé entre l’Editeur et l’Utilisateur.\n\n            </p>\n\n            <p>A tout moment, l’Utilisateur peut exercer son droit individuel d’accès, de rectification, d’information\n\n                complémentaire et, le cas échéant, d’opposition sur le traitement des données à caractère personnel les\n\n                concernant, ou sur l’utilisation de ces informations dans le cadre d’opérations marketing et commerciale\n\n                de Partenaires ou de tiers, auprès de l’Editeur en envoyant un courrier postal à :\n\n            </p>\n\n            <p>NOUS Ensemble<br/>\n\n                15 rue Beaujon<br/>\n\n                75008 Paris</p>\n\n            <p>L’Utilisateur devra fournir ses coordonnées en indiquant ses nom, prénom, date et lieu de naissance,\n\n                adresse postale et électronique et identifiant. Il devra préciser en outre l’adresse à laquelle il\n\n                souhaite recevoir la réponse de l’Editeur.\n\n            </p>\n\n\n\n            <h4>11 - RESPONSABILITE</h4>\n\n            <p>L’Editeur ne peut donner aucune garantie de fiabilité, de complétude, d\'exactitude et d\'actualité quant à\n\n                l\'ensemble des Publications et autres données présentes sur l\'Application mobile, qu\'elles soient\n\n                fournies par le Client, les Groupes, les Partenaires ou les Utilisateurs. En conséquence, toutes les\n\n                Informations et autres données diffusées à travers l\'Application mobile et ses Services sont fournies\n\n                uniquement à titre d\'information.</p>\n\n            <p> L’accès et l’utilisation de l’Application mobile se font aux risques et périls de l’Utilisateur.\n\n                L’Application mobile est fournie sans garantie quelle qu’elle soit. En conséquence, il appartient à tout\n\n                Utilisateur de prendre toutes les mesures appropriées de façon à protéger ses propres données et/ou\n\n                logiciels stockés sur ses équipements informatiques et téléphonique contre toute atteinte.</p>\n\n            <p>L’Utilisateur déclare connaitre et accepter :</p>\n\n            <ul>\n\n                <li>les caractéristiques et les limites du réseau internet et des performances techniques du réseau\n\n                    internet ;\n\n                </li>\n\n                <li>les problèmes de connexion et/ou d’accès au réseau internet et/ou aux sites web ;</li>\n\n                <li>les problèmes liés à la défaillance ou à la saturation des réseaux ;</li>\n\n                <li>les problèmes liés au temps de transit, à l’accès aux informations mises en ligne, aux temps de\n\n                    réponse pour afficher et consulter des données ;\n\n                </li>\n\n                <li>les risques d’interruption ;</li>\n\n                <li>l’absence de protection de certaines données contre des détournements éventuels ;</li>\n\n                <li>les risques de contamination par d’éventuels virus… etc.</li>\n\n            </ul>\n\n            <p>pour lesquels la responsabilité de l’Editeur ne saurait être engagée.</p>\n\n            <ul>\n\n                <li>en cas de défaut, de perte, de retard ou d’erreur de transmission de données qui sont\n\n                    indépendants de sa volonté ;\n\n                </li>\n\n                <li>si des données ne lui parvenaient pas, pour quelque raison que ce soit, ou si les données qu’elle\n\n                    reçoit étaient illisibles ou impossibles à traiter ;\n\n                </li>\n\n                <li>si, pour quelque cause que ce soit, la connexion devait être interrompue.</li>\n\n            </ul>\n\n            <p>Par ailleurs, l’Editeur décline toute responsabilité en cas de mauvaise utilisation du terminal et/ou\n\n                d’incident lié à l’utilisation du terminal lors de l’utilisation de l’Application mobile. L’Editeur ne\n\n                saurait en\n\n                aucun cas être tenu responsable de tout dommage, de quelque nature que ce soit, causé aux\n\n                Utilisateurs, à leurs terminaux, à leurs équipements informatiques et téléphoniques et aux données qui\n\n                y sont stockées ni des conséquences pouvant en découler sur leur activité personnelle, professionnelle\n\n                ou commerciale.</p>\n\n\n\n            <h4>12 - PROPRIETE INTELLECTUELLE</h4>\n\n            <p> L’Application mobile et son contenu sont la propriété exclusive de l’Editeur. L’Utilisateur n’acquiert\n\n                aucun\n\n                droit de propriété intellectuelle sur l’Application mobile, le Contenu et/ou les Services ni aucun autre\n\n                droit\n\n                que ceux conférés par les présentes.</p>\n\n            <p>L’Editeur concède à l’Utilisateur un droit personnel d’utilisation de l’Application mobile, du Contenu et\n\n                des Services, non exclusif, révocable, non cessible, non transférable et gratuit, uniquement pour ses\n\n                besoins propres dans le cadre de l’utilisation de l’Application mobile et des Services, à l’exclusion de\n\n                toute autre finalité.</p>\n\n            <p> Toutes les données de quelque nature qu\'elles soient, et notamment les textes, graphismes, logos,\n\n                icônes, images, clips audio ou vidéo, marques, logiciels, figurant sur l’Application mobile sont\n\n                nécessairement protégées par le droit d\'auteur, le droit des marques et tous autres droits de propriété\n\n                intellectuelle, et appartiennent au Client, à l’Editeur.</p>\n\n            <p> Les Utilisateurs s\'engagent dans ces conditions à ne pas reproduire, résumer, modifier, altérer ou\n\n                rediffuser, sans autorisation expresse et préalable, quelque texte, titre, application, logiciel, logo,\n\n                image,\n\n                charte graphique, marque, information ou illustration, pour un usage autre que strictement privé.</p>\n\n            <p>L’Utilisateur est responsable des Publications (articles, commentaires, images) qu’il diffuse notamment\n\n                via la rubrique A LA UNE de l’Application mobile ; il est tenu au respect des dispositions légales et\n\n                réglementaires en vigueur, en particulier celles qui répriment les abus de la liberté d’expression.</p>\n\n            <p> Il veille à ce que ses commentaires ne comportent pas, notamment :</p>\n\n            <ul>\n\n                <li> de propos à caractère discriminatoire, raciste, xénophobe, antisémite, homophobe,\n\n                    négationniste, pornographique, pédophile, pédopornographique, etc. ;\n\n                </li>\n\n                <li>de propos injurieux, délibérément choquants, diffamatoires, ou portant atteinte à la vie privée, et\n\n                    plus généralement aux droits de la personnalité de quiconque,\n\n                </li>\n\n                <li>de propos incitant à la violence, au suicide, au terrorisme, à l’utilisation, la fabrication ou la\n\n                    distribution de substances illicites ou réglementées par la loi (drogues, tabac, alcool,…)\n\n                </li>\n\n                <li>de propos dénigrant, dégradant ou harcelant tout autre Utilisateur ;</li>\n\n                <li>de propos portant atteinte à la dignité humaine ;</li>\n\n                <li>de propos incitant à la commission de crimes ou de délits ou qui en font l’apologie et plus\n\n                    particulièrement les crimes contre l’humanité ;\n\n                </li>\n\n                <li>de contenus violant les droits de propriété intellectuelle de tiers (notamment articles, ouvrages),\n\n                    pour lesquels l’Utilisateur ne dispose pas des autorisations nécessaires des auteurs et/ou ayants\n\n                    droit.\n\n                </li>\n\n            </ul>\n\n            <p> Les messages ne respectant pas ces règles peuvent être supprimés sans préavis. De plus, l’Editeur\n\n                et/ou le Client est libre de publier ou non les commentaires de son choix, ce choix étant entièrement\n\n                discrétionnaire y compris pour des raisons qui ne seraient pas répertoriées dans la liste ci-dessus.</p>\n\n            <p>En cas de non-respect régulier de ces règles, le Client et/ou l’Editeur se réserve le droit de refuser\n\n                systématiquement les commentaires d’un Utilisateur.</p>\n\n            <p>La modération ne permettant pas de déceler a priori tous les contenus illicites et notamment les contenus\n\n                portant atteinte aux droits des tiers, l’Utilisateur garantit l’Editeur contre toute action ou\n\n                réclamation\n\n                consécutive à la mise en ligne de son commentaire, si celui-ci s’avère illicite.</p>\n\n            <p>Il est également rappelé à l’Utilisateur que si son commentaire présente un caractère illicite, les\n\n                données\n\n                permettant de l’identifier ou d’identifier son ordinateur pourront être communiquées par l’Editeur à\n\n                l’autorité judiciaire, si cette dernière le requiert, conformément à l’article 6-II de la loi du 21 juin\n\n                2004.\n\n                Les Utilisateurs peuvent réagir aux commentaires mis en ligne, mais il leur est demandé d’éviter toute\n\n                agressivité, invective, interpellation ou sollicitation. Tout échange ou contact direct entre deux\n\n                Utilisateurs sera de la seule responsabilité de ces derniers. L’Editeur ne pourra en aucun cas être\n\n                poursuivi ni sa responsabilité recherchée du fait d’un échange ou contact direct entre Utilisateurs.</p>\n\n\n\n            <h4>13 - DUREE – MODIFICATION – RESILIATION</h4>\n\n            <p>Les présentes CGU s’appliquent :</p>\n\n            <ul>\n\n                <li>pour l’Utilisateur : à compter de son inscription emportant la création d’un Compte Utilisateur\n\n                    jusqu’à la suppression de son Compte Utilisateur ;\n\n                </li>\n\n                <li>pour chaque Groupe ou chaque Partenaire : à compter de la création de son Compte jusqu’à\n\n                    sa suppression.\n\n                </li>\n\n            </ul>\n\n            <p>L’Editeur peut apporter des modifications aux présentes CGU.</p>\n\n            <p>Les modifications prendront effet dès le premier affichage des CGU modifiées au présent emplacement.\n\n                En continuant d’accéder aux Services ou de les utiliser après ledit affichage, l’Utilisateur, les\n\n                Groupes,\n\n                les Délégations et les Partenaires sont réputés avoir accepté la modification des CGU.</p>\n\n            <p> L’Editeur peut librement résilier sans délai les présentes CGU ou, d’une manière générale, cesser\n\n                totalement ou partiellement d’offrir les Services ou en interdire l’accès aux Utilisateurs et/ou aux\n\n                Groupes\n\n                et aux Partenaires, et ce, à tout moment et pour quelque motif que ce soit sans engager sa\n\n                responsabilité.</p>\n\n            <h4>14 - DROIT APPLICABLE</h4>\n\n            <p>Les présentes Conditions Générales d’Utilisation sont soumises à la loi française.</p>\n\n            <p>Tout litige ou contestation relatif à l’exécution ou à l’interprétation du présent règlement qui n’aura pas\n\n            pu être réglé à l’amiable entre les parties sera soumis aux tribunaux compétents du ressort de la Cour\n\n            d’appel de PARIS.</p>\n\n            <p>A Paris, le 26 décembre 2018.</p>\n\n        </ion-grid>\n\n\n\n    </div>\n\n    <!-- fin bloc central -->\n\n    <div class="div-right" text-center>\n\n    </div>\n\n</ion-content>'/*ion-inline-end:"D:\celaneo\mobile\new-mobile\test\src\pages\cgu\cgu.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_3__providers_eventsrest_eventsrest__["a" /* EventsrestProvider */],
            __WEBPACK_IMPORTED_MODULE_2__providers_globals_globals__["a" /* GlobalsProvider */]])
    ], CguPage);
    return CguPage;
}());

//# sourceMappingURL=cgu.js.map

/***/ }),

/***/ 499:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return RgpdPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_globals_globals__ = __webpack_require__(8);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_eventsrest_eventsrest__ = __webpack_require__(9);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




/**
 * Generated class for the HelpPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var RgpdPage = /** @class */ (function () {
    function RgpdPage(navCtrl, navParams, loader, myAlert, myModal, appEvents, serviceEvent, appGlobals) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.loader = loader;
        this.myAlert = myAlert;
        this.myModal = myModal;
        this.appEvents = appEvents;
        this.serviceEvent = serviceEvent;
        this.appGlobals = appGlobals;
        this.appGlobals.showHeader = false;
    }
    RgpdPage.prototype.ionViewWillEnter = function () {
        this.appGlobals.showHeader = false;
        this.appGlobals.showFooter = true;
    };
    RgpdPage.prototype.ionViewWillLeave = function () {
        this.appGlobals.showHeader = true;
        this.appGlobals.showFooter = true;
    };
    RgpdPage.prototype.goBack = function () {
        this.navCtrl.pop();
    };
    RgpdPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-rgpd',template:/*ion-inline-start:"D:\celaneo\mobile\new-mobile\test\src\pages\rgpd\rgpd.html"*/'<!--\n\n  Generated template for the HelpPage page.\n\n\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n\n  Ionic pages and navigation.\n\n-->\n\n<ion-header class="mobile-header">\n\n    <ion-grid>\n\n        <ion-row>\n\n            <ion-col col-2 text-left>\n\n                <div class="item">\n\n                    <ion-icon name="ios-arrow-back" (click)="goBack()"></ion-icon>\n\n                </div>\n\n            </ion-col>\n\n            <ion-col col-8 text-center class="page-title">\n\n            </ion-col>\n\n            <ion-col col-2>\n\n\n\n            </ion-col>\n\n        </ion-row>\n\n    </ion-grid>\n\n</ion-header>\n\n\n\n\n\n<ion-content padding>\n\n    <div class="div-left">\n\n        <div text-right class="back"><img src="assets/imgs/icons/1.png" (click)="goBack()"></div>\n\n    </div>\n\n    <!--bloc central -->\n\n    <div class="div-center">\n\n        <ion-grid class="bar-custom">\n\n            <h4 class="onlyDesktop">Politique de protection des données personelles</h4>\n\n            <p>La protection de vos données à caractère personnel est un élément essentiel de notre relation, que vous\n\n                soyez client ou utilisateur de nos services et de notre application NOUS ensemble. Cette relation est\n\n                fondée sur un principe de transparence visant à respecter votre vie privée conformément à la\n\n                règlementation en vigueur en France et en Europe notamment en application de la loi informatique et\n\n                libertés et du Règlement Général sur la Protection des Données (RGPD), la « Réglementation ».\n\n            </p>\n\n            <p>La présente politique vous informe sur les catégories de données à caractère personnel que nous traitons,\n\n                la façon dont nous les utilisons, les catégories de destinataires auxquels nous les communiquons, ainsi\n\n                que sur les droits dont vous disposez.\n\n            </p>\n\n\n\n            <h4>Quelles données</h4>\n\n\n\n            <p>Nous Ensemble peut recueillir directement auprès de vous ou indirectement via des tiers des données à\n\n                caractère personnel. Conformément au principe de minimisation, nous ne collectons que les données\n\n                nécessaires au regard des finalités pour lesquelles elles sont traitées.</p>\n\n            <p>Les différentes catégories de données collectées lors votre inscription et dans le cadre de votre\n\n                utilisation de nos services ou notre application sont les suivantes :</p>\n\n            <ul>\n\n                <li>Données d’identification (notamment nom, prénom)</li>\n\n                <li>Données de contact (notamment adresse électronique) ;</li>\n\n                <li>Données d’usage (notamment consultations faites sur l’application) ;</li>\n\n                <li>Données de connexion (notamment adresse IP de votre ordinateur, logs de connexion et d’usage) ;</li>\n\n                <li>Données de localisation (notamment ville de résidence);</li>\n\n                <li>Données de contenus (notamment photos, articles et commentaires).</li>\n\n            </ul>\n\n\n\n            <h4>Finalités</h4>\n\n            <p>Vos données à caractère personnel sont collectées et traitées uniquement sur la base des fondements\n\n                juridiques prévus par la Réglementation :</p>\n\n\n\n            <p> 1. Dans le cadre de l’exécution d’un contrat :</p>\n\n            <ul>\n\n                <li> Identification et authentification du client ou utilisateur ;</li>\n\n                <li>Communications avec le client (assistance technique et commerciale) ;</li>\n\n                <li>Gestion des précontentieux, des contentieux et des impayés</li>\n\n                <li>Gestion des droits et des demandes d’exercice des droits des personnes</li>\n\n                <li>Fourniture et fonctionnement des services</li>\n\n                <li>Hébergement des données du client ou utilisateur</li>\n\n                <li>Administration et gestion du réseau et des services.</li>\n\n            </ul>\n\n            <p> 2. À des fins d’intérêts légitimes ou, le cas échéant, sur la base de votre consentement :</p>\n\n            <ul>\n\n                <li> Fourniture de contenus localisés et de recommandations personnalisées basés sur l’analyse des\n\n                    usages ;\n\n                </li>\n\n                <li>Développement des produits et services de Nous Ensemble et prospection commerciale ;</li>\n\n                <li>Réalisation d’études statistiques, d’analyses et de mesures d’audience.</li>\n\n            </ul>\n\n            <p>3. Pour assurer le respect de nos obligations légales et règlementaires telles que définies par la\n\n                législation en vigueur.</p>\n\n\n\n            <h4>Durée de conservation</h4>\n\n            <p>Nous ne conservons vos données que pendant la durée nécessaire à l’accomplissement des finalités\n\n                mentionnées ci-dessus ou pour nous permettre de répondre à nos obligations légales.\n\n            </p>\n\n            <p>Les données à caractère personnel utilisées à des fins de prospection commerciale peuvent être conservées\n\n                pour une durée maximale de trois (3) ans à compter de la fin de la relation commerciale.\n\n            </p>\n\n\n\n            <h4>Vers quels destinataires ?</h4>\n\n            <p>Vos données à caractère personnel pourront être traitées par le personnel habilité du de Nous\n\n                Ensemble.</p>\n\n\n\n            <h4>Quelle sécurité pour vos données ?</h4>\n\n            <p>Nous avons défini des mesures techniques et organisationnelles permettant de protéger vos données de\n\n                façon appropriée selon leur nature, l’étendue du traitement et leur accessibilité. Il peut s’agir par\n\n                exemple de gestion de droits d’accès.\n\n            </p>\n\n            <p>Le respect de la sécurité et de la protection de vos données s’impose à l’ensemble de nos collaborateurs.\n\n            </p>\n\n\n\n            <h4>Quels sont vos droits ?</h4>\n\n            <p>Vous pouvez demander à tout moment l’accès aux données à caractère personnel vous concernant, leur\n\n                rectification, leur effacement (dans la mesure où cela n’empêche pas le respect des obligations légales\n\n                de Nous Ensemble) et la limitation d’un ou plusieurs traitements particuliers de données vous\n\n                concernant, dans les conditions prévues par la Réglementation.\n\n            </p>\n\n            <p>Vous disposez également du droit de modifier ou de retirer, à tout moment, les consentements que vous\n\n                nous avez accordés pour le traitement de vos données à caractère personnel.\n\n            </p>\n\n            <p>Vous disposez par ailleurs du droit de vous opposer à un traitement de vos données à caractère personnel,\n\n                dans les conditions fixées par la Réglementation.\n\n            </p>\n\n            <p>Vous disposez du droit de donner instruction à Nous Ensemble de communiquer ces données à un tiers que\n\n                vous aurez préalablement désigné.\n\n            </p>\n\n\n\n            <h4>Modalités d’exercice</h4>\n\n            <p>Vous pouvez exercer vos droits à tout moment en vous rendant dans votre espace dans la rubrique\n\n                paramètres de votre compte signalé par l’icône de la molette sur l’application.\n\n            </p>\n\n            <p>Vous pouvez également envoyer un courrier postal à :</p>\n\n\n\n            <p>Nous Ensemble<br/>\n\n                Service Clients<br/>\n\n                15 rue Beaujon 75008<br/>\n\n                Paris\n\n            </p>\n\n            <p>Vous devrez alors fournir vos nom, prénom, ainsi qu’une copie de votre pièce d’identité.\n\n            </p>\n\n            <p>Si vous n’êtes pas satisfait de nos échanges, vous avez la possibilité de saisir la Commission Nationale\n\n                de l’Informatique et des Libertés (CNIL) à l’adresse suivante :<br/> CNIL – 3 place de Fontenoy – TSA 80715 –\n\n                75334 Paris cedex 07\n\n            </p>\n\n        </ion-grid>\n\n\n\n    </div>\n\n    <!-- fin bloc central -->\n\n    <div class="div-right" text-center>\n\n    </div>\n\n</ion-content>'/*ion-inline-end:"D:\celaneo\mobile\new-mobile\test\src\pages\rgpd\rgpd.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_3__providers_eventsrest_eventsrest__["a" /* EventsrestProvider */],
            __WEBPACK_IMPORTED_MODULE_2__providers_globals_globals__["a" /* GlobalsProvider */]])
    ], RgpdPage);
    return RgpdPage;
}());

//# sourceMappingURL=rgpd.js.map

/***/ }),

/***/ 500:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return RegisterLastPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__register_first_register_first__ = __webpack_require__(212);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_user_user__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__empty_news_empty_news__ = __webpack_require__(106);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__news_news__ = __webpack_require__(35);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__providers_globals_globals__ = __webpack_require__(8);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__angular_forms__ = __webpack_require__(21);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__app_config__ = __webpack_require__(28);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__ionic_native_market__ = __webpack_require__(135);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__ionic_native_push__ = __webpack_require__(107);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__ionic_native_badge__ = __webpack_require__(134);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__providers_community_community__ = __webpack_require__(40);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__ionic_native_fcm__ = __webpack_require__(136);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};














/**
 * Generated class for the RegisterLastPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var RegisterLastPage = /** @class */ (function () {
    function RegisterLastPage(navCtrl, navParams, loader, myUser, serviceCommunity, myAlert, appEvents, platform, push, fcm, badge, market, appGlobals) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.loader = loader;
        this.myUser = myUser;
        this.serviceCommunity = serviceCommunity;
        this.myAlert = myAlert;
        this.appEvents = appEvents;
        this.platform = platform;
        this.push = push;
        this.fcm = fcm;
        this.badge = badge;
        this.market = market;
        this.appGlobals = appGlobals;
        this.submited = false;
        this.passwordError = false;
        this.finishedEvents = [];
        this.newUser = this.navParams.get("newUser");
    }
    RegisterLastPage.prototype.ngOnInit = function () {
        this.secondRegisterForm = new __WEBPACK_IMPORTED_MODULE_7__angular_forms__["c" /* FormGroup */]({
            email: new __WEBPACK_IMPORTED_MODULE_7__angular_forms__["b" /* FormControl */]('', [__WEBPACK_IMPORTED_MODULE_7__angular_forms__["h" /* Validators */].required, __WEBPACK_IMPORTED_MODULE_7__angular_forms__["h" /* Validators */].email]),
            password: new __WEBPACK_IMPORTED_MODULE_7__angular_forms__["b" /* FormControl */]('', [__WEBPACK_IMPORTED_MODULE_7__angular_forms__["h" /* Validators */].required, __WEBPACK_IMPORTED_MODULE_7__angular_forms__["h" /* Validators */].minLength(6)]),
            confirm_password: new __WEBPACK_IMPORTED_MODULE_7__angular_forms__["b" /* FormControl */]('', [__WEBPACK_IMPORTED_MODULE_7__angular_forms__["h" /* Validators */].required, this.equalTo('password')])
        });
    };
    RegisterLastPage.prototype.registerUser = function (errorValidation) {
        var _this = this;
        this.submited = true;
        if (!errorValidation && !this.passwordError) {
            var loadingPopup_1 = this.loader.create({});
            loadingPopup_1.present();
            this.myUser.register(this.newUser).then(function (data) {
                loadingPopup_1.dismiss();
                _this.appGlobals.token = data.token;
                localStorage.setItem('token', data.token);
                localStorage.setItem("adminAssociations", JSON.stringify([]));
                localStorage.setItem("adminMerchants", JSON.stringify([]));
                localStorage.setItem("adherentAssociations", JSON.stringify([]));
                localStorage.setItem("adherentMerchants", JSON.stringify([]));
                var expiration_date = new Date();
                expiration_date.setDate(expiration_date.getDate() + 7);
                localStorage.setItem('expiration_date', expiration_date.toString());
                localStorage.setItem('account_type', 'citoyen');
                localStorage.setItem('ga', data.ga);
                if (!_this.platform.is('core')) {
                    _this.initPushNotification(_this.platform);
                }
                if (data.token) {
                    localStorage.setItem("currentUser", JSON.stringify(data.user));
                    localStorage.setItem("isLoggedIn", "1");
                    localStorage.setItem("hasCommunities", "false");
                    localStorage.setItem("hasApprovedCommunities", "false");
                    var Communities = [];
                    localStorage.setItem("allCommunities", JSON.stringify(Communities));
                    Promise.all([_this.serviceCommunity.getAllPublicCommunities(), _this.serviceCommunity.getAllPrivateCommunities()]).then(function (user) {
                        localStorage.setItem("publicCommunities", JSON.stringify(user[0]));
                        localStorage.setItem("privateCommunities", JSON.stringify(user[1]));
                        _this.appEvents.publish('refreshCommunities');
                    });
                    _this.navCtrl.setRoot(__WEBPACK_IMPORTED_MODULE_4__empty_news_empty_news__["a" /* EmptyNewsPage */], {
                        register: true
                    });
                }
                else if (data.warning) {
                    var errorAlert = _this.myAlert.create({
                        title: "Erreur",
                        subTitle: data.warning,
                        buttons: [
                            {
                                text: 'OK',
                                handler: function () {
                                }
                            }
                        ]
                    });
                    errorAlert.present();
                }
                else {
                    var errorAlert = _this.myAlert.create({
                        title: "Erreur",
                        subTitle: "L'adresse mail existe.",
                        buttons: [
                            {
                                text: 'OK',
                                handler: function () {
                                }
                            }
                        ]
                    });
                    errorAlert.present();
                }
            }, function (err) {
                loadingPopup_1.dismiss();
                _this.appEvents.publish('http:errors', err);
            });
        }
    };
    RegisterLastPage.prototype.registerFirstStepPage = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_2__register_first_register_first__["a" /* RegisterFirstPage */], {
            newUser: this.newUser
        });
    };
    RegisterLastPage.prototype.equalTo = function (field_name) {
        return function (control) {
            var input = control.value;
            var isValid = control.root.value[field_name] == input;
            if (!isValid) {
                return { 'equalTo': { isValid: isValid } };
            }
            else {
                return null;
            }
            ;
        };
    };
    RegisterLastPage.prototype.initPushNotification = function (platform) {
        var _this = this;
        if (!platform.is('cordova')) {
            return;
        }
        this.fcm.subscribeToTopic('nousEnsemble');
        this.fcm.getToken().then(function (token) {
            var deviceType = "";
            if (platform.is('ios')) {
                deviceType = "ios";
            }
            else if (platform.is('android')) {
                deviceType = "android";
            }
            else if (platform.is('windows')) {
                deviceType = "windows";
            }
            _this.deviceToken = token;
            _this.myUser.deviceToken(token, deviceType);
        });
        this.fcm.onNotification().subscribe(function (data) {
            if (data.additionalData.silent == 'on') {
                if (data.additionalData.foreground) {
                    _this.appEvents.publish('refreshNotifications');
                }
            }
            else if (data.additionalData.participantNbre == 'yes') {
                _this.finishedEvents = JSON.parse(localStorage.getItem("finishedEvents"));
                _this.finishedEvents.push(data.additionalData.eventId);
                localStorage.setItem("finishedEvents", JSON.stringify(_this.finishedEvents));
            }
            else {
                _this.badge.increase(1);
                if (data.additionalData.foreground) {
                    if (data.additionalData.eventId) {
                        var label = 'pushReceived-' + data.additionalData.eventId;
                        _this.appEvents.publish("googleAnalytics", label);
                    }
                    if (data.additionalData.communityId || data.additionalData.associationId || data.additionalData.merchantId) {
                        var confirmAlert = _this.myAlert.create({
                            title: data.title,
                            message: data.message,
                            buttons: [{
                                    text: 'Fermer',
                                    role: 'cancel'
                                }]
                        });
                        confirmAlert.present();
                    }
                    else {
                        var confirmAlert = _this.myAlert.create({
                            title: data.title,
                            message: data.message,
                            buttons: [{
                                    text: 'Fermer',
                                    role: 'cancel'
                                }]
                        });
                        confirmAlert.present();
                    }
                }
                else {
                    if (data.additionalData.participantNbre == 'yes') {
                        _this.finishedEvents = JSON.parse(localStorage.getItem("finishedEvents"));
                        _this.finishedEvents.push(data.additionalData.eventId);
                        localStorage.setItem("finishedEvents", JSON.stringify(_this.finishedEvents));
                    }
                    else {
                        _this.badge.increase(1);
                        if (data.additionalData.eventId) {
                            var label = 'push received-' + data.additionalData.eventId;
                            _this.appEvents.publish("googleAnalytics", label);
                        }
                        if (data.additionalData.store == 'on') {
                            _this.openMarket();
                        }
                        else {
                            _this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_5__news_news__["a" /* NewsPage */]);
                        }
                    }
                }
            }
        });
    };
    RegisterLastPage.prototype.openMarket = function () {
        this.market.open(__WEBPACK_IMPORTED_MODULE_8__app_config__["b" /* APP_PACKAGE */]);
    };
    RegisterLastPage.prototype.checkFocus = function (element) {
        if (this.platform.is('android')) {
            var requiredElement = element.target.offsetParent.parentElement;
            var yOffset = requiredElement.offsetTop;
            this.content.scrollTo(0, yOffset, 2000);
        }
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["ViewChild"])(__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* Content */]),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* Content */])
    ], RegisterLastPage.prototype, "content", void 0);
    RegisterLastPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-register-last',template:/*ion-inline-start:"D:\celaneo\mobile\new-mobile\test\src\pages\register-last\register-last.html"*/'<!--\n\n  Generated template for the RegisterLastPage page.\n\n\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n\n  Ionic pages and navigation.\n\n-->\n\n<ion-content padding>\n\n    <div class="div-left">\n\n    </div>\n\n    <div class="div-center">\n\n        <div class="back-page" (click)="registerFirstStepPage()">\n\n            <ion-icon name="ios-arrow-back-outline"></ion-icon>\n\n        </div>\n\n        <ion-grid class="no-padding padding-horizontal">\n\n            <ion-row>\n\n                <ion-col margin-bottom text-center>\n\n                    <img class="img-logo" margin-bottom src="assets/imgs/icons/logo-simple.png" alt="NOUS-Ensemble">\n\n                </ion-col>\n\n            </ion-row>\n\n            <ion-row>\n\n                <ion-col text-center>\n\n                    <div class="register-title" text-center>\n\n                        La dernière étape !\n\n                    </div>\n\n                </ion-col>\n\n            </ion-row>\n\n            <ion-row>\n\n                <form [formGroup]="secondRegisterForm" novalidate>\n\n                    <ion-row>\n\n                        <ion-col class="col-input">\n\n                            <ion-label color="light-black" stacked>Adresse e-mail</ion-label>\n\n                            <ion-item text-center [class.formError]="( secondRegisterForm.get(\'email\').hasError(\'required\') || secondRegisterForm.get(\'email\').hasError(\'email\') ) && submited">\n\n                                <ion-input type="email" id="email" name="email" required [(ngModel)]="newUser.email"\n\n                                    (focus)="checkFocus($event)" formControlName="email"></ion-input>\n\n                            </ion-item>\n\n                            <div class="error-msg" *ngIf="secondRegisterForm.get(\'email\').hasError(\'required\') && submited">\n\n                                <span class="error">Veuillez indiquer votre email</span>\n\n                            </div>\n\n                            <div class="error-msg" *ngIf="secondRegisterForm.get(\'email\').hasError(\'email\') && !secondRegisterForm.get(\'email\').hasError(\'required\') && submited">\n\n                                <span class="error">Veuillez indiquer un email valide</span>\n\n                            </div>\n\n                        </ion-col>\n\n                    </ion-row>\n\n                    <ion-row>\n\n                        <ion-col class="col-input">\n\n                            <ion-label color="light-black" stacked>Mot de passe</ion-label>\n\n                            <ion-item text-center [class.formError]="(secondRegisterForm.get(\'password\').hasError(\'minlength\') || secondRegisterForm.get(\'password\').hasError(\'required\') ) && submited">\n\n                                <ion-input type="password" id="password" name="password" formControlName="password"\n\n                                    required (focus)="checkFocus($event)" [(ngModel)]="newUser.password"></ion-input>\n\n                            </ion-item>\n\n                            <div class="error-msg" *ngIf="secondRegisterForm.get(\'password\').hasError(\'required\') && submited">\n\n                                <span class="error">Veuillez indiquer votre mot de passe</span>\n\n                            </div>\n\n                            <div class="error-msg" *ngIf="secondRegisterForm.get(\'password\').hasError(\'minlength\') && !secondRegisterForm.get(\'password\').hasError(\'required\') && submited">\n\n                                <span class="error">Mot de passe doit contenir au moin 6 chiffres</span>\n\n                            </div>\n\n                        </ion-col>\n\n                    </ion-row>\n\n                    <ion-row>\n\n                        <ion-col class="col-input">\n\n                            <ion-label color="light-black" stacked>Mot de passe (vérification)</ion-label>\n\n                            <ion-item text-center [class.formError]="(secondRegisterForm.get(\'confirm_password\').invalid || secondRegisterForm.get(\'confirm_password\').hasError(\'required\') ) && submited">\n\n                                <ion-input type="password" id="rePassword" name="rePassword" (focus)="checkFocus($event)"\n\n                                    formControlName="confirm_password" required [(ngModel)]="newUser.rePassword"></ion-input>\n\n                            </ion-item>\n\n                            <div class="error-msg" *ngIf="(secondRegisterForm.get(\'confirm_password\').invalid || secondRegisterForm.get(\'confirm_password\').hasError(\'required\') ) && submited">\n\n                                <span class="error">Les mots de passe ne sont pas identiques</span>\n\n                            </div>\n\n                        </ion-col>\n\n                    </ion-row>\n\n                    <ion-row>\n\n                        <ion-col class="col-submit" text-center>\n\n                            <button ion-button color="primary" round class="button-big submit-register" (click)="registerUser(secondRegisterForm.invalid)">\n\n                                C\'est parti !\n\n                            </button>\n\n                            <img class="img-cloud" src="assets/imgs/cloud.png" alt="NOUS-Ensemble" />\n\n                        </ion-col>\n\n                    </ion-row>\n\n                    <ion-row class="padding-horizontal">\n\n                        <ion-col class="div-img">\n\n                            <img  src="assets/imgs/forget-password.png" alt="NOUS-Ensemble" class="img-bottom"/>\n\n\n\n                        </ion-col>\n\n                    </ion-row>\n\n                </form>\n\n            </ion-row>\n\n        </ion-grid>\n\n    </div>\n\n    <div class="div-right">\n\n    </div>\n\n</ion-content>'/*ion-inline-end:"D:\celaneo\mobile\new-mobile\test\src\pages\register-last\register-last.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_3__providers_user_user__["a" /* UserProvider */],
            __WEBPACK_IMPORTED_MODULE_12__providers_community_community__["a" /* CommunityProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["x" /* Platform */],
            __WEBPACK_IMPORTED_MODULE_10__ionic_native_push__["a" /* Push */],
            __WEBPACK_IMPORTED_MODULE_13__ionic_native_fcm__["a" /* FCM */],
            __WEBPACK_IMPORTED_MODULE_11__ionic_native_badge__["a" /* Badge */],
            __WEBPACK_IMPORTED_MODULE_9__ionic_native_market__["a" /* Market */],
            __WEBPACK_IMPORTED_MODULE_6__providers_globals_globals__["a" /* GlobalsProvider */]])
    ], RegisterLastPage);
    return RegisterLastPage;
}());

//# sourceMappingURL=register-last.js.map

/***/ }),

/***/ 501:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
Object.defineProperty(__webpack_exports__, "__esModule", { value: true });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ModerationPageModule", function() { return ModerationPageModule; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__moderation__ = __webpack_require__(213);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};



var ModerationPageModule = /** @class */ (function () {
    function ModerationPageModule() {
    }
    ModerationPageModule = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["NgModule"])({
            declarations: [
                __WEBPACK_IMPORTED_MODULE_2__moderation__["a" /* ModerationPage */],
            ],
            imports: [
                __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* IonicPageModule */].forChild(__WEBPACK_IMPORTED_MODULE_2__moderation__["a" /* ModerationPage */]),
            ],
            exports: [
                __WEBPACK_IMPORTED_MODULE_2__moderation__["a" /* ModerationPage */]
            ]
        })
    ], ModerationPageModule);
    return ModerationPageModule;
}());

//# sourceMappingURL=moderation.module.js.map

/***/ }),

/***/ 55:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return EventDetailsPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_globals_globals__ = __webpack_require__(8);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_eventsrest_eventsrest__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__ionic_native_google_analytics__ = __webpack_require__(58);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_moment__ = __webpack_require__(1);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_moment__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__ionic_native_calendar__ = __webpack_require__(54);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__providers_comment_comment__ = __webpack_require__(22);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__pages_news_news__ = __webpack_require__(35);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__ionic_native_camera__ = __webpack_require__(29);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__ionic_native_social_sharing__ = __webpack_require__(46);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__providers_cache_cache__ = __webpack_require__(47);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__providers_article_article__ = __webpack_require__(31);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};













/**
 * Generated class for the EventDetailsPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var EventDetailsPage = /** @class */ (function () {
    function EventDetailsPage(navCtrl, navParams, appGlobals, loader, myAlert, appEvents, ga, calendarPlugin, serviceEvent, myModal, eventService, commentService, camera, actionSheetCtrl, toast, platform, serviceArticle, socialsharing, cacheService) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.appGlobals = appGlobals;
        this.loader = loader;
        this.myAlert = myAlert;
        this.appEvents = appEvents;
        this.ga = ga;
        this.calendarPlugin = calendarPlugin;
        this.serviceEvent = serviceEvent;
        this.myModal = myModal;
        this.eventService = eventService;
        this.commentService = commentService;
        this.camera = camera;
        this.actionSheetCtrl = actionSheetCtrl;
        this.toast = toast;
        this.platform = platform;
        this.serviceArticle = serviceArticle;
        this.socialsharing = socialsharing;
        this.cacheService = cacheService;
        this.commentsItems = [];
        this.page = 0;
        this.showComments = false;
        this.showParticipants = false;
        this.showVolonteers = false;
        this.withComments = false;
        this.comment = {
            content: '',
            photo: null
        };
        this.reply = {
            comment: null,
            content: '',
            photo: null
        };
        this.participants = [];
        this.volonteers = [];
        this.showReply = false;
        this.numberComments = 0;
        this.restNumbreComment = 0;
        this.restNumbreReplie = 0;
        this.commentNumber = 0;
        this.currentEventSupprimer = {};
        this.items = [];
        this.isCreatorEvent = false;
        this.id = this.navParams.get('id');
        this.appGlobals.onEventDetails = true;
        this.appGlobals.currentPageTitle = this.navParams.get('title');
        this.withComments = this.navParams.get('withComments');
        this.currentUser = JSON.parse(localStorage.getItem("currentUser"));
        this.showPush = navParams.get('pushNotification');
        this.adminAssociations = JSON.parse(localStorage.getItem("adminAssociations"));
        this.currentEvent = navParams.get('event');
        this.newData = navParams.get('event');
        this.isCreatorEvent = this.creatorExists(this.currentEvent.creatorId);
    }
    EventDetailsPage.prototype.edite = function (item) {
        var _this = this;
        var data = this.newData;
        var myModal2 = this.myModal.create('EditEventPage', { "event": data, "accountType": localStorage.getItem("account_type") }, { cssClass: 'style-modal' });
        myModal2.onDidDismiss(function (data) {
            _this.items = [];
            _this.page = 1;
            _this.appEvents.publish('agendaAsso:refresh');
            _this.appEvents.publish('agenda:refresh');
            _this.appGlobals.showHeader = false;
        });
        myModal2.present();
    };
    EventDetailsPage.prototype.supprimer = function (item) {
        return __awaiter(this, void 0, void 0, function () {
            var alert;
            var _this = this;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.currentEventSupprimer = Object.assign({}, item);
                        return [4 /*yield*/, this.myAlert.create({
                                message: 'L\'événement sera supprimé definitivement',
                                buttons: [
                                    {
                                        text: 'Annuler',
                                        role: 'cancel',
                                        cssClass: 'secondary',
                                        handler: function () {
                                        }
                                    }, {
                                        text: 'Valider',
                                        handler: function () {
                                            var loadingPopup = _this.loader.create({});
                                            loadingPopup.present();
                                            _this.eventService.getArticleId(_this.currentEventSupprimer.id).then(function (data) {
                                                _this.serviceArticle.deleteArticle(data, "current").then(function (data) {
                                                }, function (err) {
                                                    console.log(err);
                                                });
                                            }, function (err) {
                                                console.log(err);
                                            });
                                            _this.eventService.delete(_this.currentEventSupprimer.id, "current").then(function (data) {
                                                if (data) {
                                                    _this.appEvents.publish('agenda:refresh');
                                                    _this.appEvents.publish('news:refresh');
                                                    loadingPopup.dismiss();
                                                    _this.navCtrl.setRoot(__WEBPACK_IMPORTED_MODULE_8__pages_news_news__["a" /* NewsPage */]);
                                                }
                                            }, function (err) {
                                                console.log(err);
                                                loadingPopup.dismiss();
                                            });
                                        }
                                    }
                                ]
                            })];
                    case 1:
                        alert = _a.sent();
                        return [4 /*yield*/, alert.present()];
                    case 2:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    EventDetailsPage.prototype.other = function (item) {
        return __awaiter(this, void 0, void 0, function () {
            var actionSheet;
            var _this = this;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.actionSheetCtrl.create({
                            buttons: [{
                                    text: 'Supprimer',
                                    icon: 'trash',
                                    handler: function () {
                                        _this.supprimer(item);
                                    }
                                }, {
                                    text: 'Partager',
                                    icon: 'share',
                                    handler: function () {
                                        _this.ShareArticle(item);
                                    }
                                }, {
                                    text: 'Modifier',
                                    icon: 'create',
                                    handler: function () {
                                        _this.edite(item);
                                    }
                                }, {
                                    text: 'Annuler',
                                    icon: 'close',
                                    role: 'cancel',
                                    handler: function () {
                                    }
                                }]
                        })];
                    case 1:
                        actionSheet = _a.sent();
                        return [4 /*yield*/, actionSheet.present()];
                    case 2:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    EventDetailsPage.prototype.ionViewWillEnter = function () {
        this.appGlobals.showFooter = true;
        this.appGlobals.showHeader = false;
        this.commentsItems = [];
        this.page = 0;
        this.appEvents.publish('updateFooter');
        //this.getDetailsEvents();
        if (this.navParams.get('showParticipant')) {
            this.showHideParticipantsList();
        }
        if (this.navParams.get('showVolonteers')) {
            this.showHideVolonteersList();
        }
    };
    EventDetailsPage.prototype.ShareArticle = function (item) {
        var options = {
            message: item.title + " : " + item.description,
            subject: "NOUS Ensemble",
            image: item.imageURL,
            url: item.imageURL
        };
        if (this.platform.is('cordova') || this.platform.is('core')) {
            this.socialsharing.shareWithOptions(options).then(function (data) {
            }).catch(function (error) {
                console.log("Error from sharing" + error);
            });
        }
    };
    EventDetailsPage.prototype.countComment = function () {
        this.commentNumber = this.commentNumber + this.eventComments.length;
        for (var _i = 0, _a = this.eventComments; _i < _a.length; _i++) {
            var com = _a[_i];
            this.restNumbreReplie = this.restNumbreReplie + com.replies.length;
        }
        this.restNumbreComment = this.numberComments - (this.commentNumber + this.restNumbreReplie);
    };
    EventDetailsPage.prototype.moreCountComment = function (comments) {
        this.commentNumber = this.commentNumber + comments.length;
        for (var _i = 0, comments_1 = comments; _i < comments_1.length; _i++) {
            var com = comments_1[_i];
            this.restNumbreReplie = this.restNumbreReplie + com.replies.length;
        }
        this.restNumbreComment = this.numberComments - (this.commentNumber + this.restNumbreReplie);
    };
    EventDetailsPage.prototype.goBack = function () {
        if (this.showPush) {
            this.navCtrl.setRoot(__WEBPACK_IMPORTED_MODULE_8__pages_news_news__["a" /* NewsPage */]);
        }
        else {
            this.navCtrl.pop();
        }
    };
    EventDetailsPage.prototype.ionViewWillLeave = function () {
        this.appGlobals.showHeader = true;
        this.appGlobals.showFooter = true;
        this.appGlobals.onEventDetails = false;
    };
    EventDetailsPage.prototype.getDetailsEvents = function () {
        var _this = this;
        var loadingPopup = this.loader.create({});
        loadingPopup.present();
        this.eventService.getDetailsEvent(this.id).then(function (data) {
            _this.currentEvent = data;
            if (_this.withComments) {
                _this.showComments = true;
                _this.getEventComments(loadingPopup);
            }
            else {
                loadingPopup.dismiss();
            }
            _this.platform.ready().then(function () {
                var label = 'detail-event-for__' + _this.currentEvent.id;
                _this.appEvents.publish("googleAnalytics", label);
            });
        }, function (err) {
            loadingPopup.dismiss();
            _this.appEvents.publish('http:errors', err);
        });
    };
    EventDetailsPage.prototype.showNeedVolunteerPopup = function (event) {
        var _this = this;
        if (event.needVolunteer) {
            var benevoleAlert = this.myAlert.create({
                title: '',
                subTitle: 'Voulez-vous être bénévole à cet évènement?',
                buttons: [
                    {
                        text: 'Non',
                        role: 'cancel',
                        handler: function () {
                        }
                    },
                    {
                        text: 'Oui',
                        handler: function () {
                            var label = 'volunteer-' + event.id;
                            _this.appEvents.publish("googleAnalytics", label);
                            localStorage.setItem("currentEvent", event.id);
                            var modalVolunteers = _this.myModal.create('ParticpatelaststepPage', { "id": event.id }, { cssClass: 'style-modal' });
                            modalVolunteers.present();
                        }
                    }
                ]
            });
            benevoleAlert.present();
        }
    };
    EventDetailsPage.prototype.getEventComments = function (loadingPopup) {
        var _this = this;
        this.commentService.getCommentsEvent(this.currentEvent.id, this.page).then(function (data) {
            _this.eventComments = data;
            for (var _i = 0, _a = _this.eventComments; _i < _a.length; _i++) {
                var com = _a[_i];
                _this.commentsItems.push(com);
            }
            loadingPopup.dismiss();
            setTimeout(function () {
                _this.content.scrollToBottom();
                _this.countComment();
            });
        }, function (err) {
            loadingPopup.dismiss();
            _this.appEvents.publish('http:errors', err);
        });
    };
    EventDetailsPage.prototype.showHideComments = function () {
        this.commentsItems = [];
        this.page = 0;
        if (this.showComments == false) {
            var loadingPopup = this.loader.create({});
            loadingPopup.present();
            this.getEventComments(loadingPopup);
            this.showParticipants = false;
            this.showComments = true;
        }
        else {
            this.showComments = false;
        }
    };
    EventDetailsPage.prototype.showHideParticipantsList = function () {
        if (this.showParticipants == false) {
            this.getParticipants(this.id);
            this.showComments = false;
            this.showVolonteers = false;
            this.showParticipants = true;
        }
        else {
            this.showParticipants = false;
        }
    };
    EventDetailsPage.prototype.showHideVolonteersList = function () {
        if (this.showVolonteers == false) {
            this.getVolonteers(this.id);
            this.showComments = false;
            this.showParticipants = false;
            this.showVolonteers = true;
        }
        else {
            this.showVolonteers = false;
        }
    };
    EventDetailsPage.prototype.addComment = function () {
        var _this = this;
        if ((this.comment.content == '') || (this.comment.content == null) || (this.comment.content.length == 0) || (!this.comment.content.replace(/\s/g, '').length)) {
            var errorAlert = this.myAlert.create({
                title: "Erreur",
                subTitle: "Vous devez entrer votre commentaire",
                buttons: [
                    {
                        text: 'Fermer',
                        role: 'cancel',
                        handler: function () {
                        }
                    }
                ]
            });
            errorAlert.present();
        }
        else {
            var loadingPopup_1 = this.loader.create({});
            loadingPopup_1.present();
            this.commentService.postEventComment(this.currentEvent.id, this.comment).then(function (data) {
                _this.commentsItems = [];
                _this.page = 0;
                _this.comment.content = null;
                _this.comment.photo = null;
                _this.eventComments = data;
                for (var _i = 0, _a = _this.eventComments; _i < _a.length; _i++) {
                    var com = _a[_i];
                    _this.commentsItems.push(com);
                }
                _this.currentEvent.nbComments++;
                _this.numberComments++;
                loadingPopup_1.dismiss();
                setTimeout(function () {
                    _this.content.scrollToBottom();
                });
            }, function (err) {
                loadingPopup_1.dismiss();
                _this.appEvents.publish('http:errors', err);
            });
        }
    };
    EventDetailsPage.prototype.deleteConfirmation = function (comment) {
        var _this = this;
        var alert = this.myAlert.create({
            title: 'Supprimer le commentaire',
            subTitle: 'Voulez-vous vraiment supprimer ce commentaire',
            buttons: [
                {
                    text: 'Annuler',
                    role: 'cancel',
                    handler: function () {
                    }
                },
                {
                    text: 'OK',
                    handler: function () {
                        _this.deleteComment(comment);
                    }
                }
            ]
        });
        alert.present();
    };
    EventDetailsPage.prototype.deleteComment = function (comment) {
        var _this = this;
        var loadingPopup = this.loader.create({});
        loadingPopup.present();
        this.commentService.deleteEventComment(comment.id).then(function (data) {
            var label = 'commentDeleted-' + comment.id;
            _this.appEvents.publish("googleAnalytics", label);
            _this.commentsItems = [];
            _this.page = 0;
            _this.comment.content = null;
            _this.eventComments = data;
            for (var _i = 0, _a = _this.eventComments; _i < _a.length; _i++) {
                var com = _a[_i];
                _this.commentsItems.push(com);
            }
            _this.currentEvent.nbComments--;
            _this.numberComments--;
            loadingPopup.dismiss();
            setTimeout(function () {
                _this.content.scrollToBottom();
            });
            var toast = _this.toast.create({
                message: 'Commentaire supprimé avec succès.',
                duration: 3000,
                position: 'top'
            });
            toast.present();
        }, function (err) {
            loadingPopup.dismiss();
            _this.appEvents.publish('http:errors', err);
        });
    };
    EventDetailsPage.prototype.deleteReplyConfirmation = function (comment) {
        var _this = this;
        var alert = this.myAlert.create({
            title: 'Supprimer le commentaire',
            subTitle: 'Voulez-vous vraiment supprimer ce commentaire',
            buttons: [
                {
                    text: 'Annuler',
                    role: 'cancel',
                    handler: function () {
                    }
                },
                {
                    text: 'OK',
                    handler: function () {
                        _this.deleteReplyComment(comment);
                    }
                }
            ]
        });
        alert.present();
    };
    EventDetailsPage.prototype.deleteReplyComment = function (comment) {
        var _this = this;
        var loadingPopup = this.loader.create({});
        loadingPopup.present();
        this.commentService.deleteEventCommentReply(comment.id).then(function (data) {
            _this.commentsItems = [];
            _this.page = 0;
            _this.comment.content = null;
            _this.eventComments = data;
            for (var _i = 0, _a = _this.eventComments; _i < _a.length; _i++) {
                var com = _a[_i];
                _this.commentsItems.push(com);
            }
            _this.currentEvent.nbComments--;
            _this.numberComments--;
            loadingPopup.dismiss();
            setTimeout(function () {
                _this.content.scrollToBottom();
            });
            var toast = _this.toast.create({
                message: 'Commentaire supprimé avec succès.',
                duration: 3000,
                position: 'top'
            });
            toast.present();
        }, function (err) {
            loadingPopup.dismiss();
            _this.appEvents.publish('http:errors', err);
        });
    };
    EventDetailsPage.prototype.showReplyForm = function (comment) {
        this.showReply = !this.showReply;
        this.reply.comment = comment.id;
    };
    EventDetailsPage.prototype.addReplyComment = function () {
        var _this = this;
        if ((this.reply.content == '') || (this.reply.content == null) || (this.reply.content.length == 0) || (!this.reply.content.replace(/\s/g, '').length)) {
            var errorAlert = this.myAlert.create({
                title: "Erreur",
                subTitle: "Vous devez entrer votre commentaire",
                buttons: [
                    {
                        text: 'Fermer',
                        role: 'cancel',
                        handler: function () {
                        }
                    }
                ]
            });
            errorAlert.present();
        }
        else {
            var loadingPopup_2 = this.loader.create({});
            loadingPopup_2.present();
            this.commentService.postEventCommentReply(this.reply).then(function (data) {
                _this.commentsItems = [];
                _this.page = 0;
                _this.reply.content = null;
                _this.reply.comment = null;
                _this.reply.photo = null;
                _this.showReply = false;
                _this.eventComments = data;
                for (var _i = 0, _a = _this.eventComments; _i < _a.length; _i++) {
                    var com = _a[_i];
                    _this.commentsItems.push(com);
                }
                _this.currentEvent.nbComments++;
                _this.numberComments++;
                loadingPopup_2.dismiss();
                setTimeout(function () {
                    _this.content.scrollToBottom();
                });
            }, function (err) {
                loadingPopup_2.dismiss();
                _this.appEvents.publish('http:errors', err);
            });
        }
    };
    EventDetailsPage.prototype.getParticipants = function (id) {
        var _this = this;
        var loadingPopup = this.loader.create({});
        loadingPopup.present();
        this.eventService.getEventParticipants(id).then(function (data) {
            _this.participants = data.slice().reverse();
            ;
            if (_this.participants.length < 0) {
                _this.showParticipants = false;
            }
            loadingPopup.dismiss();
            setTimeout(function () {
                _this.content.scrollToBottom();
            });
        }, function (err) {
            loadingPopup.dismiss();
            _this.appEvents.publish('http:errors', err);
        });
    };
    EventDetailsPage.prototype.getVolonteers = function (id) {
        var _this = this;
        var loadingPopup = this.loader.create({});
        loadingPopup.present();
        this.eventService.getEventBenevole(id).then(function (data) {
            _this.volonteers = data;
            if (_this.volonteers.length < 0) {
                _this.showVolonteers = false;
            }
            loadingPopup.dismiss();
            setTimeout(function () {
                _this.content.scrollToBottom();
            });
        }, function (err) {
            loadingPopup.dismiss();
            _this.appEvents.publish('http:errors', err);
        });
    };
    EventDetailsPage.prototype.showMoreComments = function () {
        var _this = this;
        this.page++;
        var loadingPopup = this.loader.create({});
        loadingPopup.present();
        this.commentService.getCommentsEvent(this.currentEvent.id, this.page).then(function (data) {
            _this.eventComments = data;
            _this.moreCountComment(_this.eventComments);
            for (var _i = 0, _a = _this.eventComments; _i < _a.length; _i++) {
                var com = _a[_i];
                _this.commentsItems.push(com);
            }
            loadingPopup.dismiss();
        }, function (err) {
            loadingPopup.dismiss();
            _this.appEvents.publish('http:errors', err);
        });
    };
    EventDetailsPage.prototype.presentActionSheet = function (type) {
        var _this = this;
        var actionSheet = this.actionSheetCtrl.create({
            title: 'Sélectionner la source d image',
            buttons: [
                {
                    text: 'Choisir une photo de la bibliothèque',
                    handler: function () {
                        _this.loadImageFromLibrary(type);
                    }
                },
                {
                    text: 'Prendre une photo',
                    handler: function () {
                        _this.takePicture(type);
                    }
                },
                {
                    text: 'Annuler',
                    role: 'cancel'
                }
            ]
        });
        actionSheet.present();
    };
    EventDetailsPage.prototype.takePicture = function (type) {
        var _this = this;
        this.camera.getPicture({
            destinationType: this.camera.DestinationType.DATA_URL,
            quality: 100,
            targetWidth: 600,
            targetHeight: 600,
            allowEdit: true,
            correctOrientation: true,
            encodingType: this.camera.EncodingType.JPEG
        }).then(function (imageData) {
            if (type == 'comment') {
                _this.comment.photo = "data:image/jpeg;base64," + imageData;
            }
            else {
                _this.reply.photo = "data:image/jpeg;base64," + imageData;
            }
        });
    };
    EventDetailsPage.prototype.loadImageFromLibrary = function (type) {
        var _this = this;
        this.camera.getPicture({
            destinationType: this.camera.DestinationType.DATA_URL,
            sourceType: this.camera.PictureSourceType.PHOTOLIBRARY,
            quality: 100,
            targetWidth: 600,
            targetHeight: 600,
            allowEdit: true,
            correctOrientation: true,
            encodingType: this.camera.EncodingType.JPEG
        }).then(function (imageData) {
            if (type == 'comment') {
                _this.comment.photo = "data:image/jpeg;base64," + imageData;
            }
            else {
                _this.reply.photo = "data:image/jpeg;base64," + imageData;
            }
        });
    };
    EventDetailsPage.prototype.deletePhoto = function (type) {
        if (type == 'comment') {
            this.comment.photo = null;
        }
        else {
            this.reply.photo = null;
        }
    };
    EventDetailsPage.prototype.showHideNeedCarpooling = function (event) {
        var _this = this;
        if (event['alreadyPool'] == 0) {
            this.appGlobals.currentEvent = event;
            this.appGlobals.checkedCarpool = null;
            this.appGlobals.showNeedCarpooling = !this.appGlobals.showNeedCarpooling;
        }
        else {
            var alert_1 = this.myAlert.create({
                title: 'Demande existante',
                subTitle: 'Vous avez déjà fait une demande de covoiturage pour cet évènement.  Voulez-vous la supprimer ?',
                buttons: [{
                        text: 'Non',
                        role: 'cancel',
                        handler: function () {
                        }
                    },
                    {
                        text: 'Oui',
                        handler: function () {
                            _this.deleteCarpoolDemand(event['id']);
                        }
                    }]
            });
            alert_1.present();
        }
    };
    EventDetailsPage.prototype.deleteCarpoolDemand = function (id) {
        var _this = this;
        var loadingPopup = this.loader.create({});
        loadingPopup.present();
        var result;
        this.eventService.deleteEventCarpoolDemand(id).then(function (data) {
            result = data;
            if (result.success) {
                _this.currentEvent.alreadyPool = 0;
                _this.currentEvent.nbCarpoolUsers--;
                _this.appEvents.publish('agenda:refresh');
            }
            loadingPopup.dismiss();
        }, function (err) {
            loadingPopup.dismiss();
            _this.appEvents.publish('http:errors', err);
        });
    };
    EventDetailsPage.prototype.creatorExists = function (id) {
        var test = false;
        this.adminAssociations.forEach(function (adminAssociation) {
            if (adminAssociation.id == id) {
                test = true;
                return true;
            }
        });
        return test;
    };
    EventDetailsPage.prototype.dupliquer = function (item) {
        var myModal2 = this.myModal.create('DupliquerPage', { "event": item, "accountType": "accountType" }, { cssClass: 'style-modal' });
        myModal2.onDidDismiss(function (data) {
        });
        myModal2.present();
    };
    EventDetailsPage.prototype.showHideProposeCarpooling = function (event) {
        if (event['alreadyAddPool'] == 0) {
            if (!this.appGlobals.showproposeCarpooling) {
                this.appGlobals.showproposeCarpooling = true;
                this.appGlobals.currentEvent = event;
            }
            else {
                this.appGlobals.showproposeCarpooling = false;
            }
        }
        else {
            var alert_2 = this.myAlert.create({
                title: 'Demande existante',
                subTitle: 'Vous avez déjà proposé du covoiturage pour cet évènement.',
                buttons: ['fermer']
            });
            alert_2.present();
        }
    };
    EventDetailsPage.prototype.showAgendaBenevole = function (event) {
        this.appGlobals.currentEventId = event.id;
        if (this.currentEvent.isVolunteer) {
            var myModal2 = this.myModal.create('PopupPage', { "message": "<p>Vous êtes déjà  bénévole  à cet événement ! </p>" }, { cssClass: 'message-modal' });
            myModal2.onDidDismiss(function () {
            });
            myModal2.present();
        }
        else {
            if (!this.appGlobals.showBenevoleAgenda) {
                this.appGlobals.showBenevoleAgenda = true;
            }
            else {
                this.appGlobals.showBenevoleAgenda = false;
            }
            this.currentEvent.isVolunteer = true;
            this.currentEvent.nbVolunteers++;
        }
    };
    EventDetailsPage.prototype.cancelParticipation = function (event) {
        var _this = this;
        var result;
        this.eventService.cancelTakePart(event.id).then(function (data) {
            result = data;
            var start = __WEBPACK_IMPORTED_MODULE_5_moment__(event.startAt).toDate();
            var end = __WEBPACK_IMPORTED_MODULE_5_moment__(event.endAt).toDate();
            _this.calendarPlugin.deleteEvent(event.title, event.place, '', start, end).then(function (msg) {
            }, function (err) {
            });
            if (result.success) {
                _this.currentEvent.isParticipated = false;
                _this.currentEvent.nbParticipants--;
                if (_this.currentEvent.nbParticipants == 0) {
                    _this.showParticipants = false;
                    _this.participants = [];
                }
                var myModal2 = _this.myModal.create('PopupPage', { "message": "<p>Votre annulation a été bien enregistrée ! </p>" }, { cssClass: 'message-modal' });
                myModal2.onDidDismiss(function () {
                });
                myModal2.present();
            }
        }, function (err) {
            _this.appEvents.publish('http:errors', err);
        });
    };
    EventDetailsPage.prototype.showHidePutAgenda = function (event) {
        var _this = this;
        this.appGlobals.showPutAgenda = !this.appGlobals.showPutAgenda;
        this.appGlobals.currentEvent = event;
        this.eventService.takePart(event.id).then(function (result) {
            if (result.success) {
                _this.currentEvent.isParticipated = true;
                _this.currentEvent.nbParticipants++;
                _this.appEvents.publish('agenda:refresh');
            }
        }, function (err) {
            _this.appEvents.publish('http:errors', err);
        });
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["ViewChild"])(__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* Content */]),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* Content */])
    ], EventDetailsPage.prototype, "content", void 0);
    EventDetailsPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-event-details',template:/*ion-inline-start:"D:\celaneo\mobile\new-mobile\test\src\pages\event-details\event-details.html"*/'<!--\n\n  Generated template for the EventDetailsPage page.\n\n\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n\n  Ionic pages and navigation.\n\n-->\n\n<ion-header class="mobile-header MMS" *ngIf="appGlobals.token">\n\n    <ion-grid>\n\n        <ion-row> \n\n            <ion-col col-2 text-left>\n\n                <div class="item" (click)="goBack()">\n\n                    <ion-icon name="ios-arrow-back"></ion-icon>\n\n                </div>\n\n            </ion-col>\n\n            <ion-col col-8 text-center class="page-title">\n\n            </ion-col>\n\n            <ion-col col-2>\n\n            </ion-col>\n\n        </ion-row>\n\n    </ion-grid>\n\n</ion-header>\n\n<ion-content>\n\n    <div class="div-left">\n\n        <div text-center class="back"><img src="assets/imgs/icons/1.png" (click)="goBack()"></div>\n\n    </div>\n\n    <!--bloc central -->\n\n    <div class="div-center">\n\n        <ion-card  style="margin-top: 10%;">\n\n            <ion-grid class="custom-grid" *ngIf="currentEvent">\n\n                <ion-row>\n\n\n\n                    <ion-col class="bordred">\n\n\n\n                        <div text-left class="csm1">\n\n\n\n                            <span class="event-date"> {{currentEvent.startAt| amLocale:\'fr\' | amDateFormat:\' Do MMMM\'}}\n\n                            </span> <span>\n\n                                <h6> (Jusqu\'au {{currentEvent.endAt| amLocale:\'fr\' | amDateFormat:\' Do MMMM\'}} ) </h6>\n\n                            </span>\n\n\n\n                            <div>\n\n\n\n                                <span class="event-day" float-start>\n\n                                    {{currentEvent.startAt| amLocale:\'fr\' | amDateFormat:\'dddd\'}}\n\n                                </span>\n\n\n\n                                <span class="event-hour" float-end>\n\n                                    {{currentEvent.startAt| amLocale:\'fr\' | amDateFormat:\'HH\'}}h{{currentEvent.startAt|\n\n                                    amLocale:\'fr\' | amDateFormat:\'mm\'}}\n\n                                </span>\n\n\n\n                            </div>\n\n                            <div class="clear"></div>\n\n\n\n                        </div>\n\n\n\n\n\n                    </ion-col>\n\n\n\n                </ion-row>\n\n                <ion-row>\n\n                    <ion-col class="csm2">\n\n                        <span class="event-name"> {{currentEvent.title}} </span>\n\n                        <span class="excerpt" *ngIf="currentEvent.type == \'association\'">\n\n                            {{currentEvent.associationName}}\n\n                        </span>\n\n                        <span class="excerpt" *ngIf="currentEvent.type == \'merchant\'">\n\n                            {{currentEvent.merchantName}}\n\n                        </span>\n\n                        <span class="excerpt">\n\n                            {{currentEvent.creatorName}}\n\n                        </span>\n\n                        <span class="event-location">à\n\n                            {{currentEvent.city}}</span>\n\n\n\n                        <h6 class="event-reservation" *ngIf="currentEvent.reservationName != null">Réservation obligatoire</h6>\n\n\n\n                        <ion-col col-12>\n\n                            <h6 [innerHtml]="currentEvent.description"></h6>\n\n                        </ion-col>\n\n                        <p>Adresse: <i>{{ currentEvent.place }}</i></p>\n\n                        <ion-col col-12 *ngIf="(currentEvent.imageURL || currentEvent.images || currentEvent.videoFile)">\n\n                            <div>\n\n                                <div *ngIf="(currentEvent.imageURL && !currentEvent.images && !currentEvent.videoFile) || (!currentEvent.imageURL && !currentEvent.images && currentEvent.videoFile) || (currentEvent.images && !currentEvent.imageURL && currentEvent.images.length == 1); else elseBlock"\n\n                                    class="image home-card-slides">\n\n                                    <div *ngIf="currentEvent.imageURL">\n\n                                        <img data-src="{{currentEvent.imageURL}}" imageViewer>\n\n                                    </div>\n\n                                    <div *ngFor="let img of currentEvent.images">\n\n                                        <img data-src="{{img.url}}" imageViewer>\n\n                                    </div>\n\n                                    <video style="width: 100%; height: 100%" *ngIf="currentEvent.videoFile != null" controls poster="assets/img/video_default.png">\n\n                                        <source [src]="currentEvent.videoFile" type="video/mp4">\n\n                                    </video>\n\n                                </div>\n\n\n\n                                <ng-template #elseBlock>\n\n                                    <ion-slides class="image home-card-slides" loop="true" pager>\n\n                                        <ion-slide *ngIf="currentEvent.videoFile != null">\n\n                                            <video style="width: 100%; height: 100%" controls poster="assets/img/video_default.png">\n\n                                                <source [src]="currentEvent.videoFile" type="video/mp4">\n\n                                            </video>\n\n                                        </ion-slide>\n\n                                        <ion-slide *ngFor="let img of currentEvent.images">\n\n                                            <img data-src="{{img.url}}" imageViewer>\n\n                                        </ion-slide>\n\n                                        <ion-slide *ngIf="currentEvent.imageURL">\n\n                                            <img data-src="{{currentEvent.imageURL}}" imageViewer>\n\n                                        </ion-slide>\n\n                                    </ion-slides>\n\n                                </ng-template>\n\n                            </div>\n\n                        </ion-col>\n\n\n\n                        <ion-col col-12 text-center>\n\n                            <div text-center>\n\n                                <span text-center style="display: -webkit-inline-box;">\n\n                                    <p class="numberParagraph">{{currentEvent.needCarpool.length}} covoiturages </p> <img alt="NOUS-Ensemble" class="dot-icon" src="assets/imgs/icons/dot.png">\n\n                                    <p class="numberParagraph" (click)="showHideParticipantsList()"> {{currentEvent.nbParticipants}} participants </p><img alt="NOUS-Ensemble" class="dot-icon" src="assets/imgs/icons/dot.png">\n\n                                    <p class="numberParagraph" (click)="showHideVolonteersList()"> {{currentEvent.nbCarpoolUsers}} transportés</p>\n\n                                </span>\n\n                            </div>\n\n                        </ion-col>\n\n                       \n\n\n\n                        <ion-row text-center style="margin-left: 6%;">\n\n                            <ion-col col-2 (click)=\'showHideProposeCarpooling(currentEvent)\'  style="margin-top: 2%;">\n\n                                <img alt="NOUS-Ensemble" class="agenda-icons icons-car" src="assets/imgs/icons/car.png">\n\n                            </ion-col>\n\n                            <ion-col col-2 (click)=\'showHideNeedCarpooling(currentEvent)\'>\n\n                                <img alt="NOUS-Ensemble" class="agenda-icons" src="assets/imgs/icons/covoit.png">\n\n                            </ion-col>\n\n\n\n                            <ion-col col-3 (click)=\'showAgendaBenevole(currentEvent)\'>\n\n                                <img alt="NOUS-Ensemble" class="agenda-icons" src="assets/imgs/icons/benevole.png">\n\n                            </ion-col>\n\n                           \n\n\n\n                            <ion-col col-2>\n\n                                <img alt="NOUS-Ensemble" class="agenda-icons icons-stars" *ngIf="currentEvent.isParticipated" (click)="cancelParticipation(currentEvent)"\n\n                                     src="assets/imgs/icons/star-full.png">\n\n                                <img alt="NOUS-Ensemble" class="agenda-icons icons-stars" *ngIf="!currentEvent.isParticipated" (click)="showHidePutAgenda(currentEvent)"\n\n                                     src="assets/imgs/icons/star-empty.png">\n\n                            </ion-col>\n\n\n\n                                <ion-col col-2 *ngIf="isCreatorEvent" (click)="dupliquer(currentEvent)">\n\n                                        <ion-icon name="copy"></ion-icon>\n\n                                </ion-col>\n\n\n\n                        </ion-row>\n\n\n\n                        <!--<ion-col col-12 *ngIf="currentEvent.participantsNbre">\n\n                            <span class="participantsNbre">Nombre de participants : {{currentEvent.participantsNbre}}</span>\n\n                        </ion-col>\n\n                        <div class="buttons-container" text-center>\n\n                            <button ion-button icon-left clear small (click)="showHideComments()">\n\n                                <div class="comments-nbr">{{currentEvent.nbComments}}</div>\n\n                                <img src="assets/imgs/icons/comments.png" class="icon-img-action">\n\n                            </button>\n\n                            <button ion-button icon-right color="primary" clear small (click)="like(currentEvent);" *ngIf="!currentEvent.isLiked">\n\n                                <span class="je-suis" color="primary"> Participer</span>\n\n                            </button>\n\n                            <button ion-button icon-right color="primary" clear small (click)="unlike(currentEvent);" *ngIf="currentEvent.isLiked">\n\n                                <span class="je-suis" color="primary"> Participer</span>\n\n\n\n\n\n                            </button>\n\n\n\n                            <button ion-button icon-right clear small (click)="showHideParticipantsList()">\n\n                                <div class="je-suis">{{currentEvent.nbParticipants}} Participant<span *ngIf="currentEvent.nbParticipants > 1">s</span></div>\n\n                            </button>\n\n\n\n                        </div>-->\n\n                    </ion-col>\n\n                </ion-row>\n\n            </ion-grid>\n\n        </ion-card>\n\n        <ion-grid class="custom-grid" *ngIf="currentEvent" no-padding>\n\n            <ion-row>\n\n                <ion-col class="csm2" no-padding>\n\n                    <div class="custom-div" *ngIf="showComments">\n\n                        <div *ngFor="let comment of commentsItems">\n\n                            <div class="comment">\n\n                                <span class="comment-user" *ngIf="comment.type == \'citizen\'" text-capitalize>{{comment.firstname}}\n\n                                    {{comment.lastname}}</span>\n\n                                <span class="comment-user" *ngIf="comment.type == \'association\'" text-capitalize>{{comment.associationName}}</span>\n\n                                <span class="comment-user" *ngIf="comment.type == \'merchant\'" text-capitalize>{{comment.merchantName}}</span>\n\n                                <span class="comment-date">{{comment.updateAt| amLocale:\'fr\' | amTimeAgo}}</span>\n\n                                <span class="text-comment" [innerHtml]="comment.content|nl2br"></span>\n\n                                <div class="div-image">\n\n                                    <div *ngIf="comment.commentImg" class="image home-card-slides">\n\n                                        <div>\n\n                                            <img data-src="{{comment.commentImg}}" imageViewer>\n\n                                        </div>\n\n                                    </div>\n\n                                </div>\n\n                                <div col-12 text-right>\n\n                                    <span float-left class="delete" (click)="showReplyForm(comment)">Répondre</span>\n\n                                    <span float-end class="delete" (click)="deleteConfirmation(comment)" *ngIf="comment.userId == currentUser.id">Supprimer</span>\n\n                                </div>\n\n                            </div>\n\n\n\n                            <div class="answer" *ngFor="let replie of comment.replies">\n\n                                <span class="comment-user" *ngIf="replie.type == \'citizen\'" text-capitalize>{{replie.firstname}}\n\n                                    {{replie.lastname}}</span>\n\n                                <span class="comment-user" *ngIf="replie.type == \'association\'" text-capitalize>{{replie.associationName}}</span>\n\n                                <span class="comment-user" *ngIf="replie.type == \'merchant\'" text-capitalize>{{replie.merchantName}}</span>\n\n                                <span class="comment-date"> {{replie.updateAt| amLocale:\'fr\' | amTimeAgo}}</span>\n\n                                <span class="text-comment" [innerHtml]="replie.content|nl2br"></span>\n\n                                <div class="div-image">\n\n                                    <div *ngIf="replie.commentImg" class="image home-card-slides">\n\n                                        <div>\n\n                                            <img data-src="{{replie.commentImg}}" imageViewer>\n\n                                        </div>\n\n                                    </div>\n\n                                </div>\n\n                                <div col-12 text-right>\n\n                                    <span float-end class="delete" (click)="deleteReplyConfirmation(replie)" *ngIf="replie.userId == currentUser.id">Supprimer</span>\n\n                                </div>\n\n                            </div>\n\n                        </div>\n\n                        <div class="load-comment" *ngIf="currentEvent.nbComments > 0">\n\n                            <a (click)="showMoreComments()">Tout Afficher ({{restNumbreComment}}) </a>\n\n                        </div>\n\n\n\n                        <p class="space-comment" *ngIf="!showReply">\n\n                            <span class="photo-bloc" *ngIf="comment.photo">\n\n                                <img class="photo-comment" data-src="{{comment.photo}}">\n\n                                <ion-icon name="trash" class="icon-delete delete-icon" (click)="deletePhoto(\'comment\');"></ion-icon>\n\n                            </span>\n\n                            <ion-textarea class="comment-zone-footer" [(ngModel)]="comment.content" placeholder="Commenter"\n\n                                text-left>\n\n                            </ion-textarea>\n\n                            <img class="next-icon" src="assets/imgs/icons/next.png" (click)="addComment()">\n\n                            <img class="next-icon" src="assets/imgs/icons/icon-photo.png" (click)="presentActionSheet(\'comment\')">\n\n                        </p>\n\n                        <p class="space-comment" *ngIf="showReply">\n\n                            <span class="photo-bloc" *ngIf="reply.photo">\n\n                                <img class="photo-comment" data-src="{{reply.photo}}">\n\n                                <ion-icon name="trash" class="icon-delete delete-icon" (click)="deletePhoto(\'reply\');"></ion-icon>\n\n                            </span>\n\n                            <ion-icon float-start name="md-close" class="icon-close" (click)="showReplyForm(comment)"></ion-icon>\n\n                            <ion-textarea class="comment-zone-footer" [(ngModel)]="reply.content" placeholder="Répondre"\n\n                                text-left>\n\n                            </ion-textarea>\n\n                            <img class="next-icon" src="assets/imgs/icons/icon-photo.png" (click)="presentActionSheet(\'reply\')">\n\n                            <img class="next-icon" src="assets/imgs/icons/next.png" (click)="addReplyComment()">\n\n\n\n                        </p>\n\n                        <div class="clear"></div>\n\n                    </div>\n\n                    <div class="custom-div" *ngIf="showParticipants && participants.length > 0">\n\n                        <ion-list>\n\n                            <ion-item *ngFor="let participant of participants">\n\n                                <ion-avatar item-start>\n\n                                    <img *ngIf="participant.imageURL" src="assets/imgs/icons/user_default.png">\n\n                                </ion-avatar>\n\n                                <h2 class="fullname firstname">{{participant.firstname | capitalize}}\n\n                                    {{participant.lastname | capitalize}}</h2>\n\n                            </ion-item>\n\n                        </ion-list>\n\n                    </div>\n\n\n\n                    <div class="custom-div" *ngIf="showVolonteers && volonteers.length > 0">\n\n                        <ion-list>\n\n                            <ion-item *ngFor="let participant of volonteers">\n\n                                <ion-avatar item-start>\n\n                                    <img *ngIf="participant.imageURL" src="assets/imgs/icons/user_default.png">\n\n                                </ion-avatar>\n\n                                <h2 class="fullname firstname">{{participant.firstname | capitalize}}\n\n                                    {{participant.lastname | capitalize}}</h2>\n\n                            </ion-item>\n\n                        </ion-list>\n\n                    </div>\n\n                </ion-col>\n\n            </ion-row>\n\n        </ion-grid>\n\n\n\n        <div class="clear"></div>\n\n\n\n\n\n    </div>\n\n    <!-- fin bloc central -->\n\n    <div class="div-right" text-center>\n\n    </div>\n\n</ion-content>\n\n'/*ion-inline-end:"D:\celaneo\mobile\new-mobile\test\src\pages\event-details\event-details.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_2__providers_globals_globals__["a" /* GlobalsProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_4__ionic_native_google_analytics__["a" /* GoogleAnalytics */],
            __WEBPACK_IMPORTED_MODULE_6__ionic_native_calendar__["a" /* Calendar */],
            __WEBPACK_IMPORTED_MODULE_3__providers_eventsrest_eventsrest__["a" /* EventsrestProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_3__providers_eventsrest_eventsrest__["a" /* EventsrestProvider */],
            __WEBPACK_IMPORTED_MODULE_7__providers_comment_comment__["a" /* CommentProvider */],
            __WEBPACK_IMPORTED_MODULE_9__ionic_native_camera__["a" /* Camera */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["a" /* ActionSheetController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["z" /* ToastController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["x" /* Platform */],
            __WEBPACK_IMPORTED_MODULE_12__providers_article_article__["a" /* ArticleProvider */],
            __WEBPACK_IMPORTED_MODULE_10__ionic_native_social_sharing__["a" /* SocialSharing */],
            __WEBPACK_IMPORTED_MODULE_11__providers_cache_cache__["a" /* CacheProvider */]])
    ], EventDetailsPage);
    return EventDetailsPage;
}());

//# sourceMappingURL=event-details.js.map

/***/ }),

/***/ 556:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return SearchResultPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_globals_globals__ = __webpack_require__(8);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_user_user__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__merchant_sheet_merchant_sheet__ = __webpack_require__(128);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__association_sheet_association_sheet__ = __webpack_require__(78);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__detail_article_detail_article__ = __webpack_require__(56);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__event_details_event_details__ = __webpack_require__(55);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__providers_eventsrest_eventsrest__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__providers_comment_comment__ = __webpack_require__(22);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__good_plan_details_good_plan_details__ = __webpack_require__(105);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};











/**
 * Generated class for the SearchResultPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var SearchResultPage = /** @class */ (function () {
    function SearchResultPage(navCtrl, navParams, appGlobals, myAlert, serviceEvent, commentService, loader, appEvents, myModal, eventListner, userService) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.appGlobals = appGlobals;
        this.myAlert = myAlert;
        this.serviceEvent = serviceEvent;
        this.commentService = commentService;
        this.loader = loader;
        this.appEvents = appEvents;
        this.myModal = myModal;
        this.eventListner = eventListner;
        this.userService = userService;
        this.cities = [];
        this.selectedCities = 'all';
        this.eventParticipted = [];
        this.appGlobals.currentPageTitle = "Résultat";
        this.appGlobals.currentPageid = "search-result";
        this.searchCriteria = this.navParams.get("criteria");
        this.result = this.navParams.get("result");
        this.currentUser = JSON.parse(localStorage.getItem("currentUser"));
        /*for (let c of this.currentUser.other_cities) {
            this.cities.push(c);
        }
        this.cities.push(this.currentUser.primary_city);
        this.selectedCities.push(this.currentUser.primary_city.id);*/
    }
    SearchResultPage.prototype.filterSearchCities = function () {
        var _this = this;
        if (this.searchCriteria.event == false &&
            this.searchCriteria.article == false &&
            this.searchCriteria.account == false &&
            this.searchCriteria.goodplans == false) {
            var errorAlert = this.myAlert.create({
                title: "Erreur",
                subTitle: "Cliquez sur au moins une des 4 icônes groupes/établissements, articles, événements ou bons plans",
                buttons: [
                    {
                        text: 'Fermer',
                        role: 'cancel',
                        handler: function () {
                        }
                    }
                ]
            });
            errorAlert.present();
        }
        else {
            var loadingPopup_1 = this.loader.create({});
            loadingPopup_1.present();
            this.userService.search(this.searchCriteria, this.selectedCities).then(function (data) {
                loadingPopup_1.dismiss();
                _this.result = data;
            }, function (err) {
                loadingPopup_1.dismiss();
                _this.eventListner.publish('http:errors', err);
            });
        }
    };
    SearchResultPage.prototype.quitSearchResult = function () {
        this.navCtrl.pop();
    };
    // search filter
    SearchResultPage.prototype.searchEvent = function () {
        this.searchCriteria.event = !this.searchCriteria.event;
        this.filterSearchCities();
    };
    SearchResultPage.prototype.searchGoodPlans = function () {
        this.searchCriteria.goodplans = !this.searchCriteria.goodplans;
        this.filterSearchCities();
    };
    SearchResultPage.prototype.searchArticle = function () {
        this.searchCriteria.article = !this.searchCriteria.article;
        this.filterSearchCities();
    };
    SearchResultPage.prototype.searchAccount = function () {
        this.searchCriteria.account = !this.searchCriteria.account;
        this.filterSearchCities();
    };
    SearchResultPage.prototype.ionViewWillEnter = function () {
        this.appGlobals.showHeader = false;
        this.appGlobals.showFooter = true;
        this.appEvents.publish('updateFooter');
    };
    SearchResultPage.prototype.ionViewWillLeave = function () {
        this.appGlobals.showHeader = true;
        this.appGlobals.showFooter = true;
    };
    SearchResultPage.prototype.detailsMerchant = function (merchant) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_4__merchant_sheet_merchant_sheet__["a" /* MerchantSheetPage */], {
            id: merchant.id,
            name: merchant.name
        });
    };
    SearchResultPage.prototype.detailsAssociation = function (association) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_5__association_sheet_association_sheet__["a" /* AssociationSheetPage */], {
            id: association.id,
            name: association.name
        });
    };
    SearchResultPage.prototype.detailsArticle = function (article) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_6__detail_article_detail_article__["a" /* DetailArticlePage */], {
            article: article
        });
    };
    SearchResultPage.prototype.detailsEvent = function (eventId) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_7__event_details_event_details__["a" /* EventDetailsPage */], {
            id: eventId
        });
    };
    SearchResultPage.prototype.detailsGoodplan = function (eventId) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_10__good_plan_details_good_plan_details__["a" /* GoodPlanDetailsPage */], {
            id: eventId
        });
    };
    SearchResultPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-search-result',template:/*ion-inline-start:"D:\celaneo\mobile\new-mobile\test\src\pages\search-result\search-result.html"*/'<!--\n\n  Generated template for the SearchResultPage page.\n\n\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n\n  Ionic pages and navigation.\n\n-->\n\n<ion-header class="desktop-header-white" *ngIf="appGlobals.token">\n\n    <ion-grid>\n\n        <ion-row>\n\n            <ion-col col-4 text-right class="auto-margin">\n\n                <ion-icon class="search-icon" name="md-search"></ion-icon>\n\n            </ion-col>\n\n            <ion-col col-4>\n\n                <ion-item text-center>\n\n                    <ion-input text-capitalize class="search-input" type="text" id="key" name="key" placeholder="Rechercher"\n\n                        [(ngModel)]="searchCriteria.key" required></ion-input>\n\n                </ion-item>\n\n            </ion-col>\n\n            <ion-col col-4 text-left class="auto-margin">\n\n                <ion-icon class="close-icon" name="md-close" (click)="quitSearchResult()"></ion-icon>\n\n            </ion-col>\n\n        </ion-row>\n\n    </ion-grid>\n\n</ion-header>\n\n<ion-header class="mobile-header-white" *ngIf="appGlobals.token">\n\n    <ion-grid>\n\n        <ion-row>\n\n            <ion-col col-2 text-right class="auto-margin">\n\n                <ion-icon class="search-icon" name="md-search"></ion-icon>\n\n            </ion-col>\n\n            <ion-col col-8>\n\n                <ion-item text-center>\n\n                    <ion-input text-capitalize class="search-input" type="text" id="key" name="key" placeholder="Rechercher"\n\n                        [(ngModel)]="searchCriteria.key" required></ion-input>\n\n                </ion-item>\n\n            </ion-col>\n\n            <ion-col col-2 text-left class="auto-margin">\n\n                <ion-icon class="close-icon" name="md-close" (click)="quitSearchResult()"></ion-icon>\n\n            </ion-col>\n\n        </ion-row>\n\n    </ion-grid>\n\n</ion-header>\n\n<ion-content>\n\n    <div class="div-left"></div>\n\n    <div class="div-center">\n\n        <ion-grid no-padding class="grid-resh">\n\n\n\n            <ion-row>\n\n                <ion-col text-left class="select-filter-search">\n\n\n\n                </ion-col>\n\n            </ion-row>\n\n            <ion-row>\n\n                <ion-col col-3 text-center>\n\n                    <div  class="search-accounts" [class.activate]="searchCriteria.account" (click)="searchAccount()">\n\n                        <div class="icon"></div>\n\n                        <p> groupes/<br/>établissements </p>\n\n                    </div>\n\n                </ion-col>\n\n                <ion-col col-3 text-center>\n\n                    <div class="search-articles" [class.activate]="searchCriteria.article" (click)="searchArticle()">\n\n                        <div class="icon"></div>\n\n                        <p> articles </p>\n\n                    </div>\n\n                </ion-col>\n\n                <ion-col col-3 text-center>\n\n                    <div class="search-events" [class.activate]="searchCriteria.event" (click)="searchEvent()">\n\n                        <div class="icon"></div>\n\n                        <p> évènements </p>\n\n                    </div>\n\n                </ion-col>\n\n                <ion-col col-3 text-center>\n\n                    <div class="search-goodplans" [class.activate]="searchCriteria.goodplans" (click)="searchGoodPlans()">\n\n                        <div class="icon"></div>\n\n                        <p> bons plans </p>\n\n                    </div>\n\n                </ion-col>\n\n            </ion-row>\n\n            <ion-row>\n\n                <ion-col>\n\n                    <div class="no-result" *ngIf="(!result.associations || result.associations.length == 0 )\n\n                         && (!result.merchants || result.merchants.length == 0)\n\n                         && (!result.articles || result.articles.length == 0)\n\n                         && (!result.events || result.events.length == 0)">\n\n                        <ion-col>\n\n                            <div>\n\n                                <p text-center class="no-result"> Pas de résultat correspondant à votre recherche.</p>\n\n                            </div>\n\n                        </ion-col>\n\n                    </div>\n\n                    <ion-list class="result-list" *ngIf="result.associations && result.associations.length > 0">\n\n\n\n                        <ion-list-header>\n\n                            <ion-icon name="ios-globe-outline" item-start></ion-icon>\n\n                            Groupes / associations\n\n                        </ion-list-header>\n\n                        <ion-item *ngFor="let association of result.associations" (click)="detailsAssociation(association)">\n\n                            <img *ngIf="association.imageURL" class="item-img" src="{{association.imageURL}}" />\n\n                            <h2 class="title-item"><strong text-capitalize>{{association.name}}</strong></h2>\n\n                            <ion-icon text-right item-right name="ios-arrow-forward"></ion-icon>\n\n                        </ion-item>\n\n                    </ion-list>\n\n                    <ion-list class="result-list" *ngIf="result.merchants && result.merchants.length > 0">\n\n                        <ion-list-header>\n\n                            <ion-icon name="md-cart" item-start></ion-icon>\n\n                            Commerces / partenaires\n\n                        </ion-list-header>\n\n                        <ion-item *ngFor="let merchant of result.merchants" (click)="detailsMerchant(merchant)">\n\n                            <img *ngIf="merchant.imageURL" class="item-img" src="{{merchant.imageURL}}" />\n\n                            <h2 class="title-item"><strong text-capitalize>{{merchant.name}}</strong></h2>\n\n                            <ion-icon text-right item-right name="ios-arrow-forward"></ion-icon>\n\n                        </ion-item>\n\n                    </ion-list>\n\n                    <ion-list class="result-list" *ngIf="result.events && result.events.length > 0">\n\n                        <ion-list-header>\n\n                            <ion-icon name="md-calendar" item-start></ion-icon>\n\n                            Agenda\n\n                        </ion-list-header>\n\n                        <ion-item *ngFor="let event of result.events" (click)="detailsEvent(event.id)">\n\n                            <img *ngIf="event.imageURL" class="item-img" src="{{event.imageURL}}" />\n\n                            <h2 class="title-item-obj"><strong>{{event.title}}</strong></h2>\n\n                            <p class="small-description">\n\n                                {{event.startAt| amLocale:\'fr\' | amDateFormat:\'dddd Do MMMM YYYY\'}} {{event.startAt|\n\n                                amLocale:\'fr\' | amDateFormat:\'HH\'}}H{{event.startAt| amLocale:\'fr\' |\n\n                                amDateFormat:\'mm\'}}\n\n                            </p>\n\n                            <ion-icon text-right item-right name="ios-arrow-forward"></ion-icon>\n\n                        </ion-item>\n\n                    </ion-list>\n\n\n\n\n\n                    <ion-list class="result-list" *ngIf="result.goodplans && result.goodplans.length > 0">\n\n                        <ion-list-header>\n\n                            <ion-icon name="md-calendar" item-start></ion-icon>\n\n                            Bon Plans\n\n                        </ion-list-header>\n\n                        <ion-item *ngFor="let event of result.goodplans" (click)="detailsGoodplan(event.id)">\n\n                            <img *ngIf="event.imageURL" class="item-img" src="{{event.imageURL}}" />\n\n                            <h2 class="title-item-obj"><strong>{{event.title}}</strong></h2>\n\n                            <p class="small-description">\n\n                                {{event.startAt| amLocale:\'fr\' | amDateFormat:\'dddd Do MMMM YYYY\'}} {{event.startAt|\n\n                                amLocale:\'fr\' | amDateFormat:\'HH\'}}H{{event.startAt| amLocale:\'fr\' |\n\n                                amDateFormat:\'mm\'}}\n\n                            </p>\n\n                            <ion-icon text-right item-right name="ios-arrow-forward"></ion-icon>\n\n                        </ion-item>\n\n                    </ion-list>\n\n\n\n\n\n                    <ion-list class="result-list" *ngIf="result.articles && result.articles.length > 0">\n\n                        <ion-list-header>\n\n                            <ion-icon name="ios-book" item-start></ion-icon>\n\n                            Articles\n\n                        </ion-list-header>\n\n                        <ion-item *ngFor="let article of result.articles" (click)="detailsArticle(article)">\n\n                            <img *ngIf="article.imageURL" class="item-img" src="{{article.imageURL}}" />\n\n                            <h2 class="title-item-obj"><strong>{{article.title}}</strong></h2>\n\n                            <p class="small-description">\n\n                                {{article.createAt| amLocale:\'fr\' | amDateFormat:\'dddd Do MMMM YYYY\'}}\n\n                            </p>\n\n                            <ion-icon text-right item-right name="ios-arrow-forward"></ion-icon>\n\n                        </ion-item>\n\n                    </ion-list>\n\n                </ion-col>\n\n            </ion-row>\n\n        </ion-grid>\n\n    </div>\n\n    <div class="div-right"></div>\n\n\n\n</ion-content>'/*ion-inline-end:"D:\celaneo\mobile\new-mobile\test\src\pages\search-result\search-result.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_2__providers_globals_globals__["a" /* GlobalsProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_8__providers_eventsrest_eventsrest__["a" /* EventsrestProvider */],
            __WEBPACK_IMPORTED_MODULE_9__providers_comment_comment__["a" /* CommentProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_3__providers_user_user__["a" /* UserProvider */]])
    ], SearchResultPage);
    return SearchResultPage;
}());

//# sourceMappingURL=search-result.js.map

/***/ }),

/***/ 558:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CommunitiesPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_globals_globals__ = __webpack_require__(8);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_community_community__ = __webpack_require__(40);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__news_news__ = __webpack_require__(35);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





/**
 * Generated class for the CommunitiesPage page.
 *
 * See http://ionicframework.com/docs/components/#navigation for more info
 * on Ionic pages and navigation.
 */
var CommunitiesPage = /** @class */ (function () {
    function CommunitiesPage(navCtrl, appGlobals, appEvent, loadingCtrl, serviceCommunity, navParams) {
        var _this = this;
        this.navCtrl = navCtrl;
        this.appGlobals = appGlobals;
        this.appEvent = appEvent;
        this.loadingCtrl = loadingCtrl;
        this.serviceCommunity = serviceCommunity;
        this.navParams = navParams;
        this.communities = [];
        this.selected = [];
        this.selectAll = false;
        this.appEvent.publish('closeFilters');
        this.appEvent.subscribe('refreshApprovedCommunities', function () {
            _this.communities = JSON.parse(localStorage.getItem("allCommunities"));
        });
        this.communities = JSON.parse(localStorage.getItem("allCommunities"));
        for (var _i = 0, _a = this.communities; _i < _a.length; _i++) {
            var community = _a[_i];
            if (community.follow) {
                this.selected.push(community);
            }
        }
        Promise.all([this.serviceCommunity.getAllPublicCommunities(), this.serviceCommunity.getAllPrivateCommunities(), this.serviceCommunity.findCurrentUserCommunities()]).then(function (user) {
            localStorage.setItem("publicCommunities", JSON.stringify(user[0]));
            localStorage.setItem("privateCommunities", JSON.stringify(user[1]));
            localStorage.setItem("allCommunities", JSON.stringify(user[2]));
            _this.appEvent.publish('refreshCommunities');
            var approved;
            approved = user[2];
            if (approved.length != 0) {
                localStorage.setItem("hasApprovedCommunities", "true");
            }
            else {
                localStorage.setItem("hasApprovedCommunities", "false");
            }
        });
    }
    CommunitiesPage.prototype.ionViewWillEnter = function () {
        this.appGlobals.onNegativeTopSearch = true;
        this.appEvent.publish('updateFooter');
    };
    CommunitiesPage.prototype.ionViewWillLeave = function () {
        this.appGlobals.onNegativeTopSearch = false;
    };
    CommunitiesPage.prototype.showHidePrivateSearch = function () {
        if (!this.appGlobals.privateSearch) {
            this.appGlobals.privateSearch = true;
        }
        else {
            this.appGlobals.privateSearch = false;
        }
    };
    CommunitiesPage.prototype.showHidePublicSearch = function () {
        if (!this.appGlobals.publicSearch) {
            this.appGlobals.publicSearch = true;
        }
        else {
            this.appGlobals.publicSearch = false;
        }
    };
    CommunitiesPage.prototype.checkUncheckAll = function () {
        this.selected = [];
        if (this.selectAll) {
            for (var i = 0; i <= (this.communities.length) - 1; i++) {
                this.communities[i].follow = true;
                this.selected.push(this.communities[i]);
            }
        }
        else {
            for (var i = 0; i <= (this.communities.length) - 1; i++) {
                this.communities[i].follow = false;
            }
        }
    };
    CommunitiesPage.prototype.selectCommunity = function (data) {
        if (data.follow == true) {
            this.selected.push(data);
        }
        else {
            var newArray = this.selected.filter(function (el) {
                return el.id !== data.id;
            });
            this.selectAll = false;
            this.selected = newArray;
        }
    };
    CommunitiesPage.prototype.followCOmmunities = function () {
        var _this = this;
        var loadingPopup = this.loadingCtrl.create({});
        loadingPopup.present();
        this.serviceCommunity.postCommunitiesFollow(this.selected).then(function (data) {
            Promise.all([_this.serviceCommunity.findCurrentUserCommunities(), _this.serviceCommunity.findCurrentUserFollowedCommunities()]).then(function (user) {
                localStorage.setItem("allCommunities", JSON.stringify(user[0]));
                localStorage.setItem("followedCommunities", JSON.stringify(user[1]));
                _this.appEvent.publish('refreshApprovedCommunities');
                _this.followed = user[1];
                if (_this.followed.length != 0) {
                    localStorage.setItem("hasCommunities", "true");
                }
                else {
                    localStorage.setItem("hasCommunities", "false");
                }
                _this.appEvent.publish('refreshCommunities');
                _this.appEvent.publish('news:refresh', loadingPopup);
                _this.appEvent.publish('agenda:refresh');
                _this.appEvent.publish('goodplan:refresh');
                _this.navCtrl.setRoot(__WEBPACK_IMPORTED_MODULE_4__news_news__["a" /* NewsPage */]);
            }, function (err) {
                loadingPopup.dismiss();
                _this.appEvent.publish('http:errors', err);
            });
        }, function (err) {
            loadingPopup.dismiss();
            _this.appEvent.publish('http:errors', err);
        });
        loadingPopup.dismiss();
    };
    CommunitiesPage.prototype.unfollow = function (community) {
        var _this = this;
        var loadingPopup = this.loadingCtrl.create({});
        loadingPopup.present();
        this.serviceCommunity.postCommunitiesUnfollow(community).then(function (data) {
            Promise.all([_this.serviceCommunity.getAllPublicCommunities(), _this.serviceCommunity.getAllPrivateCommunities(), _this.serviceCommunity.findCurrentUserCommunities(), _this.serviceCommunity.findCurrentUserFollowedCommunities()]).then(function (user) {
                localStorage.setItem("publicCommunities", JSON.stringify(user[0]));
                localStorage.setItem("privateCommunities", JSON.stringify(user[1]));
                localStorage.setItem("allCommunities", JSON.stringify(user[2]));
                localStorage.setItem("followedCommunities", JSON.stringify(user[3]));
                _this.approved = user[2];
                if (_this.approved.length != 0) {
                    localStorage.setItem("hasApprovedCommunities", "true");
                }
                else {
                    localStorage.setItem("hasApprovedCommunities", "false");
                }
                _this.followed = user[3];
                if (_this.followed.length != 0) {
                    localStorage.setItem("hasCommunities", "true");
                }
                else {
                    localStorage.setItem("hasCommunities", "false");
                }
                _this.appEvent.publish('refreshCommunities');
                _this.appEvent.publish('refreshApprovedCommunities');
                loadingPopup.dismiss();
            }, function (err) {
                loadingPopup.dismiss();
                _this.appEvent.publish('http:errors', err);
            });
        }, function (err) {
            loadingPopup.dismiss();
            _this.appEvent.publish('http:errors', err);
        });
    };
    CommunitiesPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-communities',template:/*ion-inline-start:"D:\celaneo\mobile\new-mobile\test\src\pages\communities\communities.html"*/'<ion-content>\n\n    <!--bloc central -->\n\n    <div class="div-center">\n\n        <ion-grid padding-bottom class="no-padding grid bar-custom margin-bottom-grid">\n\n\n\n            <ion-row>\n\n\n\n                <ion-col text-center>\n\n                    <p class="subcribe">S\'enregistrer dans une ou plusieurs communautés</p>\n\n                    <button class="custom-button-links" color="light" text-start (click)="showHidePublicSearch()">\n\n                        <span class="button-sign-affirmation"> Communautés publiques </span>\n\n                        <!-- <ion-icon name="ios-arrow-forward" role="img" class="icon icon-md ion-ios-arrow-forward colorized"\n\n                            aria-label="arrow forward" ng-reflect-name="ios-arrow-forward"></ion-icon> -->\n\n                            <img item-end class="icon-arrow" src="assets/imgs/icons/arrow-down.png" />\n\n                        <img>\n\n                    </button>\n\n\n\n\n\n                    <button class="custom-button-links" color="light" text-start (click)="showHidePrivateSearch()">\n\n                        <span class="button-sign-affirmation"> Communautés privées </span>\n\n                        <img item-end class="icon-arrow" src="assets/imgs/icons/arrow-down.png" />\n\n                    </button>\n\n\n\n\n\n                </ion-col>\n\n\n\n            </ion-row>\n\n\n\n\n\n\n\n        </ion-grid>\n\n        <div class="follow-communities">\n\n            <h5>Suivre ses communautés</h5>\n\n            <p>\n\n                Une fois enregistré(e), cochez les communautés que vous souhaitez suivre et validez\n\n            </p>\n\n        </div>\n\n        <div class="communities-list">\n\n            <ion-row class="scrollRow">\n\n                <ion-col col-12 class="follow-text">\n\n                    <ion-item>\n\n                        <ion-checkbox [(ngModel)]="selectAll" (click)="checkUncheckAll()" color="primary"></ion-checkbox>\n\n                        <ion-label text-left color="light-black">Suivre toutes ses communautés</ion-label>\n\n                    </ion-item>\n\n                    <ion-item>\n\n                        <p text-left>ou cocher les communautés que vous<br> souhaitez suivre</p>\n\n                    </ion-item>\n\n                </ion-col>\n\n            </ion-row>\n\n\n\n            <ion-row class="scrollRow">\n\n                <ion-col col-12>\n\n                    <ion-list class="listScrolled" no-lines>\n\n                       \n\n                        <ion-item *ngFor="let community of communities">\n\n                            \n\n                                <img item-end class="icon-private" *ngIf="community.isPrivate" src="assets/imgs/icons/private.png" />\n\n                               <div class="trash-div" item-end  ion-item (click)="unfollow(community.id);$event.stopPropagation();"><img item-end  class="icon-trash" src="assets/imgs/icons/trash.png" (click)="unfollow(community.id);$event.stopPropagation();" /></div> \n\n                                <ion-label>{{community.name}}</ion-label>\n\n                            <ion-checkbox  (click)="selectCommunity(community)" color="dark" Communautés publiques [(ngModel)]="community.follow"></ion-checkbox>\n\n                        </ion-item>\n\n                    </ion-list>\n\n                </ion-col>\n\n            </ion-row>\n\n            <ion-row class="note" text-center>\n\n                <ion-col col-12 >\n\n                    <p text-center>À tout moment, vous pourrez modifier et supprimer vos sélections en cliquant sur\n\n                        l\'icône Communautés</p>\n\n                </ion-col>\n\n            </ion-row>\n\n\n\n            <button class="community-button" ion-button color="primary"  (click)= "followCOmmunities()" round>Valider</button>\n\n        </div>\n\n\n\n    </div>\n\n    <!-- fin bloc central -->\n\n</ion-content>'/*ion-inline-end:"D:\celaneo\mobile\new-mobile\test\src\pages\communities\communities.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_2__providers_globals_globals__["a" /* GlobalsProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_3__providers_community_community__["a" /* CommunityProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */]])
    ], CommunitiesPage);
    return CommunitiesPage;
}());

//# sourceMappingURL=communities.js.map

/***/ }),

/***/ 559:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return GoodPlanPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_globals_globals__ = __webpack_require__(8);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_user_user__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_eventsrest_eventsrest__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__ionic_native_google_analytics__ = __webpack_require__(58);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_moment__ = __webpack_require__(1);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_moment__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__ionic_native_calendar__ = __webpack_require__(54);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__butalso_butalso__ = __webpack_require__(129);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__providers_comment_comment__ = __webpack_require__(22);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__ionic_native_camera__ = __webpack_require__(29);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__ionic_native_social_sharing__ = __webpack_require__(46);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__providers_goodplanrest_goodplanrest__ = __webpack_require__(72);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__good_plan_details_good_plan_details__ = __webpack_require__(105);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__providers_cache_cache__ = __webpack_require__(47);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__merchant_card_merchant_card__ = __webpack_require__(130);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__ionic_native_file__ = __webpack_require__(71);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17__ionic_native_in_app_browser__ = __webpack_require__(70);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_18__providers_community_community__ = __webpack_require__(40);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_19__ionic_native_downloader__ = __webpack_require__(48);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





















/**
 * Generated class for the AgendaPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var GoodPlanPage = /** @class */ (function () {
    function GoodPlanPage(event, navCtrl, appGlobals, userService, goodPlanService, eventService, platform, camera, commentService, myAlert, loader, appEvents, ga, calendarPlugin, myModal, socialsharing, cacheService, file, inAppBrowser, serviceCommunity, downloader) {
        var _this = this;
        this.event = event;
        this.navCtrl = navCtrl;
        this.appGlobals = appGlobals;
        this.userService = userService;
        this.goodPlanService = goodPlanService;
        this.eventService = eventService;
        this.platform = platform;
        this.camera = camera;
        this.commentService = commentService;
        this.myAlert = myAlert;
        this.loader = loader;
        this.appEvents = appEvents;
        this.ga = ga;
        this.calendarPlugin = calendarPlugin;
        this.myModal = myModal;
        this.socialsharing = socialsharing;
        this.cacheService = cacheService;
        this.file = file;
        this.inAppBrowser = inAppBrowser;
        this.serviceCommunity = serviceCommunity;
        this.downloader = downloader;
        this.cities = [];
        this.selectedCities = [];
        this.selectedCategories = [];
        this.page = 1;
        this.items = [];
        this.itemsDates = [];
        this.loaderShow = true;
        this.init = false;
        this.eventParticipted = [];
        this.hasApprovedCommunities = false;
        this.cacheLifeTime = 3600;
        this.allowInfiniteScroll = true;
        this.commentEvent = {
            content: '',
            photo: null
        };
        this.currentUser = JSON.parse(localStorage.getItem("currentUser"));
        if (this.currentUser.primary_city) {
            this.selectedCities.push(this.currentUser.primary_city.id);
        }
        this.event.publish('closeFilters');
        this.event.publish('resetFilters');
        this.eventProgress();
        this.refreshCommunities();
        // get event mais aussi
        this.event.unsubscribe('goodplan:cache');
        this.event.subscribe('goodplan:cache', function (data) {
            _this.page = data[0];
            _this.items = data[1];
            _this.event = data[2];
            _this.itemsDates = data[3];
            _this.allowInfiniteScroll = !data[2] || data[2] && data[2].length;
        });
        this.appEvents.unsubscribe('goodplan:refresh');
        this.appEvents.subscribe('goodplan:refresh', function () {
            _this.page = 1;
            _this.cacheService.loadArticles(_this.page, _this.items, _this.events, _this.cacheLifeTime, 'goodplan', null, true);
        });
        var communities;
        platform.ready().then(function () {
            communities = JSON.parse(localStorage.getItem("followedCommunities"));
            if (communities.length > 0) {
                for (var _i = 0, communities_1 = communities; _i < communities_1.length; _i++) {
                    var value = communities_1[_i];
                    var label = 'agenda__' + value.id;
                    _this.appEvents.publish("googleAnalytics", label);
                }
            }
        });
    }
    GoodPlanPage.prototype.showComment = function (event) {
        var _this = this;
        this.commentService.getCommentsGoodPlan(event.id, 0).then(function (data) {
            _this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_13__good_plan_details_good_plan_details__["a" /* GoodPlanDetailsPage */], {
                id: event.id,
                commentList: data,
                showComment: true,
                title: event.title
            });
        }).catch(function (error) {
            console.log("Error from showing comment: ", error);
        });
    };
    GoodPlanPage.prototype.ShareArticle = function (item) {
        var options = {
            message: item.title + " : " + item.description,
            subject: "NOUS Ensemble",
            image: item.imageURL,
            url: item.imageURL
        };
        if (this.platform.is('cordova') || this.platform.is('core')) {
            this.socialsharing.shareWithOptions(options).then(function (data) {
            }).catch(function (error) {
                console.log("Error from sharing" + error);
            });
        }
    };
    GoodPlanPage.prototype.ionViewWillEnter = function () {
        this.appGlobals.showFooter = true;
        this.appGlobals.currentPageid = "goodplans";
        this.appGlobals.showSearchAgenda = true;
        this.appEvents.publish('updateFooter');
        this.items = [];
        this.page = 1;
        this.cacheService.loadArticles(this.page, this.items, this.events, this.cacheLifeTime, 'goodplan');
    };
    GoodPlanPage.prototype.ionViewDidEnter = function () {
        if (this.appGlobals.currentPageid == "goodplans") {
            this.appGlobals.currentPageid = "goodplans";
        }
        else {
            this.appGlobals.currentPageid = "mySpace";
        }
        this.appEvents.publish('updateFooter');
    };
    GoodPlanPage.prototype.ionViewWillLeave = function () {
        this.loaderShow = true;
        this.appGlobals.showSearchAgenda = false;
    };
    GoodPlanPage.prototype.refreshCommunities = function () {
        var _this = this;
        Promise.all([this.serviceCommunity.findCurrentUserFollowedCommunities()]).then(function (user) {
            localStorage.setItem("followedCommunities", JSON.stringify(user[0]));
            _this.appEvents.publish('refreshCommunities');
            _this.appEvents.publish('refreshApprovedCommunities');
        }, function (err) {
            _this.appEvents.publish('http:errors', err);
        });
    };
    GoodPlanPage.prototype.showAgendaBenevole = function (event) {
        this.appGlobals.currentEventId = event.id;
        if (event.isVolunteer) {
            var myModal2 = this.myModal.create('PopupPage', { "message": "<p>Vous êtes déjà  bénévole  à cet événement ! </p>" }, { cssClass: 'message-modal' });
            myModal2.onDidDismiss(function () {
            });
            myModal2.present();
        }
        else {
            if (!this.appGlobals.showBenevoleAgenda) {
                this.appGlobals.showBenevoleAgenda = true;
            }
            else {
                this.appGlobals.showBenevoleAgenda = false;
            }
            for (var _i = 0, _a = this.items; _i < _a.length; _i++) {
                var ev = _a[_i];
                if (ev.id == event.id) {
                    ev.isVolunteer = true;
                    ev.nbVolunteers++;
                }
            }
        }
    };
    GoodPlanPage.prototype.showHideProposeCarpooling = function () {
        if (!this.appGlobals.showproposeCarpooling) {
            this.appGlobals.showproposeCarpooling = true;
        }
        else {
            this.appGlobals.showproposeCarpooling = false;
        }
    };
    GoodPlanPage.prototype.showHideContactBar = function (id) {
        this.appGlobals.goodPlanCreatorId = id;
        if (!this.appGlobals.showcontactBar) {
            this.appGlobals.showcontactBar = true;
        }
        else {
            this.appGlobals.showcontactBar = false;
        }
    };
    GoodPlanPage.prototype.showHideNeedCarpooling = function () {
        if (!this.appGlobals.showNeedCarpooling) {
            this.appGlobals.showNeedCarpooling = true;
        }
        else {
            this.appGlobals.showNeedCarpooling = false;
        }
    };
    GoodPlanPage.prototype.showHidePutAgenda = function (event) {
        var _this = this;
        if (!this.appGlobals.showPutAgenda) {
            this.appGlobals.showPutAgenda = true;
        }
        else {
            this.appGlobals.showPutAgenda = false;
        }
        this.goodPlanService.takePart(event.id).then(function (data) {
            _this.appGlobals.currentEvent = event;
            event.isParticipated = true;
            event.nbParticipants++;
            event = data.event;
        }, function (err) {
            _this.appEvents.publish('http:errors', err);
        });
    };
    GoodPlanPage.prototype.dayDiff = function (firstDate, secondDate) {
        return Math.round((secondDate - firstDate) / (1000 * 60 * 60 * 24));
    };
    GoodPlanPage.prototype.parseDate = function (str) {
        var arrayDateString = str.split('T');
        var arrayDate = arrayDateString[0].split('-');
        return new Date(arrayDate[0], arrayDate[1] - 1, arrayDate[2]);
    };
    GoodPlanPage.prototype.parseDateNow = function (dateIn) {
        var yyyy = dateIn.getFullYear();
        var mm = dateIn.getMonth() + 1;
        var dd = dateIn.getDate();
        return String(yyyy + "-" + mm + "-" + dd) + "T00:00:00";
    };
    GoodPlanPage.prototype.doInfinite = function (infiniteScroll) {
        if (this.init) {
            this.init = false;
            infiniteScroll.complete();
        }
        else if (this.allowInfiniteScroll) {
            this.page += 1;
            this.cacheService.loadArticles(this.page, this.items, this.events, this.cacheLifeTime, 'goodplan', null, false, infiniteScroll);
        }
        else {
            infiniteScroll.complete();
        }
    };
    GoodPlanPage.prototype.doRefreshAgenda = function (refresher) {
        this.items = [];
        this.page = 1;
        this.loaderShow = true;
        this.refreshCommunities();
        this.cacheService.loadArticles(this.page, this.items, this.events, this.cacheLifeTime, 'goodplan', null, true, null, refresher);
    };
    GoodPlanPage.prototype.cancelParticipation = function (event) {
        var _this = this;
        var result;
        this.goodPlanService.cancelTakePart(event.id).then(function (data) {
            result = data;
            var start = __WEBPACK_IMPORTED_MODULE_6_moment__(event.startAt).toDate();
            var end = __WEBPACK_IMPORTED_MODULE_6_moment__(event.endAt).toDate();
            _this.calendarPlugin.deleteEvent(event.title, event.place, '', start, end).then(function (msg) {
            }, function (err) {
            });
            if (result.success) {
                event.isParticipated = false;
                event.nbParticipants--;
                event = data.event;
                var myModal2 = _this.myModal.create('PopupPage', { "message": "<p>Votre annulation a été bien enregistrée ! </p>" }, { cssClass: 'message-modal' });
                myModal2.onDidDismiss(function () {
                });
                myModal2.present();
            }
        }, function (err) {
            _this.appEvents.publish('http:errors', err);
        });
    };
    GoodPlanPage.prototype.showNeedVolunteerPopup = function (event) {
        var _this = this;
        if (event.needVolunteer) {
            var benevoleAlert = this.myAlert.create({
                title: '',
                subTitle: 'Voulez-vous être bénévole à cet évènement?',
                buttons: [
                    {
                        text: 'Non',
                        role: 'cancel',
                        handler: function () {
                        }
                    },
                    {
                        text: 'Oui',
                        handler: function () {
                            var label = 'volunteer-' + event.id;
                            _this.appEvents.publish("googleAnalytics", label);
                            var modalVolunteers = _this.myModal.create('ParticpatelaststepPage', { "id": event.id }, { cssClass: 'style-modal' });
                            modalVolunteers.present();
                        }
                    }
                ]
            });
            benevoleAlert.present();
        }
    };
    GoodPlanPage.prototype.goToMerchantCard = function (item) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_15__merchant_card_merchant_card__["a" /* MerchantCardPage */], {
            currentMerchant: item
        });
    };
    GoodPlanPage.prototype.publish = function () {
        var adminAssociations = JSON.parse(localStorage.getItem("adminAssociations"));
        var adminMerchants = JSON.parse(localStorage.getItem("adminMerchants"));
        var adherentAssociations = JSON.parse(localStorage.getItem("adherentAssociations"));
        var adherentMerchants = JSON.parse(localStorage.getItem("adherentMerchants"));
        if (localStorage.getItem("hasApprovedCommunities") == 'true') {
            this.hasApprovedCommunities = true;
        }
        else {
            this.hasApprovedCommunities = false;
        }
        if (adherentAssociations.length != 0 || adherentMerchants.length != 0 || adminAssociations.length != 0 || adminMerchants.length != 0 || this.currentUser.role == 'community_su_admin' || this.hasApprovedCommunities) {
            var myModal2 = this.myModal.create('ChoicePage', {}, { cssClass: 'style-modal choice-modal' });
            myModal2.onDidDismiss(function () {
            });
            myModal2.present();
        }
        else {
            var myModal2 = this.myModal.create('PopupPage', { "message": "<p>Vous ne pouvez pas publier ! </p>" }, { cssClass: 'message-modal' });
            myModal2.onDidDismiss(function () {
            });
            myModal2.present();
        }
    };
    GoodPlanPage.prototype.detailsEvent = function (event, withComments) {
        this.appGlobals.currentEvent = event;
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_13__good_plan_details_good_plan_details__["a" /* GoodPlanDetailsPage */], {
            id: event.id,
            title: event.title,
            withComments: withComments
        });
    };
    GoodPlanPage.prototype.openButAlso = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_8__butalso_butalso__["a" /* ButAlsoPage */]);
    };
    GoodPlanPage.prototype.eventProgress = function () {
        var _this = this;
        this.event.publish('user:current');
        this.currentUser = JSON.parse(localStorage.getItem("currentUser"));
        this.eventService.getEventProgress(this.currentUser.id).then(function (data) {
            _this.eventParticipted = data;
        }, function (err) {
            _this.event.publish('http:errors', err);
        });
    };
    GoodPlanPage.prototype.addPhotoParticipated = function () {
        if (this.eventParticipted.length == 1) {
            this.takePicture();
        }
        else {
            var myModal2 = this.myModal.create('PopinChoiceEventPage', { "events": this.eventParticipted }, { cssClass: 'style-modal' });
            myModal2.present();
        }
    };
    GoodPlanPage.prototype.takePicture = function () {
        var _this = this;
        this.camera.getPicture({
            destinationType: this.camera.DestinationType.DATA_URL,
            quality: 100,
            targetWidth: 600,
            targetHeight: 600,
            allowEdit: true,
            correctOrientation: true,
            encodingType: this.camera.EncodingType.JPEG
        }).then(function (imageData) {
            _this.commentEvent.photo = "data:image/jpeg;base64," + imageData;
            var myModal2 = _this.myModal.create('EvenCommentPage', {
                "comment": _this.commentEvent,
                "participation": _this.eventParticipted[0].articleId
            }, { cssClass: 'comment-modal' });
            myModal2.present();
        });
    };
    GoodPlanPage.prototype.download = function (url) {
        var _this = this;
        var fileName = url.substring(url.lastIndexOf('/') + 1);
        this.platform.ready().then(function () {
            if (_this.platform.is('android')) {
                var request = {
                    uri: url,
                    title: 'Nous Ensemble',
                    description: fileName,
                    mimeType: '',
                    visibleInDownloadsUi: true,
                    notificationVisibility: __WEBPACK_IMPORTED_MODULE_19__ionic_native_downloader__["b" /* NotificationVisibility */].VisibleNotifyCompleted,
                    destinationInExternalFilesDir: {
                        dirType: 'Downloads',
                        subPath: fileName
                    }
                };
                _this.downloader.download(request)
                    .then(function (location) { return console.log('File downloaded at:' + location); })
                    .catch(function (error) { return console.error(error); });
            }
            else {
                var target = "_system";
                _this.inAppBrowser.create(url, target, "location=no,enableViewportScale=yes");
            }
        });
    };
    GoodPlanPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-good-plan',template:/*ion-inline-start:"D:\celaneo\mobile\new-mobile\test\src\pages\good-plan\goodplan.html"*/'<!--\n\n  Generated template for the AgendaPage page.\n\n\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n\n  Ionic pages and navigation.\n\n-->\n\n<ion-content>\n\n    <ion-fab *ngIf="eventParticipted.length != 0" bottom right showWhen="android, ios, windows" class="fab-participted">\n\n        <button color="primary" ion-fab class="fab" (click)="addPhotoParticipated()">\n\n\n\n            <span class="button-inner">\n\n                <ion-icon name="camera" role="img" class="icon icon-ios ion-ios-camera-outline icon-particited" ios="ion-ios-camera-outline"\n\n                          md="ion-ios-camera-outline" style="font-weight: bold" aria-label="camera"></ion-icon>\n\n            </span>\n\n            <div class="button-effect"></div>\n\n        </button>\n\n    </ion-fab>\n\n    <div class="div-left"></div>\n\n    <div class="div-center">\n\n        <ion-refresher (ionRefresh)="doRefreshAgenda($event)">\n\n            <ion-refresher-content></ion-refresher-content>\n\n        </ion-refresher>\n\n\n\n        <ion-grid class="grid-bottom">\n\n            <!-- <ion-row>\n\n                <ion-col text-center class="agenda-filter">\n\n                    <button ion-button round outline color="primary" [class.activate]="periodfilter == \'weekend\'" class="weekend-button button-meduim fixed-height"\n\n                        type="button" (click)="filterWeekend()">Ce Week-End</button>\n\n                </ion-col>\n\n            </ion-row>\n\n            <ion-row class="select-filters" text-center>\n\n                <ion-col>\n\n                    <ion-select text-center class="select-fitler select-not-ie" placeholder="Votre Ville" [(ngModel)]="selectedCities"\n\n                        (ionChange)="filterAgendaCities()" submitText="Ok" cancelText="Annuler">\n\n                        <ion-option *ngFor="let city of cities" value="{{city.id}}">{{city.name}}</ion-option>\n\n                    </ion-select>\n\n                    <select text-center class="select-fitler select-ie" placeholder="Votre Ville" [(ngModel)]="selectedCities"\n\n                        (ionChange)="filterAgendaCities()">\n\n                        <option *ngFor="let city of cities" value="{{city.id}}">{{city.name}}</option>\n\n                    </select>\n\n                </ion-col>\n\n                <ion-col>\n\n                    <ion-select text-center class="select-fitler select-not-ie" placeholder="Type d\'activité"\n\n                        [(ngModel)]="selectedCategories" (ionChange)="filterAgendaCategories()" submitText="Ok"\n\n                        cancelText="Annuler">\n\n                        <ion-option *ngFor="let category of categories" value={{category.id}}>{{category.name}}</ion-option>\n\n                    </ion-select>\n\n\n\n                    <select text-center class="select-fitler select-ie" placeholder="Type d\'activité" [(ngModel)]="selectedCategories">\n\n                        <option value="null" (click)="filterAgendaCategories()">Type d\'activité</option>\n\n                        <option *ngFor="let category of categories" value={{category.id}} (click)="filterAgendaCategories()">{{category.name}}</option>\n\n                    </select>\n\n                </ion-col>\n\n            </ion-row> -->\n\n\n\n            <ion-row>\n\n                <div class="agenda-container" *ngFor="let itemDate of itemsDates; let idx = index">\n\n                    <ion-card>\n\n                        <ion-card-header>\n\n                            <strong class="title-date">{{itemDate.key| amLocale:\'fr\' | amDateFormat:\' Do MMMM\'}}</strong>\n\n                            <!--<img float-end class="move lock-icons" src="assets/imgs/icons/lock.png" alt="NOUS-Ensemble" />-->\n\n                            <p class="title-day" text-capitalize> {{itemDate.key| amLocale:\'fr\' | amDateFormat:\'dddd\'}}\n\n                            </p>\n\n                        </ion-card-header>\n\n                        <ion-card-content *ngFor="let item of itemDate.value">\n\n\n\n                            <ion-row class="event-item">\n\n                                <ion-col col-3 (click)="detailsEvent(item, false)" text-center>\n\n                                    <span class="start-hour">{{item.startAt| amLocale:\'fr\' |\n\n                                        amDateFormat:\'HH\'}}h{{item.startAt| amLocale:\'fr\' | amDateFormat:\'mm\'}}</span><br>\n\n                                    <img *ngIf="item.private" float-end class="move lock-icons" src="assets/imgs/icons/lock.png" alt="NOUS-Ensemble" />\n\n                                </ion-col>\n\n                                <ion-col col-6>\n\n                                    <div class="bottom-margin-8" (click)="detailsEvent(item, false)"><strong class="event-title">{{item.title}}</strong></div>\n\n                                    <p text-capitalize class=\'AssoTitle\' (click)="goToMerchantCard(item)">\n\n                                        {{item.creatorName}}\n\n                                    </p>\n\n                                    <strong>à {{item.cityName}} - {{item.communityName}}</strong>\n\n                                </ion-col>\n\n                                <ion-col col-3 (click)="detailsEvent(item, false)">\n\n                                    <div *ngIf="(item.imageURL && !item.images) || (!item.imageURL && !item.images) || (item.images && !item.imageURL && item.images.length == 1); else elseBlock"\n\n                                        class="home-card-slides img-div">\n\n                                        <div class="img-div" *ngIf="item.imageURL">\n\n                                            <img class="img-div" data-src="{{item.imageURL}}" imageViewer>\n\n                                        </div>\n\n                                        <div class="img-div" *ngFor="let img of item.images">\n\n                                            <img class="img-div" data-src="{{img.url}}" imageViewer>\n\n                                        </div>\n\n                                    </div>\n\n                                    <ng-template #elseBlock>\n\n                                        <ion-slides class="home-card-slides" autoplay="5000" loop="true" pager>\n\n                                            <ion-slide class="img-div" *ngIf="item.imageURL">\n\n                                                <img class="img-div" data-src="{{item.imageURL}}" imageViewer>\n\n                                            </ion-slide>\n\n                                            <ion-slide class="img-div" *ngFor="let img of item.images">\n\n                                                <img class="img-div" data-src="{{img.url}}" imageViewer>\n\n                                            </ion-slide>\n\n                                        </ion-slides>\n\n                                    </ng-template>\n\n                                </ion-col>\n\n                            </ion-row>\n\n                            <ion-col col-12 text-center>\n\n\n\n                            </ion-col>\n\n                            <ion-row *ngIf="item.document" >\n\n                                <ion-col text-center><ion-icon name="attach" (click)="download(item.document)" style="font-size:40px"></ion-icon></ion-col>\n\n                            </ion-row>\n\n                            <div text-center>\n\n                                <ion-row class="comment-text-style">\n\n                                    <ion-col class="text-grey">\n\n                                        <span  *ngIf="item.nbComments <= 1">{{item.nbComments}} Commentaire</span>\n\n                                        <span  *ngIf="item.nbComments > 1">{{item.nbComments}} Commentaires</span>\n\n                                    </ion-col>\n\n                                    <ion-col>\n\n                                        <img class="comment-img-style" src="assets/imgs/icons/list-divider.png">\n\n                                    </ion-col>\n\n                                    <ion-col class="text-grey">\n\n                                        <span *ngIf="item.nbParticipants <= 1"> {{item.nbParticipants}} Intérêt</span>\n\n                                        <span *ngIf="item.nbParticipants > 1"> {{item.nbParticipants}} Intérêts</span>\n\n                                    </ion-col>\n\n                                </ion-row>\n\n                            </div>\n\n\n\n                            <ion-row text-center>\n\n                                <ion-col col-4 (click)=\'showComment(item)\'>\n\n                                    <span class="disociate-actions" ><img class="news-comment-action dissociate-comment" src="assets/imgs/icons/comments.png"></span>\n\n                                </ion-col>\n\n\n\n                                <ion-col col-4>\n\n                                    <img alt="NOUS-Ensemble" class="news-comment-action agenda-icons icons-stars"  *ngIf="item.isParticipated" (click)="cancelParticipation(item)"\n\n                                        src="assets/imgs/icons/star-full.png">\n\n                                    <img alt="NOUS-Ensemble" class="news-comment-action agenda-icons icons-stars"  *ngIf="!item.isParticipated" (click)="showHidePutAgenda(item)"\n\n                                        src="assets/imgs/icons/star-empty.png">\n\n                                </ion-col>\n\n                                <ion-col col-4 (click)="showHideContactBar(item.id);" style="float:left;">\n\n                                    <img alt="NOUS-Ensemble" class="news-comment-action agenda-icons icons-contact-merchant" src="assets/imgs/contact-merchant.png" style="float: left">\n\n                                </ion-col>\n\n                            </ion-row>\n\n\n\n\n\n\n\n                        </ion-card-content>\n\n                    </ion-card>\n\n\n\n\n\n                </div>\n\n                <ion-col col-12 text-center *ngIf="itemsDates.length == 0">\n\n                    <p text-center class="no-result"> Pas de résultat correspondant à votre filtre.</p>\n\n                </ion-col>\n\n\n\n            </ion-row>\n\n            <ion-infinite-scroll (ionInfinite)="doInfinite($event)" *ngIf="loaderShow" threshold="100px">\n\n                <ion-infinite-scroll-content loadingSpinner="bubbles" loadingText="Charger plus...">\n\n                </ion-infinite-scroll-content>\n\n            </ion-infinite-scroll>\n\n        </ion-grid>\n\n\n\n    </div>\n\n    <div class="div-right" text-left>\n\n        <img class="publish" src="assets/imgs/icons/image37.png" (click)="publish()">\n\n    </div>\n\n</ion-content>'/*ion-inline-end:"D:\celaneo\mobile\new-mobile\test\src\pages\good-plan\goodplan.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_2__providers_globals_globals__["a" /* GlobalsProvider */],
            __WEBPACK_IMPORTED_MODULE_3__providers_user_user__["a" /* UserProvider */],
            __WEBPACK_IMPORTED_MODULE_12__providers_goodplanrest_goodplanrest__["a" /* GoodplanrestProvider */],
            __WEBPACK_IMPORTED_MODULE_4__providers_eventsrest_eventsrest__["a" /* EventsrestProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["x" /* Platform */],
            __WEBPACK_IMPORTED_MODULE_10__ionic_native_camera__["a" /* Camera */],
            __WEBPACK_IMPORTED_MODULE_9__providers_comment_comment__["a" /* CommentProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_5__ionic_native_google_analytics__["a" /* GoogleAnalytics */],
            __WEBPACK_IMPORTED_MODULE_7__ionic_native_calendar__["a" /* Calendar */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_11__ionic_native_social_sharing__["a" /* SocialSharing */],
            __WEBPACK_IMPORTED_MODULE_14__providers_cache_cache__["a" /* CacheProvider */],
            __WEBPACK_IMPORTED_MODULE_16__ionic_native_file__["a" /* File */],
            __WEBPACK_IMPORTED_MODULE_17__ionic_native_in_app_browser__["a" /* InAppBrowser */],
            __WEBPACK_IMPORTED_MODULE_18__providers_community_community__["a" /* CommunityProvider */], __WEBPACK_IMPORTED_MODULE_19__ionic_native_downloader__["a" /* Downloader */]])
    ], GoodPlanPage);
    return GoodPlanPage;
}());

//# sourceMappingURL=goodplan.js.map

/***/ }),

/***/ 56:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return DetailArticlePage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_comment_comment__ = __webpack_require__(22);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_article_article__ = __webpack_require__(31);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_globals_globals__ = __webpack_require__(8);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__pages_create_merchant_create_merchant__ = __webpack_require__(77);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__pages_news_news__ = __webpack_require__(35);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__pages_my_space_my_space__ = __webpack_require__(62);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__pages_agenda_agenda__ = __webpack_require__(79);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__ionic_native_camera__ = __webpack_require__(29);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__providers_eventsrest_eventsrest__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__ionic_native_social_sharing__ = __webpack_require__(46);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__providers_cache_cache__ = __webpack_require__(47);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__ionic_native_in_app_browser__ = __webpack_require__(70);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__ionic_native_file__ = __webpack_require__(71);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__ionic_native_downloader__ = __webpack_require__(48);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__providers_files_files__ = __webpack_require__(108);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


















/**
 * Generated class for the DetailArticlePage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var DetailArticlePage = /** @class */ (function () {
    function DetailArticlePage(event, articleService, commentService, navCtrl, modal, navParams, appEvents, loader, myAlert, myModal, serviceEvent, loadingCtrl, alertCtrl, toastCtrl, camera, actionSheetCtrl, appGlobals, platform, socialsharing, cacheService, file, inAppBrowser, downloader, filesProvider) {
        var _this = this;
        this.event = event;
        this.articleService = articleService;
        this.commentService = commentService;
        this.navCtrl = navCtrl;
        this.modal = modal;
        this.navParams = navParams;
        this.appEvents = appEvents;
        this.loader = loader;
        this.myAlert = myAlert;
        this.myModal = myModal;
        this.serviceEvent = serviceEvent;
        this.loadingCtrl = loadingCtrl;
        this.alertCtrl = alertCtrl;
        this.toastCtrl = toastCtrl;
        this.camera = camera;
        this.actionSheetCtrl = actionSheetCtrl;
        this.appGlobals = appGlobals;
        this.platform = platform;
        this.socialsharing = socialsharing;
        this.cacheService = cacheService;
        this.file = file;
        this.inAppBrowser = inAppBrowser;
        this.downloader = downloader;
        this.filesProvider = filesProvider;
        this.commentsItem = [];
        this.items = [];
        this.numberComments = 0;
        this.toggled = false;
        this.toggledReply = false;
        this.restNumbreComment = 0;
        this.restNumbreReplie = 0;
        this.commentNumber = 0;
        this.showEditComment = false;
        this.comment = {
            content: '',
            photo: null,
            document: null
        };
        this.editComment = {
            id: '',
            content: ''
        };
        this.showReply = false;
        this.reply = {
            comment: null,
            content: '',
            photo: null,
            document: null
        };
        this.page = 0;
        this.appGlobals.showHeader = false;
        this.event.publish('user:current');
        this.idUsers = JSON.parse(localStorage.getItem("tableUser"));
        this.currentUser = JSON.parse(localStorage.getItem("currentUser"));
        this.showPush = navParams.get('pushNotification');
        this.showComments = navParams.get('showComments');
        this.comment_allowed = navParams.get('allowComment');
        if (navParams.get('article') && this.showComments) {
            this.currentArticle = navParams.get('article');
            this.numberComments = navParams.get('numberComments');
            this.comments = navParams.get('comment');
            for (var _i = 0, _a = this.comments; _i < _a.length; _i++) {
                var com = _a[_i];
                this.commentsItem.push(com);
            }
            this.items.push(this.currentArticle);
            this.articleId = this.currentArticle.id;
            this.countComment();
            this.platform.ready().then(function () {
                var label = 'detail-article__' + _this.currentArticle.id;
                _this.appEvents.publish("googleAnalytics", label);
            });
        }
        else if (navParams.get('article') && !this.showComments) {
            this.currentArticle = navParams.get('article');
            this.articleId = this.currentArticle.id;
            this.numberComments = this.currentArticle.nbreComments;
            this.loadArticleComment(this.articleId);
            this.platform.ready().then(function () {
                var label = 'detail-article__' + _this.currentArticle.id;
                _this.appEvents.publish("googleAnalytics", label);
            });
        }
        else {
            this.articleId = navParams.get('articleId');
            this.loadArticle(this.articleId);
        }
    }
    DetailArticlePage.prototype.handleSelection = function (event) {
        this.comment.content = this.comment.content + " " + event.char;
    };
    DetailArticlePage.prototype.handleReply = function (event) {
        this.reply.content = this.reply.content + " " + event.char;
    };
    DetailArticlePage.prototype.countComment = function () {
        this.commentNumber = this.commentNumber + this.comments.length;
        for (var _i = 0, _a = this.comments; _i < _a.length; _i++) {
            var com = _a[_i];
            this.restNumbreReplie = this.restNumbreReplie + com.replies.length;
        }
        this.restNumbreComment = this.numberComments - (this.commentNumber + this.restNumbreReplie);
    };
    DetailArticlePage.prototype.moreCountComment = function (comments) {
        this.commentNumber = this.commentNumber + comments.length;
        for (var _i = 0, comments_1 = comments; _i < comments_1.length; _i++) {
            var com = comments_1[_i];
            this.restNumbreReplie = this.restNumbreReplie + com.replies.length;
        }
        if (this.numberComments - (this.commentNumber + this.restNumbreReplie) < 0) {
            this.restNumbreComment = 0;
        }
        else {
            this.restNumbreComment = this.numberComments - (this.commentNumber + this.restNumbreReplie);
        }
    };
    DetailArticlePage.prototype.dupliquer = function (item) {
        var myModal2 = this.modal.create('DupliquerArticlePage', { "article": item, "accountType": "accountType" }, { cssClass: 'style-modal' });
        myModal2.onDidDismiss(function (data) {
        });
        myModal2.present();
    };
    DetailArticlePage.prototype.ShareArticle = function (item) {
        var options = {
            message: item.title + " : " + item.description,
            subject: "NOUS Ensemble",
            image: item.imageURL,
            url: item.imageURL
        };
        if (this.platform.is('cordova')) {
            this.socialsharing.shareWithOptions(options).then(function (data) {
            }).catch(function (error) {
                console.log("Error from sharing" + error);
            });
        }
    };
    DetailArticlePage.prototype.ionViewWillEnter = function () {
        this.appGlobals.showHeader = false;
        this.currentArticle = this.navParams.get('article');
        this.comment_allowed = this.navParams.get('allowComment');
        if (this.currentArticle && this.currentArticle.type == 'community' && !this.currentArticle.addComments) {
            this.appGlobals.showFooter = true;
        }
        else {
            this.appGlobals.showFooter = false;
        }
        if (this.showComments) {
            this.bottom();
        }
    };
    DetailArticlePage.prototype.ionViewWillLeave = function () {
        this.appGlobals.showHeader = true;
        this.appGlobals.showFooter = true;
    };
    DetailArticlePage.prototype.bottom = function () {
        this.content.scrollToBottom();
    };
    /**
     * Ajouter commentaire
     */
    DetailArticlePage.prototype.addComment = function () {
        var _this = this;
        if ((this.comment.content == '') ||
            (this.comment.content == null) ||
            (this.comment.content.length == 0) ||
            (!this.comment.content.replace(/\s/g, '').length)) {
            var errorAlert = this.alertCtrl.create({
                title: "Erreur",
                subTitle: "Vous devez entrer votre commentaire",
                buttons: [
                    {
                        text: 'Fermer',
                        role: 'cancel',
                        handler: function () {
                        }
                    }
                ]
            });
            errorAlert.present();
        }
        else {
            var loadingPopup_1 = this.loadingCtrl.create({});
            loadingPopup_1.present();
            this.commentService.postArticleComment(this.articleId, this.comment).then(function (data) {
                _this.commentsItem = [];
                _this.comment.content = null;
                _this.comment.photo = null;
                _this.comments = data;
                for (var _i = 0, _a = _this.comments; _i < _a.length; _i++) {
                    var com = _a[_i];
                    _this.commentsItem.push(com);
                }
                _this.currentArticle.nbreComments++;
                _this.numberComments++;
                _this.refreshItem(_this.currentArticle);
                loadingPopup_1.dismiss();
                setTimeout(function () {
                    _this.content.scrollToBottom();
                });
            }, function (err) {
                loadingPopup_1.dismiss();
                _this.event.publish('http:errors', err);
            });
        }
    };
    DetailArticlePage.prototype.refreshItem = function (item) {
        this.cacheService.refreshItem(item, 'news.articles');
    };
    /**
     * Afficher alert pour répondre à un commentaire
     */
    DetailArticlePage.prototype.showReplyForm = function (comment) {
        this.showReply = !this.showReply;
        this.reply.comment = comment.id;
    };
    DetailArticlePage.prototype.deleteComment = function (comment) {
        var _this = this;
        var loadingPopup = this.loadingCtrl.create({});
        loadingPopup.present();
        this.commentService.deleteArticleComment(comment.id).then(function (data) {
            var label = 'commentDeleted-' + comment.id;
            _this.event.publish("googleAnalytics", label);
            _this.commentsItem = [];
            _this.page = 0;
            _this.comments = data;
            for (var _i = 0, _a = _this.comments; _i < _a.length; _i++) {
                var com = _a[_i];
                _this.commentsItem.push(com);
            }
            _this.numberComments--;
            _this.currentArticle.nbreComments--;
            _this.refreshItem(_this.currentArticle);
            loadingPopup.dismiss();
            setTimeout(function () {
                _this.content.scrollToBottom();
            });
            var toast = _this.toastCtrl.create({
                message: 'Commentaire supprimé avec succès.',
                duration: 3000,
                position: 'top'
            });
            toast.present();
        }, function (err) {
            _this.event.publish('http:errors', err);
        });
    };
    /**
     * supprimer une réponse sur un commentaire
     */
    DetailArticlePage.prototype.deleteReplyComment = function (comment) {
        var _this = this;
        this.commentService.deleteArticleCommentReply(comment.id).then(function (data) {
            _this.commentsItem = [];
            _this.page = 0;
            _this.loadComments(_this.articleId);
            setTimeout(function () {
                _this.content.scrollToBottom();
            });
            var toast = _this.toastCtrl.create({
                message: 'Commentaire supprimé avec succès.',
                duration: 3000,
                position: 'top'
            });
            toast.present();
        }, function (err) {
            _this.event.publish('http:errors', err);
        });
    };
    DetailArticlePage.prototype.loadComments = function (articleId) {
        var _this = this;
        var loadingPopup = this.loadingCtrl.create({});
        loadingPopup.present();
        this.commentService.getCommentsArticlePagination(articleId, this.page).then(function (data) {
            _this.comments = data;
            _this.commentsItem = [];
            for (var _i = 0, _a = _this.comments; _i < _a.length; _i++) {
                var com = _a[_i];
                _this.commentsItem.push(com);
            }
            _this.numberComments--;
            _this.currentArticle.nbreComments--;
            _this.refreshItem(_this.currentArticle);
            loadingPopup.dismiss();
        }, function (err) {
            _this.event.publish('http:errors', err);
        });
    };
    /**
     * Afficher un alert de confirmation de suppression
     */
    DetailArticlePage.prototype.deleteConfirmation = function (comment) {
        var _this = this;
        var alert = this.alertCtrl.create({
            title: 'Supprimer le commentaire',
            subTitle: 'Voulez-vous vraiment supprimer ce commentaire ?',
            buttons: [
                {
                    text: 'Annuler',
                    role: 'cancel',
                    handler: function () {
                    }
                },
                {
                    text: 'OK',
                    handler: function (data) {
                        _this.deleteComment(comment);
                    }
                }
            ]
        });
        alert.present();
    };
    /**
     * Afficher un alert de confirmation de suppression
     */
    DetailArticlePage.prototype.deleteReplyConfirmation = function (comment) {
        var _this = this;
        var alert = this.alertCtrl.create({
            title: 'Supprimer le commentaire',
            subTitle: 'Voulez-vous vraiment supprimer ce commentaire',
            buttons: [
                {
                    text: 'Annuler',
                    role: 'cancel',
                    handler: function () {
                    }
                },
                {
                    text: 'OK',
                    handler: function (data) {
                        _this.deleteReplyComment(comment);
                    }
                }
            ]
        });
        alert.present();
    };
    DetailArticlePage.prototype.cancelFormEditComment = function () {
        this.showEditComment = false;
        this.editComment.content = this.contentComment;
    };
    DetailArticlePage.prototype.capitalizeData = function (data) {
        return data.charAt(0).toUpperCase() + data.slice(1);
    };
    DetailArticlePage.prototype.like = function (article) {
        var _this = this;
        var loadingPopup = this.loadingCtrl.create({});
        loadingPopup.present();
        this.articleService.like(article.id).then(function () {
            article.isLiked = true;
            article.nbLikes++;
            _this.refreshItem(article);
            loadingPopup.dismiss();
        }, function (err) {
            loadingPopup.dismiss();
            _this.event.publish('http:errors', err);
        });
    };
    DetailArticlePage.prototype.unlike = function (article) {
        var _this = this;
        var loadingPopup = this.loadingCtrl.create({});
        loadingPopup.present();
        this.articleService.unlike(article.id).then(function () {
            article.isLiked = false;
            article.nbLikes--;
            _this.refreshItem(article);
            loadingPopup.dismiss();
        }, function (err) {
            loadingPopup.dismiss();
            _this.event.publish('http:errors', err);
        });
    };
    DetailArticlePage.prototype.createMerchant = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_5__pages_create_merchant_create_merchant__["a" /* CreateMerchantPage */]);
    };
    DetailArticlePage.prototype.news = function () {
        this.navCtrl.setRoot(__WEBPACK_IMPORTED_MODULE_6__pages_news_news__["a" /* NewsPage */]);
    };
    DetailArticlePage.prototype.goBack = function () {
        if (this.showPush) {
            this.navCtrl.setRoot(__WEBPACK_IMPORTED_MODULE_6__pages_news_news__["a" /* NewsPage */]);
        }
        else {
            this.navCtrl.pop();
        }
    };
    DetailArticlePage.prototype.editArticle = function (article, accountType, accountId) {
        var _this = this;
        var myModal2 = this.modal.create('EditPublishPage', { "article": article, "accountType": accountType, "accountId": accountId }, { cssClass: 'style-modal' });
        myModal2.onDidDismiss(function (data) {
            if (data == true) {
                _this.goBack();
            }
            else {
                _this.currentArticle = data;
                _this.articleId = _this.currentArticle.id;
            }
        });
        myModal2.present();
    };
    DetailArticlePage.prototype.mySpace = function () {
        this.navCtrl.setRoot(__WEBPACK_IMPORTED_MODULE_7__pages_my_space_my_space__["a" /* MySpacePage */]);
    };
    DetailArticlePage.prototype.agenda = function () {
        this.navCtrl.setRoot(__WEBPACK_IMPORTED_MODULE_8__pages_agenda_agenda__["a" /* AgendaPage */]);
    };
    DetailArticlePage.prototype.showMoreComments = function () {
        var _this = this;
        this.page++;
        var loadingPopup = this.loadingCtrl.create({});
        loadingPopup.present();
        this.commentService.getCommentsArticlePagination(this.articleId, this.page).then(function (data) {
            _this.comments = data;
            for (var _i = 0, _a = _this.comments; _i < _a.length; _i++) {
                var com = _a[_i];
                _this.commentsItem.push(com);
            }
            _this.moreCountComment(_this.comments);
            loadingPopup.dismiss();
        }, function (err) {
            loadingPopup.dismiss();
            _this.event.publish('http:errors', err);
        });
    };
    DetailArticlePage.prototype.addReplyComment = function () {
        var _this = this;
        if ((this.reply.content == '') ||
            (this.reply.content == null) ||
            (this.reply.content.length == 0) ||
            (!this.reply.content.replace(/\s/g, '').length)) {
            var errorAlert = this.alertCtrl.create({
                title: "Erreur",
                subTitle: "Vous devez entrer votre commentaire",
                buttons: [
                    {
                        text: 'Fermer',
                        role: 'cancel',
                        handler: function () {
                        }
                    }
                ]
            });
            errorAlert.present();
        }
        else {
            var loadingPopup_2 = this.loadingCtrl.create({});
            loadingPopup_2.present();
            this.commentService.postArticleCommentReply(this.reply).then(function (data) {
                _this.page = 0;
                _this.reply.content = null;
                _this.reply.photo = null;
                _this.reply.comment = null;
                _this.showReply = false;
                _this.commentsItem = [];
                _this.commentService.getCommentsArticlePagination(_this.articleId, _this.page).then(function (data) {
                    _this.comments = data;
                    for (var _i = 0, _a = _this.comments; _i < _a.length; _i++) {
                        var com = _a[_i];
                        _this.commentsItem.push(com);
                    }
                    _this.currentArticle.nbreComments++;
                    _this.numberComments++;
                    _this.refreshItem(_this.currentArticle);
                }, function (err) {
                    _this.event.publish('http:errors', err);
                });
                loadingPopup_2.dismiss();
                setTimeout(function () {
                    _this.content.scrollToBottom();
                });
            }, function (err) {
                loadingPopup_2.dismiss();
                _this.event.publish('http:errors', err);
            });
        }
    };
    DetailArticlePage.prototype.loadArticleComment = function (articleId) {
        var _this = this;
        this.commentsItem = [];
        this.commentService.getCommentsArticlePagination(articleId, this.page).then(function (data) {
            _this.comments = data;
            for (var _i = 0, _a = _this.comments; _i < _a.length; _i++) {
                var com = _a[_i];
                _this.commentsItem.push(com);
            }
            _this.countComment();
        }, function (err) {
            _this.event.publish('http:errors', err);
        });
    };
    DetailArticlePage.prototype.loadArticle = function (articleId) {
        var _this = this;
        var loadingPopup = this.loadingCtrl.create({});
        loadingPopup.present();
        this.articleService.getDetailsArticle(articleId).then(function (data) {
            _this.currentArticle = data;
            _this.currentArticle.city = _this.currentArticle.cityName;
            _this.commentsItem = [];
            _this.numberComments = _this.currentArticle.nbreComments;
            _this.platform.ready().then(function () {
                var label = 'detail-article__' + _this.currentArticle.id;
                _this.appEvents.publish("googleAnalytics", label);
            });
            _this.commentService.getCommentsArticlePagination(articleId, _this.page).then(function (data) {
                _this.comments = data;
                for (var _i = 0, _a = _this.comments; _i < _a.length; _i++) {
                    var com = _a[_i];
                    _this.commentsItem.push(com);
                }
                _this.countComment();
                loadingPopup.dismiss();
            }, function (err) {
                _this.event.publish('http:errors', err);
                loadingPopup.dismiss();
            });
        }, function (err) {
            loadingPopup.dismiss();
            _this.event.publish('http:errors', err);
        });
    };
    DetailArticlePage.prototype.presentActionSheet = function (type) {
        var _this = this;
        var actionSheet = this.actionSheetCtrl.create({
            title: 'Sélectionner la source d image',
            buttons: [
                {
                    text: 'Choisir une photo de la bibliothèque',
                    handler: function () {
                        _this.loadImageFromLibrary(type);
                    }
                },
                {
                    text: 'Prendre une photo',
                    handler: function () {
                        _this.takePicture(type);
                    }
                },
                {
                    text: 'Choisir un document (Pdf, Doc, Docx ...)',
                    handler: function () {
                        _this.presentActionSheetDocument(type);
                    }
                },
                {
                    text: 'Annuler',
                    role: 'cancel'
                }
            ]
        });
        actionSheet.present();
    };
    DetailArticlePage.prototype.presentActionSheetDocument = function (type) {
        var _this = this;
        this.filesProvider.presentFileChooser(function (base64) {
            if (type == 'comment') {
                _this.comment.document = base64;
            }
            else {
                _this.reply.document = base64;
            }
        }, function (failure) {
            document.getElementById("fileInput").click();
        });
    };
    DetailArticlePage.prototype.onFileChange = function (event, type) {
        var _this = this;
        var reader = new FileReader();
        if (event.target.files && event.target.files.length > 0) {
            var file = event.target.files[0];
            reader.readAsDataURL(file);
            if (file.size > 5242880) {
                this.filesProvider.generateFileSizeError();
            }
            else {
                reader.onload = function () {
                    var mimeTypeAllowed = _this.filesProvider.allowedMimeType(reader.result);
                    if (mimeTypeAllowed) {
                        if (type == 'comment') {
                            _this.comment.document = reader.result;
                        }
                        else {
                            _this.reply.document = reader.result;
                        }
                    }
                    else {
                        _this.filesProvider.generateMimeTypeError();
                    }
                };
            }
        }
    };
    DetailArticlePage.prototype.takePicture = function (type) {
        var _this = this;
        this.camera.getPicture({
            destinationType: this.camera.DestinationType.DATA_URL,
            quality: 100,
            targetWidth: 600,
            targetHeight: 600,
            allowEdit: true,
            correctOrientation: true,
            encodingType: this.camera.EncodingType.JPEG
        }).then(function (imageData) {
            if (type == 'comment') {
                _this.comment.photo = "data:image/jpeg;base64," + imageData;
            }
            else {
                _this.reply.photo = "data:image/jpeg;base64," + imageData;
            }
        });
    };
    DetailArticlePage.prototype.loadImageFromLibrary = function (type) {
        var _this = this;
        this.camera.getPicture({
            destinationType: this.camera.DestinationType.DATA_URL,
            sourceType: this.camera.PictureSourceType.PHOTOLIBRARY,
            quality: 100,
            targetWidth: 600,
            targetHeight: 600,
            allowEdit: true,
            correctOrientation: true,
            encodingType: this.camera.EncodingType.JPEG
        }).then(function (imageData) {
            if (type == 'comment') {
                _this.comment.photo = "data:image/jpeg;base64," + imageData;
            }
            else {
                _this.reply.photo = "data:image/jpeg;base64," + imageData;
            }
        });
    };
    DetailArticlePage.prototype.deletePhoto = function (type) {
        if (type == 'comment') {
            this.comment.photo = null;
        }
        else {
            this.reply.photo = null;
        }
    };
    DetailArticlePage.prototype.download = function (url) {
        var _this = this;
        var fileName = url.substring(url.lastIndexOf('/') + 1);
        this.platform.ready().then(function () {
            _this.file.externalRootDirectory + '/Download/';
            if (_this.platform.is('android')) {
                var request = {
                    uri: url,
                    title: 'Nous Ensemble',
                    description: fileName,
                    mimeType: '',
                    visibleInDownloadsUi: true,
                    notificationVisibility: __WEBPACK_IMPORTED_MODULE_15__ionic_native_downloader__["b" /* NotificationVisibility */].VisibleNotifyCompleted,
                    destinationInExternalFilesDir: {
                        dirType: 'Downloads',
                        subPath: fileName
                    }
                };
                _this.downloader.download(request)
                    .then(function (location) { return console.log('File downloaded at:' + location); })
                    .catch(function (error) { return console.error(error); });
            }
            else {
                var target = "_system";
                _this.inAppBrowser.create(url, target, "location=no,enableViewportScale=yes");
            }
        });
    };
    DetailArticlePage.prototype.deleteDocument = function (type) {
        if (type == 'comment') {
            this.comment.document = null;
        }
        else {
            this.reply.document = null;
        }
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["ViewChild"])(__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* Content */]),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* Content */])
    ], DetailArticlePage.prototype, "content", void 0);
    DetailArticlePage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-detail-article',template:/*ion-inline-start:"D:\celaneo\mobile\new-mobile\test\src\pages\detail-article\detail-article.html"*/'<!--\n\n  Generated template for the DetailArticlePage page.\n\n\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n\n  Ionic pages and navigation.\n\n-->\n\n<ion-header class="mobile-header MMS" *ngIf="appGlobals.token">\n\n    <ion-grid>\n\n        <ion-row>\n\n            <ion-col col-2 text-left>\n\n                <div class="item">\n\n                    <ion-icon name="ios-arrow-back" (click)="goBack()"></ion-icon>\n\n                </div>\n\n            </ion-col>\n\n            <ion-col col-8 text-center class="page-title">\n\n\n\n                <ion-title></ion-title>\n\n            </ion-col>\n\n            <ion-col col-2>\n\n                <div class="item" text-right *ngIf="currentArticle">\n\n                    <ion-icon name="md-more" float-end *ngIf="idUsers && currentArticle.type == \'association\' && (idUsers.associations.indexOf(currentArticle.associationId) > -1)"\n\n                        (click)="editArticle(currentArticle, currentArticle.type, currentArticle.associationId)"></ion-icon>\n\n                    <ion-icon name="md-more" float-end *ngIf="idUsers && currentArticle.type == \'merchant\' && (idUsers.merchants.indexOf(currentArticle.merchantId) > -1)"\n\n                        (click)="editArticle(currentArticle, currentArticle.type, currentArticle.userId)"></ion-icon>\n\n                    <ion-icon name="md-more" float-end *ngIf="idUsers && currentArticle.type == \'user\' && (idUsers.users.indexOf(currentArticle.userId) > -1)"\n\n                        (click)="editArticle(currentArticle, currentArticle.type, currentArticle.merchantId)"></ion-icon>\n\n                </div>\n\n            </ion-col>\n\n        </ion-row>\n\n    </ion-grid>\n\n</ion-header>\n\n\n\n<ion-content no-padding>\n\n    <div class="div-left">\n\n        <div text-center class="back"><img src="assets/imgs/icons/1.png" (click)="goBack()"></div>\n\n    </div>\n\n    <div class="div-center" *ngIf="currentArticle">\n\n        <ion-card>\n\n            <ion-card-content>\n\n                <ion-card-title class="div-title" text-left *ngIf="currentArticle.type == \'association\'">\n\n                    {{currentArticle.associationName | capitalize}}</ion-card-title>\n\n                <ion-card-title class="div-title" text-left *ngIf="currentArticle.type == \'merchant\'">\n\n                    {{currentArticle.merchantName | capitalize}}</ion-card-title>\n\n                <ion-card-title class="div-title" text-left *ngIf="currentArticle.type == \'community\'"> {{currentArticle.community | capitalize}}\n\n                </ion-card-title>\n\n                <ion-card-title class="div-title" text-left *ngIf="currentArticle.type == \'survey\'"> {{currentArticle.community | capitalize}}\n\n                </ion-card-title>\n\n                <ion-card-title class="div-title" text-left *ngIf="currentArticle.userFirstname && currentArticle.type == \'user\'">\n\n                    {{currentArticle.userFirstname | capitalize}} {{currentArticle.userLastname | capitalize}}</ion-card-title>\n\n                <p text-left>\n\n                    <span>\n\n                        {{currentArticle.createAt| amLocale:\'fr\' | amTimeAgo | capitalize}}\n\n                        <span *ngIf="currentArticle.type == \'user\' && currentArticle.city">à {{currentArticle.city}}</span>\n\n                        <span *ngIf="currentArticle.type == \'association\' && currentArticle.city">à\n\n                            {{currentArticle.city}}</span>\n\n                        <span *ngIf="currentArticle.type == \'merchant\' && currentArticle.city">à\n\n                            {{currentArticle.city}}</span>\n\n                        <span *ngIf="currentArticle.type == \'survey\' && currentArticle.city">à\n\n                            {{currentArticle.city}}</span>\n\n                    </span>\n\n                    <img float-end *ngIf="currentArticle.event" class="icon-agenda move img-calendar" src="assets/imgs/icons/calendar.png"\n\n                        alt="NOUS-Ensemble" />\n\n                    <img float-end *ngIf="currentArticle.private" class="move lock-icons" src="assets/imgs/icons/lock.png"\n\n                        alt="NOUS-Ensemble" />\n\n                    <!-- <ion-icon class="icon-agenda move" name="md-calendar" float-end *ngIf="item.event" (click)="detailsEvent(item.event, item.title, false, item.moderateEvent)"></ion-icon> -->\n\n                    <span *ngIf="currentArticle.type == \'community\' && currentArticle.city">à {{currentArticle.city}}</span>\n\n                </p>\n\n\n\n\n\n                <div *ngIf="currentArticle.imageURL || currentArticle.images || currentArticle.videoFile; else elseBlockImg ">\n\n                    <div *ngIf="(currentArticle.imageURL && !currentArticle.images && !currentArticle.videoFile) || (!currentArticle.imageURL && !currentArticle.images && currentArticle.videoFile) || (currentArticle.images && !currentArticle.imageURL && currentArticle.images.length == 1); else elseBlock"\n\n                        class="image home-card-slides">\n\n                        <div *ngIf="currentArticle.imageURL">\n\n                            <img data-src="{{currentArticle.imageURL}}" imageViewer>\n\n                        </div>\n\n                        <div *ngFor="let img of currentArticle.images">\n\n                            <img data-src="{{img.url}}" imageViewer>\n\n                        </div>\n\n                        <video style="width: 100%; height: 100%" *ngIf="currentArticle.videoFile != null" controls poster="assets/img/video_default.png">\n\n                            <source [src]="currentArticle.videoFile" type="video/mp4">\n\n                        </video>\n\n                    </div>\n\n\n\n                    <ng-template #elseBlock>\n\n                        <ion-slides loop="true" pager>\n\n                            <ion-slide *ngIf="currentArticle.videoFile != null">\n\n                                <video style="width: 100%; height: 100%" controls poster="assets/img/video_default.png">\n\n                                    <source [src]="currentArticle.videoFile" type="video/mp4">\n\n                                </video>\n\n                            </ion-slide>\n\n                            <ion-slide class="image home-card-slides" *ngIf="currentArticle.imageURL">\n\n                                <img data-src="{{currentArticle.imageURL}}" imageViewer>\n\n                            </ion-slide>\n\n                            <ion-slide *ngFor="let img of currentArticle.images">\n\n                                <img data-src="{{img.url}}" imageViewer>\n\n                            </ion-slide>\n\n                        </ion-slides>\n\n                    </ng-template>\n\n                </div>\n\n\n\n                <ng-template #elseBlockImg>\n\n                    <ion-slides loop="true" pager>\n\n                        <ion-slide class="image home-card-slides" *ngIf="currentArticle.associationImage">\n\n                            <img data-src="{{currentArticle.associationImage}}" imageViewer>\n\n                        </ion-slide>\n\n                        <ion-slide *ngIf="currentArticle.merchantImage">\n\n                            <img data-src="{{currentArticle.merchantImage}}" imageViewer>\n\n                        </ion-slide>\n\n                    </ion-slides>\n\n                </ng-template>\n\n\n\n                <ion-col col-12>\n\n                    <h5 class="div-title">{{currentArticle.title | capitalize}}</h5>\n\n                    <h6 [innerHtml]="appGlobals.linky(currentArticle.description)|nl2br"></h6>\n\n                </ion-col>\n\n                <ion-col col-12 *ngIf="currentArticle.participantsNbre">\n\n                    <span class="participantsNbre">Nombre de participants : {{currentArticle.participantsNbre}}</span>\n\n                </ion-col>\n\n            </ion-card-content>\n\n            <ion-row  *ngIf="currentArticle.document">\n\n                <ion-col text-center><ion-icon name="attach" (click)="download(currentArticle.document)" style="font-size:40px"></ion-icon></ion-col>\n\n\n\n            </ion-row>\n\n            <div text-center>\n\n                <ion-row class="comment-text-style">\n\n                    <ion-col class="text-grey" *ngIf="currentArticle.addComments">\n\n                        <span  *ngIf="currentArticle.nbreComments <= 1">{{currentArticle.nbreComments}} Commentaire</span>\n\n                        <span  *ngIf="currentArticle.nbreComments > 1">{{currentArticle.nbreComments}} Commentaires</span>\n\n                    </ion-col>\n\n                    <ion-col *ngIf="currentArticle.type != \'community\' || (currentArticle.addComments && currentArticle.type == \'community\' )">\n\n                        <img class="comment-img-style" src="assets/imgs/icons/list-divider.png">\n\n                    </ion-col>\n\n                    <ion-col class="text-grey">\n\n                        <span> {{currentArticle.nbLikes}} J\'aime</span>\n\n                    </ion-col>\n\n                </ion-row>\n\n            </div>\n\n            <ion-row padding-bottom *ngIf="currentArticle.type != \'survey\'">\n\n                <ion-col class="no-padding " *ngIf="currentArticle.addComments" text-right>\n\n                    <span class="disociate-actions" (click)="detailsArticleComment(currentArticle);" ><img class="news-comment-action dissociate-comment" src="assets/imgs/icons/comments.png"></span>\n\n                </ion-col>\n\n\n\n                <ion-col class="no-padding text-center" [class.icon-right]="!currentArticle.addComments && currentArticle.type == \'community\'" text-left>\n\n                    <span *ngIf="!currentArticle.isLiked" class="disociate-actions text-center" (click)="like(currentArticle);"><img class="news-comment-action dissociate-like"\n\n                                                                                                                    src="assets/imgs/icons/dislike.png"></span>\n\n\n\n                    <span *ngIf="currentArticle.isLiked" class="disociate-actions text-center" (click)="unlike(currentArticle);"> <img class="news-comment-action dissociate-like"\n\n                                                                                                                      src="assets/imgs/icons/like.png"></span>\n\n                </ion-col>\n\n\n\n                <ion-col class="no-padding " text-right>\n\n                    <span class="disociate-actions" (click)="ShareArticle(currentArticle);" ><img class="news-comment-action dissociate-share" src="assets/imgs/icons/share.png"></span>\n\n                </ion-col>\n\n\n\n               \n\n                <ion-col   class="no-padding " style="margin-left: -10%;" (click)="dupliquer(currentArticle);" text-left *ngIf="currentArticle.type == \'community\' && (idUsers.communities.indexOf(currentArticle.communityId) > -1)">\n\n                    <ion-icon name="copy" ></ion-icon>\n\n                </ion-col> \n\n                <ion-col   class="no-padding " style="margin-left: -10%;" (click)="dupliquer(currentArticle);" text-left *ngIf="idUsers && currentArticle.type == \'merchant\' && (idUsers.merchants.indexOf(currentArticle.merchantId) > -1)">\n\n                    <ion-icon name="copy" ></ion-icon>\n\n                </ion-col>\n\n                <ion-col   class="no-padding " style="margin-left: -10%;" (click)="dupliquer(currentArticle);" text-left *ngIf="idUsers && currentArticle.type == \'user\' && (idUsers.users.indexOf(currentArticle.userId) > -1)">\n\n                    <ion-icon name="copy" ></ion-icon>\n\n                </ion-col>\n\n                <ion-col   class="no-padding " style="margin-left: -10%;" (click)="dupliquer(currentArticle);" text-left *ngIf="idUsers && currentArticle.type == \'association\' && (idUsers.associations.indexOf(currentArticle.associationId) > -1 )">\n\n                    <ion-icon name="copy" ></ion-icon>\n\n                </ion-col>\n\n\n\n            </ion-row>\n\n        </ion-card>\n\n\n\n        <ion-grid no-padding >\n\n            <div class="custom-div" *ngIf="currentArticle.addComments">\n\n                <div *ngFor="let comment of commentsItem">\n\n                    <div class="comment">\n\n                        <span class="comment-user" *ngIf="comment.type == \'citizen\'" text-capitalize>{{comment.firstname}}\n\n                            {{comment.lastname}}</span>\n\n                        <span class="comment-user" *ngIf="comment.type == \'association\'" text-capitalize>{{comment.associationName}}</span>\n\n                        <span class="comment-user" *ngIf="comment.type == \'merchant\'" text-capitalize>{{comment.merchantName}}</span>\n\n                        <span class="comment-date">{{comment.updateAt| amLocale:\'fr\' | amTimeAgo}}</span>\n\n                        <span class="text-comment" [innerHtml]="appGlobals.linky(comment.content)|nl2br"></span>\n\n\n\n                        \n\n\n\n                        <div class="div-image">\n\n                            <div *ngIf="comment.commentImg" class="image home-card-slides">\n\n                                <div>\n\n                                    <img data-src="{{comment.commentImg}}" imageViewer>\n\n                                </div>\n\n                            </div>\n\n                        </div>\n\n                        <div  *ngIf="comment.document">\n\n                            <ion-icon name="attach" (click)="download(comment.document)" style="font-size:40px"></ion-icon>\n\n\n\n                        </div>\n\n\n\n                        <div col-12 text-right>\n\n                            <span float-left class="delete" (click)="showReplyForm(comment)">Répondre</span>\n\n                            <span float-end class="delete" *ngIf="comment.userId == currentUser.id" (click)="deleteConfirmation(comment)">Supprimer</span>\n\n                        </div>\n\n                    </div>\n\n\n\n                    <div class="answer" *ngFor="let replie of comment.replies">\n\n                        <span class="comment-user" *ngIf="replie.type == \'citizen\'" text-capitalize>{{replie.firstname}}\n\n                            {{replie.lastname}}</span>\n\n                        <span class="comment-user" *ngIf="replie.type == \'association\'" text-capitalize>{{replie.associationName}}</span>\n\n                        <span class="comment-user" *ngIf="replie.type == \'merchant\'" text-capitalize>{{replie.merchantName}}</span>\n\n                        <span class="comment-date"> {{replie.updateAt| amLocale:\'fr\' | amTimeAgo}}</span>\n\n                        <span class="text-comment" [innerHtml]="appGlobals.linky(replie.content)|nl2br"></span>\n\n\n\n                        <div class="div-image">\n\n                            <div *ngIf="replie.commentImg" class="image home-card-slides">\n\n                                <div>\n\n                                    <img data-src="{{replie.commentImg}}" imageViewer>\n\n                                </div>\n\n                            </div>\n\n                        </div>\n\n                        <div  *ngIf="replie.document">\n\n                            <ion-icon name="attach" (click)="download(replie.document)" style="font-size:40px"></ion-icon>\n\n\n\n                        </div>\n\n                        <div col-12 *ngIf="comment.userId == currentUser.id" text-right>\n\n                            <span float-end class="delete" (click)="deleteReplyConfirmation(replie)">Supprimer</span>\n\n                        </div>\n\n                    </div>\n\n                </div>\n\n                <div class="load-comment" *ngIf="currentArticle.nbreComments > 0">\n\n                    <a (click)="showMoreComments()">Tout Afficher ({{restNumbreComment}}) </a>\n\n                </div>\n\n\n\n\n\n                <p class="space-comment" *ngIf="!showReply">\n\n                    <span class="photo-bloc" *ngIf="comment.photo">\n\n                        <img class="photo-comment" data-src="{{comment.photo}}">\n\n                        <ion-icon name="trash" class="icon-delete delete-icon" (click)="deletePhoto(\'comment\');"></ion-icon>\n\n                    </span>\n\n                    <ion-textarea class="comment-zone-footer" [(ngModel)]="comment.content" placeholder="Commenter"\n\n                        text-left>\n\n                    </ion-textarea>\n\n                    <img class="next-icon" src="assets/imgs/icons/icon-photo.png" (click)="presentActionSheet(\'comment\')">\n\n                    <img class="next-icon icon-next" src="assets/imgs/icons/next.png" (click)="addComment()">\n\n                </p>\n\n                <p class="space-comment" *ngIf="showReply">\n\n                    <span class="photo-bloc" *ngIf="reply.photo">\n\n                        <img class="photo-comment" data-src="{{reply.photo}}">\n\n                        <ion-icon name="trash" class="icon-delete delete-icon" (click)="deletePhoto(\'reply\');"></ion-icon>\n\n                    </span>\n\n                    <ion-icon float-start name="md-close" class="icon-close" (click)="showReplyForm(comment)"></ion-icon>\n\n                    <ion-textarea class="comment-zone-footer" [(ngModel)]="reply.content" placeholder="Répondre"\n\n                        text-left>\n\n                    </ion-textarea>\n\n                    <img class="next-icon " src="assets/imgs/icons/icon-photo.png" (click)="presentActionSheet(\'reply\')">\n\n                    <img class="next-icon icon-next" src="assets/imgs/icons/next.png" (click)="addReplyComment()">\n\n\n\n                </p>\n\n                <div class="clear"></div>\n\n\n\n            </div>\n\n        </ion-grid>\n\n    </div>\n\n    <div class="div-right"></div>\n\n</ion-content>\n\n<ion-footer class="footer-comment-photo footer-desktop" *ngIf="appGlobals.token && (comment.photo || reply.photo || comment.document || reply.document) ">\n\n\n\n    <div class="footer-comment-item" *ngIf="!showReply">\n\n	    <div text-center>\n\n	        <div class="photo-bloc" style="position: absolute; width: 40px; top: 28px; left: 5px; margin-left: 0;" *ngIf="comment.photo">\n\n	            <img class="photo-comment" style="" data-src="{{comment.photo}}">\n\n	            <ion-icon name="trash" class="icon-delete delete-icon" (click)="deletePhoto(\'comment\');"></ion-icon>\n\n	        </div>\n\n	        <div class="photo-bloc" *ngIf="comment.document">\n\n	            <img class="photo-comment" src="assets/imgs/icons/doc-icon.png">\n\n	            <ion-icon name="trash" class="icon-delete delete-icon" (click)="deleteDocument(\'comment\');"></ion-icon>\n\n	        </div>\n\n	        <ion-textarea style="margin-left: 33px;" item-start autocomplete="true" class="comment-zone" [(ngModel)]="comment.content" placeholder="Commenter" text-left>\n\n	        </ion-textarea>\n\n	        <button  class="icon-comment" style="padding-top: 12px;" ion-button clear icon-only (click)="toggled = !toggled"\n\n	        [(emojiPickerIf)]="toggled" [emojiPickerDirection]="\'top\'"\n\n	        (emojiPickerSelect)="handleSelection($event)">\n\n	        😃\n\n	        </button>\n\n	        <img class="icon-comment" src="assets/imgs/icons/icon-photo.png" (click)="presentActionSheet(\'comment\')">\n\n	        <img class="icon-comment icon-next" src="assets/imgs/icons/next.png" (click)="addComment()">\n\n	        <input type="file" id="fileInput" (change)="onFileChange($event,\'comment\')" >\n\n	    </div>\n\n    </div>\n\n\n\n    <div class="footer-comment-item" *ngIf="showReply">\n\n        <div class="photo-bloc" *ngIf="reply.photo">\n\n            <img class="photo-comment" data-src="{{reply.photo}}">\n\n            <ion-icon name="trash" class="icon-delete delete-icon" (click)="deletePhoto(\'reply\');"></ion-icon>\n\n        </div>\n\n        <div class="photo-bloc" *ngIf="reply.document">\n\n            <img class="photo-comment" src="assets/imgs/icons/doc-icon.png">\n\n            <ion-icon name="trash" class="icon-delete delete-icon" (click)="deleteDocument(\'reply\');"></ion-icon>\n\n        </div>\n\n        <ion-icon float-start name="md-close" class="icon-close" (click)="showReplyForm(comment)"></ion-icon>\n\n        <ion-textarea item-center autocomplete="true" class="comment-zone" [(ngModel)]="reply.content" placeholder="Répondre" text-left>\n\n        </ion-textarea>\n\n        <img class="icon-comment" src="assets/imgs/icons/icon-photo.png" (click)="presentActionSheet(\'reply\')">\n\n        <img class="icon-comment icon-next" src="assets/imgs/icons/next.png" (click)="addReplyComment()">\n\n        <input type="file" id="fileInput" (change)="onFileChange($event,\'reply\')" >\n\n    </div>\n\n\n\n\n\n</ion-footer>\n\n<ion-footer class="footer-comment footer-desktop" *ngIf="(appGlobals.token && !comment.photo) && (appGlobals.token && !reply.photo) && (appGlobals.token && !comment.document) && (appGlobals.token && !reply.document)">\n\n\n\n    <div class="footer-comment-item" *ngIf="!showReply">\n\n        <div text-center>\n\n           \n\n           \n\n            <ion-textarea item-start autocomplete="true" class="comment-zone" [(ngModel)]="comment.content" placeholder="Commenter " text-left>\n\n            </ion-textarea>\n\n            <button  class="icon-comment" style="padding-top: 12px;" ion-button clear icon-only (click)="toggled = !toggled"\n\n            [(emojiPickerIf)]="toggled" [emojiPickerDirection]="\'top\'"\n\n            (emojiPickerSelect)="handleSelection($event)">\n\n            😃\n\n            </button>\n\n            <img class="icon-comment" src="assets/imgs/icons/icon-photo.png" (click)="presentActionSheet(\'comment\')">\n\n            <img class="icon-comment icon-next" src="assets/imgs/icons/next.png" (click)="addComment()">\n\n            <input type="file" id="fileInput" (change)="onFileChange($event, \'comment\')" >\n\n        </div>\n\n    </div>\n\n\n\n    <div class="footer-comment-item" *ngIf="showReply">\n\n        <ion-icon float-start name="md-close" class="icon-close" (click)="showReplyForm(comment)"></ion-icon>\n\n        \n\n        <ion-textarea item-center autocomplete="true" class="comment-zone-reply" [(ngModel)]="reply.content" placeholder="Répondre" text-left>\n\n        </ion-textarea>\n\n        <button  class="icon-comment" style="padding-top: 12px;" ion-button clear icon-only (click)="toggledReply = !toggledReply"\n\n                [(emojiPickerIf)]="toggledReply" [emojiPickerDirection]="\'top\'"\n\n                (emojiPickerSelect)="handleReply($event)">\n\n                😃\n\n                </button>\n\n        <img class="icon-comment" src="assets/imgs/icons/icon-photo.png" (click)="presentActionSheet(\'reply\')">\n\n        <img class="icon-comment icon-next" src="assets/imgs/icons/next.png" (click)="addReplyComment()">\n\n        <input type="file" id="fileInput" (change)="onFileChange($event,\'reply\')" >\n\n    </div>\n\n\n\n\n\n</ion-footer>'/*ion-inline-end:"D:\celaneo\mobile\new-mobile\test\src\pages\detail-article\detail-article.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_3__providers_article_article__["a" /* ArticleProvider */],
            __WEBPACK_IMPORTED_MODULE_2__providers_comment_comment__["a" /* CommentProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_10__providers_eventsrest_eventsrest__["a" /* EventsrestProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["z" /* ToastController */],
            __WEBPACK_IMPORTED_MODULE_9__ionic_native_camera__["a" /* Camera */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["a" /* ActionSheetController */],
            __WEBPACK_IMPORTED_MODULE_4__providers_globals_globals__["a" /* GlobalsProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["x" /* Platform */],
            __WEBPACK_IMPORTED_MODULE_11__ionic_native_social_sharing__["a" /* SocialSharing */],
            __WEBPACK_IMPORTED_MODULE_12__providers_cache_cache__["a" /* CacheProvider */],
            __WEBPACK_IMPORTED_MODULE_14__ionic_native_file__["a" /* File */],
            __WEBPACK_IMPORTED_MODULE_13__ionic_native_in_app_browser__["a" /* InAppBrowser */],
            __WEBPACK_IMPORTED_MODULE_15__ionic_native_downloader__["a" /* Downloader */],
            __WEBPACK_IMPORTED_MODULE_16__providers_files_files__["a" /* FilesProvider */]])
    ], DetailArticlePage);
    return DetailArticlePage;
}());

//# sourceMappingURL=detail-article.js.map

/***/ }),

/***/ 566:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return SurveyProvider; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_http__ = __webpack_require__(25);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_rxjs_add_operator_map__ = __webpack_require__(27);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_rxjs_add_operator_map___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_rxjs_add_operator_map__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__app_config__ = __webpack_require__(28);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




/*
  Generated class for the CreateMerchantProvider provider.

  See https://angular.io/docs/ts/latest/guide/dependency-injection.html
  for more info on providers and Angular 2 DI.
*/
var SurveyURL = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + 'survey/';
var SurveyProvider = /** @class */ (function () {
    function SurveyProvider(http) {
        this.http = http;
    }
    SurveyProvider.prototype.postSurvey = function (id, data, questions, community) {
        var url = SurveyURL + 'new?NousEnsembleToken=' + localStorage.getItem("token");
        var body = JSON.stringify({
            title: data.title,
            photo: data.photo,
            photos: data.photos,
            photo2: data.secondPhoto,
            photo3: data.thirdPhoto,
            sondage: data.sondage,
            questions: questions,
            community: community
        });
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    SurveyProvider.prototype.postAnswerSurvey = function (id, currentArticle) {
        var url = SurveyURL + 'addResponse?NousEnsembleToken=' + localStorage.getItem("token");
        var body = JSON.stringify({
            idResponse: id,
            currentArticle: currentArticle
        });
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    SurveyProvider = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Injectable"])(),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__angular_http__["c" /* Http */]])
    ], SurveyProvider);
    return SurveyProvider;
}());

//# sourceMappingURL=survey.js.map

/***/ }),

/***/ 568:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
Object.defineProperty(__webpack_exports__, "__esModule", { value: true });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_platform_browser_dynamic__ = __webpack_require__(569);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__app_module__ = __webpack_require__(677);



// this is the magic wand
Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["enableProdMode"])();
Object(__WEBPACK_IMPORTED_MODULE_0__angular_platform_browser_dynamic__["a" /* platformBrowserDynamic */])().bootstrapModule(__WEBPACK_IMPORTED_MODULE_2__app_module__["a" /* AppModule */]);
//# sourceMappingURL=main.js.map

/***/ }),

/***/ 62:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return MySpacePage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_rxjs_add_operator_map__ = __webpack_require__(27);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_rxjs_add_operator_map___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_rxjs_add_operator_map__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_user_user__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_globals_globals__ = __webpack_require__(8);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__pages_news_news__ = __webpack_require__(35);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__pages_create_merchant_create_merchant__ = __webpack_require__(77);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__pages_agenda_agenda__ = __webpack_require__(79);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__pages_space_asso_merch_space_asso_merch__ = __webpack_require__(470);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__pages_create_association_create_association__ = __webpack_require__(482);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__pages_notification_notification__ = __webpack_require__(483);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__pipes_orderby_orderby__ = __webpack_require__(484);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__pages_parameter_parameter__ = __webpack_require__(485);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__practical_information_practical_information__ = __webpack_require__(487);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__pages_my_town_hall_my_town_hall__ = __webpack_require__(208);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__pages_help_help__ = __webpack_require__(206);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__providers_eventsrest_eventsrest__ = __webpack_require__(9);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};

















/**
 * Generated class for the MySpacePage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var MySpacePage = /** @class */ (function () {
    function MySpacePage(navCtrl, platform, navParams, userService, appEvent, serviceEvent, appGlobals, loader, myAlert, appEvents, myModal, alertCtrl) {
        var _this = this;
        this.navCtrl = navCtrl;
        this.platform = platform;
        this.navParams = navParams;
        this.userService = userService;
        this.appEvent = appEvent;
        this.serviceEvent = serviceEvent;
        this.appGlobals = appGlobals;
        this.loader = loader;
        this.myAlert = myAlert;
        this.appEvents = appEvents;
        this.myModal = myModal;
        this.alertCtrl = alertCtrl;
        this.choiceAccount = false;
        this.createAccount = false;
        this.list = [];
        this.listAccount = [];
        this.items = [];
        this.nbreNotifications = 0;
        this.currentUser = JSON.parse(localStorage.getItem('currentUser'));
        this.appGlobals.currentPageid = "mySpace";
        this.appGlobals.showHeader = false;
        this.appEvents.publish('refreshNotifications');
        this.appEvents.publish('admin:associations');
        this.appEvents.publish('admin:merchants');
        this.appEvents.publish('member:associations');
        this.appEvents.publish('member:merchants');
        this.appEvents.publish('communities:all');
        this.appEvents.publish('closeFilters');
        this.getAccount();
        this.appEvent.subscribe('refresh:groups', function () {
            _this.list = [];
            _this.getAccount();
        });
        this.appEvent.subscribe('count_notifications', function () {
            _this.nbreNotifications = parseInt(localStorage.getItem("count_notifications"));
        });
    }
    MySpacePage_1 = MySpacePage;
    MySpacePage.prototype.ionViewWillEnter = function () {
        this.appGlobals.currentPageid = "mySpace";
        this.appGlobals.showHeader = false;
        this.appEvent.publish('myspace:refresh');
        this.appEvents.publish('updateFooter');
        if (localStorage.getItem("count_notifications")) {
            this.nbreNotifications = parseInt(localStorage.getItem("count_notifications"));
        }
        this.appGlobals.onNegativeTopSearch = true;
    };
    MySpacePage.prototype.ionViewWillLeave = function () {
        this.appGlobals.showHeader = true;
        this.appGlobals.showFooter = true;
        this.appGlobals.onNegativeTopSearch = false;
    };
    MySpacePage.prototype.createMerchant = function () {
        this.createAccount = false;
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_6__pages_create_merchant_create_merchant__["a" /* CreateMerchantPage */]);
    };
    MySpacePage.prototype.news = function () {
        this.navCtrl.setRoot(__WEBPACK_IMPORTED_MODULE_5__pages_news_news__["a" /* NewsPage */]);
    };
    MySpacePage.prototype.mySpace = function () {
        this.navCtrl.setRoot(MySpacePage_1);
    };
    MySpacePage.prototype.agenda = function () {
        this.navCtrl.setRoot(__WEBPACK_IMPORTED_MODULE_7__pages_agenda_agenda__["a" /* AgendaPage */]);
    };
    MySpacePage.prototype.MyTownHall = function () {
        this.navCtrl.setRoot(__WEBPACK_IMPORTED_MODULE_14__pages_my_town_hall_my_town_hall__["a" /* MyTownHallPage */]);
    };
    MySpacePage.prototype.notification = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_10__pages_notification_notification__["a" /* NotificationPage */]);
    };
    MySpacePage.prototype.getAccount = function () {
        this.associations = JSON.parse(localStorage.getItem("adminAssociations"));
        this.merchants = JSON.parse(localStorage.getItem("adminMerchants"));
        this.memberAssociations = JSON.parse(localStorage.getItem("adherentAssociations"));
        this.memberMerchants = JSON.parse(localStorage.getItem("adherentMerchants"));
        this.linkedCommunities = JSON.parse(localStorage.getItem("allCommunities"));
        for (var _i = 0, _a = this.associations; _i < _a.length; _i++) {
            var association = _a[_i];
            this.list.push(association);
        }
        for (var _b = 0, _c = this.merchants; _b < _c.length; _b++) {
            var merchant = _c[_b];
            this.list.push(merchant);
        }
        for (var _d = 0, _e = this.memberAssociations; _d < _e.length; _d++) {
            var association = _e[_d];
            this.list.push(association);
        }
        var o = new __WEBPACK_IMPORTED_MODULE_11__pipes_orderby_orderby__["a" /* OrderBy */]();
        this.listAccount = [];
        this.items = o.transform(this.list, ['name']);
        for (var _f = 0, _g = this.items; _f < _g.length; _f++) {
            var it = _g[_f];
            this.listAccount.push(it);
        }
    };
    MySpacePage.prototype.hideChoiceAccount = function () {
        this.choiceAccount = false;
        this.createAccount = true;
    };
    MySpacePage.prototype.showMessage = function () {
        this.createAccount = true;
    };
    MySpacePage.prototype.showCreate = function (type) {
        this.accountType = type;
        this.createAccount = false;
        this.choiceAccount = true;
    };
    MySpacePage.prototype.hideCreateAccount = function () {
        this.createAccount = false;
    };
    MySpacePage.prototype.logOut = function () {
        this.appEvent.publish('user:logout');
    };
    MySpacePage.prototype.calender = function () {
        var errorAlert = this.alertCtrl.create({
            title: "Bientôt!",
            subTitle: "Cette fonctionnalité est en cours de développement.",
            buttons: [
                {
                    text: 'Fermer',
                    role: 'cancel',
                    handler: function () {
                    }
                }
            ]
        });
        errorAlert.present();
    };
    MySpacePage.prototype.espaceAssoMerch = function (account) {
        if (account.moderate == 'accepted') {
            localStorage.setItem('account_role', account.role);
            this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_8__pages_space_asso_merch_space_asso_merch__["a" /* SpaceAssoMerchPage */], {
                account: account
            });
        }
        else {
            var errorAlert = this.alertCtrl.create({
                subTitle: 'Votre compte est en attente de validation',
                buttons: [
                    {
                        text: 'Fermer',
                        role: 'cancel',
                        handler: function () {
                        }
                    }
                ]
            });
            errorAlert.present();
        }
    };
    MySpacePage.prototype.pageCreate = function () {
        if (!this.linkedCommunities || this.linkedCommunities.length == 0) {
            var myModal2 = this.myModal.create('PopupPage', { "message": "<p>Vous devez être lié à une communauté pour créer un groupe / association ou un commerce / partenaire</p>" }, { cssClass: 'message-modal' });
            myModal2.onDidDismiss(function () {
            });
            myModal2.present();
        }
        else {
            this.createAccount = false;
            this.choiceAccount = true;
        }
    };
    MySpacePage.prototype.goToPageFromChoice = function (accountType) {
        if (accountType == 'association') {
            this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_9__pages_create_association_create_association__["a" /* CreateAssociationPage */]);
        }
        else {
            this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_6__pages_create_merchant_create_merchant__["a" /* CreateMerchantPage */]);
        }
    };
    MySpacePage.prototype.searchAccounts = function () {
        this.appGlobals.searchCriteria = {
            key: null,
            theme: null,
            event: false,
            article: false,
            goodplans: false,
            account: true,
            cities: "all"
        };
        this.appGlobals.appSearch = true;
    };
    MySpacePage.prototype.globalSearch = function () {
        this.appGlobals.searchCriteria = {
            key: null,
            theme: null,
            event: true,
            article: true,
            goodplans: true,
            account: true,
            cities: "all"
        };
        this.appGlobals.appSearch = true;
    };
    MySpacePage.prototype.parameter = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_12__pages_parameter_parameter__["a" /* ParameterPage */]);
    };
    MySpacePage.prototype.goto = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_13__practical_information_practical_information__["a" /* PracticalInformationPage */]);
    };
    MySpacePage.prototype.help = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_15__pages_help_help__["a" /* HelpPage */]);
    };
    var MySpacePage_1;
    MySpacePage = MySpacePage_1 = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-my-space',template:/*ion-inline-start:"D:\celaneo\mobile\new-mobile\test\src\pages\my-space\my-space.html"*/'<!--\n\n  Generated template for the MySpacePage page.\n\n\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n\n  Ionic pages and navigation.\n\n-->\n\n\n\n\n\n<ion-header class="mobile-header" *ngIf="appGlobals.token">\n\n    <ion-grid>\n\n        <ion-row>\n\n            <ion-col col-2 text-left>\n\n                <div class="item" (click)="globalSearch()">\n\n                    <img class="icon-search" src="assets/imgs/icons/search.png" alt="NOUS-Ensemble" />\n\n                </div>\n\n            </ion-col>\n\n        </ion-row>\n\n    </ion-grid>\n\n</ion-header>\n\n\n\n\n\n<ion-content>\n\n    <div class="div-left">\n\n\n\n    </div>\n\n    <!--bloc central -->\n\n    <div class="div-center">\n\n        <ion-grid class="no-padding top-grid">\n\n            <ion-row>\n\n                <ion-col text-center class="light-container">\n\n                    <span class="panel-heading" text-capitalize *ngIf="currentUser">{{currentUser.firstname}}\n\n                        {{currentUser.lastname}}</span>\n\n                    <!-- <ion-icon name="ios-settings-outline" class="panel-control pos" (click)="parameter()"></ion-icon> -->\n\n                    <div class="clear"></div>\n\n                    <ion-row class="icon-myspace">\n\n                        <div col-6>\n\n                            <img (click)="parameter()" class="panel-control" src="assets/imgs/icons/profile-settings.png">\n\n                            <div class="clear"></div>\n\n                            <div class="panel-control-details">Réglages</div>\n\n                        </div>\n\n                        <div col-6>\n\n                            <div class="notifications-mySpace-2" *ngIf="appGlobals.nbrNotification != 0"><span>{{appGlobals.nbrNotification}}</span></div>\n\n                            <img (click)="notification()" class="panel-control" src="assets/imgs/icons/notifications.png">\n\n                            <div class="panel-control-details">Notifications</div>\n\n                        </div>\n\n\n\n                        <div class="clear"></div>\n\n                    </ion-row>\n\n                </ion-col>\n\n            </ion-row>\n\n            <div class="clear"></div>\n\n        </ion-grid>\n\n\n\n        <ion-grid class="margin-bottom">\n\n            <ion-row text-center>\n\n                <ion-col col-12 text-center>\n\n                    <h5 class="second-panel-heading">Mes groupes</h5>\n\n                </ion-col>\n\n\n\n                <ion-col col-12 text-center *ngFor="let account of listAccount">\n\n                    <span class="span-admin" *ngIf="account.role == \'superadmin\' || account.role == \'admin\' || (account.type ==\'community\' && account.isAdminPublish)">Admin</span>\n\n                    <span class="span-admin" *ngIf="account.role == \'member\' || (account.type ==\'community\' && !account.isAdminPublish)">Adhérent</span>\n\n                    <button ion-button color="white-color" round class="button-white" text-capitalize no-padding\n\n                        (click)="espaceAssoMerch(account)">\n\n                        <div class="block-image"> <img src="assets/imgs/icons/user_default.png" class="user-img" *ngIf="!account.image_url">\n\n                            <img class="user-img" src="{{account.image_url}}" *ngIf="account.image_url"></div>\n\n                        <div class="block-name">{{account.name}}</div>\n\n                        <div class="block-icon">\n\n                            <ion-icon name="ios-arrow-forward"></ion-icon>\n\n                        </div>\n\n                    </button>\n\n                </ion-col>\n\n                <ion-col col-12 text-center>\n\n                    <img (click)="showMessage()" class="img-add" src="assets/imgs/icons/add.png">\n\n                    <!-- <button ion-button color="white-color" round class="button-whites button-add" (click)="showMessage()" text-capitalize no-padding>\n\n\n\n                    </button> -->\n\n                </ion-col>\n\n                <ion-col col-12 text-center>\n\n                    <button (click)="help()" ion-button color="white-color" round class="button-white" text-center\n\n                        no-padding>\n\n                        <div class="block-image-hidden">\n\n                            <img src="assets/imgs/icons/user_default.png" style="visibility:hidden;" class="user-img">\n\n                        </div>\n\n                        <div class="block-name-help">Aide</div>\n\n                        <div class="block-icon" float-end>\n\n                            <ion-icon float-end name="ios-arrow-forward"></ion-icon>\n\n                        </div>\n\n                    </button>\n\n                </ion-col>\n\n                <!-- <ion-col col-12 text-center>\n\n                    <button (click)="goto()" ion-button color="white-color" round class="button-white" text-center no-padding>\n\n                        <div class="block-image-hidden" >\n\n                            <img src="assets/imgs/icons/user_default.png" style="visibility:hidden;" class="user-img">\n\n                        </div>\n\n                        <div class="block-name-help">Informations pratiques</div>\n\n                        <div class="block-icon" float-end><ion-icon float-end name="ios-arrow-forward"></ion-icon></div>\n\n                    </button>\n\n                </ion-col> -->\n\n\n\n                <ion-col col-12 text-center>\n\n                    <button (click)="logOut()" class="logout" ion-button clear color="primary" icon-start text-center\n\n                        no-padding>\n\n                        <img class="panel-control" src="assets/imgs/icons/logout.png">\n\n                    </button>\n\n                    <div class="clear"></div>\n\n                    <div class="panel-control-details">Déconnexion</div>\n\n                </ion-col>\n\n            </ion-row>\n\n        </ion-grid>\n\n    </div>\n\n    <!-- fin bloc central -->\n\n    <div class="div-right" text-center>\n\n    </div>\n\n</ion-content>\n\n<div class="overlay" *ngIf="choiceAccount" (click)="hideChoiceAccount()"></div>\n\n<div class="registred-new-user" *ngIf="choiceAccount">\n\n    <div class="close-btn" (click)="hideChoiceAccount()">\n\n        <ion-icon name="md-close"></ion-icon>\n\n    </div>\n\n\n\n    <ion-grid class="diplay-contents">\n\n        <ion-row text-center>\n\n            <span class="title-app">Vous souhaitez <br> créer</span>\n\n            <ion-col col-12 text-center>\n\n                <button ion-button color="white-color" class="buttons-whites button-create" text-center no-padding\n\n                    (click)="goToPageFromChoice(\'association\')">\n\n                    <span class="text-button">Un groupe/ <br>association</span>\n\n                </button>\n\n            </ion-col>\n\n            <ion-col col-12 text-center>\n\n                <button ion-button color="white-color" class="buttons-whites button-create" text-center no-padding\n\n                    (click)="goToPageFromChoice(\'merchant\')">\n\n                    <span class="text-button"> Un commerce/ <br>partenaire</span>\n\n                </button>\n\n            </ion-col>\n\n        </ion-row>\n\n    </ion-grid>\n\n\n\n</div>\n\n<div class="overlay" *ngIf="createAccount" (click)="hideCreateAccount()"></div>\n\n<div class="registred-new-user" *ngIf="createAccount">\n\n    <div class="close-btn" (click)="hideCreateAccount()">\n\n        <ion-icon name="md-close"></ion-icon>\n\n    </div>\n\n\n\n    <ion-grid class="diplay-contents">\n\n        <ion-row>\n\n            <span class="app-title"> Groupe/ <br>établissement </span>\n\n            <ion-col col-12 text-center>\n\n\n\n                <button ion-button color="white-color" class="buttons-whites button-create" text-center icon-start\n\n                    (click)="searchAccounts()">\n\n                    <!--<ion-icon name="md-search" class="icon-button"></ion-icon>-->\n\n                    <span class="text-button"> Rejoindre </span>\n\n                </button>\n\n            </ion-col>\n\n            <ion-col col-12 text-center>\n\n                <button ion-button color="white-color" class="buttons-whites button-create" text-center icon-start\n\n                    (click)="pageCreate()">\n\n                    <!--<ion-icon name="md-add" class="icon-button"></ion-icon>-->\n\n                    <span class="text-button"> Créer </span>\n\n                </button>\n\n            </ion-col>\n\n        </ion-row>\n\n    </ion-grid>\n\n</div>'/*ion-inline-end:"D:\celaneo\mobile\new-mobile\test\src\pages\my-space\my-space.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["x" /* Platform */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_3__providers_user_user__["a" /* UserProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_16__providers_eventsrest_eventsrest__["a" /* EventsrestProvider */],
            __WEBPACK_IMPORTED_MODULE_4__providers_globals_globals__["a" /* GlobalsProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */]])
    ], MySpacePage);
    return MySpacePage;
}());

//# sourceMappingURL=my-space.js.map

/***/ }),

/***/ 677:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* unused harmony export intrceptorServiceFactory */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AppModule; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_platform_browser__ = __webpack_require__(59);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__ionic_native_splash_screen__ = __webpack_require__(554);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__ionic_native_status_bar__ = __webpack_require__(555);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__angular_http__ = __webpack_require__(25);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__app_component__ = __webpack_require__(997);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__providers_globals_globals__ = __webpack_require__(8);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__providers_login_login__ = __webpack_require__(211);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__ionic_native_google_analytics__ = __webpack_require__(58);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__ionic_native_push__ = __webpack_require__(107);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__ionic_native_camera__ = __webpack_require__(29);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__ionic_native_call_number__ = __webpack_require__(239);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__ionic_native_geolocation__ = __webpack_require__(492);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__ionic_native_media_capture__ = __webpack_require__(564);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__ionic_native_file__ = __webpack_require__(71);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__ionic_native_file_chooser__ = __webpack_require__(141);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17__ionic_native_file_path__ = __webpack_require__(142);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_18__ionic_native_document_picker__ = __webpack_require__(237);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_19__providers_interceptor_interceptor__ = __webpack_require__(998);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_20__ionic_storage__ = __webpack_require__(496);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_21__ionic_native_badge__ = __webpack_require__(134);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_22__pipes_nl2br_nl2br_module__ = __webpack_require__(999);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_23__pipes_truncate_truncate_module__ = __webpack_require__(1001);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_24_angular2_moment__ = __webpack_require__(567);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_24_angular2_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_24_angular2_moment__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_25__ionic_native_market__ = __webpack_require__(135);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_26__ionic_native_in_app_browser__ = __webpack_require__(70);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_27__pipes_capitalize_capitalize_module__ = __webpack_require__(1002);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_28__pages_home_home__ = __webpack_require__(90);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_29__pages_login_login__ = __webpack_require__(133);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_30__pages_register_first_register_first__ = __webpack_require__(212);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_31__pages_register_last_register_last__ = __webpack_require__(500);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_32__pages_create_association_create_association__ = __webpack_require__(482);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_33__pages_news_news__ = __webpack_require__(35);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_34__pages_create_merchant_create_merchant__ = __webpack_require__(77);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_35__pages_forget_password_forget_password__ = __webpack_require__(497);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_36__pages_search_result_search_result__ = __webpack_require__(556);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_37__pages_detail_article_detail_article__ = __webpack_require__(56);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_38__pages_agenda_agenda__ = __webpack_require__(79);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_39__pages_my_space_my_space__ = __webpack_require__(62);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_40__pages_merchant_sheet_merchant_sheet__ = __webpack_require__(128);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_41__pages_association_sheet_association_sheet__ = __webpack_require__(78);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_42__pages_event_details_event_details__ = __webpack_require__(55);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_43__pages_parameter_parameter__ = __webpack_require__(485);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_44__pages_space_asso_merch_space_asso_merch__ = __webpack_require__(470);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_45__pages_public_profile_public_profile__ = __webpack_require__(471);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_46__pages_notification_notification__ = __webpack_require__(483);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_47__pages_list_article_list_article__ = __webpack_require__(472);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_48__pages_parameter_asso_merch_parameter_asso_merch__ = __webpack_require__(474);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_49__pages_edit_association_edit_association__ = __webpack_require__(475);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_50__pages_edit_merchant_edit_merchant__ = __webpack_require__(476);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_51__pages_delete_citzen_account_first_delete_citzen_account_first__ = __webpack_require__(486);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_52__pages_delete_citzen_account_last_delete_citzen_account_last__ = __webpack_require__(202);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_53__pages_list_event_list_event__ = __webpack_require__(473);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_54__pages_number_number__ = __webpack_require__(207);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_55__pages_number_category_number_category__ = __webpack_require__(131);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_56__pages_association_list_association_list__ = __webpack_require__(489);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_57__pages_merchant_list_merchant_list__ = __webpack_require__(490);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_58__pages_practical_information_practical_information__ = __webpack_require__(487);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_59__pages_contact_contact__ = __webpack_require__(488);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_60__pages_help_help__ = __webpack_require__(206);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_61__pages_rgpd_rgpd__ = __webpack_require__(499);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_62__pages_cgu_cgu__ = __webpack_require__(498);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_63__pages_city_projects_city_projects__ = __webpack_require__(204);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_64__pages_change_su_admin_change_su_admin__ = __webpack_require__(200);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_65__pages_delete_account_delete_account__ = __webpack_require__(201);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_66__pages_map_map__ = __webpack_require__(132);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_67__pages_volunteers_volunteers__ = __webpack_require__(480);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_68__pages_admin_list_admin_list__ = __webpack_require__(477);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_69__pages_add_admin_add_admin__ = __webpack_require__(478);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_70__pages_butalso_butalso__ = __webpack_require__(129);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_71__pages_my_town_hall_my_town_hall__ = __webpack_require__(208);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_72__pages_emergency_phones_emergency_phones__ = __webpack_require__(494);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_73__pages_reprot_problem_reprot_problem__ = __webpack_require__(210);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_74__pages_canteen_menu_canteen_menu__ = __webpack_require__(209);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_75__pages_propose_propose__ = __webpack_require__(495);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_76__pages_communities_communities__ = __webpack_require__(558);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_77__pages_empty_news_empty_news__ = __webpack_require__(106);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_78__pages_dedicated_dedicated__ = __webpack_require__(493);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_79__pages_detail_survey_detail_survey__ = __webpack_require__(198);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_80__pages_list_goodplan_list_goodplan__ = __webpack_require__(199);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_81__pages_edit_community_edit_community__ = __webpack_require__(479);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_82__providers_app_app__ = __webpack_require__(38);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_83__providers_user_user__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_84__providers_files_files__ = __webpack_require__(108);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_85__providers_association_association__ = __webpack_require__(36);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_86__providers_merchant_merchant__ = __webpack_require__(39);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_87__providers_article_article__ = __webpack_require__(31);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_88__providers_eventsrest_eventsrest__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_89__providers_comment_comment__ = __webpack_require__(22);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_90__providers_volunteers_volunteers__ = __webpack_require__(238);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_91__ionic_native_keyboard__ = __webpack_require__(557);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_92__angular_platform_browser_animations__ = __webpack_require__(1004);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_93_ionic_img_viewer__ = __webpack_require__(1006);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_94__ionic_native_downloader__ = __webpack_require__(48);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_95__ionic_native_calendar__ = __webpack_require__(54);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_96__ionic_tools_emoji_picker__ = __webpack_require__(565);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_97__pipes_linkreplace_linkreplace__ = __webpack_require__(930);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_98__pipes_groupitems_groupitems__ = __webpack_require__(197);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_99__pipes_orderby_orderby__ = __webpack_require__(484);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_100__providers_community_community__ = __webpack_require__(40);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_101__providers_goodplanrest_goodplanrest__ = __webpack_require__(72);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_102__pages_good_plan_goodplan__ = __webpack_require__(559);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_103__pages_good_plan_details_good_plan_details__ = __webpack_require__(105);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_104__providers_cache_cache__ = __webpack_require__(47);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_105__pages_adherent_adherent__ = __webpack_require__(481);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_106__pages_merchant_card_merchant_card__ = __webpack_require__(130);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_107__ionic_native_fcm__ = __webpack_require__(136);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_108__angular_common__ = __webpack_require__(74);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_109__ionic_native_social_sharing__ = __webpack_require__(46);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_110__angular_common_locales_fr__ = __webpack_require__(1014);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_111__ionic_native_deeplinks__ = __webpack_require__(560);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_112__pages_moderation_moderation_module__ = __webpack_require__(501);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_113__pages_moderation_moderation__ = __webpack_require__(213);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};














//import {Diagnostic} from "@ionic-native/diagnostic";



//import { IOSFilePicker } from '@ionic-native/file-picker';

//import { FileTransfer, FileUploadOptions, FileTransferObject } from '@ionic-native/file-transfer/ngx';
//import { Crashlytics } from '@ionic-native/fabric';










//Pages import






















































// providers










//plugins



// native plugin



// Pipe









//import { FileOpener } from '@ionic-native/file-opener/ngx';








Object(__WEBPACK_IMPORTED_MODULE_108__angular_common__["i" /* registerLocaleData */])(__WEBPACK_IMPORTED_MODULE_110__angular_common_locales_fr__["a" /* default */]);
function intrceptorServiceFactory(backend, defaultOptions) {
    return new __WEBPACK_IMPORTED_MODULE_19__providers_interceptor_interceptor__["a" /* InterceptorProvider */](backend, defaultOptions);
}
var AppModule = /** @class */ (function () {
    function AppModule() {
    }
    AppModule = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["NgModule"])({
            declarations: [
                __WEBPACK_IMPORTED_MODULE_6__app_component__["a" /* MyApp */],
                __WEBPACK_IMPORTED_MODULE_28__pages_home_home__["a" /* HomePage */],
                __WEBPACK_IMPORTED_MODULE_29__pages_login_login__["a" /* LoginPage */],
                __WEBPACK_IMPORTED_MODULE_30__pages_register_first_register_first__["a" /* RegisterFirstPage */],
                __WEBPACK_IMPORTED_MODULE_31__pages_register_last_register_last__["a" /* RegisterLastPage */],
                __WEBPACK_IMPORTED_MODULE_32__pages_create_association_create_association__["a" /* CreateAssociationPage */],
                __WEBPACK_IMPORTED_MODULE_33__pages_news_news__["a" /* NewsPage */],
                __WEBPACK_IMPORTED_MODULE_34__pages_create_merchant_create_merchant__["a" /* CreateMerchantPage */],
                __WEBPACK_IMPORTED_MODULE_35__pages_forget_password_forget_password__["a" /* ForgetPasswordPage */],
                __WEBPACK_IMPORTED_MODULE_36__pages_search_result_search_result__["a" /* SearchResultPage */],
                __WEBPACK_IMPORTED_MODULE_38__pages_agenda_agenda__["a" /* AgendaPage */],
                __WEBPACK_IMPORTED_MODULE_98__pipes_groupitems_groupitems__["a" /* GroupitemsPipe */],
                __WEBPACK_IMPORTED_MODULE_99__pipes_orderby_orderby__["a" /* OrderBy */],
                __WEBPACK_IMPORTED_MODULE_37__pages_detail_article_detail_article__["a" /* DetailArticlePage */],
                // ModerationPage,
                __WEBPACK_IMPORTED_MODULE_79__pages_detail_survey_detail_survey__["a" /* DetailSurveyPage */],
                __WEBPACK_IMPORTED_MODULE_40__pages_merchant_sheet_merchant_sheet__["a" /* MerchantSheetPage */],
                __WEBPACK_IMPORTED_MODULE_41__pages_association_sheet_association_sheet__["a" /* AssociationSheetPage */],
                __WEBPACK_IMPORTED_MODULE_39__pages_my_space_my_space__["a" /* MySpacePage */],
                __WEBPACK_IMPORTED_MODULE_42__pages_event_details_event_details__["a" /* EventDetailsPage */],
                __WEBPACK_IMPORTED_MODULE_43__pages_parameter_parameter__["a" /* ParameterPage */],
                __WEBPACK_IMPORTED_MODULE_44__pages_space_asso_merch_space_asso_merch__["a" /* SpaceAssoMerchPage */],
                __WEBPACK_IMPORTED_MODULE_45__pages_public_profile_public_profile__["a" /* PublicProfilePage */],
                __WEBPACK_IMPORTED_MODULE_46__pages_notification_notification__["a" /* NotificationPage */],
                __WEBPACK_IMPORTED_MODULE_47__pages_list_article_list_article__["a" /* ListArticlePage */],
                __WEBPACK_IMPORTED_MODULE_48__pages_parameter_asso_merch_parameter_asso_merch__["a" /* ParameterAssoMerchPage */],
                __WEBPACK_IMPORTED_MODULE_49__pages_edit_association_edit_association__["a" /* EditAssociationPage */],
                __WEBPACK_IMPORTED_MODULE_50__pages_edit_merchant_edit_merchant__["a" /* EditMerchantPage */],
                __WEBPACK_IMPORTED_MODULE_81__pages_edit_community_edit_community__["a" /* EditCommunityPage */],
                __WEBPACK_IMPORTED_MODULE_51__pages_delete_citzen_account_first_delete_citzen_account_first__["a" /* DeleteCitzenAccountFirstPage */],
                __WEBPACK_IMPORTED_MODULE_52__pages_delete_citzen_account_last_delete_citzen_account_last__["a" /* DeleteCitzenAccountLastPage */],
                __WEBPACK_IMPORTED_MODULE_53__pages_list_event_list_event__["a" /* ListEventPage */],
                __WEBPACK_IMPORTED_MODULE_80__pages_list_goodplan_list_goodplan__["a" /* ListGoodplanPage */],
                __WEBPACK_IMPORTED_MODULE_54__pages_number_number__["a" /* NumberPage */],
                __WEBPACK_IMPORTED_MODULE_55__pages_number_category_number_category__["a" /* NumberCategoryPage */],
                __WEBPACK_IMPORTED_MODULE_56__pages_association_list_association_list__["a" /* AssociationListPage */],
                __WEBPACK_IMPORTED_MODULE_57__pages_merchant_list_merchant_list__["a" /* MerchantListPage */],
                __WEBPACK_IMPORTED_MODULE_58__pages_practical_information_practical_information__["a" /* PracticalInformationPage */],
                __WEBPACK_IMPORTED_MODULE_59__pages_contact_contact__["a" /* ContactPage */],
                __WEBPACK_IMPORTED_MODULE_60__pages_help_help__["a" /* HelpPage */],
                __WEBPACK_IMPORTED_MODULE_61__pages_rgpd_rgpd__["a" /* RgpdPage */],
                __WEBPACK_IMPORTED_MODULE_62__pages_cgu_cgu__["a" /* CguPage */],
                __WEBPACK_IMPORTED_MODULE_63__pages_city_projects_city_projects__["a" /* CityProjectsPage */],
                __WEBPACK_IMPORTED_MODULE_64__pages_change_su_admin_change_su_admin__["a" /* ChangeSuAdminPage */],
                __WEBPACK_IMPORTED_MODULE_65__pages_delete_account_delete_account__["a" /* DeleteAccountPage */],
                __WEBPACK_IMPORTED_MODULE_66__pages_map_map__["a" /* MapPage */],
                __WEBPACK_IMPORTED_MODULE_67__pages_volunteers_volunteers__["a" /* VolunteersPage */],
                __WEBPACK_IMPORTED_MODULE_68__pages_admin_list_admin_list__["a" /* AdminListPage */],
                __WEBPACK_IMPORTED_MODULE_69__pages_add_admin_add_admin__["a" /* AddAdminPage */],
                __WEBPACK_IMPORTED_MODULE_70__pages_butalso_butalso__["a" /* ButAlsoPage */],
                __WEBPACK_IMPORTED_MODULE_71__pages_my_town_hall_my_town_hall__["a" /* MyTownHallPage */],
                __WEBPACK_IMPORTED_MODULE_72__pages_emergency_phones_emergency_phones__["a" /* EmergencyPhonesPage */],
                __WEBPACK_IMPORTED_MODULE_73__pages_reprot_problem_reprot_problem__["a" /* ReprotProblemPage */],
                __WEBPACK_IMPORTED_MODULE_97__pipes_linkreplace_linkreplace__["a" /* LinkreplacePipe */],
                __WEBPACK_IMPORTED_MODULE_74__pages_canteen_menu_canteen_menu__["a" /* CanteenMenuPage */],
                __WEBPACK_IMPORTED_MODULE_75__pages_propose_propose__["a" /* ProposePage */],
                __WEBPACK_IMPORTED_MODULE_77__pages_empty_news_empty_news__["a" /* EmptyNewsPage */],
                __WEBPACK_IMPORTED_MODULE_76__pages_communities_communities__["a" /* CommunitiesPage */],
                __WEBPACK_IMPORTED_MODULE_78__pages_dedicated_dedicated__["a" /* DedicatedPage */],
                __WEBPACK_IMPORTED_MODULE_102__pages_good_plan_goodplan__["a" /* GoodPlanPage */],
                __WEBPACK_IMPORTED_MODULE_103__pages_good_plan_details_good_plan_details__["a" /* GoodPlanDetailsPage */],
                __WEBPACK_IMPORTED_MODULE_105__pages_adherent_adherent__["a" /* AdherentPage */],
                __WEBPACK_IMPORTED_MODULE_106__pages_merchant_card_merchant_card__["a" /* MerchantCardPage */],
            ],
            imports: [
                __WEBPACK_IMPORTED_MODULE_0__angular_platform_browser__["a" /* BrowserModule */],
                __WEBPACK_IMPORTED_MODULE_5__angular_http__["d" /* HttpModule */],
                __WEBPACK_IMPORTED_MODULE_24_angular2_moment__["MomentModule"],
                __WEBPACK_IMPORTED_MODULE_22__pipes_nl2br_nl2br_module__["a" /* Nl2brModule */],
                __WEBPACK_IMPORTED_MODULE_112__pages_moderation_moderation_module__["ModerationPageModule"],
                __WEBPACK_IMPORTED_MODULE_23__pipes_truncate_truncate_module__["a" /* TruncateModule */],
                __WEBPACK_IMPORTED_MODULE_93_ionic_img_viewer__["a" /* IonicImageViewerModule */],
                __WEBPACK_IMPORTED_MODULE_92__angular_platform_browser_animations__["a" /* BrowserAnimationsModule */],
                __WEBPACK_IMPORTED_MODULE_27__pipes_capitalize_capitalize_module__["a" /* CapitalizeModule */],
                __WEBPACK_IMPORTED_MODULE_96__ionic_tools_emoji_picker__["a" /* EmojiPickerModule */].forRoot(),
                __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["p" /* IonicModule */].forRoot(__WEBPACK_IMPORTED_MODULE_6__app_component__["a" /* MyApp */], {
                    backButtonText: "",
                    scrollPadding: false,
                    scrollAssist: false,
                    autoFocusAssist: false,
                    autocomplete: "on",
                    autocorrect: "on",
                }, {
                    links: [
                        { loadChildren: '../pages/add-participants-nbre/add-participants-nbre.module#AddParticipantsNbrePageModule', name: 'AddParticipantsNbrePage', segment: 'add-participants-nbre', priority: 'low', defaultHistory: [] },
                        { loadChildren: '../pages/add-selected-admin/add-selected-admin.module#AddSelectedAdminPageModule', name: 'AddSelectedAdminPage', segment: 'add-selected-admin', priority: 'low', defaultHistory: [] },
                        { loadChildren: '../pages/choice/choice.module#ChoicePageModule', name: 'ChoicePage', segment: 'choice', priority: 'low', defaultHistory: [] },
                        { loadChildren: '../pages/dupliquer-article/dupliquer-article.module#DupliquerArticlePageModule', name: 'DupliquerArticlePage', segment: 'dupliquer-article', priority: 'low', defaultHistory: [] },
                        { loadChildren: '../pages/dupliquer/dupliquer.module#DupliquerPageModule', name: 'DupliquerPage', segment: 'dupliquer', priority: 'low', defaultHistory: [] },
                        { loadChildren: '../pages/edit-event/edit-event.module#EditEventPageModule', name: 'EditEventPage', segment: 'edit-event', priority: 'low', defaultHistory: [] },
                        { loadChildren: '../pages/edit-publish/edit-publish.module#EditPublishPageModule', name: 'EditPublishPage', segment: 'edit-publish', priority: 'low', defaultHistory: [] },
                        { loadChildren: '../pages/even-comment/even-comment.module#EvenCommentPageModule', name: 'EvenCommentPage', segment: 'even-comment', priority: 'low', defaultHistory: [] },
                        { loadChildren: '../pages/event-dep-info/event-dep-info.module#EventDepInfoPageModule', name: 'EventDepInfoPage', segment: 'event-dep-info', priority: 'low', defaultHistory: [] },
                        { loadChildren: '../pages/interest-details/interest-details.module#InterestDetailsPageModule', name: 'InterestDetailsPage', segment: 'interest-details', priority: 'low', defaultHistory: [] },
                        { loadChildren: '../pages/moderation/moderation.module#ModerationPageModule', name: 'ModerationPage', segment: 'moderation', priority: 'low', defaultHistory: [] },
                        { loadChildren: '../pages/password-community/password-community.module#PasswordCommunityPageModule', name: 'PasswordCommunityPage', segment: 'password-community', priority: 'low', defaultHistory: [] },
                        { loadChildren: '../pages/pop-edit-event/pop-edit-event.module#PopEditEventPageModule', name: 'PopEditEventPage', segment: 'pop-edit-event', priority: 'low', defaultHistory: [] },
                        { loadChildren: '../pages/popin-choice-event/popin-choice-event.module#PopinChoiceEventPageModule', name: 'PopinChoiceEventPage', segment: 'popin-choice-event', priority: 'low', defaultHistory: [] },
                        { loadChildren: '../pages/popin-membership-association/popin-membership-association.module#PopinMembershipAssociationPageModule', name: 'PopinMembershipAssociationPage', segment: 'popin-membership-association', priority: 'low', defaultHistory: [] },
                        { loadChildren: '../pages/popup-ask-room/popup-ask-room.module#PopupAskRoomPageModule', name: 'PopupAskRoomPage', segment: 'popup-ask-room', priority: 'low', defaultHistory: [] },
                        { loadChildren: '../pages/popup-art-duplicate-detail/popup-art-duplicate-detail.module#PopupArtDuplicateDetailPageModule', name: 'PopupArtDuplicateDetailPage', segment: 'popup-art-duplicate-detail', priority: 'low', defaultHistory: [] },
                        { loadChildren: '../pages/popup-even-duplicate-detail/popup-even-duplicate-detail.module#PopupEvenDuplicateDetailPageModule', name: 'PopupEvenDuplicateDetailPage', segment: 'popup-even-duplicate-detail', priority: 'low', defaultHistory: [] },
                        { loadChildren: '../pages/popup/popup.module#PopupPageModule', name: 'PopupPage', segment: 'popup', priority: 'low', defaultHistory: [] },
                        { loadChildren: '../pages/publish/publish.module#PublishPageModule', name: 'PublishPage', segment: 'publish', priority: 'low', defaultHistory: [] },
                        { loadChildren: '../pages/select-city/select-city.module#SelectCityPageModule', name: 'SelectCityPage', segment: 'select-city', priority: 'low', defaultHistory: [] },
                        { loadChildren: '../pages/sondage/sondage.module#SondagePageModule', name: 'SondagePage', segment: 'sondage', priority: 'low', defaultHistory: [] },
                        { loadChildren: '../pages/volunteers-mail/volunteers-mail.module#VolunteersMailPageModule', name: 'VolunteersMailPage', segment: 'volunteers-mail', priority: 'low', defaultHistory: [] }
                    ]
                }),
                __WEBPACK_IMPORTED_MODULE_20__ionic_storage__["a" /* IonicStorageModule */].forRoot(),
            ],
            bootstrap: [__WEBPACK_IMPORTED_MODULE_2_ionic_angular__["n" /* IonicApp */]],
            entryComponents: [
                __WEBPACK_IMPORTED_MODULE_6__app_component__["a" /* MyApp */],
                __WEBPACK_IMPORTED_MODULE_28__pages_home_home__["a" /* HomePage */],
                __WEBPACK_IMPORTED_MODULE_29__pages_login_login__["a" /* LoginPage */],
                __WEBPACK_IMPORTED_MODULE_30__pages_register_first_register_first__["a" /* RegisterFirstPage */],
                __WEBPACK_IMPORTED_MODULE_31__pages_register_last_register_last__["a" /* RegisterLastPage */],
                __WEBPACK_IMPORTED_MODULE_32__pages_create_association_create_association__["a" /* CreateAssociationPage */],
                __WEBPACK_IMPORTED_MODULE_33__pages_news_news__["a" /* NewsPage */],
                __WEBPACK_IMPORTED_MODULE_34__pages_create_merchant_create_merchant__["a" /* CreateMerchantPage */],
                __WEBPACK_IMPORTED_MODULE_35__pages_forget_password_forget_password__["a" /* ForgetPasswordPage */],
                __WEBPACK_IMPORTED_MODULE_36__pages_search_result_search_result__["a" /* SearchResultPage */],
                __WEBPACK_IMPORTED_MODULE_38__pages_agenda_agenda__["a" /* AgendaPage */],
                __WEBPACK_IMPORTED_MODULE_37__pages_detail_article_detail_article__["a" /* DetailArticlePage */],
                __WEBPACK_IMPORTED_MODULE_113__pages_moderation_moderation__["a" /* ModerationPage */],
                __WEBPACK_IMPORTED_MODULE_79__pages_detail_survey_detail_survey__["a" /* DetailSurveyPage */],
                __WEBPACK_IMPORTED_MODULE_40__pages_merchant_sheet_merchant_sheet__["a" /* MerchantSheetPage */],
                __WEBPACK_IMPORTED_MODULE_41__pages_association_sheet_association_sheet__["a" /* AssociationSheetPage */],
                __WEBPACK_IMPORTED_MODULE_39__pages_my_space_my_space__["a" /* MySpacePage */],
                __WEBPACK_IMPORTED_MODULE_42__pages_event_details_event_details__["a" /* EventDetailsPage */],
                __WEBPACK_IMPORTED_MODULE_43__pages_parameter_parameter__["a" /* ParameterPage */],
                __WEBPACK_IMPORTED_MODULE_44__pages_space_asso_merch_space_asso_merch__["a" /* SpaceAssoMerchPage */],
                __WEBPACK_IMPORTED_MODULE_45__pages_public_profile_public_profile__["a" /* PublicProfilePage */],
                __WEBPACK_IMPORTED_MODULE_46__pages_notification_notification__["a" /* NotificationPage */],
                __WEBPACK_IMPORTED_MODULE_47__pages_list_article_list_article__["a" /* ListArticlePage */],
                __WEBPACK_IMPORTED_MODULE_48__pages_parameter_asso_merch_parameter_asso_merch__["a" /* ParameterAssoMerchPage */],
                __WEBPACK_IMPORTED_MODULE_49__pages_edit_association_edit_association__["a" /* EditAssociationPage */],
                __WEBPACK_IMPORTED_MODULE_81__pages_edit_community_edit_community__["a" /* EditCommunityPage */],
                __WEBPACK_IMPORTED_MODULE_50__pages_edit_merchant_edit_merchant__["a" /* EditMerchantPage */],
                __WEBPACK_IMPORTED_MODULE_51__pages_delete_citzen_account_first_delete_citzen_account_first__["a" /* DeleteCitzenAccountFirstPage */],
                __WEBPACK_IMPORTED_MODULE_52__pages_delete_citzen_account_last_delete_citzen_account_last__["a" /* DeleteCitzenAccountLastPage */],
                __WEBPACK_IMPORTED_MODULE_53__pages_list_event_list_event__["a" /* ListEventPage */],
                __WEBPACK_IMPORTED_MODULE_80__pages_list_goodplan_list_goodplan__["a" /* ListGoodplanPage */],
                __WEBPACK_IMPORTED_MODULE_54__pages_number_number__["a" /* NumberPage */],
                __WEBPACK_IMPORTED_MODULE_55__pages_number_category_number_category__["a" /* NumberCategoryPage */],
                __WEBPACK_IMPORTED_MODULE_56__pages_association_list_association_list__["a" /* AssociationListPage */],
                __WEBPACK_IMPORTED_MODULE_57__pages_merchant_list_merchant_list__["a" /* MerchantListPage */],
                __WEBPACK_IMPORTED_MODULE_58__pages_practical_information_practical_information__["a" /* PracticalInformationPage */],
                __WEBPACK_IMPORTED_MODULE_59__pages_contact_contact__["a" /* ContactPage */],
                __WEBPACK_IMPORTED_MODULE_60__pages_help_help__["a" /* HelpPage */],
                __WEBPACK_IMPORTED_MODULE_61__pages_rgpd_rgpd__["a" /* RgpdPage */],
                __WEBPACK_IMPORTED_MODULE_62__pages_cgu_cgu__["a" /* CguPage */],
                __WEBPACK_IMPORTED_MODULE_63__pages_city_projects_city_projects__["a" /* CityProjectsPage */],
                __WEBPACK_IMPORTED_MODULE_64__pages_change_su_admin_change_su_admin__["a" /* ChangeSuAdminPage */],
                __WEBPACK_IMPORTED_MODULE_65__pages_delete_account_delete_account__["a" /* DeleteAccountPage */],
                __WEBPACK_IMPORTED_MODULE_66__pages_map_map__["a" /* MapPage */],
                __WEBPACK_IMPORTED_MODULE_67__pages_volunteers_volunteers__["a" /* VolunteersPage */],
                __WEBPACK_IMPORTED_MODULE_68__pages_admin_list_admin_list__["a" /* AdminListPage */],
                __WEBPACK_IMPORTED_MODULE_69__pages_add_admin_add_admin__["a" /* AddAdminPage */],
                __WEBPACK_IMPORTED_MODULE_70__pages_butalso_butalso__["a" /* ButAlsoPage */],
                __WEBPACK_IMPORTED_MODULE_71__pages_my_town_hall_my_town_hall__["a" /* MyTownHallPage */],
                __WEBPACK_IMPORTED_MODULE_72__pages_emergency_phones_emergency_phones__["a" /* EmergencyPhonesPage */],
                __WEBPACK_IMPORTED_MODULE_73__pages_reprot_problem_reprot_problem__["a" /* ReprotProblemPage */],
                __WEBPACK_IMPORTED_MODULE_74__pages_canteen_menu_canteen_menu__["a" /* CanteenMenuPage */],
                __WEBPACK_IMPORTED_MODULE_75__pages_propose_propose__["a" /* ProposePage */],
                __WEBPACK_IMPORTED_MODULE_77__pages_empty_news_empty_news__["a" /* EmptyNewsPage */],
                __WEBPACK_IMPORTED_MODULE_76__pages_communities_communities__["a" /* CommunitiesPage */],
                __WEBPACK_IMPORTED_MODULE_78__pages_dedicated_dedicated__["a" /* DedicatedPage */],
                __WEBPACK_IMPORTED_MODULE_102__pages_good_plan_goodplan__["a" /* GoodPlanPage */],
                __WEBPACK_IMPORTED_MODULE_103__pages_good_plan_details_good_plan_details__["a" /* GoodPlanDetailsPage */],
                __WEBPACK_IMPORTED_MODULE_105__pages_adherent_adherent__["a" /* AdherentPage */],
                __WEBPACK_IMPORTED_MODULE_106__pages_merchant_card_merchant_card__["a" /* MerchantCardPage */],
            ],
            providers: [
                __WEBPACK_IMPORTED_MODULE_4__ionic_native_status_bar__["a" /* StatusBar */],
                __WEBPACK_IMPORTED_MODULE_3__ionic_native_splash_screen__["a" /* SplashScreen */],
                { provide: __WEBPACK_IMPORTED_MODULE_1__angular_core__["LOCALE_ID"], useValue: "fr-FR" },
                { provide: __WEBPACK_IMPORTED_MODULE_1__angular_core__["ErrorHandler"], useClass: __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["o" /* IonicErrorHandler */] },
                __WEBPACK_IMPORTED_MODULE_7__providers_globals_globals__["a" /* GlobalsProvider */],
                {
                    provide: __WEBPACK_IMPORTED_MODULE_5__angular_http__["c" /* Http */],
                    useFactory: intrceptorServiceFactory,
                    deps: [__WEBPACK_IMPORTED_MODULE_5__angular_http__["f" /* XHRBackend */], __WEBPACK_IMPORTED_MODULE_5__angular_http__["e" /* RequestOptions */]],
                },
                __WEBPACK_IMPORTED_MODULE_83__providers_user_user__["a" /* UserProvider */],
                __WEBPACK_IMPORTED_MODULE_8__providers_login_login__["a" /* LoginProvider */],
                __WEBPACK_IMPORTED_MODULE_85__providers_association_association__["a" /* AssociationProvider */],
                __WEBPACK_IMPORTED_MODULE_86__providers_merchant_merchant__["a" /* MerchantProvider */],
                __WEBPACK_IMPORTED_MODULE_9__ionic_native_google_analytics__["a" /* GoogleAnalytics */],
                __WEBPACK_IMPORTED_MODULE_10__ionic_native_push__["a" /* Push */],
                __WEBPACK_IMPORTED_MODULE_107__ionic_native_fcm__["a" /* FCM */],
                __WEBPACK_IMPORTED_MODULE_111__ionic_native_deeplinks__["a" /* Deeplinks */],
                __WEBPACK_IMPORTED_MODULE_21__ionic_native_badge__["a" /* Badge */],
                __WEBPACK_IMPORTED_MODULE_11__ionic_native_camera__["a" /* Camera */],
                __WEBPACK_IMPORTED_MODULE_95__ionic_native_calendar__["a" /* Calendar */],
                __WEBPACK_IMPORTED_MODULE_87__providers_article_article__["a" /* ArticleProvider */],
                __WEBPACK_IMPORTED_MODULE_88__providers_eventsrest_eventsrest__["a" /* EventsrestProvider */],
                __WEBPACK_IMPORTED_MODULE_104__providers_cache_cache__["a" /* CacheProvider */],
                __WEBPACK_IMPORTED_MODULE_101__providers_goodplanrest_goodplanrest__["a" /* GoodplanrestProvider */],
                __WEBPACK_IMPORTED_MODULE_82__providers_app_app__["a" /* AppProvider */],
                __WEBPACK_IMPORTED_MODULE_89__providers_comment_comment__["a" /* CommentProvider */],
                __WEBPACK_IMPORTED_MODULE_25__ionic_native_market__["a" /* Market */],
                __WEBPACK_IMPORTED_MODULE_82__providers_app_app__["a" /* AppProvider */],
                __WEBPACK_IMPORTED_MODULE_12__ionic_native_call_number__["a" /* CallNumber */],
                __WEBPACK_IMPORTED_MODULE_13__ionic_native_geolocation__["a" /* Geolocation */],
                //FileOpener,
                //Diagnostic,
                __WEBPACK_IMPORTED_MODULE_90__providers_volunteers_volunteers__["a" /* VolunteersProvider */],
                __WEBPACK_IMPORTED_MODULE_91__ionic_native_keyboard__["a" /* Keyboard */],
                __WEBPACK_IMPORTED_MODULE_26__ionic_native_in_app_browser__["a" /* InAppBrowser */],
                __WEBPACK_IMPORTED_MODULE_100__providers_community_community__["a" /* CommunityProvider */],
                __WEBPACK_IMPORTED_MODULE_109__ionic_native_social_sharing__["a" /* SocialSharing */],
                __WEBPACK_IMPORTED_MODULE_104__providers_cache_cache__["a" /* CacheProvider */],
                __WEBPACK_IMPORTED_MODULE_14__ionic_native_media_capture__["a" /* MediaCapture */],
                __WEBPACK_IMPORTED_MODULE_15__ionic_native_file__["a" /* File */],
                __WEBPACK_IMPORTED_MODULE_16__ionic_native_file_chooser__["a" /* FileChooser */],
                __WEBPACK_IMPORTED_MODULE_18__ionic_native_document_picker__["a" /* DocumentPicker */],
                // IOSFilePicker,
                __WEBPACK_IMPORTED_MODULE_17__ionic_native_file_path__["a" /* FilePath */],
                // FileTransfer,
                //FileTransferObject,
                __WEBPACK_IMPORTED_MODULE_94__ionic_native_downloader__["a" /* Downloader */],
                // Crashlytics
                __WEBPACK_IMPORTED_MODULE_84__providers_files_files__["a" /* FilesProvider */],
            ],
        })
    ], AppModule);
    return AppModule;
}());

//# sourceMappingURL=app.module.js.map

/***/ }),

/***/ 72:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return GoodplanrestProvider; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_http__ = __webpack_require__(25);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_rxjs_add_operator_map__ = __webpack_require__(27);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_rxjs_add_operator_map___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_rxjs_add_operator_map__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__app_config__ = __webpack_require__(28);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




/*
  Generated class for the GoodplanrestProvider provider.

  See https://angular.io/docs/ts/latest/guide/dependency-injection.html
  for more info on providers and Angular 2 DI.
*/
var goodPlanURL = __WEBPACK_IMPORTED_MODULE_3__app_config__["e" /* SERVER_URL */] + "goodplan/";
var GoodplanrestProvider = /** @class */ (function () {
    function GoodplanrestProvider(http) {
        this.http = http;
    }
    GoodplanrestProvider.prototype.postGoodPlan = function (type, id, data) {
        var url = goodPlanURL + type + '/' + id + '/new' + '?NousEnsembleToken=' + localStorage.getItem("token");
        var body = JSON.stringify({
            title: data.title,
            photo: data.photo,
            photo2: data.secondPhoto,
            photo3: data.thirdPhoto,
            photos: data.photos,
            place: data.address,
            start_at: data.startDate.fullDate,
            end_at: data.endDate.fullDate,
            description: data.description,
            price: data.price,
            personalized: data.personalized,
            monday: data.monday,
            tuesday: data.tuesday,
            wednesday: data.wednesday,
            thursday: data.thursday,
            friday: data.friday,
            saturday: data.saturday,
            sunday: data.sunday,
            agefrom: data.agefrom,
            ageto: data.ageto,
            lessthansix: data.lessthansix,
            betweensixtwelve: data.betweensixtwelve,
            twelveeighteen: data.twelveeighteen,
            allchildrens: data.allchildrens,
            article_id: data.article,
            push_hour: data.push.hour,
            push_date: data.push.date,
            push_content: data.push.content,
            push_enabled: data.push.enabled,
            city: data.city,
            categories: data.categories,
            private: data.private,
            secondCategories: data.secondCategories,
            secondCommu: data.secondCommu,
            document: data.document,
        });
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    GoodplanrestProvider.prototype.getGoodPlansByUser = function (page, parameters) {
        var url = goodPlanURL + 'good_plans/' + page + '/6' + '?NousEnsembleToken=' + localStorage.getItem("token") + parameters;
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    GoodplanrestProvider.prototype.getDetailsGoodPlan = function (id) {
        var url = goodPlanURL + id + '/details?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    GoodplanrestProvider.prototype.takePart = function (id) {
        var url = goodPlanURL + id + '/takepart?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    GoodplanrestProvider.prototype.cancelTakePart = function (id) {
        var url = goodPlanURL + id + '/canceltakepart?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    GoodplanrestProvider.prototype.sendDemand = function (message, id) {
        var url = goodPlanURL + id + '/contactmerchant?NousEnsembleToken=' + localStorage.getItem("token");
        var body = JSON.stringify({
            message: message
        });
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    GoodplanrestProvider = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Injectable"])(),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__angular_http__["c" /* Http */]])
    ], GoodplanrestProvider);
    return GoodplanrestProvider;
}());

//# sourceMappingURL=goodplanrest.js.map

/***/ }),

/***/ 77:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CreateMerchantPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__providers_merchant_merchant__ = __webpack_require__(39);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_user_user__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__ionic_native_camera__ = __webpack_require__(29);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__providers_globals_globals__ = __webpack_require__(8);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__providers_app_app__ = __webpack_require__(38);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__my_space_my_space__ = __webpack_require__(62);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__Models_merchant__ = __webpack_require__(976);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__providers_eventsrest_eventsrest__ = __webpack_require__(9);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};










/**
 * Generated class for the CreateMerchantPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var CreateMerchantPage = /** @class */ (function () {
    function CreateMerchantPage(event, navCtrl, userService, service, camera, serviceEvent, actionSheetCtrl, toastCtrl, platform, loadingCtrl, alertCtrl, appGlobals, modal, appService) {
        var _this = this;
        this.event = event;
        this.navCtrl = navCtrl;
        this.userService = userService;
        this.service = service;
        this.camera = camera;
        this.serviceEvent = serviceEvent;
        this.actionSheetCtrl = actionSheetCtrl;
        this.toastCtrl = toastCtrl;
        this.platform = platform;
        this.loadingCtrl = loadingCtrl;
        this.alertCtrl = alertCtrl;
        this.appGlobals = appGlobals;
        this.modal = modal;
        this.appService = appService;
        this.lastImage = null;
        this.check = false;
        this.check2 = false;
        this.validateEmail = false;
        this.submited = false;
        this.erreurSiret = false;
        this.merchant = new __WEBPACK_IMPORTED_MODULE_8__Models_merchant__["a" /* Merchant */]();
        this.allCategories = [];
        this.disabledTheme = true;
        this.phoneRegexp = /^(33|0)\d{9}$/;
        this.appGlobals.showHeader = false;
        this.appGlobals.currentPageTitle = "Créer mon commerce/ partenaire";
        this.linkedCommunities = JSON.parse(localStorage.getItem("allCommunities"));
        this.myDate = new Date().toISOString();
        this.today = new Date().toISOString();
        this.userImg = localStorage.getItem("account_photo");
        this.userService.findCategories().then(function (data) {
            _this.categories = data;
        });
        this.cities = this.appGlobals.allCities;
    }
    CreateMerchantPage.prototype.ionViewDidLoad = function () {
        this.appGlobals.currentPageTitle = "Créer mon commerce/ partenaire";
        this.appGlobals.currentPageid = "mySpace";
        this.event.publish('updateFooter');
    };
    CreateMerchantPage.prototype.ionViewWillEnter = function () {
        this.appGlobals.showHeader = false;
    };
    CreateMerchantPage.prototype.ionViewWillLeave = function () {
        this.appGlobals.showHeader = true;
    };
    CreateMerchantPage.prototype.logEvent = function (e) {
        this.check = e._value;
    };
    CreateMerchantPage.prototype.addMerchantForm = function (errorValidation) {
        var _this = this;
        this.submited = true;
        new Promise(function (resolve) {
            _this.service.chekedSiret(0, _this.merchant.getSiret()).then(function (data) {
                _this.checkSiret = data;
                if (!errorValidation && !_this.checkSiret && _this.check) {
                    var loadingPopup_1 = _this.loadingCtrl.create({});
                    loadingPopup_1.present();
                    _this.service.post(_this.merchant).then(function (data) {
                        loadingPopup_1.dismiss();
                        var successAlert = _this.alertCtrl.create({
                            title: 'Succès',
                            subTitle: 'Le compte de votre commerce/partenaire a été créé avec succès',
                            buttons: [
                                {
                                    text: 'OK',
                                    handler: function () {
                                        _this.event.publish('admin:merchants');
                                        _this.navCtrl.setRoot(__WEBPACK_IMPORTED_MODULE_7__my_space_my_space__["a" /* MySpacePage */]);
                                    }
                                }
                            ]
                        });
                        successAlert.present();
                    }, function (err) {
                        loadingPopup_1.dismiss();
                        _this.event.publish('http:errors', err);
                    });
                }
                else {
                    if (_this.checkSiret == true) {
                        _this.erreurSiret = true;
                    }
                    else {
                        _this.erreurSiret = false;
                    }
                    var elements = document.getElementsByClassName('formError');
                    if (elements.length > 0) {
                        var requiredElement = elements[0].parentElement;
                        var yOffset = requiredElement.offsetTop;
                        _this.content.scrollTo(0, yOffset, 2000);
                    }
                }
            });
        });
    };
    CreateMerchantPage.prototype.presentActionSheet = function () {
        var _this = this;
        var actionSheet = this.actionSheetCtrl.create({
            title: 'Sélectionner la source d image',
            buttons: [
                {
                    text: 'Choisir une photo de la bibliothèque',
                    handler: function () {
                        _this.loadImageFromLibrary();
                    }
                },
                {
                    text: 'Prendre une photo',
                    handler: function () {
                        _this.takePicture();
                    }
                },
                {
                    text: 'Annuler',
                    role: 'cancel'
                }
            ]
        });
        actionSheet.present();
    };
    CreateMerchantPage.prototype.takePicture = function () {
        var _this = this;
        this.camera.getPicture({
            destinationType: this.camera.DestinationType.DATA_URL,
            quality: 100,
            targetWidth: 600,
            targetHeight: 600,
            allowEdit: true,
            correctOrientation: true,
            encodingType: this.camera.EncodingType.JPEG
        }).then(function (imageData) {
            _this.merchant.setPhoto("data:image/jpeg;base64," + imageData);
        });
    };
    CreateMerchantPage.prototype.loadImageFromLibrary = function () {
        var _this = this;
        this.camera.getPicture({
            destinationType: this.camera.DestinationType.DATA_URL,
            sourceType: this.camera.PictureSourceType.PHOTOLIBRARY,
            quality: 100,
            targetWidth: 600,
            targetHeight: 600,
            allowEdit: true,
            correctOrientation: true,
            encodingType: this.camera.EncodingType.JPEG
        }).then(function (imageData) {
            _this.merchant.setPhoto("data:image/jpeg;base64," + imageData);
        });
    };
    CreateMerchantPage.prototype.deletePhoto = function () {
        this.merchant.setPhoto(null);
    };
    CreateMerchantPage.prototype.capitalize = function (event, type) {
        if (event) {
            if (type == 'title') {
                this.merchant.setName(event.charAt(0).toUpperCase() + event.slice(1));
            }
            if (type == 'address') {
                this.merchant.setAddress(event.charAt(0).toUpperCase() + event.slice(1));
            }
            if (type == 'timing') {
                this.merchant.setTiming(event.charAt(0).toUpperCase() + event.slice(1));
            }
            if (type == 'description') {
                this.merchant.setDescription(event.charAt(0).toUpperCase() + event.slice(1));
            }
        }
    };
    CreateMerchantPage.prototype.onBlurEmail = function () {
        this.validateEmail = true;
    };
    CreateMerchantPage.prototype.onChangeCity = function (selected) {
        var index = this.cities.findIndex(function (i) { return i.name === selected; });
        this.merchant.setCodePostal(this.cities[index].code);
    };
    CreateMerchantPage.prototype.onChangeCode = function (selected) {
        var index = this.cities.findIndex(function (i) { return i.code == selected; });
        if (index != -1) {
            this.merchant.setCity(this.cities[index].name);
        }
    };
    CreateMerchantPage.prototype.capitalizeData = function (data) {
        return data.charAt(0).toUpperCase() + data.slice(1);
    };
    CreateMerchantPage.prototype.goBack = function () {
        this.navCtrl.pop();
    };
    CreateMerchantPage.prototype.checkFocus = function (element) {
        if (this.platform.is('android')) {
            var requiredElement = element.target.offsetParent.parentElement;
            var yOffset = requiredElement.offsetTop;
            this.content.scrollTo(0, yOffset, 2000);
        }
    };
    CreateMerchantPage.prototype.onChangeCommunity = function () {
        var categories = [];
        this.allCategories = [];
        this.merchant.setCategory(null);
        for (var _i = 0, _a = this.linkedCommunities; _i < _a.length; _i++) {
            var linkedcommu = _a[_i];
            if (this.merchant.getCommunity() == linkedcommu["id"]) {
                categories = linkedcommu["categories"];
            }
        }
        for (var _b = 0, categories_1 = categories; _b < categories_1.length; _b++) {
            var category = categories_1[_b];
            if (category.type == "Thème commerce / partenaire") {
                this.allCategories.push(category);
            }
        }
        this.disabledTheme = this.allCategories.length == 0;
    };
    CreateMerchantPage.prototype.SelectCity = function () {
        var _this = this;
        var myModal2 = this.modal.create('SelectCityPage', {}, { cssClass: 'cities-modal' });
        myModal2.onDidDismiss(function (data) {
            if (data) {
                _this.merchant.setCity(data.name);
            }
        });
        myModal2.present();
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["ViewChild"])(__WEBPACK_IMPORTED_MODULE_2_ionic_angular__["f" /* Content */]),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["f" /* Content */])
    ], CreateMerchantPage.prototype, "content", void 0);
    CreateMerchantPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["Component"])({
            selector: 'page-create-merchant',template:/*ion-inline-start:"D:\celaneo\mobile\new-mobile\test\src\pages\create-merchant\create-merchant.html"*/'<!--\n\n  Generated template for the CreateAssociationPage page.\n\n\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n\n  Ionic pages and navigation.\n\n-->\n\n<ion-header class="mobile-header" *ngIf="appGlobals.token">\n\n    <ion-grid>\n\n        <ion-row>\n\n            <ion-col col-2 text-left>\n\n                <div class="item">\n\n                    <ion-icon name="ios-arrow-back" (click)="goBack()"></ion-icon>\n\n                </div>\n\n            </ion-col>\n\n            <ion-col col-8 text-center class="page-title">\n\n\n\n                <ion-title>{{appGlobals.currentPageTitle}}</ion-title>\n\n            </ion-col>\n\n            <ion-col col-2>\n\n                <div class="item" text-right>\n\n\n\n                </div>\n\n            </ion-col>\n\n        </ion-row>\n\n    </ion-grid>\n\n</ion-header>\n\n<ion-content padding>\n\n    <div class="div-left">\n\n        <div text-right class="back"><img src="assets/imgs/icons/1.png" (click)="goBack()"></div>\n\n    </div>\n\n    <div class="div-center div-margin-top">\n\n        <form (ngSubmit)="addMerchantForm(marchantForm.invalid)" #marchantForm="ngForm">\n\n            <ion-grid>\n\n                <ion-row>\n\n                    <div *ngIf="merchant.photo; else elseBlock" text-center>\n\n                        <img src="{{merchant.photo}}" *ngIf="merchant.photo" (click)="presentActionSheet()">\n\n                        <ion-icon name="trash" class="icon-delete" (click)="deletePhoto();" *ngIf="merchant.photo"></ion-icon>\n\n                    </div>\n\n                </ion-row>\n\n                <ng-template #elseBlock>\n\n                    <ion-col col-12 text-center> <img class="button-img" src="assets/imgs/icons/boutton-white.png"\n\n                            (click)="presentActionSheet()"></ion-col>\n\n                </ng-template>\n\n            </ion-grid>\n\n\n\n            <ion-grid class="padding-horizontal">\n\n\n\n                <ion-row>\n\n                    <ion-col col-12 text-center class="margin-top">\n\n                        <ion-label text-left color="light-black" stacked>Nom du commerce / partenaire</ion-label>\n\n                        <ion-item class="item-input-white" [class.formError]="name.invalid && (name.dirty || submited || name.touched)">\n\n                            <ion-input name="name" type="text" id="name" [(ngModel)]="merchant.name" #name="ngModel"\n\n                                (focus)="checkFocus($event)" (change)="capitalize($event.target.value, \'title\')"\n\n                                required text-capitalize></ion-input>\n\n                        </ion-item>\n\n                        <div class="error-msg" *ngIf="name.invalid && (name.dirty || submited || name.touched)">\n\n                            <span class="error">Champs nom obligatoire</span>\n\n                        </div>\n\n                    </ion-col>\n\n                    <ion-col col-12 text-center>\n\n                        <ion-label text-left color="light-black" stacked>Adresse</ion-label>\n\n                        <ion-item class="item-input-white">\n\n                            <ion-textarea name="address" [(ngModel)]="merchant.address" (focus)="checkFocus($event)"\n\n                                #address="ngModel" (change)="capitalize($event.target.value, \'address\')"></ion-textarea>\n\n                        </ion-item>\n\n                    </ion-col>\n\n                    <ion-col col-12 text-center>\n\n                        <ion-label text-left color="light-black" stacked>Siret</ion-label>\n\n                        <ion-item class="item-input-white " [class.formError]="(siret.invalid && (siret.dirty || submited || siret.touched)) || (erreurSiret && submited) ">\n\n                            <ion-input name="siret" type="tel" [(ngModel)]="merchant.siret" (focus)="checkFocus($event)"\n\n                                       #siret="ngModel" required></ion-input>\n\n                        </ion-item>\n\n                        <div class="error-msg" *ngIf="siret.invalid && (siret.dirty || submited || siret.touched)">\n\n                            <span class="error">Champs siret obligatoire</span>\n\n                        </div>\n\n                        <div class="error-msg" *ngIf="erreurSiret && submited">\n\n                            <span class="error">N° Siret existant</span>\n\n                        </div>\n\n                    </ion-col>\n\n                    <ion-col col-12 text-center>\n\n                        <ion-label text-left class="margin-bottom-ie" color="light-black" stacked>Ville</ion-label>\n\n                        <ion-item class="item-grey no-padding-left" [class.formError]="city.invalid && (city.dirty || submited || city.touched)">\n\n                            <ion-input (click)="SelectCity()"   readonly autocomplete="off" autocorrect="on" name="city" type="text" id="city" placeholder="Ville" [(ngModel)]="merchant.city"\n\n                                #city="ngModel" required></ion-input>\n\n                        </ion-item>\n\n                        <div class="error-msg" *ngIf="city.invalid && (city.dirty || submited || city.touched)">\n\n                            <span class="error">Champs ville obligatoire</span>\n\n                        </div>\n\n                    </ion-col>\n\n                    <ion-col col-12 text-center>\n\n                        <ion-item class="item-input-white no-padding select-not-ie"\n\n                                  [class.formError]="community.invalid && (community.dirty || submited || community.touched)">\n\n                            <ion-select (ionChange)="onChangeCommunity($event)" class="select-white"\n\n                                        required [(ngModel)]="merchant.community"\n\n                                        #community="ngModel" class="select-white no-padding-left"\n\n                                        placeholder="Communauté" name="communaute" submitText="Ok" cancelText="Annuler"\n\n                                        required>\n\n                                <ion-option *ngFor="let community of linkedCommunities" value={{community.id}}>\n\n                                    {{community.name}}\n\n                                </ion-option>\n\n                            </ion-select>\n\n                        </ion-item>\n\n                        <ion-col class="item-input-white no-padding select-ie"\n\n                                 [class.formError]="community.invalid && (community.dirty || submited || community.touched)">\n\n                            <select (ionChange)="onChangeCommunity($event)"\n\n                                    required [(ngModel)]="merchant.community" #community="ngModel"\n\n                                    class="select-white input-select-ie"\n\n                                    placeholder="Communauté" name="community" required>\n\n                                <option *ngFor="let community of linkedCommunities" value={{community.id}}>\n\n                                    {{community.name}}\n\n                                </option>\n\n                            </select>\n\n                        </ion-col>\n\n                        <div class="error-msg"\n\n                             *ngIf="community.invalid && (community.dirty || submited || community.touched)">\n\n                            <span class="error">Champs Communauté obligatoire</span>\n\n                        </div>\n\n                    </ion-col>\n\n                    <ion-col col-12 text-center>\n\n                        <ion-item class="item-input-white no-padding select-not-ie"\n\n                                  [class.formError]="category.invalid && (category.dirty || submited || category.touched)">\n\n                            <ion-select [disabled]="disabledTheme" [required]="!disabledTheme"\n\n                                        class="select-white" placeholder="Thème" name="category"\n\n                                        submitText="Ok"\n\n                                        cancelText="Annuler" [(ngModel)]="merchant.category" #category="ngModel"\n\n                                        required>\n\n                                <ion-option *ngFor="let category of allCategories" value={{category.id}}>\n\n                                    {{category.name}}\n\n                                </ion-option>\n\n                            </ion-select>\n\n                        </ion-item>\n\n                        <ion-col class="item-grey select-ie"\n\n                                 [class.formError]="category.invalid && (category.dirty || submited || category.touched)">\n\n                            <select [disabled]="disabledTheme" [required]="!disabledTheme"\n\n                                    class="select-white input-select-ie"\n\n                                    placeholder="Thème" name="category" [(ngModel)]="merchant.category"\n\n                                    #category="ngModel"\n\n                                    required>\n\n                                <option></option>\n\n                                <option value={{category.id}} *ngFor="let category of allCategories">{{category.name}}\n\n                                </option>\n\n                            </select>\n\n                        </ion-col>\n\n                        <div class="error-msg"\n\n                             *ngIf="category.invalid && (category.dirty || submited || category.touched)">\n\n                            <span class="error">Champs Thèmes obligatoire</span>\n\n                        </div>\n\n                    </ion-col>\n\n                    <ion-col col-12 text-center>\n\n                        <ion-label text-left color="light-black" stacked>Horaires d\'ouverture</ion-label>\n\n                        <ion-item class="item-input-white">\n\n                            <ion-textarea class="textarea-timing" (focus)="checkFocus($event)" type="text" lang="fr"\n\n                                name="timing" [(ngModel)]="merchant.timing" #timing="ngModel" (change)="capitalize($event.target.value, \'timing\')"></ion-textarea>\n\n                        </ion-item>\n\n                    </ion-col>\n\n                    <ion-col col-12 text-center>\n\n                        <ion-label text-left color="light-black" stacked>Téléphone</ion-label>\n\n                        <ion-item class="item-input-white" [class.formError]="phone.invalid && (phone.dirty || submited || phone.touched)">\n\n                            <ion-input name="phone" type="tel" [(ngModel)]="merchant.phone" (focus)="checkFocus($event)"\n\n                                #phone="ngModel" required [pattern]="phoneRegexp"></ion-input>\n\n                        </ion-item>\n\n                        <div class="error-msg" *ngIf="phone.invalid && (phone.dirty || submited || phone.touched)">\n\n                            <span class="error">Champs téléphone obligatoire. Exemple : 0999999999 ou 33999999999</span>\n\n                        </div>\n\n                    </ion-col>\n\n                    <ion-col col-12 text-center>\n\n                        <ion-label text-left color="light-black" stacked>Adresse mail</ion-label>\n\n                        <ion-item class="item-input-white" [class.formError]="email.invalid && (email.dirty || submited || email.touched)">\n\n                            <ion-input name="email" type="email" (focus)="checkFocus($event)" autocapitalize="none"\n\n                                [(ngModel)]="merchant.email" #email="ngModel" (mouseout)="onBlurEmail()" pattern="[a-z0-9!#$%&\'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&\'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?"\n\n                                required></ion-input>\n\n                        </ion-item>\n\n                        <div class="error-msg" *ngIf="email.invalid && (email.dirty || submited || email.touched)">\n\n                            <span class="error">Champs adresse mail obligatoire</span>\n\n                        </div>\n\n                    </ion-col>\n\n                    <ion-col col-12 text-center>\n\n                        <ion-label text-left color="light-black" stacked>Description</ion-label>\n\n                        <ion-item class="item-input-white">\n\n                            <ion-textarea class="height-textarea" name="description" (focus)="checkFocus($event)"\n\n                                [(ngModel)]="merchant.description" #description="ngModel" (change)="capitalize($event.target.value, \'description\')"></ion-textarea>\n\n                        </ion-item>\n\n                    </ion-col>\n\n                    <ion-col col-12 text-center>\n\n                        <ion-item>\n\n                            <ion-label text-left color="light-black">Je déclare avoir l\'autorisation du représentant de ce\n\n                                commerce/partenaire pour être administrateur de cette page</ion-label>\n\n                            <ion-checkbox color="primary" (ionChange)="logEvent($event)" required></ion-checkbox>\n\n                        </ion-item>\n\n                        <div class="error-msg" *ngIf="submited && !check">\n\n                            <span class="error">Veuillez valider la condition</span>\n\n                        </div>\n\n                    </ion-col>\n\n                    <ion-col col-12 text-center>\n\n                        <button class="rounded-button" ion-button color="primary" type="submit" round>Valider la création</button>\n\n                    </ion-col>\n\n                    <ion-col col-12 text-center>\n\n                        <ion-item class="info-confirmation-title">\n\n                            <ion-label text-center color="light-black">Vous recevrez une notification lorsque l\'administrateur de la\n\n                                communauté aura validé votre création de commerce/partenaire</ion-label>\n\n                        </ion-item>\n\n                    </ion-col>\n\n                </ion-row>\n\n\n\n            </ion-grid>\n\n        </form>\n\n    </div>\n\n    <div class="div-right"></div>\n\n</ion-content>'/*ion-inline-end:"D:\celaneo\mobile\new-mobile\test\src\pages\create-merchant\create-merchant.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_2_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["u" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_3__providers_user_user__["a" /* UserProvider */],
            __WEBPACK_IMPORTED_MODULE_0__providers_merchant_merchant__["a" /* MerchantProvider */],
            __WEBPACK_IMPORTED_MODULE_4__ionic_native_camera__["a" /* Camera */],
            __WEBPACK_IMPORTED_MODULE_9__providers_eventsrest_eventsrest__["a" /* EventsrestProvider */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["a" /* ActionSheetController */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["z" /* ToastController */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["x" /* Platform */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_5__providers_globals_globals__["a" /* GlobalsProvider */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["s" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_6__providers_app_app__["a" /* AppProvider */]])
    ], CreateMerchantPage);
    return CreateMerchantPage;
}());

//# sourceMappingURL=create-merchant.js.map

/***/ }),

/***/ 78:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AssociationSheetPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__event_details_event_details__ = __webpack_require__(55);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_association_association__ = __webpack_require__(36);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_globals_globals__ = __webpack_require__(8);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__providers_article_article__ = __webpack_require__(31);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__detail_article_detail_article__ = __webpack_require__(56);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__providers_comment_comment__ = __webpack_require__(22);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__providers_eventsrest_eventsrest__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__providers_cache_cache__ = __webpack_require__(47);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};










/**
 * Generated class for the CommercialSheetPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var AssociationSheetPage = /** @class */ (function () {
    function AssociationSheetPage(navCtrl, navParams, alertCtrl, associationService, loader, appEvents, appGlobals, articleService, commentService, modal, serviceEvent, event, cacheService) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.alertCtrl = alertCtrl;
        this.associationService = associationService;
        this.loader = loader;
        this.appEvents = appEvents;
        this.appGlobals = appGlobals;
        this.articleService = articleService;
        this.commentService = commentService;
        this.modal = modal;
        this.serviceEvent = serviceEvent;
        this.event = event;
        this.cacheService = cacheService;
        this.page = 0;
        this.items = [];
        this.numberComments = 0;
        this.eventParticipted = [];
        this.cacheLifeTime = 3600;
        this.allowInfiniteScroll = true;
        this.id = this.navParams.get('id');
        this.name = this.navParams.get('name');
        this.showPush = navParams.get('pushNotification');
        this.associationId = this.navParams.get('id');
        this.page = 1;
    }
    AssociationSheetPage.prototype.ionViewWillEnter = function () {
        this.appGlobals.showFooter = true;
        this.appGlobals.showHeader = false;
        this.appGlobals.currentPageTitle = this.name;
        this.appGlobals.currentPageLogo = null;
        this.appEvents.publish('updateFooter');
        this.items = [];
        this.page = 1;
        this.getCurrentAssociationDetails();
    };
    AssociationSheetPage.prototype.ionViewWillLeave = function () {
        this.page = 1;
        this.items = [];
        this.appGlobals.showFooter = true;
        this.appGlobals.showHeader = true;
    };
    AssociationSheetPage.prototype.ionViewDidEnter = function () {
        if (this.appGlobals.currentPageid == "agenda") {
            this.appGlobals.currentPageid = "agenda";
        }
        else {
            this.appGlobals.currentPageid = "news";
        }
        this.event.publish('updateFooter');
    };
    AssociationSheetPage.prototype.getCurrentAssociationDetails = function () {
        var _this = this;
        var loadingPopup = this.loader.create({});
        loadingPopup.present();
        this.associationService.getDetails(this.id).then(function (data) {
            _this.association = data;
            _this.getAssociationArticle(loadingPopup);
        }, function (err) {
            loadingPopup.dismiss();
            _this.appEvents.publish('http:errors', err);
        });
    };
    AssociationSheetPage.prototype.getAssociationArticle = function (loadingPopup) {
        var _this = this;
        var page = 1;
        this.articleService.findAssociationArticles(this.associationId, page).then(function (data) {
            _this.articles = data[0];
            for (var _i = 0, _a = _this.articles; _i < _a.length; _i++) {
                var article = _a[_i];
                _this.items.push(article);
            }
            _this.articles = [];
            loadingPopup.dismiss();
        }, function (err) {
            loadingPopup.dismiss();
            _this.appEvents.publish('http:errors', err);
        });
    };
    AssociationSheetPage.prototype.detailsArticle = function (article) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_6__detail_article_detail_article__["a" /* DetailArticlePage */], {
            article: article
        });
    };
    AssociationSheetPage.prototype.detailsArticleComment = function (article) {
        var _this = this;
        var loadingPopup = this.loader.create({});
        loadingPopup.present();
        this.commentService.getCommentsArticlePagination(article.id, 0).then(function (data) {
            _this.comment = data;
            _this.numberComments = article.nbreComments;
            loadingPopup.dismiss();
            _this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_6__detail_article_detail_article__["a" /* DetailArticlePage */], {
                article: article,
                comment: _this.comment,
                numberComments: _this.numberComments,
                showComments: true
            });
        }, function (err) {
            loadingPopup.dismiss();
            _this.appEvents.publish('http:errors', err);
        });
    };
    AssociationSheetPage.prototype.like = function (article) {
        var _this = this;
        var loadingPopup = this.loader.create({});
        loadingPopup.present();
        this.articleService.like(article).then(function (data) {
            var index = _this.items.findIndex(function (i) { return i.id == article; });
            if (index != -1) {
                _this.items[index].isLiked = true;
                _this.items[index].nbLikes++;
            }
            loadingPopup.dismiss();
        }, function (err) {
            loadingPopup.dismiss();
            _this.appEvents.publish('http:errors', err);
        });
    };
    AssociationSheetPage.prototype.unlike = function (article) {
        var _this = this;
        var loadingPopup = this.loader.create({});
        loadingPopup.present();
        this.articleService.unlike(article).then(function (data) {
            var index = _this.items.findIndex(function (i) { return i.id == article; });
            if (index != -1) {
                _this.items[index].isLiked = false;
                _this.items[index].nbLikes--;
            }
            loadingPopup.dismiss();
        }, function (err) {
            loadingPopup.dismiss();
            _this.appEvents.publish('http:errors', err);
        });
    };
    AssociationSheetPage.prototype.goBack = function () {
        this.navCtrl.pop();
    };
    AssociationSheetPage.prototype.doInfinite = function (infiniteScroll) {
        var _this = this;
        if (this.allowInfiniteScroll == false) {
            infiniteScroll.complete();
        }
        else {
            this.page += 1;
            this.articleService.findAssociationArticles(this.id, this.page).then(function (data) {
                if (data[0].length == 0) {
                    _this.allowInfiniteScroll = false;
                    infiniteScroll.complete();
                }
                else {
                    _this.articles = data[0];
                    for (var _i = 0, _a = _this.articles; _i < _a.length; _i++) {
                        var article = _a[_i];
                        _this.items.push(article);
                    }
                    _this.articles = [];
                    infiniteScroll.complete();
                }
            }, function (err) {
                infiniteScroll.complete();
            });
        }
    };
    AssociationSheetPage.prototype.linkto = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_2__event_details_event_details__["a" /* EventDetailsPage */]);
    };
    AssociationSheetPage.prototype.detailsEvent = function (eventId, title, withComments, moderateEvent) {
        if (moderateEvent == 'wait') {
            var errorAlert = this.alertCtrl.create({
                subTitle: 'Cet événement est en attente',
                buttons: [
                    {
                        text: 'Fermer',
                        role: 'cancel',
                        handler: function () {
                        }
                    }
                ]
            });
            errorAlert.present();
        }
        else {
            this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_2__event_details_event_details__["a" /* EventDetailsPage */], {
                id: eventId,
                title: title,
                withComments: withComments
            });
        }
    };
    AssociationSheetPage.prototype.showMembershipPopUp = function (id) {
        var myModal2 = this.modal.create('PopinMembershipAssociationPage', { id: id }, { cssClass: 'style-modal choice-modal' });
        myModal2.onDidDismiss(function () {
        });
        myModal2.present();
    };
    AssociationSheetPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-association-sheet',template:/*ion-inline-start:"D:\celaneo\mobile\new-mobile\test\src\pages\association-sheet\association-sheet.html"*/'<!--\n\n  Generated template for the CommercialSheetPage page.\n\n\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n\n  Ionic pages and navigation.\n\n-->\n\n<ion-header class="mobile-header" *ngIf="appGlobals.token">\n\n    <ion-grid>\n\n        <ion-row>\n\n            <ion-col col-2 text-left>\n\n                <div class="item" (click)="goBack()">\n\n                    <ion-icon name="ios-arrow-back"></ion-icon>\n\n                </div>\n\n            </ion-col>\n\n            <ion-col col-8 text-center class="page-title">\n\n                <ion-title>{{appGlobals.currentPageTitle}}</ion-title>\n\n            </ion-col>\n\n            <ion-col col-2>\n\n            </ion-col>\n\n        </ion-row>\n\n    </ion-grid>\n\n</ion-header>\n\n<ion-content text-center>\n\n    <div class="div-left">\n\n        <div text-right class="back"><img src="assets/imgs/icons/1.png" (click)="goBack()"></div>\n\n    </div>\n\n    <!--bloc central -->\n\n    <div class="div-center">\n\n        <div *ngIf="association">\n\n            <ion-grid class="custom-grid">\n\n                <ion-row>\n\n                    <ion-col>\n\n                        <div text-left class="csm1">\n\n                            <span class="medium-text-title"> Description </span>\n\n\n\n                            <p class="excerpt">\n\n                                {{association.description}}\n\n                            </p>\n\n\n\n                            <span class="medium-text-title csm2"> Email </span>\n\n                            <span class="excerpt"> {{association.email}} </span>\n\n\n\n                            <div class="clear"></div>\n\n\n\n                            <span class="medium-text-title csm2"> Téléphone </span>\n\n                            <span class="excerpt"> {{association.phone}} </span>\n\n\n\n                            <div class="clear"></div>\n\n\n\n                            <span class="medium-text-title csm2"> Adresse </span>\n\n                            <span class="excerpt"> {{association.address}} </span>\n\n                        </div>\n\n                        <button *ngIf="!association.isMember" class="search-button button-big" ion-button color="primary" (click)="showMembershipPopUp(association.id)" round>Demander à adhérer</button>\n\n\n\n                    </ion-col>\n\n\n\n                </ion-row>\n\n\n\n            </ion-grid>\n\n\n\n           <!-- <ion-card *ngFor="let item of items">\n\n                <ion-card-header>\n\n                    <span class="card-title titleAsso"> {{item.associationName}} </span>\n\n                    <p text-left>\n\n                        <img alt="NOUS-Ensemble" class="icon-agenda move img-calendar" float-end="" src="assets/imgs/icons/calendar.png">\n\n                        <span class="card-title-subtitle" *ngIf="item.type == \'association\' && item.city">\n\n                            {{item.createAt| amLocale:\'fr\' | amTimeAgo}} à {{item.city}} </span>\n\n                    </p>\n\n                </ion-card-header>\n\n                <ion-card-content>\n\n                    <div>\n\n                        <div *ngIf="item.imageURL || item.images">\n\n                            <div *ngIf="(item.imageURL && !item.images) || (item.images && !item.imageURL && item.images.length == 1); else elseBlock">\n\n                                <div *ngIf="item.imageURL" (click)="detailsArticle(item);">\n\n                                    <img data-src="{{item.imageURL}}">\n\n                                </div>\n\n                                <div *ngFor="let img of item.images" (click)="detailsArticle(item);">\n\n                                    <img data-src="{{img.url}}">\n\n                                </div>\n\n                            </div>\n\n\n\n                            <ng-template #elseBlock>\n\n                                <ion-slides loop="true" pager (click)="detailsArticle(item);">\n\n                                    <ion-slide *ngIf="item.imageURL">\n\n                                        <img data-src="{{item.imageURL}}">\n\n                                    </ion-slide>\n\n                                    <ion-slide *ngFor="let img of item.images">\n\n                                        <img data-src="{{img.url}}">\n\n                                    </ion-slide>\n\n                                </ion-slides>\n\n                            </ng-template>\n\n                            <div class="separator"></div>\n\n                        </div>\n\n\n\n                        <span class="card-title"> {{item.title}} </span>\n\n                        <p class="excerpt" [innerHtml]="item.description|truncate|nl2br"></p>\n\n                    </div>\n\n                    <div text-center>\n\n\n\n                        <ion-col class="no-padding " text-right>\n\n\n\n                            <button class="disociate-button-comment" ion-button clear small color="primary" icon-start\n\n                                (click)="detailsArticleComment(item);">\n\n                                <span class="comments-nbr">{{item.nbreComments}}</span>\n\n                            </button>\n\n                            <span class="disociate-actions"><img class="news-comment-action dissociate-comment" src="assets/imgs/icons/comments.png"></span>\n\n\n\n                        </ion-col>\n\n\n\n                        <ion-col class="no-padding " text-left>\n\n\n\n                            <button class="disociate-button-like" ion-button clear small color="primary" icon-start\n\n                                *ngIf="!item.isLiked" (click)="like(item.id);">\n\n                                <span class="likes-nbr"> {{item.nbLikes}}</span>\n\n                            </button>\n\n                            <span *ngIf="!item.isLiked" class="disociate-actions"><img class="news-comment-action dissociate-like"\n\n                                    src="assets/imgs/icons/dislike.png"></span>\n\n\n\n                            <button class="disociate-button-like" ion-button clear small color="primary" icon-start\n\n                                *ngIf="item.isLiked" (click)="unlike(item.id);">\n\n                                <span class="likes-nbr"> {{item.nbLikes}}</span>\n\n                            </button>\n\n                            <span *ngIf="item.isLiked" class="disociate-actions"> <img class="news-comment-action dissociate-like"\n\n                                    src="assets/imgs/icons/like.png"></span>\n\n\n\n                        </ion-col>\n\n\n\n\n\n\n\n\n\n\n\n                        &lt;!&ndash; <button ion-button icon-left clear small (click)="detailsArticleComment(item);">\n\n                                <span class="comments-nbr"> {{item.nbreComments}}</span>\n\n                            <img src="assets/imgs/icons/comments.png" class="icon-img-action">\n\n                        </button>\n\n                        <button ion-button icon-right clear small *ngIf="!item.isLiked" (click)="like(item.id);">\n\n                                <img src="assets/imgs/icons/dislike.png" class="icon-img-action">\n\n                            <span class="likes-nbr"> {{item.nbLikes}}</span>\n\n                        </button>\n\n                        <button ion-button icon-right clear small *ngIf="item.isLiked" (click)="unlike(item.id);">\n\n                                <img src="assets/imgs/icons/like.png" class="icon-img-action">\n\n                            <span class="likes-nbr"> {{item.nbLikes}}</span>\n\n                        </button> &ndash;&gt;\n\n                    </div>\n\n                </ion-card-content>\n\n            </ion-card>-->\n\n            <ion-card *ngFor="let item of items">\n\n                <ion-card-content>\n\n                    <ion-card-title class="titleAsso display-block" text-left *ngIf="item.type == \'association\'">\n\n                        {{item.associationName}}</ion-card-title>\n\n                    <ion-card-title class="titleAsso display-block" text-left *ngIf="item.type == \'merchant\'">\n\n                        {{item.merchantName}}</ion-card-title>\n\n                    <ion-card-title class="display-block" text-left *ngIf="item.type == \'community\'"> {{item.community}}\n\n                    </ion-card-title>\n\n                    <ion-card-title class="display-block" text-left *ngIf="item.type == \'survey\'" (click)="detailsSurvey(item);"> {{item.community}}\n\n                    </ion-card-title>\n\n                    <ion-card-title class="display-block" text-left *ngIf="item.type == \'user\'"> {{item.userFirstname}} {{item.userLastname}}\n\n                    </ion-card-title>\n\n                    <p text-left>\n\n                    <span *ngIf="item.type == \'user\' || item.type == \'association\' || item.type == \'merchant\' " (click)="detailsArticle(item);">\n\n                        <span >{{item.createAt| amLocale:\'fr\' | amTimeAgo }}</span>\n\n\n\n                        <span *ngIf="item.type == \'user\' && item.city">à {{item.city}}</span>\n\n                        <span *ngIf="item.type == \'association\' && item.city">à {{item.city}}</span>\n\n                        <span *ngIf="item.type == \'merchant\' && item.city">à {{item.city}}</span>\n\n                    </span>\n\n                        <span *ngIf="item.type == \'survey\' && item.city" (click)="detailsSurvey(item);">\n\n                        {{item.createAt| amLocale:\'fr\' | amTimeAgo }}\n\n                        <span>à {{item.city}}</span>\n\n                    </span>\n\n                        <img float-end *ngIf="item.event" \n\n                             class="icon-agenda move img-calendar" src="assets/imgs/icons/calendar.png" alt="NOUS-Ensemble" />\n\n                        <img float-end *ngIf="item.private" class="move lock-icons" src="assets/imgs/icons/lock.png" alt="NOUS-Ensemble" />\n\n                        <img float-end *ngIf="item.type == \'survey\'" class="move survey-icons" src="assets/imgs/icons/article.png" alt="NOUS-Ensemble" (click)="detailsSurvey(item);" />\n\n                        <!-- <ion-icon class="icon-agenda move" name="md-calendar" float-end *ngIf="item.event" (click)="detailsEvent(item.event, item.title, false, item.moderateEvent)"></ion-icon> -->\n\n                        <span *ngIf="item.type == \'community\' && item.city">à {{item.city}}</span>\n\n                    </p>\n\n                    <div *ngIf="item.imageURL || item.images || item.videoFile" class="card-item-divider">\n\n                        <div *ngIf="(item.imageURL && !item.images && !item.videoFile) || (!item.imageURL && !item.images && item.videoFile) || (item.images && !item.imageURL && item.images.length == 1); else elseBlock">\n\n                            <div *ngIf="item.imageURL && item.type != \'survey\' " (click)="detailsArticle(item);">\n\n                                <img data-src="{{item.imageURL}}">\n\n                            </div>\n\n                            <div *ngFor="let img of item.images" (click)="detailsArticle(item);">\n\n                                <img data-src="{{img.url}}">\n\n                            </div>\n\n                            <div *ngIf="item.imageURL && item.type == \'survey\' " (click)="detailsSurvey(item);">\n\n                                <img data-src="{{item.imageURL}}">\n\n                            </div>\n\n                            <video style="width: 100%; height: 100%" *ngIf="item.videoFile !== null" controls poster="assets/img/video_default.png">\n\n                                <source [src]="item.videoFile" type="video/mp4">\n\n                            </video>\n\n                        </div>\n\n\n\n                        <ng-template #elseBlock>\n\n                            <ion-slides loop="true" pager>\n\n                                <ion-slide *ngIf="item.videoFile != null">\n\n                                    <video style="width: 100%; height: 100%" controls poster="assets/img/video_default.png">\n\n                                        <source [src]="item.videoFile" type="video/mp4">\n\n                                    </video>\n\n                                </ion-slide>\n\n                                <ion-slide *ngIf="item.imageURL" (click)="detailsArticle(item);">\n\n                                    <img data-src="{{item.imageURL}}">\n\n                                </ion-slide>\n\n                                <ion-slide *ngFor="let img of item.images" (click)="detailsArticle(item);">\n\n                                    <img data-src="{{img.url}}">\n\n                                </ion-slide>\n\n                            </ion-slides>\n\n                        </ng-template>\n\n                    </div>\n\n                    <ion-card-title class="title-article" text-left>\n\n                        <div class="div-title" *ngIf="item.type != \'survey\'"  (click)="detailsArticle(item);">{{item.title}}</div>\n\n                        <div class="div-title" *ngIf="item.type == \'survey\'"  (click)="detailsSurvey(item);">{{item.title}}</div>\n\n                        <ion-icon name="md-create" class="icon-create" float-end *ngIf="idUsers && item.type == \'association\' && (idUsers.indexOf(item.associationId) > -1)"\n\n                                  (click)="editArticle(item, item.type, item.associationId)"></ion-icon>\n\n                        <ion-icon name="md-create" class="icon-create" float-end *ngIf="idUsers && item.type == \'user\' && (idUsers.indexOf(item.userId) > -1)"\n\n                                  (click)="editArticle(item, item.type, item.userId)"></ion-icon>\n\n                        <ion-icon name="md-create" class="icon-create" float-end *ngIf="idUsers && item.type == \'merchant\' && (idUsers.indexOf(item.merchantId) > -1)"\n\n                                  (click)="editArticle(item, item.type, item.merchantId)"></ion-icon>\n\n                        <!--<ion-icon name="md-create" class="icon-create" float-end *ngIf="item.type == \'community\' && currentUser.id == item.userId"\n\n                                  (click)="editArticle(item, item.type, item.userId)"></ion-icon>-->\n\n                    </ion-card-title>\n\n\n\n                    <p text-left [innerHtml]="item.description|truncate|nl2br" *ngIf="item.type != \'survey\'"  (click)="detailsArticle(item);"></p>\n\n                    <p text-left [innerHtml]="item.description|truncate|nl2br" *ngIf="item.type == \'survey\'"  (click)="detailsSurvey(item);"></p>\n\n                </ion-card-content>\n\n\n\n                <ion-row class="comment-text-style news-align-center" *ngIf="item.type != \'survey\'">\n\n                    <ion-col class="text-grey" *ngIf="item.type != \'community\' || (item.addComments && item.type == \'community\' ) ">\n\n                        <span  *ngIf="item.nbreComments <= 1" (click)="detailsArticleComment(item);">{{item.nbreComments}} Commentaire</span>\n\n                        <span  *ngIf="item.nbreComments > 1" (click)="detailsArticleComment(item);">{{item.nbreComments}} Commentaires</span>\n\n                    </ion-col>\n\n                    <ion-col>\n\n                        <img class="comment-img-style" src="assets/imgs/icons/list-divider.png">\n\n                    </ion-col>\n\n                    <ion-col class="text-grey">\n\n                        <span> {{item.nbLikes}} J\'aime</span>\n\n                    </ion-col>\n\n                </ion-row>\n\n\n\n                <ion-row padding-bottom *ngIf="item.type != \'survey\'">\n\n                    <ion-col class="no-padding " text-right *ngIf="item.type != \'community\' || (item.addComments && item.type == \'community\' ) ">\n\n                        <span class="disociate-actions" (click)="detailsArticleComment(item);" ><img class="news-comment-action dissociate-comment" src="assets/imgs/icons/comments.png"></span>\n\n                    </ion-col>\n\n\n\n                    <ion-col class="no-padding text-center" text-left>\n\n                    <span *ngIf="!item.isLiked" class="disociate-actions text-center" (click)="like(item.id);"><img class="news-comment-action dissociate-like"\n\n                                                                                                                    src="assets/imgs/icons/dislike.png"></span>\n\n\n\n                        <span *ngIf="item.isLiked" class="disociate-actions text-center" (click)="unlike(item.id);"> <img class="news-comment-action dissociate-like"\n\n                                                                                                                          src="assets/imgs/icons/like.png"></span>\n\n                    </ion-col>\n\n\n\n                    <ion-col class="no-padding " text-right>\n\n                        <span class="disociate-actions" (click)="ShareArticle(item);" ><img class="news-comment-action dissociate-share" src="assets/imgs/icons/share.png"></span>\n\n                    </ion-col>\n\n\n\n                </ion-row>\n\n            </ion-card>\n\n            <ion-infinite-scroll (ionInfinite)="doInfinite($event)" threshold="100px">\n\n                <ion-infinite-scroll-content loadingSpinner="bubbles" loadingText="Charger plus...">\n\n                </ion-infinite-scroll-content>\n\n            </ion-infinite-scroll>\n\n        </div>\n\n    </div>\n\n    <!-- fin bloc central -->\n\n    <div class="div-right" text-center>\n\n    </div>\n\n</ion-content>'/*ion-inline-end:"D:\celaneo\mobile\new-mobile\test\src\pages\association-sheet\association-sheet.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_3__providers_association_association__["a" /* AssociationProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_4__providers_globals_globals__["a" /* GlobalsProvider */],
            __WEBPACK_IMPORTED_MODULE_5__providers_article_article__["a" /* ArticleProvider */],
            __WEBPACK_IMPORTED_MODULE_7__providers_comment_comment__["a" /* CommentProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_8__providers_eventsrest_eventsrest__["a" /* EventsrestProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_9__providers_cache_cache__["a" /* CacheProvider */]])
    ], AssociationSheetPage);
    return AssociationSheetPage;
}());

//# sourceMappingURL=association-sheet.js.map

/***/ }),

/***/ 79:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AgendaPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_globals_globals__ = __webpack_require__(8);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_user_user__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_eventsrest_eventsrest__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__pipes_groupitems_groupitems__ = __webpack_require__(197);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__ionic_native_google_analytics__ = __webpack_require__(58);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_moment__ = __webpack_require__(1);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7_moment__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__ionic_native_calendar__ = __webpack_require__(54);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__event_details_event_details__ = __webpack_require__(55);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__butalso_butalso__ = __webpack_require__(129);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__providers_comment_comment__ = __webpack_require__(22);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__ionic_native_camera__ = __webpack_require__(29);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__ionic_native_social_sharing__ = __webpack_require__(46);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__providers_cache_cache__ = __webpack_require__(47);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__association_sheet_association_sheet__ = __webpack_require__(78);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__providers_community_community__ = __webpack_require__(40);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17__providers_article_article__ = __webpack_require__(31);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};


















/**
 * Generated class for the AgendaPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var AgendaPage = /** @class */ (function () {
    function AgendaPage(event, navCtrl, appGlobals, userService, eventService, platform, camera, commentService, myAlert, actionSheetController, loader, appEvents, ga, serviceArticle, calendarPlugin, myModal, socialsharing, cacheService, serviceCommunity) {
        var _this = this;
        this.event = event;
        this.navCtrl = navCtrl;
        this.appGlobals = appGlobals;
        this.userService = userService;
        this.eventService = eventService;
        this.platform = platform;
        this.camera = camera;
        this.commentService = commentService;
        this.myAlert = myAlert;
        this.actionSheetController = actionSheetController;
        this.loader = loader;
        this.appEvents = appEvents;
        this.ga = ga;
        this.serviceArticle = serviceArticle;
        this.calendarPlugin = calendarPlugin;
        this.myModal = myModal;
        this.socialsharing = socialsharing;
        this.cacheService = cacheService;
        this.serviceCommunity = serviceCommunity;
        this.cities = [];
        this.selectedCities = [];
        this.selectedCategories = [];
        this.page = 1;
        this.items = [];
        this.itemsDates = [];
        this.loaderShow = true;
        this.init = false;
        this.eventParticipted = [];
        this.hasApprovedCommunities = false;
        this.cacheLifeTime = 3600;
        this.currentEvent = {};
        this.allowInfiniteScroll = true;
        this.commentEvent = {
            content: '',
            photo: null
        };
        this.currentUser = JSON.parse(localStorage.getItem("currentUser"));
        if (this.currentUser.primary_city) {
            this.selectedCities.push(this.currentUser.primary_city.id);
        }
        this.refreshCommunities();
        this.event.publish('closeFilters');
        this.event.publish('resetFilters');
        this.eventProgress();
        this.event.unsubscribe('agenda:cache');
        this.event.subscribe('agenda:cache', function (data) {
            _this.adminAssociations = JSON.parse(localStorage.getItem("adminAssociations"));
            _this.page = data[0];
            _this.items = data[1];
            _this.event = data[2];
            _this.allowInfiniteScroll = !data[2] || data[2] && data[2].length;
            _this.updateItemsDates();
            console.log(JSON.stringify(_this.items));
        });
        this.appEvents.unsubscribe('agenda:refresh');
        this.appEvents.subscribe('agenda:refresh', function () {
            _this.page = 1;
            _this.cacheService.loadArticles(_this.page, _this.items, _this.events, _this.cacheLifeTime, 'agenda', null, true);
        });
        this.appEvents.unsubscribe('agenda:volunteerContact');
        this.appEvents.subscribe('agenda:volunteerContact', function (data) {
            var loadingPopup = _this.loader.create({});
            loadingPopup.present();
            _this.eventService.postContact(data[0], "phone", data[1]).then(function (result) {
                loadingPopup.dismiss();
                if (result.success) {
                    var index = _this.items.findIndex(function (i) { return i.id == data[0]; });
                    if (index != -1) {
                        _this.items[index].isVolunteer = true;
                        _this.items[index].nbVolunteers++;
                        _this.cacheService.refreshItem(_this.items[index], 'agenda.events');
                        _this.updateItemsDates();
                    }
                    _this.appGlobals.showBenevoleAgenda = false;
                }
            }, function (err) {
                loadingPopup.dismiss();
                _this.appEvents.publish('http:errors', err);
            });
        });
        this.appEvents.unsubscribe('agenda:carpoolAdd');
        this.appEvents.subscribe('agenda:carpoolAdd', function (data) {
            var loadingPopup = _this.loader.create({});
            loadingPopup.present();
            _this.eventService.addCarpool(data[0], data[1], data[2], data[3], data[4]).then(function (result) {
                _this.appEvents.publish('agenda:refresh');
                loadingPopup.dismiss();
                if (result.success) {
                    var index = _this.items.findIndex(function (i) { return i.id == data[0]; });
                    if (index != -1) {
                        _this.items[index].alreadyAddPool = true;
                        _this.cacheService.refreshItem(_this.items[index], 'agenda.events');
                        _this.updateItemsDates();
                    }
                    _this.appGlobals.showAnswerCarpooling = false;
                }
            }, function (err) {
                loadingPopup.dismiss();
                _this.appEvents.publish('http:errors', err);
            });
        });
        var communities;
        platform.ready().then(function () {
            communities = JSON.parse(localStorage.getItem("followedCommunities"));
            if (communities.length > 0) {
                for (var _i = 0, communities_1 = communities; _i < communities_1.length; _i++) {
                    var value = communities_1[_i];
                    var label = 'agenda__' + value.id;
                    _this.appEvents.publish("googleAnalytics", label);
                }
            }
        });
    }
    AgendaPage.prototype.supprimer = function (item, modeEvent) {
        return __awaiter(this, void 0, void 0, function () {
            var alert;
            var _this = this;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.currentEvent = Object.assign({}, item);
                        return [4 /*yield*/, this.myAlert.create({
                                message: 'L\'événement  sera supprimé definitivement',
                                buttons: [
                                    {
                                        text: 'Annuler',
                                        role: 'cancel',
                                        cssClass: 'secondary',
                                        handler: function () {
                                        }
                                    }, {
                                        text: 'Valider',
                                        handler: function () {
                                            var loadingPopup = _this.loader.create({});
                                            loadingPopup.present();
                                            _this.eventService.delete(_this.currentEvent.id, modeEvent).then(function (data) {
                                                if (data) {
                                                    _this.appEvents.publish('agenda:refresh');
                                                    _this.appEvents.publish('news:refresh');
                                                    loadingPopup.dismiss();
                                                }
                                            }, function (err) {
                                                console.log(err);
                                                loadingPopup.dismiss();
                                            });
                                        }
                                    }
                                ]
                            })];
                    case 1:
                        alert = _a.sent();
                        return [4 /*yield*/, alert.present()];
                    case 2:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    AgendaPage.prototype.creatorExists = function (id) {
        var test = false;
        this.adminAssociations.forEach(function (adminAssociation) {
            if (adminAssociation.id == id) {
                test = true;
                return true;
            }
        });
        return test;
    };
    AgendaPage.prototype.other = function (item) {
        return __awaiter(this, void 0, void 0, function () {
            var actionSheet;
            var _this = this;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.actionSheetController.create({
                            buttons: [{
                                    text: 'Supprimer',
                                    icon: 'trash',
                                    handler: function () {
                                        _this.supprimer(item, "current");
                                    }
                                }, {
                                    text: 'Partager',
                                    icon: 'share',
                                    handler: function () {
                                        _this.ShareArticle(item);
                                    }
                                }, {
                                    text: 'Modifier',
                                    icon: 'create',
                                    handler: function () {
                                        _this.edite(item);
                                    }
                                }, {
                                    text: 'Dupliquer',
                                    icon: 'copy',
                                    handler: function () {
                                        _this.dupliquer(item);
                                    }
                                }, {
                                    text: 'Annuler',
                                    icon: 'close',
                                    role: 'cancel',
                                    handler: function () {
                                    }
                                }]
                        })];
                    case 1:
                        actionSheet = _a.sent();
                        return [4 /*yield*/, actionSheet.present()];
                    case 2:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    AgendaPage.prototype.otherNotParent = function (item) {
        return __awaiter(this, void 0, void 0, function () {
            var actionSheet;
            var _this = this;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.actionSheetController.create({
                            buttons: [{
                                    text: 'Supprimer',
                                    icon: 'trash',
                                    handler: function () {
                                        _this.supprimerNotParent(item);
                                    }
                                }, {
                                    text: 'Partager',
                                    icon: 'share',
                                    handler: function () {
                                        _this.ShareArticle(item);
                                    }
                                }, {
                                    text: 'Modifier',
                                    icon: 'create',
                                    handler: function () {
                                        _this.editeNotParent(item);
                                    }
                                }, {
                                    text: 'Dupliquer',
                                    icon: 'copy',
                                    handler: function () {
                                        _this.dupliquer(item);
                                    }
                                }, {
                                    text: 'Annuler',
                                    icon: 'close',
                                    role: 'cancel',
                                    handler: function () {
                                    }
                                }]
                        })];
                    case 1:
                        actionSheet = _a.sent();
                        return [4 /*yield*/, actionSheet.present()];
                    case 2:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    AgendaPage.prototype.otherParent = function (item) {
        return __awaiter(this, void 0, void 0, function () {
            var actionSheet;
            var _this = this;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.actionSheetController.create({
                            buttons: [{
                                    text: 'Partager',
                                    icon: 'share',
                                    handler: function () {
                                        _this.ShareArticle(item);
                                    }
                                }, {
                                    text: 'Modifier',
                                    icon: 'create',
                                    handler: function () {
                                        _this.edite(item);
                                    }
                                }, {
                                    text: 'Dupliquer',
                                    icon: 'copy',
                                    handler: function () {
                                        _this.dupliquer(item);
                                    }
                                }, {
                                    text: 'Annuler',
                                    icon: 'close',
                                    role: 'cancel',
                                    handler: function () {
                                    }
                                }]
                        })];
                    case 1:
                        actionSheet = _a.sent();
                        return [4 /*yield*/, actionSheet.present()];
                    case 2:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    AgendaPage.prototype.supprimerNotParent = function (item) {
        return __awaiter(this, void 0, void 0, function () {
            var actionSheet;
            var _this = this;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.actionSheetController.create({
                            buttons: [{
                                    text: 'Cet événement',
                                    icon: 'ios-backspace',
                                    handler: function () {
                                        _this.supprimer(item, "current");
                                    }
                                }, {
                                    text: 'Cet événement et les événements à venir',
                                    icon: 'trash',
                                    handler: function () {
                                        _this.supprimer(item, "currentAndNext");
                                    }
                                }, {
                                    text: 'Annuler',
                                    icon: 'close',
                                    role: 'cancel',
                                    handler: function () {
                                    }
                                }]
                        })];
                    case 1:
                        actionSheet = _a.sent();
                        return [4 /*yield*/, actionSheet.present()];
                    case 2:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    AgendaPage.prototype.editeNotParent = function (item) {
        return __awaiter(this, void 0, void 0, function () {
            var actionSheet;
            var _this = this;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.actionSheetController.create({
                            buttons: [{
                                    text: 'Cet événement',
                                    icon: 'create',
                                    handler: function () {
                                        _this.editeEventDup(item, "current");
                                    }
                                }, {
                                    text: 'Cet événement et les événements à venir',
                                    icon: 'ios-create',
                                    handler: function () {
                                        _this.editeEventDup(item, "currentAndNext");
                                    }
                                }, {
                                    text: 'Annuler',
                                    icon: 'close',
                                    role: 'cancel',
                                    handler: function () {
                                    }
                                }]
                        })];
                    case 1:
                        actionSheet = _a.sent();
                        return [4 /*yield*/, actionSheet.present()];
                    case 2:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    AgendaPage.prototype.editeEventDup = function (item, mode) {
        var _this = this;
        var myModal2 = this.myModal.create('PopupEvenDuplicateDetailPage', { "event": item, "accountType": localStorage.getItem("account_type"), mode: mode }, { cssClass: 'style-modal' });
        myModal2.onDidDismiss(function (data) {
            _this.items = [];
            _this.page = 1;
            _this.appEvents.publish('agendaAsso:refresh');
            _this.appEvents.publish('agenda:refresh');
            _this.appGlobals.showHeader = false;
        });
        myModal2.present();
    };
    AgendaPage.prototype.dupliquer = function (item) {
        var myModal2 = this.myModal.create('DupliquerPage', { "event": item, "accountType": "accountType" }, { cssClass: 'style-modal' });
        myModal2.onDidDismiss(function (data) {
        });
        myModal2.present();
    };
    AgendaPage.prototype.edite = function (item) {
        var _this = this;
        var myModal2 = this.myModal.create('EditEventPage', { "event": item, "accountType": localStorage.getItem("account_type") }, { cssClass: 'style-modal' });
        myModal2.onDidDismiss(function (data) {
            _this.items = [];
            _this.page = 1;
            _this.appEvents.publish('agendaAsso:refresh');
            _this.appEvents.publish('agenda:refresh');
            _this.appGlobals.showHeader = false;
        });
        myModal2.present();
    };
    AgendaPage.prototype.ShareArticle = function (item) {
        var options = {
            message: item.title + " : " + item.description,
            subject: "NOUS Ensemble",
            image: item.imageURL,
            url: item.imageURL
        };
        if (this.platform.is('cordova') || this.platform.is('core')) {
            this.socialsharing.shareWithOptions(options).then(function (data) {
            }).catch(function (error) {
                console.log("Error from sharing" + error);
            });
        }
    };
    AgendaPage.prototype.ionViewWillEnter = function () {
        this.appGlobals.currentPageTitle = "Agenda";
        this.appGlobals.currentPageLogo = "md-calendar";
        this.appGlobals.currentPageid = "agenda";
        this.appGlobals.showSearchAgenda = true;
        this.appEvents.publish('updateFooter');
        this.items = [];
        this.page = 1;
        this.cacheService.loadArticles(this.page, this.items, this.events, this.cacheLifeTime, 'agenda');
    };
    AgendaPage.prototype.ionViewWillLeave = function () {
        this.loaderShow = true;
        this.appGlobals.showSearchAgenda = false;
    };
    AgendaPage.prototype.showAgendaBenevole = function (event) {
        this.appGlobals.currentEventId = event.id;
        if (event.isVolunteer) {
            var myModal2 = this.myModal.create('PopupPage', { "message": "<p>Vous êtes déjà  bénévole  à cet événement.</p>" }, { cssClass: 'message-modal' });
            myModal2.onDidDismiss(function () {
            });
            myModal2.present();
        }
        else {
            this.appGlobals.showBenevoleAgenda = !this.appGlobals.showBenevoleAgenda;
        }
    };
    AgendaPage.prototype.showHideProposeCarpooling = function (event) {
        if (event['alreadyAddPool'] == 0) {
            if (!this.appGlobals.showproposeCarpooling) {
                this.appGlobals.showproposeCarpooling = true;
                this.appGlobals.currentEvent = event;
            }
            else {
                this.appGlobals.showproposeCarpooling = false;
            }
        }
        else {
            var alert_1 = this.myAlert.create({
                title: 'Demande existante',
                subTitle: 'Vous avez déjà proposé du covoiturage pour cet événement.',
                buttons: ['fermer']
            });
            alert_1.present();
        }
    };
    AgendaPage.prototype.showHideNeedCarpooling = function (event) {
        var _this = this;
        if (event['alreadyPool'] == 0) {
            this.appGlobals.currentEvent = event;
            this.appGlobals.checkedCarpool = null;
            this.appGlobals.showNeedCarpooling = !this.appGlobals.showNeedCarpooling;
        }
        else {
            var alert_2 = this.myAlert.create({
                title: 'Demande existante',
                subTitle: 'Vous avez déjà fait une demande de covoiturage pour cet événement. Voulez-vous la supprimer ?',
                buttons: [{
                        text: 'Non',
                        role: 'cancel',
                        handler: function () {
                        }
                    },
                    {
                        text: 'Oui',
                        handler: function () {
                            _this.deleteCarpoolDemand(event['id']);
                        }
                    }]
            });
            alert_2.present();
        }
    };
    AgendaPage.prototype.deleteCarpoolDemand = function (id) {
        var _this = this;
        var loadingPopup = this.loader.create({});
        loadingPopup.present();
        var result;
        this.eventService.deleteEventCarpoolDemand(id).then(function (data) {
            result = data;
            if (result.success) {
                for (var _i = 0, _a = _this.items; _i < _a.length; _i++) {
                    var ev = _a[_i];
                    if (ev.id == id) {
                        ev.alreadyPool = 0;
                        ev.nbCarpoolUsers--;
                        _this.cacheService.refreshItem(ev, 'agenda.events');
                        _this.updateItemsDates();
                    }
                }
            }
            loadingPopup.dismiss();
        }, function (err) {
            loadingPopup.dismiss();
            _this.appEvents.publish('http:errors', err);
        });
    };
    AgendaPage.prototype.showHidePutAgenda = function (event) {
        var _this = this;
        this.appGlobals.showPutAgenda = !this.appGlobals.showPutAgenda;
        this.appGlobals.currentEvent = event;
        var result;
        this.eventService.takePart(event.id).then(function (data) {
            result = data;
            if (result.success) {
                for (var _i = 0, _a = _this.items; _i < _a.length; _i++) {
                    var ev = _a[_i];
                    if (ev.id == event.id) {
                        ev.isParticipated = true;
                        ev.nbParticipants++;
                        _this.cacheService.refreshItem(ev, 'agenda.events');
                        _this.updateItemsDates();
                    }
                }
            }
        }, function (err) {
            _this.appEvents.publish('http:errors', err);
        });
    };
    AgendaPage.prototype.refreshCommunities = function () {
        var _this = this;
        Promise.all([this.serviceCommunity.findCurrentUserFollowedCommunities()]).then(function (user) {
            localStorage.setItem("followedCommunities", JSON.stringify(user[0]));
            _this.appEvents.publish('refreshCommunities');
            _this.appEvents.publish('refreshApprovedCommunities');
        }, function (err) {
            _this.appEvents.publish('http:errors', err);
        });
    };
    AgendaPage.prototype.updateItemsDates = function () {
        var item = [];
        for (var _i = 0, _a = this.items; _i < _a.length; _i++) {
            var event_1 = _a[_i];
            var dateString = event_1.day;
            var arraydateString = dateString.split('T');
            var arraydate = arraydateString[0].split('-');
            event_1.day = arraydate[0] + "-" + arraydate[1] + "-" + arraydate[2] + "T00:00:00";
            item.push(event_1);
        }
        var g = new __WEBPACK_IMPORTED_MODULE_5__pipes_groupitems_groupitems__["a" /* GroupitemsPipe */]();
        this.itemsDates = [];
        var itemsg = g.transform(item, "day");
        for (var _b = 0, itemsg_1 = itemsg; _b < itemsg_1.length; _b++) {
            var ir = itemsg_1[_b];
            this.itemsDates.push(ir);
        }
    };
    AgendaPage.prototype.doInfinite = function (infiniteScroll) {
        if (this.init) {
            this.init = false;
            infiniteScroll.complete();
        }
        else if (this.allowInfiniteScroll) {
            this.page += 1;
            this.cacheService.loadArticles(this.page, this.items, this.events, this.cacheLifeTime, 'agenda', null, false, infiniteScroll);
        }
        else {
            infiniteScroll.complete();
        }
    };
    AgendaPage.prototype.doRefreshAgenda = function (refresher) {
        this.items = [];
        this.page = 1;
        this.loaderShow = true;
        this.cacheService.loadArticles(this.page, this.items, this.events, this.cacheLifeTime, 'agenda', null, true, null, refresher);
        this.refreshCommunities();
    };
    AgendaPage.prototype.cancelParticipation = function (event) {
        var _this = this;
        var result;
        this.eventService.cancelTakePart(event.id).then(function (data) {
            result = data;
            var start = __WEBPACK_IMPORTED_MODULE_7_moment__(event.startAt).toDate();
            var end = __WEBPACK_IMPORTED_MODULE_7_moment__(event.endAt).toDate();
            _this.calendarPlugin.deleteEvent(event.title, event.place, '', start, end).then(function (msg) {
            }, function (err) {
            });
            if (result.success) {
                for (var _i = 0, _a = _this.items; _i < _a.length; _i++) {
                    var ev = _a[_i];
                    if (ev.id == event.id) {
                        ev.isParticipated = false;
                        ev.nbParticipants--;
                        _this.cacheService.refreshItem(ev, 'agenda.events');
                        _this.updateItemsDates();
                    }
                }
                var myModal2 = _this.myModal.create('PopupPage', { "message": "<p>Votre annulation a été bien enregistrée.</p>" }, { cssClass: 'message-modal' });
                myModal2.onDidDismiss(function () {
                });
                myModal2.present();
            }
        }, function (err) {
            _this.appEvents.publish('http:errors', err);
        });
    };
    AgendaPage.prototype.publish = function () {
        var adminAssociations = JSON.parse(localStorage.getItem("adminAssociations"));
        var adminMerchants = JSON.parse(localStorage.getItem("adminMerchants"));
        var adherentAssociations = JSON.parse(localStorage.getItem("adherentAssociations"));
        var adherentMerchants = JSON.parse(localStorage.getItem("adherentMerchants"));
        if (localStorage.getItem("hasApprovedCommunities") == 'true') {
            this.hasApprovedCommunities = true;
        }
        else {
            this.hasApprovedCommunities = false;
        }
        if (adherentAssociations.length != 0 || adherentMerchants.length != 0 || adminAssociations.length != 0 || adminMerchants.length != 0 || this.currentUser.role == 'community_su_admin' || this.hasApprovedCommunities) {
            var myModal2 = this.myModal.create('ChoicePage', {}, { cssClass: 'style-modal choice-modal' });
            myModal2.onDidDismiss(function () {
            });
            myModal2.present();
        }
        else {
            var myModal2 = this.myModal.create('PopupPage', { "message": "<p>Vous ne pouvez pas publier.</p>" }, { cssClass: 'message-modal' });
            myModal2.onDidDismiss(function () {
            });
            myModal2.present();
        }
    };
    AgendaPage.prototype.detailsEvent = function (event, withComments, showParticipant, showVolonteers) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_9__event_details_event_details__["a" /* EventDetailsPage */], {
            id: event.id,
            event: event,
            title: event.title,
            withComments: withComments,
            showParticipant: showParticipant,
            showVolonteers: showVolonteers
        });
    };
    AgendaPage.prototype.openButAlso = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_10__butalso_butalso__["a" /* ButAlsoPage */]);
    };
    AgendaPage.prototype.eventProgress = function () {
        var _this = this;
        this.event.publish('user:current');
        this.currentUser = JSON.parse(localStorage.getItem("currentUser"));
        this.eventService.getEventProgress(this.currentUser.id).then(function (data) {
            _this.eventParticipted = data;
        }, function (err) {
            _this.event.publish('http:errors', err);
        });
    };
    AgendaPage.prototype.addPhotoParticipated = function () {
        if (this.eventParticipted.length == 1) {
            this.takePicture();
        }
        else {
            var myModal2 = this.myModal.create('PopinChoiceEventPage', { "events": this.eventParticipted }, { cssClass: 'style-modal' });
            myModal2.present();
        }
    };
    AgendaPage.prototype.takePicture = function () {
        var _this = this;
        this.camera.getPicture({
            destinationType: this.camera.DestinationType.DATA_URL,
            quality: 100,
            targetWidth: 600,
            targetHeight: 600,
            allowEdit: true,
            correctOrientation: true,
            encodingType: this.camera.EncodingType.JPEG
        }).then(function (imageData) {
            _this.commentEvent.photo = "data:image/jpeg;base64," + imageData;
            var myModal2 = _this.myModal.create('EvenCommentPage', {
                "comment": _this.commentEvent,
                "participation": _this.eventParticipted[0].articleId
            }, { cssClass: 'comment-modal' });
            myModal2.present();
        });
    };
    AgendaPage.prototype.openAssociation = function (association, name) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_15__association_sheet_association_sheet__["a" /* AssociationSheetPage */], {
            id: association,
            name: name
        });
    };
    AgendaPage.prototype.detailsduplication = function (id) {
        var myModalOptions = {
            enableBackdropDismiss: false
        };
        var myModal2 = this.myModal.create('PopupEvenDuplicateDetailPage', {
            "parentId": id,
        }, myModalOptions);
        myModal2.present();
    };
    AgendaPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-agenda',template:/*ion-inline-start:"D:\celaneo\mobile\new-mobile\test\src\pages\agenda\agenda.html"*/'<!--\n\n  Generated template for the AgendaPage page.\n\n\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n\n  Ionic pages and navigation.\n\n-->\n\n<ion-content>\n\n    <ion-fab *ngIf="eventParticipted.length != 0" bottom right showWhen="android, ios, windows" class="fab-participted">\n\n        <button color="primary" ion-fab class="fab" (click)="addPhotoParticipated()">\n\n\n\n            <span class="button-inner">\n\n                <ion-icon name="camera" role="img" class="icon icon-ios ion-ios-camera-outline icon-particited" ios="ion-ios-camera-outline"\n\n                          md="ion-ios-camera-outline" style="font-weight: bold" aria-label="camera"></ion-icon>\n\n            </span>\n\n            <div class="button-effect"></div>\n\n        </button>\n\n    </ion-fab>\n\n    <div class="div-left"></div>\n\n    <div class="div-center" style="margin-top: 5% !important;">\n\n        <ion-refresher (ionRefresh)="doRefreshAgenda($event)">\n\n            <ion-refresher-content></ion-refresher-content>\n\n        </ion-refresher>\n\n\n\n        <ion-grid class="grid-bottom">\n\n            <ion-row>\n\n                <div class="agenda-container" *ngFor="let itemDate of itemsDates; let idx = index">\n\n                    <ion-card>\n\n                        <ion-card-header>\n\n                            <strong class="title-date">{{itemDate.key| amLocale:\'fr\' | amDateFormat:\' Do MMMM\'}}</strong>\n\n                            <p class="title-day" text-capitalize> {{itemDate.key| amLocale:\'fr\' | amDateFormat:\'dddd\'}}\n\n                            </p>\n\n                            \n\n                        </ion-card-header>\n\n                        <ion-card-content *ngFor="let item of itemDate.value">\n\n\n\n                            <ion-row class="event-item" >\n\n                                <ion-col col-3 (click)="detailsEvent(item, false, false, false)" text-center>\n\n                                    <span class="start-hour">{{item.startAt| amLocale:\'fr\' |\n\n                                        amDateFormat:\'HH\'}}h{{item.startAt| amLocale:\'fr\' | amDateFormat:\'mm\'}}</span><br>\n\n                                    <img *ngIf="item.private" float-end class="move lock-icons" src="assets/imgs/icons/lock.png" alt="NOUS-Ensemble" />\n\n                                </ion-col>\n\n                                <ion-col col-6>\n\n                                    <div class="bottom-margin-8" (click)="detailsEvent(item, false, false, false)"><strong class="event-title">{{item.title}}</strong></div>\n\n                                    <p text-capitalize class=\'AssoTitle\' *ngIf="item.type == \'community\'" (click)="detailsEvent(item, false, false, false)">\n\n                                        {{item.creatorName}}\n\n                                    </p>\n\n                                    <p text-capitalize class=\'AssoTitle\' *ngIf="item.type == \'association\'" (click)="openAssociation(item.creatorId, item.creatorName)">\n\n                                        {{item.creatorName}}\n\n                                    </p>\n\n                                    <strong>à {{item.cityName}} - {{item.communityName}}</strong>\n\n\n\n                                    \n\n\n\n                                </ion-col>\n\n                                <ion-col col-3 (click)="detailsEvent(item, false, false, false)">\n\n                                    <div *ngIf="(item.imageURL && !item.images) || (!item.imageURL && !item.images) || (item.images && !item.imageURL && item.images.length == 1); else elseBlock"\n\n                                        class="home-card-slides img-div">\n\n                                        <div class="img-div" *ngIf="item.imageURL">\n\n                                            <img class="img-div" data-src="{{item.imageURL}}" imageViewer>\n\n                                        </div>\n\n                                        <div class="img-div" *ngFor="let img of item.images">\n\n                                            <img class="img-div" data-src="{{img.url}}" imageViewer>\n\n                                        </div>\n\n                                        <!--<video style="width: 100%; height: 100%" *ngIf="item.videoFile" controls poster="assets/img/video_default.png">\n\n                                            <source [src]="item.videoFile" type="video/mp4">\n\n                                        </video>-->\n\n                                    </div>\n\n                                    <ng-template #elseBlock>\n\n                                        <ion-slides class="home-card-slides" autoplay="5000" loop="true" pager>\n\n                                            <!--<ion-slide>\n\n                                                <video style="width: 100%; height: 100%" *ngIf="item.videoFile" controls poster="assets/img/video_default.png">\n\n                                                    <source [src]="item.videoFile" type="video/mp4">\n\n                                                </video>\n\n                                            </ion-slide>-->\n\n                                            <ion-slide class="img-div" *ngIf="item.imageURL">\n\n                                                <img class="img-div" data-src="{{item.imageURL}}" imageViewer>\n\n                                            </ion-slide>\n\n                                            <ion-slide class="img-div" *ngFor="let img of item.images">\n\n                                                <img class="img-div" data-src="{{img.url}}" imageViewer>\n\n                                            </ion-slide>\n\n                                        </ion-slides>\n\n                                    </ng-template>\n\n                                </ion-col>\n\n                            </ion-row>\n\n                            <ion-col col-12 text-center>\n\n                                <p text-center>\n\n                                    <span text-center style="display: -webkit-inline-box;">\n\n                                            <p class="numberParagraph">{{item.needCarpool.length}} covoiturages </p> <img alt="NOUS-Ensemble" class="dot-icon" src="assets/imgs/icons/dot.png">\n\n                                            <p class="numberParagraph" (click)="detailsEvent(item, false, true, false)"> {{item.nbParticipants}} participants </p><img alt="NOUS-Ensemble" class="dot-icon" src="assets/imgs/icons/dot.png">\n\n                                            <p class="numberParagraph" (click)="detailsEvent(item, false, false, true)"> {{item.nbCarpoolUsers}} transportés</p>\n\n                                    </span>\n\n                                </p>\n\n                            </ion-col>\n\n                            <ion-row text-center style="margin-left: 6%;">\n\n                                <ion-col col-2 (click)=\'showHideProposeCarpooling(item)\'  style="margin-top: 2%;">\n\n                                    <img alt="NOUS-Ensemble" class="agenda-icons icons-car" src="assets/imgs/icons/car.png">\n\n                                </ion-col>\n\n                                <ion-col col-2 (click)=\'showHideNeedCarpooling(item)\'>\n\n                                    <img alt="NOUS-Ensemble" class="agenda-icons" src="assets/imgs/icons/covoit.png">\n\n                                </ion-col>\n\n\n\n                                <ion-col col-3 (click)=\'showAgendaBenevole(item)\'>\n\n                                    <img alt="NOUS-Ensemble" class="agenda-icons" src="assets/imgs/icons/benevole.png">\n\n                                </ion-col>\n\n                                <ion-col col-2> \n\n                                    <img alt="NOUS-Ensemble" class="agenda-icons icons-stars" *ngIf="item.isParticipated" (click)="cancelParticipation(item)"\n\n                                        src="assets/imgs/icons/star-full.png">\n\n                                    <img alt="NOUS-Ensemble" class="agenda-icons icons-stars" *ngIf="!item.isParticipated" (click)="showHidePutAgenda(item)"\n\n                                        src="assets/imgs/icons/star-empty.png">\n\n                                </ion-col >\n\n                        \n\n                                <ion-col col-2  style="margin-top: -38px;margin-left: 75%;" *ngIf="creatorExists(item.creatorId)">\n\n                                    <div (click)="otherParent(item);" *ngIf="item.isParent">\n\n                                        <ion-icon name="more"></ion-icon>\n\n                                    </div>\n\n                                    <div (click)="otherNotParent(item);" *ngIf="item.hasParent">\n\n                                        <ion-icon name="more"></ion-icon>\n\n                                    </div>\n\n\n\n                                    <div (click)="other(item);" *ngIf="!item.isParent && !item.hasParent">\n\n                                        <ion-icon name="more"></ion-icon>\n\n                                    </div>\n\n\n\n\n\n\n\n\n\n                                    \n\n                                </ion-col> \n\n                                \n\n \n\n                            \n\n                            </ion-row>\n\n\n\n\n\n\n\n                        </ion-card-content>\n\n                    </ion-card>\n\n\n\n\n\n                </div>\n\n                <ion-col col-12 text-center *ngIf="itemsDates.length == 0">\n\n                    <p text-center class="no-result"> Pas de résultat correspondant à votre filtre.</p>\n\n                </ion-col>\n\n\n\n            </ion-row>\n\n            <ion-infinite-scroll (ionInfinite)="doInfinite($event)" *ngIf="loaderShow" threshold="100px">\n\n                <ion-infinite-scroll-content loadingSpinner="bubbles" loadingText="Charger plus...">\n\n                </ion-infinite-scroll-content>\n\n            </ion-infinite-scroll>\n\n        </ion-grid>\n\n\n\n    </div>\n\n    <div class="div-right" text-left>\n\n        <img class="publish" src="assets/imgs/icons/image37.png" (click)="publish()">\n\n    </div>\n\n</ion-content>'/*ion-inline-end:"D:\celaneo\mobile\new-mobile\test\src\pages\agenda\agenda.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_2__providers_globals_globals__["a" /* GlobalsProvider */],
            __WEBPACK_IMPORTED_MODULE_3__providers_user_user__["a" /* UserProvider */],
            __WEBPACK_IMPORTED_MODULE_4__providers_eventsrest_eventsrest__["a" /* EventsrestProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["x" /* Platform */],
            __WEBPACK_IMPORTED_MODULE_12__ionic_native_camera__["a" /* Camera */],
            __WEBPACK_IMPORTED_MODULE_11__providers_comment_comment__["a" /* CommentProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["a" /* ActionSheetController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_6__ionic_native_google_analytics__["a" /* GoogleAnalytics */],
            __WEBPACK_IMPORTED_MODULE_17__providers_article_article__["a" /* ArticleProvider */],
            __WEBPACK_IMPORTED_MODULE_8__ionic_native_calendar__["a" /* Calendar */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_13__ionic_native_social_sharing__["a" /* SocialSharing */],
            __WEBPACK_IMPORTED_MODULE_14__providers_cache_cache__["a" /* CacheProvider */],
            __WEBPACK_IMPORTED_MODULE_16__providers_community_community__["a" /* CommunityProvider */]])
    ], AgendaPage);
    return AgendaPage;
}());

//# sourceMappingURL=agenda.js.map

/***/ }),

/***/ 8:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return GlobalsProvider; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_http__ = __webpack_require__(25);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_rxjs_add_operator_map__ = __webpack_require__(27);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_rxjs_add_operator_map___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_rxjs_add_operator_map__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__pipes_linkreplace_linkreplace__ = __webpack_require__(930);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




/*
  Generated class for the GlobalsProvider provider.

  See https://angular.io/guide/dependency-injection for more info on providers
  and Angular DI.
*/
var GlobalsProvider = /** @class */ (function () {
    function GlobalsProvider(http) {
        this.http = http;
        this.adminAssociations = {};
        this.adminMerchants = {};
        this.adherentMerchants = {};
        this.adherentAssociations = {};
        this.showHeader = true;
        this.showFooter = true;
        this.showSearchNews = false;
        this.showSearchAgenda = false;
        this.showBenevoleAgenda = false;
        this.showproposeCarpooling = false;
        this.showcontactBar = false;
        this.showNeedCarpooling = false;
        this.showAnswerCarpooling = false;
        this.showPutAgenda = false;
        this.themeFilter = false;
        this.publicSearch = false;
        this.privateSearch = false;
        this.villeFilter = false;
        this.appSearch = false;
        this.onEventDetails = false;
        this.onNegativeTopSearch = false;
        this.goodPlanMessage = "";
        this.goodPlanCreatorId = "";
        this.isFromMerchant = false;
        this.searchCriteria = {
            key: null,
            theme: null,
            event: false,
            article: false,
            account: false,
            goodplans: false,
            cities: "all"
        };
        this.nbrNotification = 0;
    }
    GlobalsProvider.prototype.toIsoString = function (date) {
        var tzo = date.getTimezoneOffset(), dif = tzo >= 0 ? '+' : '-', pad = function (num) {
            var norm = Math.floor(Math.abs(num));
            return (norm < 10 ? '0' : '') + norm;
        };
        return date.getFullYear() +
            '-' + pad(date.getMonth() + 1) +
            '-' + pad(date.getDate()) +
            'T' + pad(date.getHours()) +
            ':' + pad(date.getMinutes()) +
            ':' + pad(date.getSeconds()) +
            dif + pad(tzo / 60) +
            ':' + pad(tzo % 60);
    };
    GlobalsProvider.prototype.IsoToDateString = function (isoStr) {
        var decomp = isoStr.split("T");
        var date = decomp[0];
        var time = decomp[1];
        if (time) {
            var decompTime = time.split(":");
            return date + " " + decompTime[0] + ":" + decompTime[1];
        }
        else {
            return null;
        }
    };
    GlobalsProvider.prototype.phpToJsDate = function (phpDate, type) {
        var decomp = phpDate.split("+");
        if (decomp[1]) {
        }
        if (type == "date") {
            return new Date(decomp[0]);
        }
        else {
            return decomp[0];
        }
    };
    GlobalsProvider.prototype.pad = function (d) {
        return (d < 10) ? '0' + d.toString() : d.toString();
    };
    GlobalsProvider.prototype.capitalizeData = function (data) {
        return data.charAt(0).toUpperCase() + data.slice(1);
    };
    GlobalsProvider.prototype.linky = function (val) {
        var l = new __WEBPACK_IMPORTED_MODULE_3__pipes_linkreplace_linkreplace__["a" /* LinkreplacePipe */]();
        return l.transform(val);
    };
    GlobalsProvider = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Injectable"])(),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__angular_http__["c" /* Http */]])
    ], GlobalsProvider);
    return GlobalsProvider;
}());

//# sourceMappingURL=globals.js.map

/***/ }),

/***/ 9:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return EventsrestProvider; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_rxjs_Rx__ = __webpack_require__(191);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_rxjs_Rx___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_rxjs_Rx__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__app_config__ = __webpack_require__(28);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__angular_http__ = __webpack_require__(25);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




/*
  Generated class for the EventsrestProvider provider.

  See https://angular.io/docs/ts/latest/guide/dependency-injection.html
  for more info on providers and Angular 2 DI.
*/
var eventsURL = __WEBPACK_IMPORTED_MODULE_2__app_config__["e" /* SERVER_URL */] + "event/";
var ArticleURL = __WEBPACK_IMPORTED_MODULE_2__app_config__["e" /* SERVER_URL */] + "article/";
var EventsrestProvider = /** @class */ (function () {
    function EventsrestProvider(http) {
        this.http = http;
    }
    EventsrestProvider.prototype.findAll = function (page) {
        console.log("URL 3 : " + eventsURL + 'citzen/agenda/' + page + '/' + 4 + '?NousEnsembleToken=' + localStorage.getItem("token"));
        return this.http.get(eventsURL + 'citzen/agenda/' + page + '/' + 4 + '?NousEnsembleToken=' + localStorage.getItem("token"))
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    EventsrestProvider.prototype.findAllByInterestPage = function (page) {
        if (page) {
            console.log("URL 5 : " + eventsURL + 'citzeneventall/interests/' + page + '/' + 4 + '?NousEnsembleToken=' + localStorage.getItem("token"));
            return this.http.get(eventsURL + 'citzeneventall/interests/' + page + '/' + 4 + '?NousEnsembleToken=' + localStorage.getItem("token"))
                .map(function (res) { return res.json(); })
                .toPromise();
        }
    };
    EventsrestProvider.prototype.getFilterbycitytime = function (filtercity, filterdate, page) {
        return this.http.get(eventsURL + 'citzen/filter/' + filtercity + '/' + filterdate + '/' + page + '/' + 4 + '?NousEnsembleToken=' + localStorage.getItem("token")).map(function (res) { return res.json(); })
            .toPromise();
    };
    EventsrestProvider.prototype.getFilterpersonalizedevent = function (dayactivitymonday, dayactivitytuesday, dayactivitywednesday, dayactivitythursday, dayactivityfriday, dayactivitysaturday, dayactivitysunday, agefrom, ageto, lessThanSix, betweenSixTwelve, betweenTwelveEighteen, allChildrens) {
        var account_id = localStorage.getItem("account_id");
        var account_type = localStorage.getItem("account_type");
        return this.http.get(eventsURL + 'citzenevent/personalized/' + account_type + "/" + account_id + "/" + dayactivitymonday + "/" + dayactivitytuesday + "/" + dayactivitywednesday + "/" + dayactivitythursday + "/" + dayactivityfriday + "/" + dayactivitysaturday + "/" + dayactivitysunday
            + "/" + agefrom + "/" + ageto + "/" + lessThanSix + "/" + betweenSixTwelve + "/" + betweenTwelveEighteen + "/" + allChildrens + '?NousEnsembleToken=' + localStorage.getItem("token")).map(function (res) { return res.json(); })
            .toPromise();
    };
    EventsrestProvider.prototype.findById = function (id) {
        return this.http.get(eventsURL + id + '?NousEnsembleToken=' + localStorage.getItem("token"))
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    EventsrestProvider.prototype.findAllArticles = function (type, id) {
        var url = __WEBPACK_IMPORTED_MODULE_2__app_config__["e" /* SERVER_URL */] + "article/" + id + "/" + type + "/0/100" + '?NousEnsembleToken=' + localStorage.getItem("token");
        console.log("URL 5 : " + url);
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    EventsrestProvider.prototype.findAssociationArticles = function (id) {
        var url = ArticleURL + id + '/association?NousEnsembleToken=' + localStorage.getItem("token");
        console.log("URL 4 : " + url);
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    EventsrestProvider.prototype.getDetailsEvent = function (id) {
        var url = __WEBPACK_IMPORTED_MODULE_2__app_config__["e" /* SERVER_URL */] + "event/" + id + '/details?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    EventsrestProvider.prototype.delete = function (id, mode) {
        var url = __WEBPACK_IMPORTED_MODULE_2__app_config__["e" /* SERVER_URL */] + "event/delete/" + id + '?NousEnsembleToken=' + localStorage.getItem("token") + "&mode=" + mode;
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    EventsrestProvider.prototype.getReservations = function () {
        var url = __WEBPACK_IMPORTED_MODULE_2__app_config__["e" /* SERVER_URL */] + 'event/eventreservations?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    EventsrestProvider.prototype.activate = function (id) {
        var url = __WEBPACK_IMPORTED_MODULE_2__app_config__["e" /* SERVER_URL */] + 'event/' + id + '/activate?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    EventsrestProvider.prototype.getArticleId = function (event) {
        var url = __WEBPACK_IMPORTED_MODULE_2__app_config__["e" /* SERVER_URL */] + 'article/' + event + '/findEvent?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    EventsrestProvider.prototype.postEvent = function (type, id, data) {
        var url = eventsURL + type + '/' + id + '/new' + '?NousEnsembleToken=' + localStorage.getItem("token");
        var body = JSON.stringify({
            title: data.title,
            video: data.videoFile,
            photo: data.photo,
            photo2: data.secondPhoto,
            photo3: data.thirdPhoto,
            place: data.address,
            start_at: data.startDate.fullDate,
            end_at: data.endDate.fullDate,
            description: data.description,
            price: data.price,
            personalized: data.personalized,
            monday: data.monday,
            tuesday: data.tuesday,
            wednesday: data.wednesday,
            thursday: data.thursday,
            friday: data.friday,
            saturday: data.saturday,
            sunday: data.sunday,
            agefrom: data.agefrom,
            ageto: data.ageto,
            lessthansix: data.lessthansix,
            betweensixtwelve: data.betweensixtwelve,
            twelveeighteen: data.twelveeighteen,
            allchildrens: data.allchildrens,
            article_id: data.article,
            city: data.city,
            categories: data.categories,
            private: data.private,
            secondCategories: data.secondCategories,
            secondCommu: data.secondCommu,
            room: data.room,
            messageMail: data.mailForRoom
        });
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    EventsrestProvider.prototype.desactivate = function (id) {
        var url = __WEBPACK_IMPORTED_MODULE_2__app_config__["e" /* SERVER_URL */] + 'event/' + id + '/deactivate?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    EventsrestProvider.prototype.takePart = function (id) {
        var url = __WEBPACK_IMPORTED_MODULE_2__app_config__["e" /* SERVER_URL */] + 'event/' + id + '/takepart?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    EventsrestProvider.prototype.cancelTakePart = function (id) {
        var url = __WEBPACK_IMPORTED_MODULE_2__app_config__["e" /* SERVER_URL */] + 'event/' + id + '/canceltakepart?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    EventsrestProvider.prototype.postContact = function (id, type, value) {
        var url = __WEBPACK_IMPORTED_MODULE_2__app_config__["e" /* SERVER_URL */] + 'event/' + id + '/addcontact?NousEnsembleToken=' + localStorage.getItem("token");
        var body = JSON.stringify({
            type: type,
            value: value,
        });
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    EventsrestProvider.prototype.addCarpoolAnswer = function (id, phone) {
        var url = __WEBPACK_IMPORTED_MODULE_2__app_config__["e" /* SERVER_URL */] + 'event/' + id + '/addCarpollAnswer?NousEnsembleToken=' + localStorage.getItem("token");
        var body = JSON.stringify({
            phone: phone,
        });
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    EventsrestProvider.prototype.addCarpool = function (id, phone, rallyPoint, rdvHours, seatedFree) {
        var url = __WEBPACK_IMPORTED_MODULE_2__app_config__["e" /* SERVER_URL */] + 'event/' + id + '/addCarpoll?NousEnsembleToken=' + localStorage.getItem("token");
        var body = JSON.stringify({
            phone: phone,
            rallyPoint: rallyPoint,
            rdvHours: rdvHours,
            seatedFree: seatedFree
        });
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    EventsrestProvider.prototype.postMails = function (data) {
        var benevoles_string = localStorage.getItem("benevoles");
        var url = __WEBPACK_IMPORTED_MODULE_2__app_config__["e" /* SERVER_URL */] + 'event/volunteers/mails?NousEnsembleToken=' + localStorage.getItem("token");
        var body = JSON.stringify({
            benevoles: benevoles_string.split(","),
            object: data.objet,
            email: data.email,
            event_id: localStorage.getItem("currentEvent"),
            account_id: localStorage.getItem("account_id"),
            account_type: localStorage.getItem("account_type")
        });
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    EventsrestProvider.prototype.editEvent = function (event, param) {
        var url = eventsURL + param + '/' + event + '/editPrivate' + '?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    EventsrestProvider.prototype.eventDuplicateNew = function (data, id, eventImgs) {
        var url = eventsURL + id + '/duplicate' + '?NousEnsembleToken=' + localStorage.getItem("token");
        var body = JSON.stringify({
            title: data.title || null,
            description: data.description || null,
            price: "Gratuit",
            city: data.cityName || null,
            video: data.videoFile || null,
            photo: eventImgs.eventPhoto || null,
            photos: eventImgs.photos || null,
            photo2: eventImgs.eventSecondPhoto || null,
            photo3: eventImgs.eventThirdPhoto || null,
            // push_enabled:data.push_enabled || null,
            recursivity_end: data.recursivity_end || null,
            recurivity_period: data.recurivity_period || null,
            recursivity_day: data.recursivity_day || null,
            recursivity_hour: data.recursivity_hour || null,
            images: data.images,
        });
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    EventsrestProvider.prototype.putEvent = function (event, data, enableArticle, account_type, eventImgs) {
        var url = eventsURL + account_type + '/' + event + '/edit' + '?NousEnsembleToken=' + localStorage.getItem("token");
        var body = JSON.stringify({
            title: data.title,
            video: data.videoFile,
            photo: eventImgs.eventPhoto,
            photos: eventImgs.photos,
            imges: data.images,
            todelete: eventImgs.toDelete,
            photo2: eventImgs.eventSecondPhoto,
            todelete2: eventImgs.toDeleteSecond,
            photoId2: eventImgs.secondId,
            photo3: eventImgs.eventThirdPhoto,
            todelete3: eventImgs.toDeleteThird,
            photoId3: eventImgs.thirdId,
            place: data.address,
            codePostal: data.postalcode,
            start_at: data.startAt,
            description: data.description,
            price: data.price,
            reservation_url: data.reservationUrl,
            need_volunteer: data.volunteer,
            personalized: data.personalized,
            monday: data.monday,
            tuesday: data.tuesday,
            wednesday: data.wednesday,
            thursday: data.thursday,
            friday: data.friday,
            saturday: data.saturday,
            sunday: data.sunday,
            agefrom: data.agefrom,
            ageto: data.ageto,
            lessthansix: data.lessthansix,
            betweensixtwelve: data.betweensixtwelve,
            twelveeighteen: data.twelveeighteen,
            allchildrens: data.allchildrens,
            eventreservation_id: data.reservation,
            article_id: data.article,
            cityName: data.cityName,
            categories: data.categories,
            pushEnabled: data.push.enabled,
            pushDate: data.push.date,
            pushContent: data.push.content,
            enableArticle: enableArticle,
            mode: data.mode
        });
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    EventsrestProvider.prototype.getAgendaEvent = function (city, period, page) {
        var url = eventsURL + city + '/agenda/' + period + '/pagination/' + page + '/6' + '?NousEnsembleToken=' + localStorage.getItem("token");
        console.log("URL : " + url);
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    EventsrestProvider.prototype.getEventsByUser = function (page, parameters) {
        var url = eventsURL + 'agenda/' + page + '/6' + '?NousEnsembleToken=' + localStorage.getItem("token") + parameters;
        console.log("URL 2 : " + url);
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    EventsrestProvider.prototype.getEventParticipants = function (id) {
        var url = eventsURL + id + '/participants?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    /*getEventBenevole(id) {
        var url = eventsURL + id + '/volonteers?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(res => res.json())
            .toPromise();
    }*/
    EventsrestProvider.prototype.getEventBenevole = function (id) {
        var url = eventsURL + id + '/transported?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    EventsrestProvider.prototype.getEventProgress = function (id) {
        var url = eventsURL + id + '/progress?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    EventsrestProvider.prototype.addParticipantsNbre = function (events) {
        var url = __WEBPACK_IMPORTED_MODULE_2__app_config__["e" /* SERVER_URL */] + 'event/participantsNbre?NousEnsembleToken=' + localStorage.getItem("token");
        var body = JSON.stringify({
            events: events,
        });
        return this.http.post(url, body)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    EventsrestProvider.prototype.deleteEventCarpoolDemand = function (id) {
        var url = __WEBPACK_IMPORTED_MODULE_2__app_config__["e" /* SERVER_URL */] + 'event/' + id + '/deleteCarpoolDemand?NousEnsembleToken=' + localStorage.getItem("token");
        return this.http.get(url)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    EventsrestProvider = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["Injectable"])(),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_3__angular_http__["c" /* Http */]])
    ], EventsrestProvider);
    return EventsrestProvider;
}());

//# sourceMappingURL=eventsrest.js.map

/***/ }),

/***/ 90:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return HomePage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_forms__ = __webpack_require__(21);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__angular_http__ = __webpack_require__(25);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__login_login__ = __webpack_require__(133);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__register_first_register_first__ = __webpack_require__(212);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__ionic_native_push__ = __webpack_require__(107);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__Models_user__ = __webpack_require__(203);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__providers_globals_globals__ = __webpack_require__(8);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};









var HomePage = /** @class */ (function () {
    function HomePage(event, http, navCtrl, formBuilder, actionSheetCtrl, toastCtrl, platform, loadingCtrl, alertCtrl, push, myModal, appGlobals) {
        this.event = event;
        this.http = http;
        this.navCtrl = navCtrl;
        this.formBuilder = formBuilder;
        this.actionSheetCtrl = actionSheetCtrl;
        this.toastCtrl = toastCtrl;
        this.platform = platform;
        this.loadingCtrl = loadingCtrl;
        this.alertCtrl = alertCtrl;
        this.push = push;
        this.myModal = myModal;
        this.appGlobals = appGlobals;
        this.newUser = new __WEBPACK_IMPORTED_MODULE_7__Models_user__["a" /* User */]();
    }
    HomePage.prototype.LoginPage = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_4__login_login__["a" /* LoginPage */]);
    };
    HomePage.prototype.registerPageForward = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_5__register_first_register_first__["a" /* RegisterFirstPage */], {
            newUser: this.newUser
        });
    };
    HomePage.prototype.SelectCity = function () {
        var _this = this;
        var myModal2 = this.myModal.create('SelectCityPage', {}, { cssClass: 'cities-modal' });
        myModal2.onDidDismiss(function (data) {
            if (data) {
                _this.newUser.setCity(data.name);
                _this.registerPageForward();
            }
        });
        myModal2.present();
    };
    HomePage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-home',template:/*ion-inline-start:"D:\celaneo\mobile\new-mobile\test\src\pages\home\home.html"*/'<ion-content>\n\n    <div class="div-left">\n\n\n\n    </div>\n\n    <div class="div-center">\n\n        <div text-center>\n\n            <img class=\'headerImg\' src="assets/imgs/register.png">\n\n        </div>\n\n        <ion-grid padding-bottom>\n\n            <ion-row>\n\n                <ion-col col-12 class="no-padding " text-center>\n\n                    <button ion-button class="mt-medium" color="grey-color" round (click)="LoginPage()">Je me connecte</button>\n\n                </ion-col>\n\n                <ion-col col-12 class="no-padding mt-regular" text-center>\n\n                    <h6>OU</h6>\n\n                </ion-col>\n\n                <ion-col col-12 class="no-padding mt-regular" text-center>\n\n                    <p>Je crée mon compte</p>\n\n                </ion-col>\n\n                <ion-col col-12 text-center>\n\n                    <div class="div-select-rond">\n\n                        <ion-item>\n\n                            <ion-input (click)="SelectCity()"   readonly autocomplete="off" autocorrect="on" name="city" type="text" id="city" placeholder="Ville" [(ngModel)]="newUser.city"\n\n                                #city="ngModel" required></ion-input>\n\n                            <ion-icon name="pin" item-left> </ion-icon> \n\n                        </ion-item>\n\n<!--                        <ion-select text-center class="select-grey select-not-ie mt-medium" (ionChange)="registerPageForward()"\n\n                            placeholder="Votre Ville (ou code postal)" interface="popover" [(ngModel)]="newUser.city"\n\n                            *ngIf="appGlobals.allCities">\n\n                            <ion-option *ngFor="let city of appGlobals.allCities" value={{city.id}}>{{city.name}}</ion-option>\n\n                        </ion-select>\n\n\n\n                        <select text-center class="select-grey select-ie mt-medium" (ionChange)="registerPageForward()"\n\n                            [(ngModel)]="newUser.city" *ngIf="appGlobals.allCities">\n\n                            <option value="null">Votre Ville (ou code postal)</option>\n\n                            <option *ngFor="let city of appGlobals.allCities" value={{city.id}}>{{city.name}}</option>\n\n                        </select>-->\n\n                    </div>\n\n                </ion-col>\n\n\n\n                <!-- <ion-col class="col-submit submit-ne" col-12 text-center>\n\n                    <button ion-button color="primary" round class="button-big" (click)="registerPageForward()">Suivant</button>\n\n                </ion-col> -->\n\n            </ion-row>\n\n        </ion-grid>\n\n    </div>\n\n    <div class="div-right"></div>\n\n</ion-content>'/*ion-inline-end:"D:\celaneo\mobile\new-mobile\test\src\pages\home\home.html"*/
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_3__angular_http__["c" /* Http */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_2__angular_forms__["a" /* FormBuilder */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["a" /* ActionSheetController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["z" /* ToastController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["x" /* Platform */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_6__ionic_native_push__["a" /* Push */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_8__providers_globals_globals__["a" /* GlobalsProvider */]])
    ], HomePage);
    return HomePage;
}());

//# sourceMappingURL=home.js.map

/***/ }),

/***/ 930:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return LinkreplacePipe; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_autolinker__ = __webpack_require__(931);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_autolinker___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_autolinker__);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};


/**
 * Generated class for the LinkreplacePipe pipe.
 *
 * See https://angular.io/docs/ts/latest/guide/pipes.html for more info on
 * Angular Pipes.
 */
var LinkreplacePipe = /** @class */ (function () {
    function LinkreplacePipe() {
    }
    /**
     * Takes a value and makes it lowercase.
     */
    LinkreplacePipe.prototype.transform = function (value, options) {
        return __WEBPACK_IMPORTED_MODULE_1_autolinker__["link"](value, options);
    };
    LinkreplacePipe = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Pipe"])({
            name: 'linkreplace',
        })
    ], LinkreplacePipe);
    return LinkreplacePipe;
}());

//# sourceMappingURL=linkreplace.js.map

/***/ }),

/***/ 939:
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"./af": 327,
	"./af.js": 327,
	"./ar": 328,
	"./ar-dz": 329,
	"./ar-dz.js": 329,
	"./ar-kw": 330,
	"./ar-kw.js": 330,
	"./ar-ly": 331,
	"./ar-ly.js": 331,
	"./ar-ma": 332,
	"./ar-ma.js": 332,
	"./ar-sa": 333,
	"./ar-sa.js": 333,
	"./ar-tn": 334,
	"./ar-tn.js": 334,
	"./ar.js": 328,
	"./az": 335,
	"./az.js": 335,
	"./be": 336,
	"./be.js": 336,
	"./bg": 337,
	"./bg.js": 337,
	"./bm": 338,
	"./bm.js": 338,
	"./bn": 339,
	"./bn-bd": 340,
	"./bn-bd.js": 340,
	"./bn.js": 339,
	"./bo": 341,
	"./bo.js": 341,
	"./br": 342,
	"./br.js": 342,
	"./bs": 343,
	"./bs.js": 343,
	"./ca": 344,
	"./ca.js": 344,
	"./cs": 345,
	"./cs.js": 345,
	"./cv": 346,
	"./cv.js": 346,
	"./cy": 347,
	"./cy.js": 347,
	"./da": 348,
	"./da.js": 348,
	"./de": 349,
	"./de-at": 350,
	"./de-at.js": 350,
	"./de-ch": 351,
	"./de-ch.js": 351,
	"./de.js": 349,
	"./dv": 352,
	"./dv.js": 352,
	"./el": 353,
	"./el.js": 353,
	"./en-au": 354,
	"./en-au.js": 354,
	"./en-ca": 355,
	"./en-ca.js": 355,
	"./en-gb": 356,
	"./en-gb.js": 356,
	"./en-ie": 357,
	"./en-ie.js": 357,
	"./en-il": 358,
	"./en-il.js": 358,
	"./en-in": 359,
	"./en-in.js": 359,
	"./en-nz": 360,
	"./en-nz.js": 360,
	"./en-sg": 361,
	"./en-sg.js": 361,
	"./eo": 362,
	"./eo.js": 362,
	"./es": 363,
	"./es-do": 364,
	"./es-do.js": 364,
	"./es-mx": 365,
	"./es-mx.js": 365,
	"./es-us": 366,
	"./es-us.js": 366,
	"./es.js": 363,
	"./et": 367,
	"./et.js": 367,
	"./eu": 368,
	"./eu.js": 368,
	"./fa": 369,
	"./fa.js": 369,
	"./fi": 370,
	"./fi.js": 370,
	"./fil": 371,
	"./fil.js": 371,
	"./fo": 372,
	"./fo.js": 372,
	"./fr": 373,
	"./fr-ca": 374,
	"./fr-ca.js": 374,
	"./fr-ch": 375,
	"./fr-ch.js": 375,
	"./fr.js": 373,
	"./fy": 376,
	"./fy.js": 376,
	"./ga": 377,
	"./ga.js": 377,
	"./gd": 378,
	"./gd.js": 378,
	"./gl": 379,
	"./gl.js": 379,
	"./gom-deva": 380,
	"./gom-deva.js": 380,
	"./gom-latn": 381,
	"./gom-latn.js": 381,
	"./gu": 382,
	"./gu.js": 382,
	"./he": 383,
	"./he.js": 383,
	"./hi": 384,
	"./hi.js": 384,
	"./hr": 385,
	"./hr.js": 385,
	"./hu": 386,
	"./hu.js": 386,
	"./hy-am": 387,
	"./hy-am.js": 387,
	"./id": 388,
	"./id.js": 388,
	"./is": 389,
	"./is.js": 389,
	"./it": 390,
	"./it-ch": 391,
	"./it-ch.js": 391,
	"./it.js": 390,
	"./ja": 392,
	"./ja.js": 392,
	"./jv": 393,
	"./jv.js": 393,
	"./ka": 394,
	"./ka.js": 394,
	"./kk": 395,
	"./kk.js": 395,
	"./km": 396,
	"./km.js": 396,
	"./kn": 397,
	"./kn.js": 397,
	"./ko": 398,
	"./ko.js": 398,
	"./ku": 399,
	"./ku.js": 399,
	"./ky": 400,
	"./ky.js": 400,
	"./lb": 401,
	"./lb.js": 401,
	"./lo": 402,
	"./lo.js": 402,
	"./lt": 403,
	"./lt.js": 403,
	"./lv": 404,
	"./lv.js": 404,
	"./me": 405,
	"./me.js": 405,
	"./mi": 406,
	"./mi.js": 406,
	"./mk": 407,
	"./mk.js": 407,
	"./ml": 408,
	"./ml.js": 408,
	"./mn": 409,
	"./mn.js": 409,
	"./mr": 410,
	"./mr.js": 410,
	"./ms": 411,
	"./ms-my": 412,
	"./ms-my.js": 412,
	"./ms.js": 411,
	"./mt": 413,
	"./mt.js": 413,
	"./my": 414,
	"./my.js": 414,
	"./nb": 415,
	"./nb.js": 415,
	"./ne": 416,
	"./ne.js": 416,
	"./nl": 417,
	"./nl-be": 418,
	"./nl-be.js": 418,
	"./nl.js": 417,
	"./nn": 419,
	"./nn.js": 419,
	"./oc-lnc": 420,
	"./oc-lnc.js": 420,
	"./pa-in": 421,
	"./pa-in.js": 421,
	"./pl": 422,
	"./pl.js": 422,
	"./pt": 423,
	"./pt-br": 424,
	"./pt-br.js": 424,
	"./pt.js": 423,
	"./ro": 425,
	"./ro.js": 425,
	"./ru": 426,
	"./ru.js": 426,
	"./sd": 427,
	"./sd.js": 427,
	"./se": 428,
	"./se.js": 428,
	"./si": 429,
	"./si.js": 429,
	"./sk": 430,
	"./sk.js": 430,
	"./sl": 431,
	"./sl.js": 431,
	"./sq": 432,
	"./sq.js": 432,
	"./sr": 433,
	"./sr-cyrl": 434,
	"./sr-cyrl.js": 434,
	"./sr.js": 433,
	"./ss": 435,
	"./ss.js": 435,
	"./sv": 436,
	"./sv.js": 436,
	"./sw": 437,
	"./sw.js": 437,
	"./ta": 438,
	"./ta.js": 438,
	"./te": 439,
	"./te.js": 439,
	"./tet": 440,
	"./tet.js": 440,
	"./tg": 441,
	"./tg.js": 441,
	"./th": 442,
	"./th.js": 442,
	"./tk": 443,
	"./tk.js": 443,
	"./tl-ph": 444,
	"./tl-ph.js": 444,
	"./tlh": 445,
	"./tlh.js": 445,
	"./tr": 446,
	"./tr.js": 446,
	"./tzl": 447,
	"./tzl.js": 447,
	"./tzm": 448,
	"./tzm-latn": 449,
	"./tzm-latn.js": 449,
	"./tzm.js": 448,
	"./ug-cn": 450,
	"./ug-cn.js": 450,
	"./uk": 451,
	"./uk.js": 451,
	"./ur": 452,
	"./ur.js": 452,
	"./uz": 453,
	"./uz-latn": 454,
	"./uz-latn.js": 454,
	"./uz.js": 453,
	"./vi": 455,
	"./vi.js": 455,
	"./x-pseudo": 456,
	"./x-pseudo.js": 456,
	"./yo": 457,
	"./yo.js": 457,
	"./zh-cn": 458,
	"./zh-cn.js": 458,
	"./zh-hk": 459,
	"./zh-hk.js": 459,
	"./zh-mo": 460,
	"./zh-mo.js": 460,
	"./zh-tw": 461,
	"./zh-tw.js": 461
};
function webpackContext(req) {
	return __webpack_require__(webpackContextResolve(req));
};
function webpackContextResolve(req) {
	var id = map[req];
	if(!(id + 1)) // check for number or string
		throw new Error("Cannot find module '" + req + "'.");
	return id;
};
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = 939;

/***/ }),

/***/ 975:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return Association; });
var Association = /** @class */ (function () {
    function Association() {
        this.name = null;
        this.photo = null;
        this.category = null;
        this.community = null;
        this.address = null;
        this.codePostal = null;
        this.phone = null;
        this.email = null;
        this.city = null;
        this.description = null;
        this.monday = "0";
        this.mondayHour = null;
        this.mondayHourEnd = null;
        this.tuesday = "0";
        this.tuesdayHour = null;
        this.tuesdayHourEnd = null;
        this.wednesday = "0";
        this.wednesdayHour = null;
        this.wednesdayHourEnd = null;
        this.thursday = "0";
        this.thursdayHour = null;
        this.thursdayHourEnd = null;
        this.friday = "0";
        this.fridayHour = null;
        this.fridayHourEnd = null;
        this.saturday = "0";
        this.saturdayHour = null;
        this.saturdayHourEnd = null;
        this.sunday = "0";
        this.sundayHour = null;
        this.sundayHourEnd = null;
        this.timing = null;
    }
    Association.prototype.getId = function () {
        return this.id;
    };
    Association.prototype.getName = function () {
        return this.name;
    };
    Association.prototype.getCommunity = function () {
        return this.community;
    };
    Association.prototype.setCommunity = function (community) {
        this.community = community;
    };
    Association.prototype.setName = function (name) {
        this.name = name;
    };
    Association.prototype.getPhoto = function () {
        return this.photo;
    };
    Association.prototype.setPhoto = function (photo) {
        this.photo = photo;
    };
    Association.prototype.getDescription = function () {
        return this.description;
    };
    Association.prototype.setDescription = function (description) {
        this.description = description;
    };
    Association.prototype.getCity = function () {
        return this.city;
    };
    Association.prototype.setCity = function (city) {
        this.city = city;
    };
    Association.prototype.getCategory = function () {
        return this.category;
    };
    Association.prototype.setCategory = function (category) {
        this.category = category;
    };
    Association.prototype.getAddress = function () {
        return this.address;
    };
    Association.prototype.setAddress = function (address) {
        this.address = address;
    };
    Association.prototype.getCodePostal = function () {
        return this.codePostal;
    };
    Association.prototype.setCodePostal = function (codePostal) {
        this.codePostal = codePostal;
    };
    Association.prototype.getPhone = function () {
        return this.phone;
    };
    Association.prototype.setPhone = function (phone) {
        this.phone = phone;
    };
    Association.prototype.getEmail = function () {
        return this.email;
    };
    Association.prototype.setEmail = function (email) {
        this.email = email;
    };
    Association.prototype.getMonday = function () {
        return this.monday;
    };
    Association.prototype.setMonday = function (monday) {
        this.monday = monday;
    };
    Association.prototype.getMondayHour = function () {
        return this.mondayHour;
    };
    Association.prototype.setMondayHour = function (mondayHour) {
        this.mondayHour = mondayHour;
    };
    Association.prototype.getMondayHourEnd = function () {
        return this.mondayHourEnd;
    };
    Association.prototype.setMondayHourEnd = function (mondayHourEnd) {
        this.mondayHourEnd = mondayHourEnd;
    };
    Association.prototype.getTuesday = function () {
        return this.tuesday;
    };
    Association.prototype.setTuesday = function (tuesday) {
        this.tuesday = tuesday;
    };
    Association.prototype.getTuesdayHour = function () {
        return this.tuesdayHour;
    };
    Association.prototype.setTuesdayHour = function (tuesdayHour) {
        this.tuesdayHour = tuesdayHour;
    };
    Association.prototype.getTuesdayHourEnd = function () {
        return this.tuesdayHourEnd;
    };
    Association.prototype.setTuesdayHourEnd = function (tuesdayHourEnd) {
        this.tuesdayHourEnd = tuesdayHourEnd;
    };
    Association.prototype.getWednesday = function () {
        return this.wednesday;
    };
    Association.prototype.setWednesday = function (wednesday) {
        this.wednesday = wednesday;
    };
    Association.prototype.getWednesdayHour = function () {
        return this.wednesdayHour;
    };
    Association.prototype.setWednesdayHour = function (wednesdayHour) {
        this.wednesdayHour = wednesdayHour;
    };
    Association.prototype.getWednesdayHourEnd = function () {
        return this.wednesdayHourEnd;
    };
    Association.prototype.setWednesdayHourEnd = function (wednesdayHourEnd) {
        this.wednesdayHourEnd = wednesdayHourEnd;
    };
    Association.prototype.getThursday = function () {
        return this.thursday;
    };
    Association.prototype.setThursday = function (thursday) {
        this.thursday = thursday;
    };
    Association.prototype.getThursdayHour = function () {
        return this.thursdayHour;
    };
    Association.prototype.setThursdayHour = function (thursdayHour) {
        this.thursdayHour = thursdayHour;
    };
    Association.prototype.getThursdayHourEnd = function () {
        return this.thursdayHourEnd;
    };
    Association.prototype.setThursdayHourEnd = function (thursdayHourEnd) {
        this.thursdayHourEnd = thursdayHourEnd;
    };
    Association.prototype.getFriday = function () {
        return this.friday;
    };
    Association.prototype.setFriday = function (friday) {
        this.friday = friday;
    };
    Association.prototype.getFridayHour = function () {
        return this.fridayHour;
    };
    Association.prototype.setFridayHour = function (fridayHour) {
        this.fridayHour = fridayHour;
    };
    Association.prototype.getFridayHourEnd = function () {
        return this.fridayHourEnd;
    };
    Association.prototype.setFridayHourEnd = function (fridayHourEnd) {
        this.fridayHourEnd = fridayHourEnd;
    };
    Association.prototype.getSaturday = function () {
        return this.saturday;
    };
    Association.prototype.setSaturday = function (saturday) {
        this.saturday = saturday;
    };
    Association.prototype.getSaturdayHour = function () {
        return this.saturdayHour;
    };
    Association.prototype.setSaturdayHour = function (saturdayHour) {
        this.saturdayHour = saturdayHour;
    };
    Association.prototype.getSaturdayHourEnd = function () {
        return this.saturdayHourEnd;
    };
    Association.prototype.setSaturdayHourEnd = function (saturdayHourEnd) {
        this.saturdayHourEnd = saturdayHourEnd;
    };
    Association.prototype.getSunday = function () {
        return this.sunday;
    };
    Association.prototype.setSunday = function (sunday) {
        this.sunday = sunday;
    };
    Association.prototype.getSundayHour = function () {
        return this.sundayHour;
    };
    Association.prototype.setSundayHour = function (sundayHour) {
        this.sundayHour = sundayHour;
    };
    Association.prototype.getSundayHouEnd = function () {
        return this.sundayHourEnd;
    };
    Association.prototype.setSundayHourEnd = function (sundayHourEnd) {
        this.sundayHourEnd = sundayHourEnd;
    };
    Association.prototype.getTiming = function () {
        return this.timing;
    };
    Association.prototype.setTiming = function (timing) {
        this.timing = timing;
    };
    return Association;
}());

//# sourceMappingURL=association.js.map

/***/ }),

/***/ 976:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return Merchant; });
var Merchant = /** @class */ (function () {
    function Merchant() {
        this.name = null;
        this.photo = null;
        this.category = null;
        this.siret = null;
        this.address = null;
        this.codePostal = null;
        this.phone = null;
        this.email = null;
        this.city = null;
        this.description = null;
        this.timing = null;
        this.community = null;
    }
    Merchant.prototype.getId = function () {
        return this.id;
    };
    Merchant.prototype.getName = function () {
        return this.name;
    };
    Merchant.prototype.setName = function (name) {
        this.name = name;
    };
    Merchant.prototype.getCommunity = function () {
        return this.community;
    };
    Merchant.prototype.setCommunity = function (community) {
        this.community = community;
    };
    Merchant.prototype.getPhoto = function () {
        return this.photo;
    };
    Merchant.prototype.setPhoto = function (photo) {
        this.photo = photo;
    };
    Merchant.prototype.getDescription = function () {
        return this.description;
    };
    Merchant.prototype.setDescription = function (description) {
        this.description = description;
    };
    Merchant.prototype.getCity = function () {
        return this.city;
    };
    Merchant.prototype.setCity = function (city) {
        this.city = city;
    };
    Merchant.prototype.getCategory = function () {
        return this.category;
    };
    Merchant.prototype.setCategory = function (category) {
        this.category = category;
    };
    Merchant.prototype.getAddress = function () {
        return this.address;
    };
    Merchant.prototype.setAddress = function (address) {
        this.address = address;
    };
    Merchant.prototype.getCodePostal = function () {
        return this.codePostal;
    };
    Merchant.prototype.setCodePostal = function (codePostal) {
        this.codePostal = codePostal;
    };
    Merchant.prototype.getPhone = function () {
        return this.phone;
    };
    Merchant.prototype.setPhone = function (phone) {
        this.phone = phone;
    };
    Merchant.prototype.getEmail = function () {
        return this.email;
    };
    Merchant.prototype.setEmail = function (email) {
        this.email = email;
    };
    Merchant.prototype.getTiming = function () {
        return this.timing;
    };
    Merchant.prototype.setTiming = function (timing) {
        this.timing = timing;
    };
    Merchant.prototype.getSiret = function () {
        return this.siret;
    };
    Merchant.prototype.setSiret = function (siret) {
        this.siret = siret;
    };
    return Merchant;
}());

//# sourceMappingURL=merchant.js.map

/***/ }),

/***/ 997:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return MyApp; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ionic_native_status_bar__ = __webpack_require__(555);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__ionic_native_splash_screen__ = __webpack_require__(554);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_ionic_angular__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_globals_globals__ = __webpack_require__(8);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__pages_news_news__ = __webpack_require__(35);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__pages_home_home__ = __webpack_require__(90);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__pages_moderation_moderation__ = __webpack_require__(213);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__pages_create_merchant_create_merchant__ = __webpack_require__(77);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__providers_user_user__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__providers_app_app__ = __webpack_require__(38);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__providers_community_community__ = __webpack_require__(40);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__pages_search_result_search_result__ = __webpack_require__(556);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__pages_agenda_agenda__ = __webpack_require__(79);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__pages_my_space_my_space__ = __webpack_require__(62);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__ionic_native_push__ = __webpack_require__(107);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__app_config__ = __webpack_require__(28);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17__ionic_native_market__ = __webpack_require__(135);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_18__ionic_native_badge__ = __webpack_require__(134);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_19__pages_my_town_hall_my_town_hall__ = __webpack_require__(208);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_20__ionic_native_keyboard__ = __webpack_require__(557);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_21_rxjs_Observable__ = __webpack_require__(32);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_21_rxjs_Observable___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_21_rxjs_Observable__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_22__ionic_native_google_analytics__ = __webpack_require__(58);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_23__providers_eventsrest_eventsrest__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_24__pages_empty_news_empty_news__ = __webpack_require__(106);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_25__pages_communities_communities__ = __webpack_require__(558);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_26__ionic_native_calendar__ = __webpack_require__(54);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_27_moment__ = __webpack_require__(1);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_27_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_27_moment__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_28__pages_good_plan_goodplan__ = __webpack_require__(559);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_29__providers_goodplanrest_goodplanrest__ = __webpack_require__(72);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_30__ionic_native_fcm__ = __webpack_require__(136);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_31__ionic_native_deeplinks__ = __webpack_require__(560);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};

































var MyApp = /** @class */ (function () {
    function MyApp(platform, statusBar, splashScreen, modal, loadingCtrl, appGlobals, appEvent, myAlert, serviceCommunity, serviceEvent, goodPlanService, push, fcm, deeplinks, badge, calendarPlugin, market, userService, appService, ga, keyboard, renderer2) {
        var _this = this;
        this.platform = platform;
        this.statusBar = statusBar;
        this.modal = modal;
        this.loadingCtrl = loadingCtrl;
        this.appGlobals = appGlobals;
        this.appEvent = appEvent;
        this.myAlert = myAlert;
        this.serviceCommunity = serviceCommunity;
        this.serviceEvent = serviceEvent;
        this.goodPlanService = goodPlanService;
        this.push = push;
        this.fcm = fcm;
        this.deeplinks = deeplinks;
        this.badge = badge;
        this.calendarPlugin = calendarPlugin;
        this.market = market;
        this.userService = userService;
        this.appService = appService;
        this.ga = ga;
        this.keyboard = keyboard;
        this.renderer2 = renderer2;
        this.nbreNotifications = 0;
        this.allThemes = [];
        this.allThemesFilter = [];
        this.allCitiesChecked = true;
        this.allThemesChecked = true;
        this.badPhone = false;
        this.selectedVille = [];
        this.selectedTheme = [];
        this.hasApprovedCommunities = false;
        this.isDisabled = true;
        this.requiredCarpool = false;
        this.requiredRallyPoint = false;
        this.requiredRdvHours = false;
        this.requiredSeatedFree = false;
        this.tableUser = [];
        this.finishedEvents = [];
        this.userEvents = [];
        this.publicChecked = [];
        this.showFinished = false;
        this.searchBar = "in";
        this.benevoleBar = "in";
        this.proposeCarpooling = "in";
        this.needCarpooling = "in";
        this.answerCarpooling = "in";
        this.putAgendaBar = "in";
        this.themeFilter = "in";
        this.villeFilter = "in";
        this.publicSearch = "in";
        this.privateSearch = "in";
        this.startDate = __WEBPACK_IMPORTED_MODULE_27_moment__().format("YYYY-MM-DD");
        var html = document.getElementsByTagName('html').item(0);
        this.keyboard.onKeyboardHide().subscribe(function () {
            _this.renderer2.setStyle(html, 'height', '101vh');
        });
        this.keyboard.onKeyboardShow().subscribe(function () {
            _this.renderer2.setStyle(html, 'height', 'auto');
        });
        this.appGlobals.currentPageid = "news";
        this.appEvent.publish('updateFooter');
        this.userService.searchCities('').then(function (data) {
            localStorage.setItem("allCities", JSON.stringify(data));
            _this.appGlobals.allCities = data;
            _this.allCities = data;
            _this.allCitiesFilter = _this.appGlobals.allCities;
        });
        if (localStorage.getItem("finishedEvents")) {
            this.finishedEvents = JSON.parse(localStorage.getItem("finishedEvents"));
        }
        else {
            localStorage.setItem("finishedEvents", JSON.stringify(this.finishedEvents));
        }
        if (localStorage.getItem("hasCommunities") == 'false') {
            this.rootPage = __WEBPACK_IMPORTED_MODULE_24__pages_empty_news_empty_news__["a" /* EmptyNewsPage */];
        }
        else if (!localStorage.getItem("token")) {
            this.rootPage = __WEBPACK_IMPORTED_MODULE_6__pages_home_home__["a" /* HomePage */];
        }
        else {
            this.appGlobals.currentPageid = "news";
            this.appEvent.publish('updateFooter');
            this.rootPage = __WEBPACK_IMPORTED_MODULE_5__pages_news_news__["a" /* NewsPage */];
        }
        platform.ready().then(function () {
            splashScreen.hide();
            _this.appEvent.publish('updateFooter');
            _this.statusBar.styleDefault();
            _this.statusBar.overlaysWebView(false);
            _this.ga.startTrackerWithId('UA-105582305-1')
                .then(function () { }).catch(function (e) {
                if (_this.platform.is('android') || _this.platform.is('ios')) {
                    console.log('Error starting GoogleAnalytics == ' + e);
                }
            });
            _this.ga.trackView('Home');
            if (!platform.is('core')) {
                _this.initPushNotification(platform);
            }
            _this.appEvent.subscribe('refreshCurrentUser', function () {
                _this.currentUser = JSON.parse(localStorage.getItem("currentUser"));
                _this.phoneNumber = _this.currentUser.phone;
                if (!_this.phoneNumber) {
                    _this.isDisabled = false;
                }
            });
            _this.appEvent.subscribe('updateFooter', function () {
                _this.footer();
            });
            if (localStorage.getItem("token")) {
                _this.userService.findCategories().then(function (data) {
                    localStorage.setItem("allCatego", JSON.stringify(data));
                });
                _this.userService.findCurrentUser().then(function (user) {
                    localStorage.setItem("currentUser", JSON.stringify(user));
                }, function (err) {
                    _this.appEvent.publish('http:errors', err);
                });
            }
            _this.appEvent.subscribe('finishedEvents', function () {
                if (_this.userEvents.length > 0) {
                    _this.showFinished = true;
                    var myModal = _this.modal.create('AddParticipantsNbrePage', { 'events': JSON.stringify(_this.userEvents) }, { cssClass: 'style-modal' });
                    myModal.onDidDismiss(function (data) {
                        _this.finishedEvents = [];
                        _this.userEvents = [];
                        _this.showFinished = false;
                        localStorage.setItem("finishedEvents", JSON.stringify(_this.finishedEvents));
                    });
                    myModal.present();
                }
            });
            _this.appEvent.subscribe('loginEvents', function () {
                if (localStorage.getItem("finishedEvents")) {
                    var arr = JSON.parse(localStorage.getItem("finishedEvents"));
                    _this.finishedEvents = arr.filter(function (elem, index, self) {
                        return index === self.indexOf(elem);
                    });
                    if (_this.finishedEvents.length > 0) {
                        _this.finished();
                    }
                }
            });
            _this.appEvent.subscribe('refreshCommunities', function () {
                _this.allThemesFilter = [];
                _this.allThemes = [];
                _this.publicCommunities = JSON.parse(localStorage.getItem("publicCommunities"));
                _this.publicFilterCommunities = _this.publicCommunities;
                _this.privateCommunities = JSON.parse(localStorage.getItem("privateCommunities"));
                _this.privateFilterCommunities = _this.privateCommunities;
                if (localStorage.getItem("hasApprovedCommunities") == 'true') {
                    _this.hasApprovedCommunities = true;
                }
                else {
                    _this.hasApprovedCommunities = false;
                }
                _this.followedCommunities = JSON.parse(localStorage.getItem("followedCommunities"));
                if (_this.followedCommunities) {
                    for (var _i = 0, _a = _this.followedCommunities; _i < _a.length; _i++) {
                        var followedCommunity = _a[_i];
                        var _loop_1 = function (theme) {
                            if (_this.appGlobals.currentPageid == 'goodplans') {
                                if (theme.type == "Thème commerce / partenaire") {
                                    if (_this.allThemesFilter.filter(function (item) { return item.name == theme.name; }).length == 0) {
                                        _this.allThemesFilter.push(theme);
                                    }
                                }
                            }
                            else {
                                if (theme.type == "Activité groupe / association") {
                                    if (_this.allThemesFilter.filter(function (item) { return item.name == theme.name; }).length == 0) {
                                        _this.allThemesFilter.push(theme);
                                    }
                                }
                            }
                        };
                        for (var _b = 0, _c = followedCommunity["categories"]; _b < _c.length; _b++) {
                            var theme = _c[_b];
                            _loop_1(theme);
                        }
                    }
                }
                for (var _d = 0, _e = _this.allThemesFilter; _d < _e.length; _d++) {
                    var theme = _e[_d];
                    theme.filtered = true;
                }
                _this.allThemes = _this.allThemesFilter;
                _this.appEvent.publish('resetFilters');
            });
            if (localStorage.getItem("token")) {
                _this.appEvent.publish('refreshCurrentUser');
                _this.appEvent.publish('refreshCommunities');
                _this.appEvent.publish('admin:associations');
                _this.appEvent.publish('admin:merchants');
                _this.appEvent.publish('member:associations');
                _this.appEvent.publish('member:merchants');
                Promise.all([_this.serviceCommunity.getAllPublicCommunities(), _this.serviceCommunity.getAllPrivateCommunities(), _this.serviceCommunity.findCurrentUserCommunities()]).then(function (data) {
                    _this.publicCommunities = data[0];
                    _this.publicFilterCommunities = data[0];
                    _this.privateCommunities = data[1];
                    _this.privateFilterCommunities = data[1];
                    localStorage.setItem("allCommunities", JSON.stringify(data[2]));
                });
                if (_this.finishedEvents.length > 0) {
                    _this.finished();
                }
            }
            _this.platform.resume.subscribe(function (result) {
                if (!_this.showFinished) {
                    if (localStorage.getItem("token")) {
                        if (_this.finishedEvents.length > 0) {
                            _this.finished();
                        }
                    }
                }
            });
            _this.keyboard.hideKeyboardAccessoryBar(false);
            _this.keyboard.disableScroll(false);
            if (_this.platform.is('core')) {
                _this.refreshNotifications();
            }
            //community following
            /*  if (localStorage.getItem("token")) {
                  
                  this.deeplinks.routeWithNavController(this.nav, {
                      '/community/:id': 1,
                      }).subscribe(match => {
                          
                          this.serviceCommunity.getCommunityInformations(match.$args.communauteId).then(data => {
                              localStorage.setItem("communityDeeplink", JSON.stringify(data));
                              this.nav.setRoot(NewsPage, {item: data});
                          });

                      }, nomatch => {
                      console.error('Got a deeplink that didn\'t match', nomatch);
                      });
              }else{*/
            _this.deeplinks.routeWithNavController(_this.nav, {
                '/community/:communauteId': 1,
            }).subscribe(function (match) {
                if (localStorage.getItem("token")) {
                    _this.serviceCommunity.getCommunityInformations(match.$args.communauteId).then(function (data) {
                        localStorage.setItem("communityDeeplink", JSON.stringify(data));
                        _this.nav.setRoot(__WEBPACK_IMPORTED_MODULE_5__pages_news_news__["a" /* NewsPage */], { item: data });
                    });
                }
                else {
                    _this.serviceCommunity.getCommunityInformations(match.$args.communauteId).then(function (data) {
                        localStorage.setItem("communityDeeplink", JSON.stringify(data));
                        _this.nav.setRoot(__WEBPACK_IMPORTED_MODULE_7__pages_moderation_moderation__["a" /* ModerationPage */], { item: data });
                    });
                }
            }, function (nomatch) {
                console.error('Got a deeplink that didn\'t match', nomatch);
            });
            //  }
        });
        this.appGlobals.token = localStorage.getItem("token");
        this.appEvent.subscribe('myspace:refresh', function () {
            Promise.all([_this.userService.findCurrentUserAssociations(), _this.userService.findCurrentUserMerchants(), _this.userService.findCurrentUserAdherentAsso(), _this.userService.findCurrentUserAdherentMerchant(), _this.serviceCommunity.findCurrentUserCommunities()]).then(function (data) {
                _this.appGlobals.adminAssociations = data[0];
                localStorage.setItem("adminAssociations", JSON.stringify(data[0]));
                _this.appGlobals.adminAssociations = data[0];
                localStorage.setItem("adminMerchants", JSON.stringify(data[1]));
                _this.appGlobals.adminMerchants = data[1];
                localStorage.setItem("adherentAssociations", JSON.stringify(data[2]));
                _this.appGlobals.adherentAssociations = data[2];
                localStorage.setItem("adherentMerchants", JSON.stringify(data[3]));
                _this.appGlobals.adherentMerchants = data[3];
                localStorage.setItem("allCommunities", JSON.stringify(data[4]));
                _this.appEvent.publish('refresh:groups');
            });
        });
        this.appEvent.subscribe('admin:associations', function () {
            Promise.all([_this.userService.findCurrentUserAssociations()]).then(function (data) {
                _this.appGlobals.adminAssociations = data[0];
                localStorage.setItem("adminAssociations", JSON.stringify(data[0]));
            });
        });
        this.appEvent.subscribe('admin:merchants', function () {
            Promise.all([_this.userService.findCurrentUserMerchants()]).then(function (data) {
                _this.appGlobals.adminMerchants = data[0];
                localStorage.setItem("adminMerchants", JSON.stringify(data[0]));
            });
        });
        this.appEvent.subscribe('member:associations', function () {
            Promise.all([_this.userService.findCurrentUserAdherentAsso()]).then(function (data) {
                _this.appGlobals.adherentAssociations = data[0];
                localStorage.setItem("adherentAssociations", JSON.stringify(data[0]));
            });
        });
        this.appEvent.subscribe('member:merchants', function () {
            Promise.all([_this.userService.findCurrentUserAdherentMerchant()]).then(function (data) {
                _this.appGlobals.adherentMerchants = data[0];
                localStorage.setItem("adherentMerchants", JSON.stringify(data[0]));
            });
        });
        this.appEvent.subscribe('communities:all', function () {
            Promise.all([_this.serviceCommunity.findCurrentUserCommunities()]).then(function (data) {
                localStorage.setItem("allCommunities", JSON.stringify(data[0]));
            });
        });
        /****** APP EVENTS *****/
        /**
         * Event to handle errors of http request
         */
        this.appEvent.subscribe('http:errors', function (err) {
            if (err.status == 0) {
                var errorAlert = _this.myAlert.create({
                    title: "Erreur",
                    subTitle: "Veuillez vérifier votre connexion.",
                    buttons: [
                        {
                            text: 'Fermer',
                            role: 'cancel',
                            handler: function () {
                            }
                        }
                    ]
                });
                errorAlert.present();
            }
            else if (err.status == 401) {
                _this.logout();
            }
            else if (err.status == 403) {
                var errorAlert = _this.myAlert.create({
                    title: "Erreur",
                    subTitle: "Accès interdit",
                    buttons: [
                        {
                            text: 'Fermer',
                            role: 'cancel',
                            handler: function () {
                            }
                        }
                    ]
                });
                errorAlert.present();
            }
            else {
                var errorAlert = _this.myAlert.create({
                    title: "Erreur",
                    subTitle: "Une erreur est survenue, veuillez ré-essayer plus tard.",
                    buttons: [
                        {
                            text: 'Fermer',
                            role: 'cancel',
                            handler: function () {
                            }
                        }
                    ]
                });
                errorAlert.present();
            }
        });
        /**
         * Current User logout
         */
        this.appEvent.subscribe('user:logout', function () {
            _this.logout();
        });
        this.appEvent.subscribe('refreshNotifications', function () {
            _this.refreshNotifications();
            _this.badge.set(_this.appGlobals.nbrNotification);
        });
        this.appEvent.subscribe('clean_notifications', function (nbre) {
            _this.appGlobals.nbrNotification = nbre;
            localStorage.setItem("count_notifications", String(_this.appGlobals.nbrNotification));
            _this.badge.set(_this.appGlobals.nbrNotification);
        });
        if (platform.is('core') && localStorage.getItem('token')) {
            __WEBPACK_IMPORTED_MODULE_21_rxjs_Observable__["Observable"].interval(1000 * 60).subscribe(function (x) {
                _this.refreshNotifications();
            });
        }
        this.appEvent.unsubscribe('resetFilters');
        this.appEvent.subscribe('resetFilters', function () {
            _this.selectedTheme = [];
            _this.selectedVille = [];
            _this.myFilterDate = undefined;
            _this.allCitiesChecked = true;
            _this.allThemesChecked = true;
            if (_this.allCitiesFilter) {
                for (var _i = 0, _a = _this.allCitiesFilter; _i < _a.length; _i++) {
                    var city = _a[_i];
                    city.filtered = false;
                }
            }
            if (_this.allThemesFilter) {
                for (var _b = 0, _c = _this.allThemesFilter; _b < _c.length; _b++) {
                    var theme = _c[_b];
                    theme.filtered = false;
                }
            }
            localStorage.removeItem('selectedVille');
            localStorage.removeItem('selectedTheme');
            localStorage.removeItem('selectedDate');
        });
        this.appEvent.unsubscribe('closeFilters');
        this.appEvent.subscribe('closeFilters', function () {
            _this.appGlobals.themeFilter = false;
            _this.appGlobals.villeFilter = false;
        });
    }
    MyApp.prototype.finished = function () {
        var _this = this;
        var i = 1;
        for (var _i = 0, _a = this.finishedEvents; _i < _a.length; _i++) {
            var id = _a[_i];
            this.serviceEvent.getDetailsEvent(id).then(function (data) {
                _this.currentUser = JSON.parse(localStorage.getItem("currentUser"));
                if (data.creatorId == _this.currentUser.id && !data.participantsNbre) {
                    if (_this.userEvents.indexOf(data) == -1) {
                        _this.userEvents.push(data);
                    }
                }
                if (i == _this.finishedEvents.length) {
                    _this.appEvent.publish('finishedEvents');
                }
                i++;
            }, function (err) {
                _this.appEvent.publish('http:errors', err);
            });
        }
        return this.userEvents.length;
    };
    /**
     * Logout User
     */
    MyApp.prototype.logout = function () {
        if (!this.platform.is('core') && !this.platform.is('mobileweb')) {
            this.userService.deleteDeviceToken(this.deviceToken).then(function (data) {
            });
        }
        this.nav.setRoot(__WEBPACK_IMPORTED_MODULE_6__pages_home_home__["a" /* HomePage */]);
        localStorage.clear();
        this.appGlobals.currentPageid = null;
        this.appGlobals.currentPageTitle = null;
        this.appGlobals.currentPageLogo = null;
        this.appGlobals.token = null;
    };
    MyApp.prototype.createMerchant = function () {
        this.nav.push(__WEBPACK_IMPORTED_MODULE_8__pages_create_merchant_create_merchant__["a" /* CreateMerchantPage */]);
    };
    MyApp.prototype.news = function () {
        if (localStorage.getItem("hasCommunities") == 'true') {
            this.appGlobals.currentPageid = "news";
            this.appEvent.publish('updateFooter');
            this.nav.setRoot(__WEBPACK_IMPORTED_MODULE_5__pages_news_news__["a" /* NewsPage */]);
        }
        else {
            this.appGlobals.currentPageid = "news";
            this.nav.setRoot(__WEBPACK_IMPORTED_MODULE_24__pages_empty_news_empty_news__["a" /* EmptyNewsPage */]);
            this.appEvent.publish('updateFooter');
        }
    };
    MyApp.prototype.mySpace = function () {
        this.appGlobals.currentPageid = "mySpace";
        this.appEvent.publish('updateFooter');
        this.nav.setRoot(__WEBPACK_IMPORTED_MODULE_14__pages_my_space_my_space__["a" /* MySpacePage */]);
    };
    MyApp.prototype.agenda = function () {
        if (localStorage.getItem("hasCommunities") == 'true') {
            this.appGlobals.currentPageid = "agenda";
            this.appEvent.publish('updateFooter');
            this.nav.setRoot(__WEBPACK_IMPORTED_MODULE_13__pages_agenda_agenda__["a" /* AgendaPage */]);
        }
        else {
            this.appGlobals.currentPageid = "news";
            this.appEvent.publish('updateFooter');
            this.nav.setRoot(__WEBPACK_IMPORTED_MODULE_24__pages_empty_news_empty_news__["a" /* EmptyNewsPage */]);
        }
    };
    MyApp.prototype.goodplans = function () {
        if (localStorage.getItem("hasCommunities") == 'true') {
            this.appGlobals.currentPageid = "goodplans";
            this.appEvent.publish('updateFooter');
            this.nav.setRoot(__WEBPACK_IMPORTED_MODULE_28__pages_good_plan_goodplan__["a" /* GoodPlanPage */]);
        }
        else {
            this.appGlobals.currentPageid = "news";
            this.appEvent.publish('updateFooter');
            this.nav.setRoot(__WEBPACK_IMPORTED_MODULE_24__pages_empty_news_empty_news__["a" /* EmptyNewsPage */]);
        }
    };
    MyApp.prototype.MyTownHall = function () {
        if (localStorage.getItem("hasApprovedCommunities") == 'true') {
            this.appGlobals.currentPageid = "MyTownHall";
            this.appEvent.publish('updateFooter');
            this.nav.setRoot(__WEBPACK_IMPORTED_MODULE_19__pages_my_town_hall_my_town_hall__["a" /* MyTownHallPage */]);
        }
        else {
            this.appGlobals.currentPageid = "news";
            this.appEvent.publish('updateFooter');
            this.nav.setRoot(__WEBPACK_IMPORTED_MODULE_24__pages_empty_news_empty_news__["a" /* EmptyNewsPage */]);
        }
    };
    MyApp.prototype.onCancel = function () {
        this.appGlobals.searchCriteria.theme = null;
    };
    MyApp.prototype.pop_publish = function () {
        var adminAssociations = JSON.parse(localStorage.getItem("adminAssociations"));
        var adminMerchants = JSON.parse(localStorage.getItem("adminMerchants"));
        var adherentAssociations = JSON.parse(localStorage.getItem("adherentAssociations"));
        var adherentMerchants = JSON.parse(localStorage.getItem("adherentMerchants"));
        if (adherentAssociations.length != 0 || adherentMerchants.length != 0 || adminAssociations.length != 0 || adminMerchants.length != 0 || this.currentUser.role == 'community_su_admin' || this.hasApprovedCommunities) {
            var myModal2 = this.modal.create('ChoicePage', {}, { cssClass: 'style-modal choice-modal' });
            myModal2.onDidDismiss(function () {
            });
            myModal2.present();
        }
        else {
            var myModal2 = this.modal.create('PopupPage', { "message": "<p>Vous ne pouvez pas publier ! </p>" }, { cssClass: 'message-modal' });
            myModal2.onDidDismiss(function () {
            });
            myModal2.present();
        }
    };
    MyApp.prototype.showHideSearch = function () {
        var _this = this;
        this.appGlobals.searchCriteria = {
            key: null,
            theme: null,
            event: false,
            article: false,
            account: false,
            goodplans: false,
            cities: "all"
        };
        if (!this.appGlobals.appSearch) {
            var loadingPopup_1 = this.loadingCtrl.create({});
            loadingPopup_1.present();
            this.userService.findCategoriesByUser().then(function (data) {
                _this.categories = data;
                loadingPopup_1.dismiss();
                _this.appGlobals.appSearch = true;
            });
        }
        else {
            this.appGlobals.appSearch = false;
        }
    };
    MyApp.prototype.showHideAgendaBenevole = function () {
        if (!this.appGlobals.showBenevoleAgenda) {
            this.appGlobals.showBenevoleAgenda = true;
        }
        else {
            this.appGlobals.showBenevoleAgenda = false;
        }
    };
    MyApp.prototype.showHideContactBar = function () {
        if (!this.appGlobals.showcontactBar) {
            this.appGlobals.showcontactBar = true;
        }
        else {
            this.appGlobals.showcontactBar = false;
        }
    };
    MyApp.prototype.showHideProposeCarpooling = function () {
        if (!this.appGlobals.showproposeCarpooling) {
            this.appGlobals.checkedCarpool = null;
            this.appGlobals.showproposeCarpooling = true;
        }
        else {
            this.appGlobals.checkedCarpool = null;
            this.appGlobals.showproposeCarpooling = false;
        }
    };
    MyApp.prototype.showHideNeedCarpooling = function (event) {
        this.appGlobals.currentEvent = event;
        this.appGlobals.checkedCarpool = null;
        this.appGlobals.showNeedCarpooling = !this.appGlobals.showNeedCarpooling;
    };
    MyApp.prototype.showHidePutAgenda = function () {
        if (!this.appGlobals.showPutAgenda) {
            this.appGlobals.showPutAgenda = true;
        }
        else {
            this.appGlobals.showPutAgenda = false;
        }
    };
    MyApp.prototype.showHideFilterTheme = function () {
        this.appGlobals.villeFilter = false;
        if (!this.appGlobals.themeFilter) {
            this.appGlobals.themeFilter = true;
        }
        else {
            this.appGlobals.themeFilter = false;
        }
        this.appEvent.publish('refreshCommunities');
    };
    MyApp.prototype.showHideFilterVille = function () {
        this.appGlobals.themeFilter = false;
        if (!this.appGlobals.villeFilter) {
            this.appGlobals.villeFilter = true;
        }
        else {
            this.appGlobals.villeFilter = false;
        }
        this.allCitiesFilter = this.appGlobals.allCities;
    };
    MyApp.prototype.showHidePrivateSearch = function () {
        if (!this.appGlobals.privateSearch) {
            this.appGlobals.privateSearch = true;
        }
        else {
            this.appGlobals.privateSearch = false;
        }
        this.privateCommunities = this.privateFilterCommunities;
        this.privateChecked = 0;
    };
    MyApp.prototype.showHidePublicSearch = function () {
        if (!this.appGlobals.publicSearch) {
            this.appGlobals.publicSearch = true;
        }
        else {
            this.appGlobals.publicSearch = false;
        }
        this.publicCommunities = this.publicFilterCommunities;
        this.publicChecked = [];
        this.removeUnusedPublicChecked();
    };
    // search filter
    MyApp.prototype.searchEvent = function () {
        this.appGlobals.searchCriteria.event = !this.appGlobals.searchCriteria.event;
    };
    MyApp.prototype.searchGoodPlans = function () {
        this.appGlobals.searchCriteria.goodplans = !this.appGlobals.searchCriteria.goodplans;
    };
    MyApp.prototype.searchArticle = function () {
        this.appGlobals.searchCriteria.article = !this.appGlobals.searchCriteria.article;
    };
    MyApp.prototype.searchAccount = function () {
        this.appGlobals.searchCriteria.account = !this.appGlobals.searchCriteria.account;
    };
    MyApp.prototype.searchAction = function () {
        var _this = this;
        if (!this.appGlobals.searchCriteria.key && !this.appGlobals.searchCriteria.theme) {
            var errorAlert = this.myAlert.create({
                title: "Erreur",
                subTitle: "Il faut renseigner soit un mot clef ou un thème",
                buttons: [
                    {
                        text: 'Fermer',
                        role: 'cancel',
                        handler: function () {
                        }
                    }
                ]
            });
            errorAlert.present();
        }
        else if (this.appGlobals.searchCriteria.event == false &&
            this.appGlobals.searchCriteria.article == false &&
            this.appGlobals.searchCriteria.account == false &&
            this.appGlobals.searchCriteria.goodplans == false) {
            var errorAlert = this.myAlert.create({
                title: "Erreur",
                subTitle: "Cliquez sur au moins une des 4 icônes groupes/établissements, articles, événements ou bons plans",
                buttons: [
                    {
                        text: 'Fermer',
                        role: 'cancel',
                        handler: function () {
                        }
                    }
                ]
            });
            errorAlert.present();
        }
        else {
            var loadingPopup_2 = this.loadingCtrl.create({});
            loadingPopup_2.present();
            var cities = "all";
            this.userService.search(this.appGlobals.searchCriteria, cities).then(function (data) {
                loadingPopup_2.dismiss();
                _this.appGlobals.appSearch = false;
                _this.nav.push(__WEBPACK_IMPORTED_MODULE_12__pages_search_result_search_result__["a" /* SearchResultPage */], {
                    result: data,
                    criteria: _this.appGlobals.searchCriteria
                });
            }, function (err) {
                loadingPopup_2.dismiss();
                _this.appEvent.publish("http:errors", err);
            });
        }
    };
    MyApp.prototype.initPushNotification = function (platform) {
        var _this = this;
        if (!platform.is('cordova')) {
            return;
        }
        this.fcm.subscribeToTopic('nousEnsemble');
        this.fcm.getToken().then(function (token) {
            var deviceType = "";
            if (platform.is('ios')) {
                deviceType = "ios";
            }
            else if (platform.is('android')) {
                deviceType = "android";
            }
            else if (platform.is('windows')) {
                deviceType = "windows";
            }
            _this.deviceToken = token;
            _this.userService.deviceToken(token, deviceType);
        });
        this.fcm.onNotification().subscribe(function (data) {
            _this.badge.set(10);
            if (data.wasTapped) {
                _this.badge.increase(1);
            }
            else {
                _this.badge.clear();
            }
            /* this.badge.set(10);
             if (data.additionalData.silent == 'on') {
                 if (data.additionalData.foreground) {
                     this.appEvent.publish('refreshNotifications');
                 }
 
                 if (data.additionalData.refreshThemes) {
                     this.refreshCommunities();
                 }
             }
 
              else {
                 this.badge.increase(1);
                 if (data.additionalData.foreground) {
                     if (data.additionalData.eventId) {
                         let label = 'push received-' + data.additionalData.eventId;
                         this.appEvent.publish("googleAnalytics", label);
                     }
                     if (data.additionalData.communityId || data.additionalData.associationId  || data.additionalData.merchantId) {
                         let confirmAlert = this.myAlert.create({
                             title: data.title,
                             message: data.message,
                             buttons: [{
                                 text: 'Fermer',
                                 role: 'cancel'
                             }]
                         });
                         confirmAlert.present();
                     } else {
                         let confirmAlert = this.myAlert.create({
                             title: data.title,
                             message: data.message,
                             buttons: [{
                                 text: 'Fermer',
                                 role: 'cancel'
                             }]
                         });
                         confirmAlert.present();
 
                     }
                 } else {
                     if (data.additionalData.participantNbre == 'yes') {
                         this.finishedEvents = JSON.parse(localStorage.getItem("finishedEvents"));
                         this.finishedEvents.push(data.additionalData.eventId);
                         localStorage.setItem("finishedEvents", JSON.stringify(this.finishedEvents));
 
                     } else {
                         this.badge.increase(1);
                         if (data.additionalData.eventId) {
                             let label = 'push received-' + data.additionalData.eventId;
                             this.appEvent.publish("googleAnalytics", label);
                         }
                         if (data.additionalData.store == 'on') {
                             this.openMarket();
                         } else {
                             this.nav.push(NewsPage);
                         }
                     }
 
                 }
             }*/
        });
    };
    MyApp.prototype.refreshCommunities = function () {
        var _this = this;
        Promise.all([this.serviceCommunity.findCurrentUserFollowedCommunities()]).then(function (user) {
            localStorage.setItem("followedCommunities", JSON.stringify(user[0]));
            _this.appEvent.publish('refreshCommunities');
            _this.appEvent.publish('refreshApprovedCommunities');
        }, function (err) {
            _this.appEvent.publish('http:errors', err);
        });
    };
    MyApp.prototype.openMarket = function () {
        this.market.open(__WEBPACK_IMPORTED_MODULE_16__app_config__["b" /* APP_PACKAGE */]);
    };
    MyApp.prototype.refreshNotifications = function () {
        var _this = this;
        if (localStorage.getItem("token")) {
            this.userService.findCurrentUser().then(function (data) {
                _this.appGlobals.nbrNotification = data.countUnread;
                localStorage.setItem("count_notifications", String(data.countUnread));
                _this.appEvent.publish('count_notifications');
            });
        }
    };
    MyApp.prototype.communities = function () {
        this.appGlobals.currentPageid = "communities";
        this.appGlobals.currentPageTitle = "communities";
        this.appEvent.publish('updateFooter');
        this.nav.setRoot(__WEBPACK_IMPORTED_MODULE_25__pages_communities_communities__["a" /* CommunitiesPage */]);
    };
    MyApp.prototype.filterVilles = function (event) {
        var _this = this;
        var key = event.target.value;
        this.userService.searchCities(key).then(function (data) {
            _this.allCitiesFilter = data;
        });
    };
    MyApp.prototype.filterThemes = function (event) {
        this.appEvent.publish('refreshCommunities');
        var key = event.target.value;
        if (key && key.trim() !== '') {
            if (this.allThemesFilter) {
                this.allThemesFilter = this.allThemes.filter(function (item) {
                    return item.name.toLowerCase().includes(key.toLowerCase());
                });
            }
        }
    };
    MyApp.prototype.selectVilles = function (data) {
        if (data.filtered == true) {
            this.selectedVille.push(data);
        }
        else {
            var newArray = this.selectedVille.filter(function (el) {
                return el.id !== data.id;
            });
            this.selectedVille = newArray;
        }
        this.allCitiesChecked = this.selectedVille.length == 0;
    };
    MyApp.prototype.selectAllVilles = function (data) {
        this.allCitiesChecked = true;
        this.selectedVille = [];
        for (var _i = 0, _a = this.allCitiesFilter; _i < _a.length; _i++) {
            var city = _a[_i];
            city.filtered = false;
        }
    };
    MyApp.prototype.selectTheme = function (data) {
        this.allThemesChecked = false;
        if (this.allThemesChecked) {
            for (var _i = 0, _a = this.allThemesFilter; _i < _a.length; _i++) {
                var theme = _a[_i];
                if (theme.name == data.name) {
                    this.selectedTheme.push(data);
                    theme.filtered = true;
                }
            }
        }
        else {
            if (data.filtered == true) {
                this.selectedTheme.push(data);
            }
            else {
                this.selectedTheme = this.selectedTheme.filter(function (el) {
                    return el.id !== data.id;
                });
            }
        }
        this.allThemesChecked = this.selectedTheme.length == 0;
    };
    MyApp.prototype.selectAllThemes = function () {
        this.selectedTheme = [];
        for (var _i = 0, _a = this.allThemesFilter; _i < _a.length; _i++) {
            var theme = _a[_i];
            theme.filtered = false;
        }
    };
    MyApp.prototype.submitVilles = function () {
        if (this.selectedVille.length > 5) {
            var myModal2 = this.modal.create('PopupPage', { "message": "<p>Vous ne pouvez sélectionner que 5 villes au maximum ! </p>" }, { cssClass: 'message-modal' });
            myModal2.onDidDismiss(function () { });
            myModal2.present();
        }
        else {
            this.appGlobals.villeFilter = false;
            localStorage.setItem('selectedVille', JSON.stringify(this.selectedVille));
            this.appEvent.publish('news:refresh');
            this.appEvent.publish('agenda:refresh');
            this.appEvent.publish('goodplan:refresh');
        }
    };
    MyApp.prototype.submitThemes = function () {
        if (this.selectedTheme.length > 5) {
            var myModal2 = this.modal.create('PopupPage', { "message": "<p>Vous ne pouvez sélectionner que 5 thèmes au maximum ! </p>" }, { cssClass: 'message-modal' });
            myModal2.onDidDismiss(function () { });
            myModal2.present();
        }
        else {
            this.appGlobals.themeFilter = false;
            localStorage.setItem('selectedTheme', JSON.stringify(this.selectedTheme));
            this.appEvent.publish('news:refresh');
            this.appEvent.publish('agenda:refresh');
            this.appEvent.publish('goodplan:refresh');
        }
    };
    MyApp.prototype.resetDatePicker = function () {
        this.myFilterDate = undefined;
        localStorage.removeItem('selectedDate');
        this.appEvent.publish('agenda:refresh');
        this.appEvent.publish('goodplan:refresh');
        this.datePicker.disabled = true;
    };
    MyApp.prototype.submitDatePicker = function () {
        this.myFilterDate = this.startDate;
        localStorage.setItem('selectedDate', JSON.stringify(this.myFilterDate));
        this.appEvent.publish('agenda:refresh');
        this.appEvent.publish('goodplan:refresh');
        this.datePicker.disabled = true;
    };
    MyApp.prototype.filterPublicCommunities = function (event) {
        this.publicCommunities = this.publicFilterCommunities;
        var key = event.target.value;
        if (key && key.trim() !== '') {
            if (this.publicCommunities) {
                this.publicCommunities = this.publicCommunities.filter(function (item) {
                    return item.name.toLowerCase().includes(key.toLowerCase());
                });
            }
        }
        this.removeUnusedPublicChecked();
    };
    MyApp.prototype.removeUnusedPublicChecked = function () {
        var _this = this;
        this.publicChecked = this.publicChecked.filter(function (item) {
            if (_this.publicCommunities.find(function (currentObject) { return currentObject.id === item; })) {
                return true;
            }
            return false;
        });
    };
    MyApp.prototype.removeUnusedPrivateChecked = function () {
        var _this = this;
        var checkIdExistence = function (idParam) { return _this.privateCommunities.some(function (_a) {
            var id = _a.id;
            return id == idParam;
        }); };
        if (!checkIdExistence(this.privateChecked)) {
            this.privateChecked = 0;
        }
    };
    MyApp.prototype.filterPrivateCommunities = function (event) {
        this.privateCommunities = this.privateFilterCommunities;
        var key = event.target.value;
        if (key && key.trim() !== '') {
            if (this.privateCommunities) {
                this.privateCommunities = this.privateCommunities.filter(function (item) {
                    return item.name.toLowerCase().includes(key.toLowerCase());
                });
            }
        }
        this.removeUnusedPrivateChecked();
    };
    MyApp.prototype.publicChange = function (id, isChecked) {
        if (isChecked) {
            this.publicChecked.push(id);
        }
        else {
            var index = this.publicChecked.indexOf(id);
            if (index !== -1) {
                this.publicChecked.splice(index, 1);
            }
        }
    };
    MyApp.prototype.privateChange = function (id, name, isChecked) {
        isChecked = true;
        if (isChecked) {
            this.privateChecked = id;
            this.privateNameChecked = name;
        }
        else {
            this.privateChecked = null;
            this.privateNameChecked = null;
        }
    };
    MyApp.prototype.carpoolChange = function (id) {
        this.appGlobals.checkedCarpool = id;
        this.requiredCarpool = false;
    };
    MyApp.prototype.carpoolNumberChange = function () {
        this.requiredCarpool = !this.phoneNumber;
    };
    MyApp.prototype.carpoolAnswer = function () {
        if (this.appGlobals.checkedCarpool) {
            this.requiredCarpool = false;
            this.appGlobals.showNeedCarpooling = false;
            this.appGlobals.showAnswerCarpooling = true;
        }
        else {
            this.requiredCarpool = true;
        }
    };
    MyApp.prototype.carpoolAdd = function () {
        var phoneRegexp = /^(33|0)\d{9}$/;
        if (this.rallyPoint && this.rdvHours && this.seatedFree && this.phoneNumber && phoneRegexp.test(this.phoneNumber)) {
            this.appGlobals.showproposeCarpooling = false;
            this.requiredCarpool = false;
            this.requiredRallyPoint = false;
            this.requiredRdvHours = false;
            this.requiredSeatedFree = false;
            this.appEvent.publish('agenda:carpoolAdd', [this.appGlobals.currentEvent.id, this.phoneNumber, this.rallyPoint, this.rdvHours, this.seatedFree]);
        }
        else {
            if (!this.rallyPoint) {
                this.requiredRallyPoint = true;
            }
            if (!this.rdvHours) {
                this.requiredRdvHours = true;
            }
            if (!this.seatedFree) {
                this.requiredSeatedFree = true;
            }
            if (!this.phoneNumber || !phoneRegexp.test(this.phoneNumber)) {
                this.requiredCarpool = true;
            }
        }
    };
    MyApp.prototype.carpoolRallyChange = function () {
        this.requiredRallyPoint = !this.rallyPoint;
    };
    MyApp.prototype.carpoolRdvHoursChange = function () {
        this.requiredRdvHours = !this.rdvHours;
    };
    MyApp.prototype.carpoolSeatedChange = function () {
        this.requiredSeatedFree = !this.seatedFree;
    };
    MyApp.prototype.carpoolPhoneChange = function () {
        this.requiredCarpool = !this.phoneNumber;
    };
    MyApp.prototype.showHideAnswerCarpooling = function () {
        if (!this.appGlobals.showAnswerCarpooling) {
            this.appGlobals.showAnswerCarpooling = true;
        }
        else {
            this.appGlobals.showAnswerCarpooling = false;
        }
    };
    MyApp.prototype.addCarpoolAnswer = function () {
        var _this = this;
        var phoneRegexp = /^(33|0)\d{9}$/;
        if (this.phoneNumber) {
            if (phoneRegexp.test(this.phoneNumber)) {
                this.requiredCarpool = false;
                var loadingPopup_3 = this.loadingCtrl.create({});
                loadingPopup_3.present();
                var result_1;
                this.serviceEvent.addCarpoolAnswer(this.appGlobals.checkedCarpool, this.phoneNumber).then(function (data) {
                    loadingPopup_3.dismiss();
                    result_1 = data;
                    if (result_1.success) {
                        _this.appGlobals.showAnswerCarpooling = false;
                        _this.appEvent.publish('agenda:refresh');
                    }
                }, function (err) {
                    loadingPopup_3.dismiss();
                    _this.appEvent.publish('http:errors', err);
                });
            }
            else {
                this.requiredCarpool = true;
            }
        }
        else {
            this.requiredCarpool = true;
        }
    };
    MyApp.prototype.addPublicCommunities = function () {
        var _this = this;
        this.appGlobals.publicSearch = false;
        var loadingPopup = this.loadingCtrl.create({});
        loadingPopup.present();
        this.serviceCommunity.postUserPublicCommunities(this.publicChecked).then(function (data) {
            localStorage.setItem("hasApprovedCommunities", "true");
            Promise.all([_this.serviceCommunity.getAllPublicCommunities(), _this.serviceCommunity.findCurrentUserCommunities()]).then(function (datas) {
                _this.publicChecked = [];
                _this.publicCommunities = datas[0];
                _this.publicFilterCommunities = datas[0];
                localStorage.setItem("allCommunities", JSON.stringify(datas[1]));
                _this.appEvent.publish('refreshApprovedCommunities');
                localStorage.setItem("hasApprovedCommunities", "true");
                _this.appEvent.publish('refreshCommunities');
            });
            loadingPopup.dismiss();
            var myModal2 = _this.modal.create('PopupPage', { "message": "<p>C'est parfait. Bienvenue dans cette communauté ! </p>" }, { cssClass: 'message-modal' });
            myModal2.onDidDismiss(function () {
            });
            myModal2.present();
        }, function (err) {
            _this.appEvent.publish('http:errors', err);
            loadingPopup.dismiss();
        });
    };
    MyApp.prototype.addPublicCommunitiesViaDeepLink = function () {
        var _this = this;
        this.appGlobals.publicSearch = false;
        var loadingPopup = this.loadingCtrl.create({});
        loadingPopup.present();
        this.serviceCommunity.postUserPublicCommunities(this.publicChecked).then(function (data) {
            localStorage.setItem("hasApprovedCommunities", "true");
            Promise.all([_this.serviceCommunity.getAllPublicCommunities(), _this.serviceCommunity.findCurrentUserCommunities()]).then(function (datas) {
                _this.publicChecked = [];
                _this.publicCommunities = datas[0];
                _this.publicFilterCommunities = datas[0];
                localStorage.setItem("allCommunities", JSON.stringify(datas[1]));
                _this.appEvent.publish('refreshApprovedCommunities');
                localStorage.setItem("hasApprovedCommunities", "true");
                _this.appEvent.publish('refreshCommunities');
            });
            loadingPopup.dismiss();
            var myModal2 = _this.modal.create('PopupPage', { "message": "<p>C'est parfait. Bienvenue dans cette communauté ! </p>" }, { cssClass: 'message-modal' });
            myModal2.onDidDismiss(function () {
            });
            myModal2.present();
        }, function (err) {
            _this.appEvent.publish('http:errors', err);
            loadingPopup.dismiss();
        });
    };
    MyApp.prototype.addPrivateCommunities = function () {
        this.appGlobals.privateSearch = false;
        var myModal = this.modal.create('PasswordCommunityPage', {
            'id': this.privateChecked,
            'name': this.privateNameChecked
        }, { cssClass: 'community-modal' });
        myModal.onDidDismiss(function (data) {
        });
        myModal.present();
        this.privateChecked = 0;
    };
    MyApp.prototype.showDatePicker = function () {
        this.datePicker.disabled = false;
        if (this.appGlobals.themeFilter || this.appGlobals.villeFilter) {
            this.appGlobals.themeFilter = false;
            this.appGlobals.villeFilter = false;
        }
        this.datePicker.open();
    };
    MyApp.prototype.volunteerContact = function () {
        var phoneRegexp = /^(33|0)\d{9}$/;
        if (this.phoneNumber) {
            if (!phoneRegexp.test(this.phoneNumber)) {
                this.badPhone = true;
            }
            else {
                this.badPhone = false;
                this.appEvent.publish('agenda:volunteerContact', [this.appGlobals.currentEventId, this.phoneNumber]);
            }
        }
        else {
            this.badPhone = true;
        }
    };
    MyApp.prototype.addAgenda = function () {
        var event = this.appGlobals.currentEvent;
        var start = __WEBPACK_IMPORTED_MODULE_27_moment__(event.startAt).toDate();
        var end = __WEBPACK_IMPORTED_MODULE_27_moment__(event.endAt).toDate();
        this.calendarPlugin.createEvent(event.title, '', '', start, end).then(function (msg) {
        }, function (err) {
        });
        this.appGlobals.showPutAgenda = false;
    };
    MyApp.prototype.googPlanContact = function () {
        var _this = this;
        this.goodPlanService.sendDemand(this.appGlobals.goodPlanMessage, this.appGlobals.goodPlanCreatorId).then(function (msg) {
            _this.appGlobals.showcontactBar = false;
            _this.appGlobals.goodPlanMessage = '';
        }, function (err) {
        });
    };
    MyApp.prototype.footer = function () {
        if (this.platform.is('core')) {
        }
        else {
            var footerItems = document.getElementsByClassName('footer-item');
            for (var i = 0; i < footerItems.length; i++) {
                footerItems[i].style.width = "56px";
                footerItems[i].style.height = "56px";
            }
            var activated = document.getElementsByClassName('activated-footer');
            if (activated[0]) {
                activated[0].style.width = "70px";
                activated[0].style.height = "70px";
            }
            if (this.appGlobals.currentPageid != "goodplans" &&
                this.appGlobals.currentPageid != "mySpace" &&
                this.appGlobals.currentPageid != "MyTownHall" &&
                this.appGlobals.currentPageid != "news" &&
                this.appGlobals.currentPageid != "agenda") {
                for (var i = 0; i < footerItems.length; i++) {
                    footerItems[i].style.width = "56px";
                    footerItems[i].style.height = "56px";
                }
            }
        }
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["ViewChild"])(__WEBPACK_IMPORTED_MODULE_3_ionic_angular__["t" /* Nav */]),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_3_ionic_angular__["t" /* Nav */])
    ], MyApp.prototype, "nav", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["ViewChild"])('datePicker'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_3_ionic_angular__["g" /* DateTime */])
    ], MyApp.prototype, "datePicker", void 0);
    MyApp = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({template:/*ion-inline-start:"D:\celaneo\mobile\new-mobile\test\src\app\app.html"*/'<ion-header class="desktop-header" *ngIf="appGlobals.token">\n\n    <ion-grid>\n\n        <ion-row>\n\n            <ion-col>\n\n                <img class="header-app-icon" src="assets/imgs/icons/logo.png" />\n\n            </ion-col>\n\n            <ion-col col-auto>\n\n                <div class="menu-top">\n\n                    <div class="menu-item">\n\n                        <div class="menu-item-content" (click)="communities()">\n\n                            <img class="" src="assets/imgs/icons/comunitydesktop.png">\n\n                            <p class="communityDesktop"> Communautés </p>\n\n                        </div>\n\n                    </div>\n\n                    <div class="menu-item" (click)="MyTownHall()" [class.activated]="appGlobals.currentPageid==\'MyTownHall\'">\n\n                        <div class="menu-item-content">\n\n                            <img *ngIf="appGlobals.currentPageid != \'MyTownHall\'" class="" id="dedicated-menu" src="assets/imgs/icons/dedicatedhover.png">\n\n                            <img *ngIf="appGlobals.currentPageid == \'MyTownHall\'" id="dedicated-menu" src="assets/imgs/icons/dedicated.png">\n\n                            <p> Page dédiée </p>\n\n                        </div>\n\n                    </div>\n\n                    <div class="menu-item" (click)="news()" [class.activated]="appGlobals.currentPageid==\'news\'">\n\n                        <div class="menu-item-content">\n\n                            <img *ngIf="appGlobals.currentPageid != \'news\'" class="" id="news-menu" src="assets/imgs/icons/newshover.png">\n\n                            <img *ngIf="appGlobals.currentPageid == \'news\'" id="news-menu" src="assets/imgs/icons/news.png">\n\n                            <p> A la Une </p>\n\n                        </div>\n\n                    </div>\n\n                    <div class="menu-item" (click)="agenda()" [class.activated]="appGlobals.currentPageid==\'agenda\'">\n\n                        <div class="menu-item-content">\n\n                            <img *ngIf="appGlobals.currentPageid != \'agenda\'" class="" id="agenda-menu" src="assets/imgs/icons/agendahover.png">\n\n                            <img *ngIf="appGlobals.currentPageid == \'agenda\'" id="agenda-menu" src="assets/imgs/icons/agenda.png">\n\n                            <p> Agenda </p>\n\n                        </div>\n\n                    </div>\n\n                    <div class="menu-item" (click)="goodplans()"  [class.activated]="appGlobals.currentPageid==\'goodplans\'">\n\n                        <div class="menu-item-content">\n\n                            <img *ngIf="appGlobals.currentPageid != \'goodplans\'" class="" id="plans-menu" src="assets/imgs/icons/planshover.png">\n\n                            <img *ngIf="appGlobals.currentPageid == \'goodplans\'" id="plans-menu" src="assets/imgs/icons/plans.png">\n\n                            <p> Bon Plans </p>\n\n                        </div>\n\n                    </div>\n\n                    <div class="menu-item" (click)="mySpace()" [class.activated]="appGlobals.currentPageid ==\'mySpace\'">\n\n\n\n                        <div class="menu-item-content">\n\n                            <img *ngIf="appGlobals.currentPageid != \'mySpace\'" class="" id="space-menu" src="assets/imgs/icons/spacehover.png">\n\n                            <img *ngIf="appGlobals.currentPageid == \'mySpace\'" id="space-menu" src="assets/imgs/icons/space.png">\n\n                            <div class="number-notifications" *ngIf="appGlobals.nbrNotification != 0"><span>{{appGlobals.nbrNotification}}</span></div>\n\n                            <p> Mon Espace </p>\n\n                        </div>\n\n                    </div>\n\n\n\n                </div>\n\n            </ion-col>\n\n            <ion-col text-right>\n\n                <div class="search-link" (click)="showHideSearch()">\n\n                    <ion-icon name="md-search"></ion-icon>\n\n                    <span>Rechercher</span>\n\n                </div>\n\n            </ion-col>\n\n        </ion-row>\n\n    </ion-grid>\n\n</ion-header>\n\n<ion-header class="mobile-header" *ngIf="appGlobals.token && appGlobals.showHeader">\n\n    <ion-grid>\n\n        <ion-row>\n\n            <ion-col col-2 text-left>\n\n                <div class="item iconheader" (click)="showHideSearch()">\n\n                    <img class="icon-search" src="assets/imgs/icons/search.png" alt="NOUS-Ensemble" />\n\n                </div>\n\n            </ion-col>\n\n            <ion-col col-8 text-center class="page-title iconheader">\n\n                <div class="communities-div" (click)="communities()">\n\n                    <img class="icon-community" src="assets/imgs/icons/comunity.png" alt="NOUS-Ensemble" />\n\n                    <ion-title class="communityHeader">Communautés</ion-title>\n\n                </div>\n\n            </ion-col>\n\n            <ion-col col-2>\n\n                <div class="item iconheader" text-right (click)="pop_publish()">\n\n                    <img class="icon-new" src="assets/imgs/icons/new.png" alt="NOUS-Ensemble" />\n\n                </div>\n\n            </ion-col>\n\n        </ion-row>\n\n    </ion-grid>\n\n</ion-header>\n\n<ion-grid class="filterNewsHeader" *ngIf="appGlobals.token && appGlobals.showSearchNews" [class.filterOpenTheme]="appGlobals.themeFilter"\n\n          [class.filterOpenVille]="appGlobals.villeFilter">\n\n    <ion-row class="filterDesktopRow">\n\n        <ion-col col-6 class="villeParagraph">\n\n            <p text-center (click)=\'showHideFilterVille()\'>Villes <br>\n\n                <img class="icon-grey" src="assets/imgs/icons/arrow-down-grey.png" alt="NOUS-Ensemble" />\n\n                <img class="icon-green" src="assets/imgs/icons/arrow-down-green.png" alt="NOUS-Ensemble" />\n\n\n\n            </p>\n\n        </ion-col>\n\n        <ion-col col-6 class="themeParagraph">\n\n            <p text-center (click)=\'showHideFilterTheme()\'>Thèmes <br>\n\n                <img class="icon-grey" src="assets/imgs/icons/arrow-down-grey.png" alt="NOUS-Ensemble" />\n\n                <img class="icon-green" src="assets/imgs/icons/arrow-down-green.png" alt="NOUS-Ensemble" />\n\n            </p>\n\n        </ion-col>\n\n    </ion-row>\n\n</ion-grid>\n\n<ion-grid class="filterAgendaHeader" *ngIf="appGlobals.token && appGlobals.showSearchAgenda" [class.filterOpenTheme]="appGlobals.themeFilter"\n\n          [class.filterOpenVille]="appGlobals.villeFilter">\n\n    <ion-row class="filterDesktopRow">\n\n\n\n        <ion-col col-4 class="villeParagraph">\n\n            <p text-center (click)=\'showHideFilterVille()\'>Villes <br>\n\n                <img class="icon-grey" src="assets/imgs/icons/arrow-down-grey.png" alt="NOUS-Ensemble" />\n\n                <img class="icon-green" src="assets/imgs/icons/arrow-down-green.png" alt="NOUS-Ensemble" />\n\n\n\n            </p>\n\n        </ion-col>\n\n        <ion-col class="dateParagraph" col-4 (click)="showDatePicker()">\n\n            <p text-center>Date <br>\n\n                <img class="icon-grey" src="assets/imgs/icons/arrow-down-grey.png" alt="NOUS-Ensemble" />\n\n                <img class="icon-green" src="assets/imgs/icons/arrow-down-green.png" alt="NOUS-Ensemble" />\n\n            </p>\n\n        </ion-col>\n\n        <ion-col col-4 class="themeParagraph">\n\n            <p text-center (click)=\'showHideFilterTheme()\'>Thèmes <br>\n\n                <img class="icon-grey" src="assets/imgs/icons/arrow-down-grey.png" alt="NOUS-Ensemble" />\n\n                <img class="icon-green" src="assets/imgs/icons/arrow-down-green.png" alt="NOUS-Ensemble" />\n\n            </p>\n\n        </ion-col>\n\n    </ion-row>\n\n</ion-grid>\n\n<div class="div-left">\n\n</div>\n\n<div class="div-center">\n\n    <div [@flyInTopSlow]="searchBar" class="search-div " [class.negativeTop]="appGlobals.onNegativeTopSearch" [class.filterHere]="appGlobals.showSearchNews || appGlobals.showSearchAgenda"\n\n         *ngIf="appGlobals.appSearch">\n\n        <ion-grid>\n\n            <ion-row>\n\n                <ion-col col-2 text-center class="auto-margin">\n\n                    <ion-icon class="search-search search-icon" name="md-search"></ion-icon>\n\n                </ion-col>\n\n                <ion-col col-8>\n\n                    <ion-item text-center>\n\n                        <ion-input text-capitalize type="text" id="key" name="key" placeholder="Rechercher" [(ngModel)]="appGlobals.searchCriteria.key"\n\n                                   required></ion-input>\n\n                    </ion-item>\n\n                </ion-col>\n\n                <ion-col col-2 text-left class="auto-margin">\n\n                    <img class="close-search icon-heart material-icons" src="assets/imgs/icons/image3.png" (click)="showHideSearch()">\n\n                </ion-col>\n\n            </ion-row>\n\n\n\n            <ion-row text-center>\n\n\n\n                <ion-col text-center class="text-and">\n\n                    Et / ou\n\n                </ion-col>\n\n            </ion-row>\n\n            <ion-row>\n\n                <ion-col col-2></ion-col>\n\n                <ion-col text-center col-8>\n\n                    <ion-item class="item-input-white no-padding select-search-item select-not-ie">\n\n                        <ion-select class="select-white select-search" (ionCancel)="onCancel()" name="theme" submitText="Ok"\n\n                                    cancelText="Effacer" placeholder="Thème" [(ngModel)]="appGlobals.searchCriteria.theme"\n\n                                    required>\n\n                            <ion-option *ngFor="let category of categories" value={{category.id}}>{{category.name}}</ion-option>\n\n                        </ion-select>\n\n                    </ion-item>\n\n                    <ion-col class="item-input-white no-padding select-search-item select-ie">\n\n                        <select class="select-white select-search input-select-ie" name="theme" placeholder="Thème"\n\n                                [(ngModel)]="appGlobals.searchCriteria.theme" required>\n\n                            <option *ngFor="let category of categories" value={{category.id}}>{{category.name}}</option>\n\n                        </select>\n\n                    </ion-col>\n\n                </ion-col>\n\n                <ion-col col-2></ion-col>\n\n            </ion-row>\n\n            <ion-row>\n\n                <ion-col col-3 text-center>\n\n                    <div class="search-accounts" [class.activate]="appGlobals.searchCriteria.account" (click)="searchAccount()">\n\n                        <div class="icon"></div>\n\n                        <p> groupes/<br/>établissements </p>\n\n                    </div>\n\n                </ion-col>\n\n                <ion-col col-3 text-center>\n\n                    <div class="search-articles" [class.activate]="appGlobals.searchCriteria.article" (click)="searchArticle()">\n\n                        <div class="icon"></div>\n\n                        <p> articles </p>\n\n                    </div>\n\n                </ion-col>\n\n                <ion-col col-3 text-center>\n\n                    <div class="search-events" [class.activate]="appGlobals.searchCriteria.event" (click)="searchEvent()">\n\n                        <div class="icon"></div>\n\n                        <p> évènements </p>\n\n                    </div>\n\n                </ion-col>\n\n                <ion-col col-3 text-center>\n\n                    <div class="search-goodplans" [class.activate]="appGlobals.searchCriteria.goodplans" (click)="searchGoodPlans()">\n\n                        <div class="icon"></div>\n\n                        <p> bons plans </p>\n\n                    </div>\n\n                </ion-col>\n\n            </ion-row>\n\n        </ion-grid>\n\n\n\n        <button class="search-button button-big" ion-button color="primary" round (click)="searchAction()">Valider</button>\n\n    </div>\n\n    <!-- FILTER VILLE -->\n\n    <div [@flyInTopSlow]="villeFilter" class="showVilleFilter" *ngIf="appGlobals.villeFilter">\n\n        <ion-grid>\n\n            <ion-row>\n\n                <ion-col col-2 text-center class="auto-margin">\n\n                    <ion-icon class="search-search search-icon" name="md-search"></ion-icon>\n\n                </ion-col>\n\n                <ion-col col-8>\n\n                    <ion-item text-center>\n\n                        <ion-input text-capitalize type="text" id="key" name="key" placeholder="Rechercher" (input)="filterVilles($event)" ></ion-input>\n\n                    </ion-item>\n\n                </ion-col>\n\n                <ion-col col-2 text-left class="auto-margin">\n\n                    <img class="close-search icon-heart material-icons" src="assets/imgs/icons/image3.png" (click)="showHideFilterVille()">\n\n                </ion-col>\n\n            </ion-row>\n\n            <ion-row>\n\n                <ion-col col-12>\n\n                    <ion-list>\n\n                        <ion-item>\n\n                            <ion-label>Toutes les villes</ion-label>\n\n                            <ion-checkbox (click)="selectAllVilles(city)" [(ngModel)]="allCitiesChecked"></ion-checkbox>\n\n                        </ion-item>\n\n                    </ion-list>\n\n                </ion-col>\n\n                <ion-col class="AgendaTextTopDiv" col-12>\n\n                    <p>ou cochez les villes que vous souhaitez suivre</p>\n\n                </ion-col>\n\n                <ion-col col-12>\n\n                    <ion-list class="listScrolled">\n\n                        <ion-item *ngFor="let city of allCitiesFilter">\n\n                            <ion-label>{{city.name}} ({{city.code}})</ion-label>\n\n                            <ion-checkbox (click)="selectVilles(city)" [(ngModel)]="city.filtered"></ion-checkbox>\n\n                        </ion-item>\n\n                    </ion-list>\n\n                </ion-col>\n\n            </ion-row>\n\n        </ion-grid>\n\n\n\n        <button class="search-button button-big" ion-button color="primary" (click)="submitVilles()" round>Valider</button>\n\n    </div>\n\n    <!-- FILTER THEME -->\n\n    <div [@flyInTopSlow]="themeFilter" class="showThemeFilter" *ngIf="appGlobals.themeFilter">\n\n        <ion-grid>\n\n            <ion-row>\n\n                <ion-col col-2 text-center class="auto-margin">\n\n                    <ion-icon class="search-search search-icon" name="md-search"></ion-icon>\n\n                </ion-col>\n\n                <ion-col col-8>\n\n                    <ion-item text-center>\n\n                        <ion-input text-capitalize type="text" id="key" name="key" placeholder="Rechercher" (input)="filterThemes($event)"></ion-input>\n\n                    </ion-item>\n\n                </ion-col>\n\n                <ion-col col-2 text-left class="auto-margin">\n\n                    <img class="close-search icon-heart material-icons" src="assets/imgs/icons/image3.png" (click)="showHideFilterTheme()">\n\n                </ion-col>\n\n            </ion-row>\n\n            <ion-row>\n\n                <ion-col col-12>\n\n                    <ion-list>\n\n                        <ion-item>\n\n                            <ion-label>Sans filtre</ion-label>\n\n                            <ion-checkbox (click)="selectAllThemes()" [(ngModel)]="allThemesChecked"></ion-checkbox>\n\n                        </ion-item>\n\n                    </ion-list>\n\n                </ion-col>\n\n                <ion-col class="AgendaTextTopDiv" col-12>\n\n                    <p>ou cochez les thèmes que vous souhaitez suivre</p>\n\n                </ion-col>\n\n                <ion-col col-12>\n\n                    <ion-list class="listScrolled">\n\n                        <ion-item *ngFor="let theme of allThemesFilter">\n\n                            <ion-label>{{theme.name}}</ion-label>\n\n                            <ion-checkbox (click)="selectTheme(theme)" [(ngModel)]="theme.filtered"></ion-checkbox>\n\n                        </ion-item>\n\n                    </ion-list>\n\n                </ion-col>\n\n            </ion-row>\n\n        </ion-grid>\n\n\n\n        <button class="search-button button-big" ion-button color="primary" (click)="submitThemes()" round>Valider</button>\n\n    </div>\n\n\n\n    <div [@flyInTopSlow]="benevoleBar" [class.m-t-event]="appGlobals.onEventDetails" class="showBenevoleAgenda" *ngIf="appGlobals.showBenevoleAgenda">\n\n        <ion-grid>\n\n            <ion-row>\n\n                <ion-col col-2 text-right class="auto-margin">\n\n                    <ion-item text-center>\n\n                    </ion-item>\n\n                </ion-col>\n\n                <ion-col col-8>\n\n                    <ion-item text-center>\n\n                    </ion-item>\n\n                </ion-col>\n\n                <ion-col col-2 text-left class="auto-margin">\n\n                    <img class="close-search icon-heart material-icons" src="assets/imgs/icons/image3.png" (click)="showHideAgendaBenevole()">\n\n                </ion-col>\n\n                <ion-col col-12>\n\n                    <p>Souhaitez-vous être bénévole ?</p>\n\n                </ion-col>\n\n                <ion-col class="AgendaTextTopDiv" col-10>\n\n                    <p>L\'organisateur va vous contacter par email ou par téléphone. Veuillez svp renseigner votre\n\n                        numéro.</p>\n\n                </ion-col>\n\n                <ion-col class="AgendaTextTopDiv" text-center col-10>\n\n                    <ion-item>\n\n                        <ion-input name="phone" type="tel" id="phoneNumber"  disabled="{{isDisabled}}" [(ngModel)]="phoneNumber" placeholder="Numéro de téléphone*"> </ion-input>\n\n                    </ion-item>\n\n                    <p *ngIf="badPhone" class="badPhone">Le numéro n\'est pas valide. Exemple : 0999999999 ou 33999999999</p>\n\n                </ion-col>\n\n            </ion-row>\n\n        </ion-grid>\n\n\n\n        <button class="search-button button-big" ion-button color="primary" round (click)="volunteerContact()">Valider</button>\n\n    </div>\n\n\n\n    <div [@flyInTopSlow]="contactBar" [class.m-t-event]="appGlobals.onEventDetails" class="showBenevoleAgenda" *ngIf="appGlobals.showcontactBar">\n\n        <ion-grid>\n\n            <ion-row>\n\n                <ion-col col-2 text-right class="auto-margin">\n\n                    <ion-item text-center>\n\n                    </ion-item>\n\n                </ion-col>\n\n                <ion-col col-8>\n\n                    <ion-item text-center>\n\n                    </ion-item>\n\n                </ion-col>\n\n                <ion-col col-2 text-left class="auto-margin">\n\n                    <img class="close-search icon-heart material-icons" src="assets/imgs/icons/image3.png" (click)="showHideContactBar()">\n\n                </ion-col>\n\n                <ion-col col-12 text-left>\n\n                    <p>Prenez contact avec le commerçant/partenaire</p>\n\n                </ion-col>\n\n                <ion-col class="AgendaTextTopDiv" text-center col-10>\n\n                    <ion-item>\n\n                        <ion-textarea name="demande" type="text" [(ngModel)]=\'this.appGlobals.goodPlanMessage\' placeholder="Ma demande*"> </ion-textarea>\n\n                    </ion-item>\n\n                </ion-col>\n\n                <ion-col class="AgendaTextTopDiv" col-10>\n\n                    <p>Votre adresse email et votre message seront envoyés au commerçant/partenaire.</p>\n\n                </ion-col>\n\n            </ion-row>\n\n        </ion-grid>\n\n\n\n        <button class="search-button button-big" ion-button color="primary" round (click)="googPlanContact()">Valider</button>\n\n    </div>\n\n\n\n    <div [@flyInTopSlow]="proposeCarpooling" class="showBenevoleAgenda proposeCarpooling" [class.m-t-event]="appGlobals.onEventDetails" *ngIf="appGlobals.showproposeCarpooling">\n\n        <ion-grid class="padding-30" >\n\n            <ion-row>\n\n                <ion-col col-2 text-right class="auto-margin">\n\n                    <ion-item text-center>\n\n                    </ion-item>\n\n                </ion-col>\n\n                <ion-col col-8>\n\n                    <ion-item text-center>\n\n                    </ion-item>\n\n                </ion-col>\n\n                <ion-col col-2 text-right class="auto-margin">\n\n                    <img class="close-search icon-heart material-icons" src="assets/imgs/icons/image3.png" (click)="showHideProposeCarpooling()">\n\n                </ion-col>\n\n                <div class="carpooling-scroll">\n\n                <ion-col col-10>\n\n                    <p text-left>Nous cherchons des bonnes volontés pour le covoiturage, merci pour votre aide</p>\n\n                </ion-col>\n\n                <ion-col col-12>\n\n                    <ion-item>\n\n                        <ion-input (input)="carpoolRallyChange()" [(ngModel)]="rallyPoint" type=\'text\' placeholder=\'Point de ralliement souhaité\'>\n\n                        </ion-input>\n\n                    </ion-item>\n\n                    <p [hidden]="!requiredRallyPoint" class="color-red text-center">Champs ralliement obligatoire</p>\n\n                </ion-col>\n\n                <ion-col class="display-inline-flex" col-12>\n\n                    <ion-label>Heure de rendez-vous</ion-label>\n\n                    <ion-item text-left col-4>\n\n                        <ion-datetime (ionChange)="carpoolRdvHoursChange()" doneText="Ok" cancelText="Annuler" [(ngModel)]="rdvHours" placeholder="08:15" displayFormat="HH:mm"></ion-datetime>\n\n                    </ion-item>\n\n                </ion-col>\n\n                <p [hidden]="!requiredRdvHours" class="color-red text-center full-width">Champs horraire obligatoire</p>\n\n                <ion-col class="display-inline-flex" col-12>\n\n                    <ion-label>Nombre de places disponibles</ion-label>\n\n                    <ion-item text-left col-3>\n\n                        <ion-input (input)="carpoolSeatedChange()" [(ngModel)]="seatedFree" class="seatedFree" min="1" max="9" type=\'number\' placeholder=\'1\'></ion-input>\n\n                    </ion-item>\n\n                </ion-col>\n\n                <p [hidden]="!requiredSeatedFree" class="color-red text-center full-width">Champs places disponibles obligatoire</p>\n\n                <ion-col col-12>\n\n                    <ion-label class="margin-b-20">Renseignez votre numéro de téléphone <br> pour être contacté(e)</ion-label>\n\n                    <ion-item text-center>\n\n                        <ion-input (input)="carpoolPhoneChange()" type=\'tel\' [(ngModel)]="phoneNumber" placeholder=\'Numéro de téléphone*\'></ion-input>\n\n                    </ion-item>\n\n                    <p [hidden]="!requiredCarpool" class="badPhone margin-b-40 color-red text-center">Le numéro n\'est pas valide. Exemple : 0999999999 ou 33999999999</p>\n\n                </ion-col>\n\n                </div>\n\n            </ion-row>\n\n        </ion-grid>\n\n        <button class="search-button button-big" (click)="carpoolAdd()" ion-button color="primary" round>Valider</button>\n\n    </div>\n\n\n\n    <div [@flyInTopSlow]="needCarpooling" class="showVilleFilter showFilterNeedCarpooling" [class.m-t-event]="appGlobals.onEventDetails" *ngIf="appGlobals.showNeedCarpooling">\n\n        <ion-grid class="padding-30">\n\n            <ion-row>\n\n                <ion-col col-2 text-right class="auto-margin">\n\n                    <ion-item text-center>\n\n                    </ion-item>\n\n                </ion-col>\n\n                <ion-col col-8>\n\n                    <ion-item text-center>\n\n                    </ion-item>\n\n                </ion-col>\n\n                <ion-col col-2 text-right class="auto-margin">\n\n                    <img class="close-search icon-heart material-icons" src="assets/imgs/icons/image3.png" (click)="showHideNeedCarpooling(null)">\n\n                </ion-col>\n\n                <ion-col col-10>\n\n                    <p text-left>Vous cherchez quelqu\'un pour vous emmener en voiture ?<br>Sélectionnez le point de ralliement qui vous convient dans la liste ci-dessous.</p>\n\n                </ion-col>\n\n            </ion-row>\n\n            <ion-row class="card-item-divider">\n\n                <ion-col col-12>\n\n                    <ion-list radio-group class="listScrolled" [class.margin-b-0]="requiredCarpool">\n\n                        <ion-item class="no-padding" *ngFor="let carpool of appGlobals.currentEvent[\'needCarpool\']">\n\n                            <ion-label>{{carpool.relayPoint}}</ion-label>\n\n                            <ion-radio [disabled]="carpool.placeLeft == 0" (ionSelect)="carpoolChange(carpool.id)"></ion-radio>\n\n                            <ion-label float-right color="danger" *ngIf="carpool.placeLeft == 0">complet</ion-label>\n\n                            <ion-label float-right *ngIf="carpool.placeLeft != 0">{{carpool.placeLeft}}</ion-label>\n\n                        </ion-item>\n\n                    </ion-list>\n\n                    <p [hidden]="!requiredCarpool" class="margin-b-40 color-red">Champs de sélection obligatoire</p>\n\n                </ion-col>\n\n            </ion-row>\n\n        </ion-grid>\n\n        <button class="search-button button-big" (click)="carpoolAnswer()" ion-button color="primary" round>Valider</button>\n\n    </div>\n\n\n\n    <div [@flyInTopSlow]="answerCarpooling" class="showBenevoleAgenda showAnswerCarpooling" [class.m-t-event]="appGlobals.onEventDetails" *ngIf="appGlobals.showAnswerCarpooling">\n\n        <ion-grid class="padding-30">\n\n            <ion-row>\n\n                <ion-col col-2 text-right class="auto-margin">\n\n                    <ion-item text-center>\n\n                    </ion-item>\n\n                </ion-col>\n\n                <ion-col col-8>\n\n                    <ion-item text-center>\n\n                    </ion-item>\n\n                </ion-col>\n\n                <ion-col col-2 text-right class="auto-margin">\n\n                    <img class="close-search icon-heart material-icons" src="assets/imgs/icons/image3.png" (click)="showHideAnswerCarpooling()">\n\n                </ion-col>\n\n                <ion-col col-12>\n\n                    <p>Validez votre demande de covoiturage ?</p>\n\n                </ion-col>\n\n                <ion-col class="AgendaTextTopDiv" col-10>\n\n                    <p>Renseignez votre numéro de téléphone pour être contacté(e)</p>\n\n                </ion-col>\n\n                <ion-col class="AgendaTextTopDiv" text-center col-10>\n\n                    <ion-item>\n\n                        <ion-input name="phone" type="tel" id="phoneNumber" (input)="carpoolNumberChange()"  disabled="{{isDisabled}}" [(ngModel)]="phoneNumber" placeholder="Numéro de téléphone*"> </ion-input>\n\n                    </ion-item>\n\n                    <p [hidden]="!requiredCarpool" class="margin-b-40 color-red text-center badPhone">Le numéro n\'est pas valide. Exemple : 0999999999 ou 33999999999</p>\n\n                </ion-col>\n\n            </ion-row>\n\n        </ion-grid>\n\n\n\n        <button class="search-button button-big" ion-button color="primary" round (click)="addCarpoolAnswer()">Valider</button>\n\n    </div>\n\n\n\n    <div [@flyInTopSlow]="putAgendaBar" [class.m-t-event]="appGlobals.onEventDetails" class="putInAgenda" *ngIf="appGlobals.showPutAgenda">\n\n        <ion-grid>\n\n            <ion-row>\n\n                <ion-col col-2 text-right class="auto-margin">\n\n                    <ion-item text-center>\n\n                    </ion-item>\n\n                </ion-col>\n\n                <ion-col col-8>\n\n                    <ion-item text-center>\n\n                    </ion-item>\n\n                </ion-col>\n\n                <ion-col col-2 text-left class="auto-margin">\n\n                    <img class="close-search icon-heart material-icons" src="assets/imgs/icons/image3.png" (click)="showHidePutAgenda()">\n\n                </ion-col>\n\n                <ion-col class="auto-margin" col-10>\n\n                    <p>Voulez-vous le noter dans votre agenda ?</p>\n\n                </ion-col>\n\n            </ion-row>\n\n        </ion-grid>\n\n\n\n        <button class="search-button button-big" ion-button color="primary" round (click)="addAgenda()">Valider</button>\n\n    </div>\n\n\n\n    <div [@flyInTopSlow]="publicSearch" class="showPublicSearch" *ngIf="appGlobals.publicSearch">\n\n        <ion-grid>\n\n            <ion-row>\n\n                <ion-col text-center class="auto-margin">\n\n                    <h5 class="inline-block">Communautés publiques</h5>\n\n                    <img float-right class="close-search icon-heart material-icons mt-7" src="assets/imgs/icons/image3.png" (click)="showHidePublicSearch()">\n\n                </ion-col>\n\n            </ion-row>\n\n            <ion-row>\n\n                <ion-col col-2 text-center class="auto-margin">\n\n                    <ion-icon class="search-search search-icon" name="md-search"></ion-icon>\n\n                </ion-col>\n\n                <ion-col col-8>\n\n                    <ion-item text-center>\n\n                        <!-- <ion-searchbar placeholder="Rechercher" (ionInput)="filterCommunities($event)"></ion-searchbar> -->\n\n                        <ion-input text-capitalize type="text" id="key" name="key" placeholder="Rechercher" (input)="filterPublicCommunities($event)" ></ion-input>\n\n                    </ion-item>\n\n                </ion-col>\n\n                <ion-col col-2 text-left class="auto-margin">\n\n                </ion-col>\n\n            </ion-row>\n\n            <ion-row class="scrollRow">\n\n                <ion-col col-12>\n\n                    <ion-list class="listScrolled" no-lines >\n\n                        <ion-item *ngFor="let community of publicCommunities">\n\n                            <ion-label>{{community.name}}</ion-label>\n\n                            <ion-checkbox (ionChange)="publicChange(community.id, $event.checked)"></ion-checkbox>\n\n                        </ion-item>\n\n                    </ion-list>\n\n                </ion-col>\n\n            </ion-row>\n\n        </ion-grid>\n\n\n\n        <button [disabled]="!publicChecked || publicChecked.length === 0" class="search-button button-big" ion-button color="primary" round (click)="addPublicCommunities()" >Valider</button>\n\n    </div>\n\n    <div [@flyInTopSlow]="privateSearch" class="showPrivateSearch" *ngIf="appGlobals.privateSearch">\n\n        <ion-grid>\n\n            <ion-row>\n\n                <ion-col text-center class="auto-margin">\n\n                    <div class="private-title"><img  class="private-title-img" src="assets/imgs/icons/private.png" /> <h5 class="private-title-h">Communautés privées</h5>\n\n                        <img float-right class="close-search icon-heart material-icons inline-block-top mt-7" src="assets/imgs/icons/image3.png" (click)="showHidePrivateSearch()">\n\n                    </div>\n\n                </ion-col>\n\n            </ion-row>\n\n            <ion-row>\n\n                <ion-col col-2 text-center class="auto-margin">\n\n                    <ion-icon class="search-search search-icon" name="md-search"></ion-icon>\n\n                </ion-col>\n\n                <ion-col col-8>\n\n                    <ion-item text-center>\n\n                        <ion-input text-capitalize type="text" id="key" name="key" placeholder="Rechercher" (input)="filterPrivateCommunities($event)"  ></ion-input>\n\n                    </ion-item>\n\n                </ion-col>\n\n                <ion-col col-2 text-left class="auto-margin">\n\n                </ion-col>\n\n            </ion-row>\n\n            <ion-row class="scrollRow">\n\n                <ion-col col-12 text-center>\n\n                    <ion-list radio-group class="listScrolled" no-lines >\n\n                        <ion-item *ngFor="let community of privateCommunities" class="radio-item">\n\n                            <ion-label class="radio-label">{{community.name}}</ion-label>\n\n                            <ion-radio name="privateradio" (click)="privateChange(community.id,community.name, $event)"></ion-radio>\n\n                        </ion-item>\n\n                    </ion-list>\n\n                </ion-col>\n\n            </ion-row>\n\n        </ion-grid>\n\n\n\n        <button [disabled]="!privateChecked || privateChecked === 0" class="search-button button-big" ion-button color="primary" round (click)="addPrivateCommunities()" >Valider</button>\n\n    </div>\n\n\n\n</div>\n\n<div class="div-right">\n\n</div>\n\n<ion-nav [root]="rootPage"></ion-nav>\n\n<ion-footer class="show-footer" *ngIf="appGlobals.token && appGlobals.showFooter">\n\n    <div class="footer-content">\n\n        <div class="footer-item" (click)="MyTownHall()" [class.activated-footer]="appGlobals.currentPageid==\'MyTownHall\'">\n\n            <div class="footer-item-content">\n\n                <img *ngIf="appGlobals.currentPageid == \'MyTownHall\'" class="" id="dedicated-footer" src="assets/imgs/icons/dedicatedhover.png">\n\n                <img *ngIf="appGlobals.currentPageid != \'MyTownHall\'" id="dedicated-footer" src="assets/imgs/icons/dedicated.png">\n\n                <p> Page dédiée </p>\n\n            </div>\n\n        </div>\n\n        <div class="footer-item" (click)="news()" [class.activated-footer]="appGlobals.currentPageid==\'news\'">\n\n            <div class="footer-item-content">\n\n                <img *ngIf="appGlobals.currentPageid == \'news\'" class="" id="news-footer" src="assets/imgs/icons/newshover.png">\n\n                <img *ngIf="appGlobals.currentPageid != \'news\'" id="news-footer" src="assets/imgs/icons/news.png">\n\n                <p> A la Une </p>\n\n            </div>\n\n        </div>\n\n        <div class="footer-item" (click)="agenda()" [class.activated-footer]="appGlobals.currentPageid==\'agenda\'">\n\n            <div class="footer-item-content">\n\n                <img *ngIf="appGlobals.currentPageid == \'agenda\'" class="" id="agenda-footer" src="assets/imgs/icons/agendahover.png">\n\n                <img *ngIf="appGlobals.currentPageid != \'agenda\'" id="agenda-footer" src="assets/imgs/icons/agenda.png">\n\n                <p> Agenda </p>\n\n            </div>\n\n        </div>\n\n        <div class="footer-item " (click)="goodplans()" [class.activated-footer]="appGlobals.currentPageid==\'goodplans\'">\n\n            <div class="footer-item-content">\n\n                <img *ngIf="appGlobals.currentPageid == \'goodplans\'" class="" id="plans-footer" src="assets/imgs/icons/planshover.png">\n\n                <img *ngIf="appGlobals.currentPageid != \'goodplans\'" id="plans-footer" src="assets/imgs/icons/plans.png">\n\n                <p> Bons Plans </p>\n\n            </div>\n\n        </div>\n\n        <div class="footer-item " (click)="mySpace()" [class.activated-footer]="appGlobals.currentPageid ==\'mySpace\'">\n\n            <div class="footer-item-content">\n\n                <img *ngIf="appGlobals.currentPageid == \'mySpace\'" class="" id="space-footer" src="assets/imgs/icons/spacehover.png">\n\n                <img *ngIf="appGlobals.currentPageid != \'mySpace\'" id="space-footer" src="assets/imgs/icons/space.png">\n\n                <div class="number-notifications-mobile" *ngIf="appGlobals.nbrNotification != 0"><span>{{appGlobals.nbrNotification}}</span></div>\n\n                <p> Mon Espace </p>\n\n\n\n            </div>\n\n        </div>\n\n    </div>\n\n</ion-footer>\n\n<div class="overlay" *ngIf="appGlobals.appSearch || appGlobals.showBenevoleAgenda || appGlobals.showBenevoleWarning || appGlobals.showPutAgenda || appGlobals.themeFilter|| appGlobals.villeFilter || appGlobals.publicSearch || appGlobals.privateSearch || appGlobals.showproposeCarpooling || appGlobals.showNeedCarpooling || appGlobals.showAnswerCarpooling || appGlobals.showcontactBar"></div>\n\n\n\n\n\n<ion-datetime disabled #datePicker cancelText=\'Annuler\' max="2038" min="{{startDate}}"  doneText=\'Valider\' displayFormat="YYYY-MM-DD" pickerFormat="DD/MM/YYYY" (ionCancel)="resetDatePicker()" (ionChange)="submitDatePicker()" [(ngModel)]="startDate"></ion-datetime>\n\n \n\n'/*ion-inline-end:"D:\celaneo\mobile\new-mobile\test\src\app\app.html"*/,
            animations: [
                //For the logo
                Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["trigger"])('flyInTopSlow', [
                    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["state"])('in', Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["style"])({
                        transform: 'translate3d(0,0,0)'
                    })),
                    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["transition"])('void => *', [
                        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["style"])({ transform: 'translate3d(0,-500px,0' }),
                        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["animate"])('1000ms ease-in-out')
                    ])
                ])
            ]
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_3_ionic_angular__["x" /* Platform */],
            __WEBPACK_IMPORTED_MODULE_1__ionic_native_status_bar__["a" /* StatusBar */],
            __WEBPACK_IMPORTED_MODULE_2__ionic_native_splash_screen__["a" /* SplashScreen */],
            __WEBPACK_IMPORTED_MODULE_3_ionic_angular__["s" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_3_ionic_angular__["r" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_4__providers_globals_globals__["a" /* GlobalsProvider */],
            __WEBPACK_IMPORTED_MODULE_3_ionic_angular__["j" /* Events */],
            __WEBPACK_IMPORTED_MODULE_3_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_11__providers_community_community__["a" /* CommunityProvider */],
            __WEBPACK_IMPORTED_MODULE_23__providers_eventsrest_eventsrest__["a" /* EventsrestProvider */],
            __WEBPACK_IMPORTED_MODULE_29__providers_goodplanrest_goodplanrest__["a" /* GoodplanrestProvider */],
            __WEBPACK_IMPORTED_MODULE_15__ionic_native_push__["a" /* Push */],
            __WEBPACK_IMPORTED_MODULE_30__ionic_native_fcm__["a" /* FCM */],
            __WEBPACK_IMPORTED_MODULE_31__ionic_native_deeplinks__["a" /* Deeplinks */],
            __WEBPACK_IMPORTED_MODULE_18__ionic_native_badge__["a" /* Badge */],
            __WEBPACK_IMPORTED_MODULE_26__ionic_native_calendar__["a" /* Calendar */],
            __WEBPACK_IMPORTED_MODULE_17__ionic_native_market__["a" /* Market */],
            __WEBPACK_IMPORTED_MODULE_9__providers_user_user__["a" /* UserProvider */],
            __WEBPACK_IMPORTED_MODULE_10__providers_app_app__["a" /* AppProvider */],
            __WEBPACK_IMPORTED_MODULE_22__ionic_native_google_analytics__["a" /* GoogleAnalytics */],
            __WEBPACK_IMPORTED_MODULE_20__ionic_native_keyboard__["a" /* Keyboard */],
            __WEBPACK_IMPORTED_MODULE_0__angular_core__["Renderer2"]])
    ], MyApp);
    return MyApp;
}());

//# sourceMappingURL=app.component.js.map

/***/ }),

/***/ 998:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return InterceptorProvider; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_http__ = __webpack_require__(25);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_rxjs_add_operator_map__ = __webpack_require__(27);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_rxjs_add_operator_map___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_rxjs_add_operator_map__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__app_config__ = __webpack_require__(28);
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




/*
  Generated class for the InterceptorProvider provider.

  See https://angular.io/guide/dependency-injection for more info on providers
  and Angular DI.
*/
var InterceptorProvider = /** @class */ (function (_super) {
    __extends(InterceptorProvider, _super);
    function InterceptorProvider(connectionBackend, requestOptions) {
        return _super.call(this, connectionBackend, requestOptions) || this;
    }
    InterceptorProvider.prototype.get = function (url, options) {
        return _super.prototype.get.call(this, url, this.getRequestOptionArgs(options));
    };
    InterceptorProvider.prototype.post = function (url, body, options) {
        return _super.prototype.post.call(this, url, body, this.getRequestOptionArgs(options));
    };
    InterceptorProvider.prototype.put = function (url, body, options) {
        return _super.prototype.put.call(this, url, body, this.getRequestOptionArgs(options));
    };
    InterceptorProvider.prototype.getRequestOptionArgs = function (options) {
        if (options == null) {
            options = new __WEBPACK_IMPORTED_MODULE_1__angular_http__["e" /* RequestOptions */]();
        }
        if (options.headers == null) {
            options.headers = new __WEBPACK_IMPORTED_MODULE_1__angular_http__["b" /* Headers */]();
        }
        // add API Version / APP Version to Header
        options.headers.append('Api-Version', __WEBPACK_IMPORTED_MODULE_3__app_config__["a" /* API_VERSION */]);
        options.headers.append('App-Version', __WEBPACK_IMPORTED_MODULE_3__app_config__["c" /* APP_VERSION */]);
        if (localStorage.getItem("token") !== null) {
            options.headers.append('Authorization', 'NousEnsembleToken ' + localStorage.getItem("token"));
        }
        return options;
    };
    InterceptorProvider = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Injectable"])(),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__angular_http__["a" /* ConnectionBackend */], __WEBPACK_IMPORTED_MODULE_1__angular_http__["e" /* RequestOptions */]])
    ], InterceptorProvider);
    return InterceptorProvider;
}(__WEBPACK_IMPORTED_MODULE_1__angular_http__["c" /* Http */]));

//# sourceMappingURL=interceptor.js.map

/***/ }),

/***/ 999:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return Nl2brModule; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__nl2br__ = __webpack_require__(1000);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};


var Nl2brModule = /** @class */ (function () {
    function Nl2brModule() {
    }
    Nl2brModule = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["NgModule"])({
            declarations: [
                __WEBPACK_IMPORTED_MODULE_1__nl2br__["a" /* nl2br */],
            ],
            imports: [],
            exports: [
                __WEBPACK_IMPORTED_MODULE_1__nl2br__["a" /* nl2br */]
            ]
        })
    ], Nl2brModule);
    return Nl2brModule;
}());

//# sourceMappingURL=nl2br.module.js.map

/***/ })

},[568]);
//# sourceMappingURL=main.js.map