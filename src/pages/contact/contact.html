<!--
  Generated template for the ContactPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header class="mobile-header" *ngIf="appGlobals.token">
    <ion-grid>
        <ion-row>
            <ion-col col-2 text-left>
                <div class="item">
                    <ion-icon name="ios-arrow-back" (click)="goBack()"></ion-icon>
                </div>
            </ion-col>
            <ion-col col-8 text-center class="page-title">
                <ion-title> Signaler un problème </ion-title>
            </ion-col>
            <ion-col col-2>

            </ion-col>
        </ion-row>
    </ion-grid>
</ion-header>


<ion-content>
    <div class="div-left">
        <div text-right class="back"><img src="assets/imgs/icons/1.png" (click)="goBack()"></div>
    </div>
    <!--bloc central -->
    <div class="div-center">
        <ion-grid>

            <ion-row>

                <ion-col text-center>

                    <form (ngSubmit)="contact(contactForm.invalid)" #contactForm="ngForm">
                        <ion-row>

                            <ion-col col-12 text-left class="bordered">
                                <div text-center>
                                    Vous pouvez envoyer un email à votre mairie. Celui-ci sera traité au même titre
                                    qu'un email classique
                                </div>
                            </ion-col>

                            <ion-col col-12 text-center>
                                <ion-label text-left class="margin-bottom-ie" color="light-black" stacked>Ville</ion-label>
                                <ion-item class="item-input-white no-padding select-not-ie" [class.formError]="city.invalid && (city.dirty || submited || city.touched)">
                                    <ion-select class="select-white" name="city" [(ngModel)]="contactObj.city" #city="ngModel"
                                        placeholder="Ville" required>
                                        <ion-option value="{{currentUser.primary_city.id}}">{{currentUser.primary_city.name}}</ion-option>
                                        <ion-option value="{{city.id}}" *ngFor="let city of currentUser.other_cities">{{city.name}}</ion-option>
                                    </ion-select>
                                </ion-item>
                                <ion-col class="item-input-white no-padding select-ie" [class.formError]="city.invalid && (city.dirty || submited || city.touched)">
                                    <select class="select-white input-select-ie" name="city" [(ngModel)]="contactObj.city"
                                        #city="ngModel" placeholder="Ville" required>
                                        <option value="{{currentUser.primary_city.id}}">{{currentUser.primary_city.name}}</option>
                                        <option value="{{city.id}}" *ngFor="let city of currentUser.other_cities">{{city.name}}</option>
                                    </select>
                                </ion-col>
                                <div class="error-msg" *ngIf="city.invalid && (city.dirty || submited || city.touched)">
                                    <span class="error">Champs ville obligatoire</span>
                                </div>
                            </ion-col>
                            <ion-col col-12 text-center>
                                <ion-label text-left color="light-black" stacked>Objet*</ion-label>
                                <ion-item class="item-input-white" [class.formError]="object.invalid && (object.dirty || submited || object.touched)">
                                    <ion-input (focus)="checkFocus($event)" (change)="appGlobals.capitalizeData($event.target.value, 'object')"
                                        #object="ngModel" type="text" name="object" [(ngModel)]="contactObj.object"
                                        placeholder="Objet" required></ion-input>
                                </ion-item>
                                <div class="error-msg" *ngIf="object.invalid && (object.dirty || submited || object.touched)">
                                    <span class="error">Champs objet obligatoire.</span>
                                </div>
                            </ion-col>
                            <ion-col col-12 text-center>
                                <ion-label text-left color="light-black" stacked>Votre message</ion-label>
                                <ion-item class="item-input-white" [class.formError]="description.invalid && (description.dirty || submited || description.touched)">
                                    <ion-textarea (focus)="checkFocus($event)" (change)="appGlobals.capitalizeData($event.target.value, 'description')"
                                        #description="ngModel" name="description" [(ngModel)]="contactObj.description"
                                        placeholder="Votre message" required></ion-textarea>
                                </ion-item>
                                <div class="error-msg" *ngIf="description.invalid && (description.dirty || submited || description.touched)">
                                    <span class="error">Champs message obligatoire.</span>
                                </div>
                            </ion-col>
                            <ion-col col-12 text-center>
                                <button ion-button color="primary" type="submit" round>Envoyer</button>
                            </ion-col>
                        </ion-row>
                    </form>

                </ion-col>

            </ion-row>

        </ion-grid>

    </div>
    <!-- fin bloc central -->
    <div class="div-right" text-center>
    </div>
</ion-content>