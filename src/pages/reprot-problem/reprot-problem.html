<!--
  Generated template for the ContactPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header class="mobile-header" *ngIf="appGlobals.token">
    <ion-grid>
        <ion-row>
            <ion-col col-2 text-left>
                <div class="item">
                    <ion-icon name="ios-arrow-back" (click)="goBack()"></ion-icon>
                </div>
            </ion-col>
            <ion-col col-8 text-center class="page-title">
                <ion-title>{{community.name}}</ion-title>
            </ion-col>
            <ion-col col-2 text-right>
                <ion-avatar class="blason">
                    <img src="{{community.img_url}}">
                </ion-avatar>

            </ion-col>
        </ion-row>
    </ion-grid>
</ion-header>

<ion-content>
    <div class="div-left">
        <div text-right class="back"><img src="assets/imgs/icons/1.png" (click)="goBack()"></div>
    </div>
    <!--bloc central -->
    <div class="div-center">
        <ion-grid>

            <ion-row>

                <ion-col text-center>

                    <form (ngSubmit)="contact(contactForm.invalid)" #contactForm="ngForm">
                        <ion-row>

                            <ion-col col-12 text-left class="bordered">
                                <div text-center>
                                    Vous pouvez envoyer un email à votre communauté. Celui-ci sera traité au même titre
                                    qu'un email classique
                                </div>
                            </ion-col>

                            <ion-col col-12 text-center>
                                <ion-label text-left color="light-black" stacked>De quoi s’agit-il ?*</ion-label>
                                <ion-item class="item-input-white no-padding select-not-ie" [class.formError]="object.invalid && (object.dirty || submited || object.touched)">
                                    <ion-select class="select-white" name="object" [(ngModel)]="contactObj.object"
                                        #object="ngModel" placeholder="Cliquez" required>

                                        <ion-option *ngFor="let object of objects" [value]="object.id">{{object.objet}}</ion-option>


                                    </ion-select>
                                </ion-item>
                                <ion-col class="item-input-white no-padding select-ie" [class.formError]="object.invalid && (object.dirty || submited || object.touched)">
                                    <select class="select-white input-select-ie" name="object" [(ngModel)]="contactObj.object"
                                        #object="ngModel" placeholder="objet" required>
                                        <option></option>
                                        <option *ngFor="let object of objects" [ngValue]="object.id">{{object.objet}}</option>

                                    </select>
                                </ion-col>
                                <div class="error-msg" *ngIf="object.invalid && (object.dirty || submited || object.touched)">
                                    <span class="error">Champs objet obligatoire.</span>
                                </div>
                                <ion-row>
                                    <div *ngIf="contactObj.photo; else elseBlock" text-center>
                                        <img src="{{contactObj.photo}}" *ngIf="contactObj.photo" (click)="presentActionSheet()">
                                        <ion-icon name="trash" class="icon-delete" (click)="deletePhoto();" *ngIf="contactObj.photo"></ion-icon>
                                    </div>
                                </ion-row>
                                <ng-template #elseBlock>
                                    <ion-col col-12 text-center> <img class="button-img" src="assets/imgs/icons/boutton-white.png"
                                            (click)="presentActionSheet()"></ion-col>
                                </ng-template>
                                <div *ngIf="contactObj.document" style="position: relative;">
                                    <img class="button-img" src="assets/imgs/icons/doc-icon.png">
                                    <ion-icon name="trash"
                                              class="icon-delete delete-icon"
                                              (click)="deleteDocument();"
                                              *ngIf="contactObj.document">
                                    </ion-icon>
                                </div>
                                <div>

                                    <input type="file" id="fileInput" (change)="onFileChange($event)" >

                                </div>

                            </ion-col>
                            <ion-col col-12 text-center>
                                <ion-label text-left color="light-black" stacked>Adresse du signalement ou de la suggestion </ion-label>
                                <ion-item class="item-input-white">
                                    <ion-textarea (change)="appGlobals.capitalizeData($event.target.value, 'location')"
                                        (focus)="checkFocus($event)" #description="ngModel" name="location" [(ngModel)]="contactObj.location"

                                        placeholder="indiquez le lieu" required></ion-textarea>

                                </ion-item>
                            </ion-col>
                            <ion-col col-12 text-center>
                                <ion-label text-left color="light-black" stacked>Votre message</ion-label>
                                <ion-item class="item-input-white" [class.formError]="description.invalid && (description.dirty || submited || description.touched)">
                                    <ion-textarea (focus)="checkFocus($event)" (change)="appGlobals.capitalizeData($event.target.value, 'description')"
                                        (focus)="checkFocus($event)" #description="ngModel" name="description"
                                        [(ngModel)]="contactObj.description" placeholder="Votre message" required></ion-textarea>
                                </ion-item>
                                <div class="error-msg" *ngIf="description.invalid && (description.dirty || submited || description.touched)">
                                    <span class="error">Champs message obligatoire.</span>
                                </div>
                            </ion-col>
                            <ion-col col-12 text-center>
                                <button ion-button color="primary" type="submit" round>Envoyer</button>
                            </ion-col>
                        </ion-row>
                    </form>

                </ion-col>

            </ion-row>

        </ion-grid>

    </div>
    <!-- fin bloc central -->
    <div class="div-right" text-center>
    </div>
</ion-content>